<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ğŸ˜ - è”é‚¦ - åœ¨å¤šä¸ªé›†ç¾¤ä¸Šè¿è¡Œä¸€ä¸ªåº”ç”¨ on Hugo ä¸»é¢˜çš„ Learn æ–‡æ¡£</title>
    <link>https://lijun.in/tasks/federation/</link>
    <description>Recent content in ğŸ˜ - è”é‚¦ - åœ¨å¤šä¸ªé›†ç¾¤ä¸Šè¿è¡Œä¸€ä¸ªåº”ç”¨ on Hugo ä¸»é¢˜çš„ Learn æ–‡æ¡£</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    
	<atom:link href="https://lijun.in/tasks/federation/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>å°† CoreDNS è®¾ç½®ä¸ºè”é‚¦é›†ç¾¤çš„ DNS æä¾›è€…</title>
      <link>https://lijun.in/tasks/federation/set-up-coredns-provider-federation/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/federation/set-up-coredns-provider-federation/</guid>
      <description>. deprecationfilewarning &amp;gt;}} . include &amp;ldquo;federation-deprecation-warning-note.md&amp;rdquo; &amp;gt;}} . /deprecationfilewarning &amp;gt;}}
æ­¤é¡µé¢æ˜¾ç¤ºå¦‚ä½•é…ç½®å’Œéƒ¨ç½² CoreDNSï¼Œå°†å…¶ç”¨ä½œè”é‚¦é›†ç¾¤çš„ DNS æä¾›è€…
. heading &amp;ldquo;objectives&amp;rdquo; %}}  é…ç½®å’Œéƒ¨ç½² CoreDNS æœåŠ¡å™¨ ä½¿ç”¨ CoreDNS ä½œä¸º dns æä¾›è€…è®¾ç½®è”é‚¦ åœ¨ nameserver æŸ¥æ‰¾é“¾ä¸­è®¾ç½® CoreDNS æœåŠ¡å™¨  . heading &amp;ldquo;prerequisites&amp;rdquo; %}}  ä½ éœ€è¦æœ‰ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Kubernetes é›†ç¾¤ï¼ˆä½œä¸ºä¸»æœºé›†ç¾¤å¼•ç”¨ï¼‰ã€‚è¯·å‚é˜…å…¥é—¨æŒ‡å—ï¼Œäº†è§£å¹³å°çš„å®‰è£…è¯´æ˜ã€‚ å¿…é¡»åœ¨è”é‚¦çš„é›†ç¾¤æˆå‘˜ä¸­æ”¯æŒ LoadBalancer æœåŠ¡ï¼Œç”¨æ¥æ”¯æŒè·¨è”é‚¦é›†ç¾¤çš„ CoreDNS æœåŠ¡å‘ç°ã€‚  éƒ¨ç½² CoreDNS å’Œ etcd å›¾è¡¨ CoreDNS å¯ä»¥éƒ¨ç½²åœ¨å„ç§é…ç½®ä¸­ã€‚ä¸‹é¢è§£é‡Šçš„æ˜¯ä¸€ä¸ªå‚è€ƒï¼Œå¯ä»¥æ ¹æ®å¹³å°å’Œè”é‚¦é›†ç¾¤çš„éœ€è¦è¿›è¡Œè°ƒæ•´ã€‚
ä¸ºäº†éƒ¨ç½² CoreDNSï¼Œæˆ‘ä»¬å°†åˆ©ç”¨å›¾è¡¨ã€‚ CoreDNS å°†éƒ¨ç½² etcd ä½œä¸ºåç«¯ï¼Œå¹¶ä¸”åº”è¯¥é¢„å…ˆå®‰è£…ã€‚etcd ä¹Ÿå¯ä»¥ä½¿ç”¨å›¾è¡¨è¿›è¡Œéƒ¨ç½²ã€‚ä¸‹é¢æ˜¾ç¤ºäº†éƒ¨ç½² etcd çš„è¯´æ˜ã€‚
helm install --namespace my-namespace --name etcd-operator stable/etcd-operator helm upgrade --namespace my-namespace --set cluster.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨è”åˆæœåŠ¡æ¥å®ç°è·¨é›†ç¾¤çš„æœåŠ¡å‘ç°</title>
      <link>https://lijun.in/tasks/federation/federation-service-discovery/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/federation/federation-service-discovery/</guid>
      <description>. deprecationfilewarning &amp;gt;}} . include &amp;ldquo;federation-deprecation-warning-note.md&amp;rdquo; &amp;gt;}} . /deprecationfilewarning &amp;gt;}}
æœ¬æŒ‡å—è¯´æ˜äº†å¦‚ä½•ä½¿ç”¨ Kubernetes è”åˆæœåŠ¡è·¨å¤šä¸ª Kubernetes é›†ç¾¤éƒ¨ç½²é€šç”¨æœåŠ¡ã€‚è¿™æ ·å¯ä»¥è½»æ¾å®ç° Kubernetes åº”ç”¨ç¨‹åºçš„è·¨é›†ç¾¤æœåŠ¡å‘ç°å’Œå¯ç”¨åŒºå®¹é”™ã€‚
è”åˆæœåŠ¡çš„åˆ›å»ºä¸ä¼ ç»ŸæœåŠ¡å‡ ä¹ç›¸åŒ Kubernetes Services å³é€šè¿‡ API è°ƒç”¨æ¥æŒ‡å®šæ‰€éœ€çš„æœåŠ¡å±æ€§ã€‚å¯¹äºè”åˆæœåŠ¡ï¼Œæ­¤ API è°ƒç”¨å®šå‘åˆ°è”åˆèº«ä»½éªŒè¯ API æ¥å…¥ç‚¹ï¼Œè€Œä¸æ˜¯ Kubernetes é›†ç¾¤ API æ¥å…¥ç‚¹ã€‚è”åˆæœåŠ¡çš„ API ä¸ä¼ ç»Ÿ Kubernetes æœåŠ¡çš„ API æ˜¯ 100% å…¼å®¹çš„ã€‚
åˆ›å»ºåï¼Œè”åˆæœåŠ¡ä¼šè‡ªåŠ¨:
 åœ¨åŸºç¡€é›†ç¾¤è”åˆçš„æ¯ä¸ªé›†ç¾¤ä¸­åˆ›å»ºåŒ¹é…çš„ Kubernetes æœåŠ¡, ç›‘è§†é‚£äº›æœåŠ¡ &amp;ldquo;åˆ†ç‰‡&amp;rdquo;(åŠå…¶é©»ç•™çš„é›†ç¾¤)çš„è¿è¡ŒçŠ¶å†µ,ä»¥åŠ åœ¨å…¬å…± DNS æä¾›å•†(ä¾‹å¦‚ Google Cloud DNS æˆ– AWS Route 53)ä¸­ç®¡ç†ä¸€ç»„ DNS è®°å½•,å³ä½¿åœ¨é›†ç¾¤å¯ç”¨åŒºåŸŸä¸­æ–­çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½ç¡®ä¿æ‚¨è”åˆæœåŠ¡çš„å®¢æˆ·ç«¯å§‹ç»ˆå¯ä»¥æ— ç¼åœ°å®šä½åˆé€‚çš„å¥åº·æœåŠ¡æ¥å…¥ç‚¹ã€‚  å¦‚æœå­˜åœ¨å¥åº·çš„åˆ†ç‰‡ï¼Œè”åˆ Kubernetes é›†ç¾¤(å³ Pods )ä¸­çš„å®¢æˆ·ç«¯å°†è‡ªåŠ¨åœ¨å…¶ä¸­æ‰¾åˆ°è”åˆæœåŠ¡çš„æœ¬åœ°åˆ†ç‰‡é›†ç¾¤æˆ–è€…é›†ç¾¤ä¸­æœ€æ¥è¿‘çš„å¥åº·åˆ†ç‰‡;å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨æœ€æ¥è¿‘çš„å…¶ä»–é›†ç¾¤çš„å¥åº·åˆ†ç‰‡ã€‚
. toc &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} .</description>
    </item>
    
    <item>
      <title>åœ¨è”é‚¦ä¸­è®¾ç½®æ”¾ç½®ç­–ç•¥</title>
      <link>https://lijun.in/tasks/federation/set-up-placement-policies-federation/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/federation/set-up-placement-policies-federation/</guid>
      <description>. deprecationfilewarning &amp;gt;}} . include &amp;ldquo;federation-deprecation-warning-note.md&amp;rdquo; &amp;gt;}} . /deprecationfilewarning &amp;gt;}}
æ­¤é¡µé¢æ˜¾ç¤ºå¦‚ä½•ä½¿ç”¨å¤–éƒ¨ç­–ç•¥å¼•æ“å¯¹è”é‚¦èµ„æºå¼ºåˆ¶æ‰§è¡ŒåŸºäºç­–ç•¥çš„æ”¾ç½®å†³ç­–ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} æ‚¨éœ€è¦ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Kubernetes é›†ç¾¤(å®ƒè¢«å¼•ç”¨ä¸ºä¸»æœºé›†ç¾¤)ã€‚æœ‰å…³æ‚¨çš„å¹³å°çš„å®‰è£…è¯´æ˜ï¼Œè¯·å‚é˜…å…¥é—¨æŒ‡å—ã€‚
Deploying è”é‚¦å¹¶é…ç½®å¤–éƒ¨ç­–ç•¥å¼•æ“ å¯ä»¥ä½¿ç”¨ kubefed init éƒ¨ç½²è”é‚¦æ§åˆ¶å¹³é¢ã€‚
Deploying è”é‚¦æ§åˆ¶å¹³é¢ä¹‹åï¼Œå¿…é¡»åœ¨è”é‚¦ API æœåŠ¡å™¨ä¸­é…ç½®ä¸€ä¸ªå‡†å…¥æ§åˆ¶å™¨ï¼Œè¯¥æ§åˆ¶å™¨å¼ºåˆ¶æ‰§è¡Œä»å¤–éƒ¨ç­–ç•¥å¼•æ“æ¥æ”¶åˆ°çš„æ”¾ç½®å†³ç­–ã€‚
kubectl create -f scheduling-policy-admission.yaml  ä¸‹å›¾æ˜¯å‡†å…¥æ§åˆ¶å™¨çš„ ConfigMap ç¤ºä¾‹ï¼š
. codenew file=&amp;quot;federation/scheduling-policy-admission.yaml&amp;rdquo; &amp;gt;}}
ConfigMap åŒ…å«ä¸‰ä¸ªæ–‡ä»¶ï¼š
 config.yml æŒ‡å®š è°ƒåº¦ç­–ç•¥ å‡†å…¥æ§åˆ¶å™¨é…ç½®æ–‡ä»¶çš„ä½ç½®ã€‚ scheduling-policy-config.yml æŒ‡å®šä¸å¤–éƒ¨ç­–ç•¥å¼•æ“è”ç³»æ‰€éœ€çš„ kubeconfig æ–‡ä»¶çš„ä½ç½®ã€‚ è¯¥æ–‡ä»¶è¿˜å¯ä»¥åŒ…å«ä¸€ä¸ª retryBackoff å€¼ï¼Œè¯¥å€¼ä»¥æ¯«ç§’ä¸ºå•ä½æ§åˆ¶åˆå§‹é‡è¯• backoff å»¶è¿Ÿã€‚ opa-kubeconfig æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ kubeconfigï¼ŒåŒ…å«è”ç³»å¤–éƒ¨ç­–ç•¥å¼•æ“æ‰€éœ€çš„ URL å’Œå‡­è¯ã€‚  ç¼–è¾‘è”é‚¦ API æœåŠ¡å™¨éƒ¨ç½²ä»¥å¯ç”¨ SchedulingPolicy å‡†å…¥æ§åˆ¶å™¨ã€‚
kubectl -n federation-system edit deployment federation-apiserver  æ›´æ–° Federation API æœåŠ¡å™¨å‘½ä»¤è¡Œå‚æ•°ä»¥å¯ç”¨å‡†å…¥æ§åˆ¶å™¨ï¼Œ å¹¶å°† ConfigMap æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚å¦‚æœå­˜åœ¨ç°æœ‰çš„ -enable-admissionplugins å‚æ•°ï¼Œåˆ™è¿½åŠ  SchedulingPolicy è€Œä¸æ˜¯æ·»åŠ å¦ä¸€è¡Œã€‚</description>
    </item>
    
  </channel>
</rss>