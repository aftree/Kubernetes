<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ğŸ˜ - TLS on Hugo ä¸»é¢˜çš„ Learn æ–‡æ¡£</title>
    <link>https://lijun.in/tasks/tls/</link>
    <description>Recent content in ğŸ˜ - TLS on Hugo ä¸»é¢˜çš„ Learn æ–‡æ¡£</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    
	<atom:link href="https://lijun.in/tasks/tls/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>ç®¡ç†é›†ç¾¤ä¸­çš„ TLS è®¤è¯</title>
      <link>https://lijun.in/tasks/tls/managing-tls-in-a-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/tls/managing-tls-in-a-cluster/</guid>
      <description>Kubernetesæä¾›ä¸€ä¸ª certificates.k8s.io APIï¼Œå¯è®©æ‚¨é…ç½® ç”±æ‚¨æ§åˆ¶çš„è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ç­¾åçš„TLSè¯ä¹¦ã€‚ æ‚¨çš„å·¥ä½œè´Ÿè½½å¯ä»¥ä½¿ç”¨è¿™äº›CAå’Œè¯ä¹¦æ¥å»ºç«‹ä¿¡ä»»ã€‚
certificates.k8s.io APIä½¿ç”¨çš„åè®®ç±»ä¼¼äºACME è‰ç¨¿ã€‚
. note &amp;gt;}}
ä½¿ç”¨certificates.k8s.io APIåˆ›å»ºçš„è¯ä¹¦ç”± æŒ‡å®š CA é¢å‘ã€‚ å°†é›†ç¾¤é…ç½®ä¸ºä½¿ç”¨é›†ç¾¤æ ¹ç›®å½• CA å¯ä»¥è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä½†æ˜¯æ‚¨æ°¸è¿œä¸è¦ä¾èµ–å®ƒã€‚ä¸è¦ä»¥ä¸º è¿™äº›è¯ä¹¦å°†é’ˆå¯¹ç¾¤æ ¹ç›®å½• CA è¿›è¡ŒéªŒè¯ã€‚ . /note &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
é›†ç¾¤ä¸­çš„ TLS ä¿¡ä»» è®© Pod ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºä¿¡ä»»é›†ç¾¤æ ¹ CA é€šå¸¸éœ€è¦ä¸€äº›é¢å¤–çš„åº”ç”¨ç¨‹åºé…ç½®ã€‚æ‚¨å°†éœ€è¦å°† CA è¯ä¹¦åŒ…æ·»åŠ åˆ° TLS å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨ä¿¡ä»»çš„ CA è¯ä¹¦åˆ—è¡¨ä¸­ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ golang TLS é…ç½®é€šè¿‡è§£æè¯ä¹¦é“¾å¹¶å°†è§£æçš„è¯ä¹¦æ·»åŠ åˆ° tls.Config ç»“æ„ä¸­çš„ RootCAs å­—æ®µä¸­ã€‚
CA è¯ä¹¦æ†ç»‘åŒ…å°†ä½¿ç”¨é»˜è®¤æœåŠ¡è´¦æˆ·è‡ªåŠ¨åŠ è½½åˆ° pod ä¸­ï¼Œè·¯å¾„ä¸º /var/run/secrets/kubernetes.io/serviceaccount/ca.crtã€‚å¦‚æœæ‚¨æ²¡æœ‰ä½¿ç”¨é»˜è®¤æœåŠ¡è´¦æˆ·ï¼Œè¯·è¯·æ±‚é›†ç¾¤ç®¡ç†å‘˜æ„å»ºåŒ…å«æ‚¨æœ‰æƒè®¿é—®ä½¿ç”¨çš„è¯ä¹¦åŒ…çš„ configmapã€‚
è¯·æ±‚è®¤è¯ ä»¥ä¸‹éƒ¨åˆ†æ¼”ç¤ºå¦‚ä½•ä¸ºé€šè¿‡ DNS è®¿é—®çš„ Kubernetes æœåŠ¡åˆ›å»º TLS è¯ä¹¦ã€‚</description>
    </item>
    
    <item>
      <title>è¯ä¹¦è½®æ¢</title>
      <link>https://lijun.in/tasks/tls/certificate-rotation/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/tls/certificate-rotation/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•åœ¨ kubelet ä¸­å¯ç”¨å¹¶é…ç½®è¯ä¹¦è½®æ¢ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}   è¦æ±‚ Kubernetes 1.8.0 æˆ–æ›´é«˜çš„ç‰ˆæœ¬
  Kubelet è¯ä¹¦è½®æ¢åœ¨ 1.8.0 ç‰ˆæœ¬ä¸­å¤„äº beta é˜¶æ®µ, è¿™æ„å‘³ç€è¯¥ç‰¹æ€§å¯èƒ½åœ¨æ²¡æœ‰é€šçŸ¥çš„æƒ…å†µä¸‹å‘ç”Ÿå˜åŒ–ã€‚
  æ¦‚è¿° Kubelet ä½¿ç”¨è¯ä¹¦è¿›è¡Œ Kubernetes API çš„è®¤è¯ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº›è¯ä¹¦çš„ç­¾å‘æœŸé™ä¸ºä¸€å¹´ï¼Œæ‰€ä»¥ä¸éœ€è¦å¤ªé¢‘ç¹åœ°è¿›è¡Œæ›´æ–°ã€‚
Kubernetes 1.8 ç‰ˆæœ¬ä¸­åŒ…å« beta ç‰¹æ€§ kubelet è¯ä¹¦è½®æ¢ï¼Œ åœ¨å½“å‰è¯ä¹¦å³å°†è¿‡æœŸæ—¶ï¼Œ å°†è‡ªåŠ¨ç”Ÿæˆæ–°çš„ç§˜é’¥ï¼Œå¹¶ä» Kubernetes API ç”³è¯·æ–°çš„è¯ä¹¦ã€‚ ä¸€æ—¦æ–°çš„è¯ä¹¦å¯ç”¨ï¼Œå®ƒå°†è¢«ç”¨äºä¸ Kubernetes API é—´çš„è¿æ¥è®¤è¯ã€‚
å¯ç”¨å®¢æˆ·ç«¯è¯ä¹¦è½®æ¢ kubelet è¿›ç¨‹æ¥æ”¶ --rotate-certificates å‚æ•°ï¼Œè¯¥å‚æ•°å†³å®š kubelet åœ¨å½“å‰ä½¿ç”¨çš„è¯ä¹¦å³å°†åˆ°æœŸæ—¶ï¼Œ æ˜¯å¦ä¼šè‡ªåŠ¨ç”³è¯·æ–°çš„è¯ä¹¦ã€‚ ç”±äºè¯ä¹¦è½®æ¢æ˜¯ beta ç‰¹æ€§ï¼Œå¿…é¡»é€šè¿‡å‚æ•° --feature-gates=RotateKubeletClientCertificate=true è¿›è¡Œå¯ç”¨ã€‚
kube-controller-manager è¿›ç¨‹æ¥æ”¶ --experimental-cluster-signing-duration å‚æ•°ï¼Œè¯¥å‚æ•°æ§åˆ¶è¯ä¹¦ç­¾å‘çš„æœ‰æ•ˆæœŸé™ã€‚
ç†è§£è¯ä¹¦è½®æ¢é…ç½® å½“ kubelet å¯åŠ¨æ—¶ï¼Œå¦‚è¢«é…ç½®ä¸ºè‡ªä¸¾ï¼ˆä½¿ç”¨--bootstrap-kubeconfig å‚æ•°ï¼‰ï¼Œkubelet ä¼šä½¿ç”¨å…¶åˆå§‹è¯ä¹¦è¿æ¥åˆ° Kubernetes API ï¼Œå¹¶å‘é€è¯ä¹¦ç­¾åçš„è¯·æ±‚ã€‚ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹è¯ä¹¦ç­¾åè¯·æ±‚çš„çŠ¶æ€ï¼š</description>
    </item>
    
  </channel>
</rss>