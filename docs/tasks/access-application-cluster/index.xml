<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ğŸ˜ - è®¿é—®é›†ç¾¤ä¸­çš„åº”ç”¨ç¨‹åº on Hugo ä¸»é¢˜çš„ Learn æ–‡æ¡£</title>
    <link>https://lijun.in/tasks/access-application-cluster/</link>
    <description>Recent content in ğŸ˜ - è®¿é—®é›†ç¾¤ä¸­çš„åº”ç”¨ç¨‹åº on Hugo ä¸»é¢˜çš„ Learn æ–‡æ¡£</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    
	<atom:link href="https://lijun.in/tasks/access-application-cluster/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>ç½‘é¡µç•Œé¢ (Dashboard)</title>
      <link>https://lijun.in/tasks/access-application-cluster/web-ui-dashboard/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/web-ui-dashboard/</guid>
      <description>Dashboard æ˜¯åŸºäºç½‘é¡µçš„ Kubernetes ç”¨æˆ·ç•Œé¢ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Dashboard å°†å®¹å™¨åº”ç”¨éƒ¨ç½²åˆ° Kubernetes é›†ç¾¤ä¸­ï¼Œä¹Ÿå¯ä»¥å¯¹å®¹å™¨åº”ç”¨æ’é”™ï¼Œè¿˜èƒ½ç®¡ç†é›†ç¾¤èµ„æºã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Dashboard è·å–è¿è¡Œåœ¨é›†ç¾¤ä¸­çš„åº”ç”¨çš„æ¦‚è§ˆä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºæˆ–è€…ä¿®æ”¹ Kubernetes èµ„æºï¼ˆå¦‚ Deploymentï¼ŒJobï¼ŒDaemonSet ç­‰ç­‰ï¼‰ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å¯¹ Deployment å®ç°å¼¹æ€§ä¼¸ç¼©ã€å‘èµ·æ»šåŠ¨å‡çº§ã€é‡å¯ Pod æˆ–è€…ä½¿ç”¨å‘å¯¼åˆ›å»ºæ–°çš„åº”ç”¨ã€‚
Dashboard åŒæ—¶å±•ç¤ºäº† Kubernetes é›†ç¾¤ä¸­çš„èµ„æºçŠ¶æ€ä¿¡æ¯å’Œæ‰€æœ‰æŠ¥é”™ä¿¡æ¯ã€‚
éƒ¨ç½² Dashboard UI é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šéƒ¨ç½² Dashboardã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤éƒ¨ç½²ï¼š
kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0/aio/deploy/recommended.yaml è®¿é—® Dashboard UI ä¸ºäº†ä¿æŠ¤æ‚¨çš„é›†ç¾¤æ•°æ®ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒDashboard ä¼šä½¿ç”¨æœ€å°‘çš„ RBAC é…ç½®è¿›è¡Œéƒ¨ç½²ã€‚ å½“å‰ï¼ŒDashboard ä»…æ”¯æŒä½¿ç”¨ Bearer ä»¤ç‰Œç™»å½•ã€‚ è¦ä¸ºæ­¤æ ·æœ¬æ¼”ç¤ºåˆ›å»ºä»¤ç‰Œï¼Œæ‚¨å¯ä»¥æŒ‰ç…§åˆ›å»ºç¤ºä¾‹ç”¨æˆ·ä¸Šçš„æŒ‡å—è¿›è¡Œæ“ä½œã€‚
. warning &amp;gt;}} åœ¨æ•™ç¨‹ä¸­åˆ›å»ºçš„æ ·æœ¬ç”¨æˆ·å°†å…·æœ‰ç®¡ç†ç‰¹æƒï¼Œå¹¶ä¸”ä»…ç”¨äºæ•™è‚²ç›®çš„ã€‚ . /warning &amp;gt;}}
å‘½ä»¤è¡Œä»£ç† æ‚¨å¯ä»¥ä½¿ç”¨ kubectl å‘½ä»¤è¡Œå·¥å…·è®¿é—® Dashboardï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š
kubectl proxy kubectl ä¼šä½¿å¾— Dashboard å¯ä»¥é€šè¿‡ http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/ è®¿é—®ã€‚
UI åªèƒ½ é€šè¿‡æ‰§è¡Œè¿™æ¡å‘½ä»¤çš„æœºå™¨è¿›è¡Œè®¿é—®ã€‚æ›´å¤šé€‰é¡¹å‚è§ kubectl proxy --helpã€‚
. note &amp;gt;}} Kubeconfig èº«ä»½éªŒè¯æ–¹æ³•ä¸æ”¯æŒå¤–éƒ¨èº«ä»½æä¾›ç¨‹åºæˆ–åŸºäº x509 è¯ä¹¦çš„èº«ä»½éªŒè¯ã€‚ .</description>
    </item>
    
    <item>
      <title>è®¿é—®é›†ç¾¤</title>
      <link>https://lijun.in/tasks/access-application-cluster/access-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/access-cluster/</guid>
      <description>æœ¬æ–‡é˜è¿°å¤šç§ä¸é›†ç¾¤äº¤äº’çš„æ–¹æ³•ã€‚
. toc &amp;gt;}}
ä½¿ç”¨ kubectl å®Œæˆé›†ç¾¤çš„ç¬¬ä¸€æ¬¡è®¿é—® å½“æ‚¨ç¬¬ä¸€æ¬¡è®¿é—® Kubernetes API çš„æ—¶å€™ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨ä½¿ç”¨ Kubernetes CLIï¼Œkubectlã€‚
è®¿é—®é›†ç¾¤æ—¶ï¼Œæ‚¨éœ€è¦çŸ¥é“é›†ç¾¤çš„åœ°å€å¹¶ä¸”æ‹¥æœ‰è®¿é—®çš„å‡­è¯ã€‚é€šå¸¸ï¼Œè¿™äº›åœ¨æ‚¨é€šè¿‡ Getting started guide å®‰è£…é›†ç¾¤æ—¶éƒ½æ˜¯è‡ªåŠ¨å®‰è£…å¥½çš„ï¼Œæˆ–è€…å…¶ä»–äººå®‰è£…æ—¶ä¹Ÿåº”è¯¥æä¾›äº†å‡­è¯å’Œé›†ç¾¤åœ°å€ã€‚
é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ kubectl æ˜¯å¦çŸ¥é“é›†ç¾¤åœ°å€åŠå‡­è¯ï¼š
$ kubectl config view æœ‰è®¸å¤š ä¾‹å­ ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ kubectlï¼Œå¯ä»¥åœ¨ kubectlæ‰‹å†Œ ä¸­æ‰¾åˆ°æ›´å®Œæ•´çš„æ–‡æ¡£ã€‚
ç›´æ¥è®¿é—® REST API Kubectl å¤„ç† apiserver çš„å®šä½å’Œèº«ä»½éªŒè¯ã€‚ å¦‚æœè¦ä½¿ç”¨ curl æˆ– wget ç­‰ http å®¢æˆ·ç«¯æˆ–æµè§ˆå™¨ç›´æ¥è®¿é—® REST APIï¼Œå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æŸ¥æ‰¾å’ŒéªŒè¯ï¼š
 ä»¥ä»£ç†æ¨¡å¼è¿è¡Œ kubectlã€‚  æ¨èæ­¤æ–¹å¼ã€‚ ä½¿ç”¨å·²å­˜å‚¨çš„ apiserver åœ°å€ã€‚ ä½¿ç”¨è‡ªç­¾åçš„è¯ä¹¦æ¥éªŒè¯ apiserver çš„èº«ä»½ã€‚æœç» MITM æ”»å‡»ã€‚ å¯¹ apiserver è¿›è¡Œèº«ä»½éªŒè¯ã€‚ æœªæ¥å¯èƒ½ä¼šå®ç°æ™ºèƒ½åŒ–çš„å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å’Œæ•…éšœæ¢å¤ã€‚   ç›´æ¥å‘ http å®¢æˆ·ç«¯æä¾›ä½ç½®å’Œå‡­æ®ã€‚  å¯é€‰çš„æ–¹æ¡ˆã€‚ é€‚ç”¨äºä»£ç†å¯èƒ½å¼•èµ·æ··æ·†çš„æŸäº›å®¢æˆ·ç«¯ç±»å‹ã€‚ éœ€è¦å¼•å…¥æ ¹è¯ä¹¦åˆ°æ‚¨çš„æµè§ˆå™¨ä»¥é˜²æ­¢ MITM æ”»å‡»ã€‚    ä½¿ç”¨ kubectl ä»£ç† ä»¥ä¸‹å‘½ä»¤ä»¥åå‘ä»£ç†çš„æ¨¡å¼è¿è¡Œkubectlã€‚å®ƒå¤„ç† apiserver çš„å®šä½å’ŒéªŒè¯ã€‚ åƒè¿™æ ·è¿è¡Œï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ç«¯å£è½¬å‘æ¥è®¿é—®é›†ç¾¤ä¸­çš„åº”ç”¨</title>
      <link>https://lijun.in/tasks/access-application-cluster/port-forward-access-application-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/port-forward-access-application-cluster/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•ä½¿ç”¨ kubectl port-forward è¿æ¥åˆ°åœ¨ Kubernetes é›†ç¾¤ä¸­è¿è¡Œçš„ Redis æœåŠ¡ã€‚è¿™ç§ç±»å‹çš„è¿æ¥å¯¹æ•°æ®åº“è°ƒè¯•å¾ˆæœ‰ç”¨ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}   å®‰è£… redis-cliã€‚  åˆ›å»º Redis deployment å’ŒæœåŠ¡   åˆ›å»ºä¸€ä¸ª Redis deploymentï¼š
 kubectl apply -f https://k8s.io/examples/application/guestbook/redis-master-deployment.yaml    æŸ¥çœ‹è¾“å‡ºæ˜¯å¦æˆåŠŸï¼Œä»¥éªŒè¯æ˜¯å¦æˆåŠŸåˆ›å»º deploymentï¼š deployment.apps/redis-master created  æŸ¥çœ‹ pod çŠ¶æ€ï¼Œæ£€æŸ¥å…¶æ˜¯å¦å‡†å¤‡å°±ç»ªï¼š kubectl get pods  è¾“å‡ºæ˜¾ç¤ºåˆ›å»ºçš„ podï¼š NAME READY STATUS RESTARTS AGE redis-master-765d459796-258hz 1/1 Running 0 50s  æŸ¥çœ‹ deployment çŠ¶æ€ï¼š kubectl get deployment  è¾“å‡ºæ˜¾ç¤ºåˆ›å»ºçš„ deploymentï¼š NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE redis-master 1 1 1 1 55s  æŸ¥çœ‹ replicaset çŠ¶æ€ï¼š kubectl get rs  è¾“å‡ºæ˜¾ç¤ºåˆ›å»ºçš„ replicasetï¼š NAME DESIRED CURRENT READY AGE redis-master-765d459796 1 1 1 1m   åˆ›å»ºä¸€ä¸ª Redis æœåŠ¡ï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨æœåŠ¡æ¥è®¿é—®é›†ç¾¤ä¸­çš„åº”ç”¨</title>
      <link>https://lijun.in/tasks/access-application-cluster/service-access-application-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/service-access-application-cluster/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ª Kubernetes æœåŠ¡å¯¹è±¡ï¼Œèƒ½è®©å¤–éƒ¨å®¢æˆ·ç«¯è®¿é—®åœ¨é›†ç¾¤ä¸­è¿è¡Œçš„åº”ç”¨ã€‚è¯¥æœåŠ¡ä¸ºä¸€ä¸ªåº”ç”¨çš„ä¸¤ä¸ªè¿è¡Œå®ä¾‹æä¾›è´Ÿè½½å‡è¡¡ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
. heading &amp;ldquo;objectives&amp;rdquo; %}}  è¿è¡Œ Hello World åº”ç”¨çš„ä¸¤ä¸ªå®ä¾‹ã€‚ åˆ›å»ºä¸€ä¸ªæœåŠ¡å¯¹è±¡æ¥æš´éœ² node portã€‚ ä½¿ç”¨æœåŠ¡å¯¹è±¡æ¥è®¿é—®æ­£åœ¨è¿è¡Œçš„åº”ç”¨ã€‚  ä¸ºè¿è¡Œåœ¨ä¸¤ä¸ª pod ä¸­çš„åº”ç”¨åˆ›å»ºä¸€ä¸ªæœåŠ¡ è¿™æ˜¯åº”ç”¨ç¨‹åºéƒ¨ç½²çš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;service/access/hello-application.yaml&amp;rdquo; &amp;gt;}}
 åœ¨æ‚¨çš„é›†ç¾¤ä¸­è¿è¡Œä¸€ä¸ª Hello World åº”ç”¨ï¼š ä½¿ç”¨ä¸Šé¢çš„æ–‡ä»¶åˆ›å»ºåº”ç”¨ç¨‹åº Deploymentï¼š kubectl apply -f https://k8s.io/examples/service/access/hello-application.yaml ä¸Šé¢çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ª Deployment å¯¹è±¡å’Œä¸€ä¸ªå…³è”çš„ ReplicaSet å¯¹è±¡ã€‚è¿™ä¸ª ReplicaSet æœ‰ä¸¤ä¸ª Podï¼Œæ¯ä¸ª Pod éƒ½è¿è¡Œç€ Hello World åº”ç”¨ã€‚
   å±•ç¤º Deployment çš„ä¿¡æ¯ï¼š kubectl get deployments hello-world kubectl describe deployments hello-world    å±•ç¤ºæ‚¨çš„ ReplicaSet å¯¹è±¡ä¿¡æ¯ï¼š kubectl get replicasets kubectl describe replicasets    åˆ›å»ºä¸€ä¸ªæœåŠ¡å¯¹è±¡æ¥æš´éœ² deploymentï¼š kubectl expose deployment hello-world --type=NodePort --name=example-service    å±•ç¤ºæœåŠ¡ä¿¡æ¯ï¼š kubectl describe services example-service   è¾“å‡ºç±»ä¼¼äºï¼š</description>
    </item>
    
    <item>
      <title>åˆ›å»ºä¸€ä¸ªå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨</title>
      <link>https://lijun.in/tasks/access-application-cluster/create-external-load-balancer/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/create-external-load-balancer/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ªå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨ã€‚
. note &amp;gt;}}
æ­¤åŠŸèƒ½ä»…é€‚ç”¨äºæ”¯æŒå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨çš„äº‘æä¾›å•†æˆ–ç¯å¢ƒã€‚ . /note &amp;gt;}}
åˆ›å»ºæœåŠ¡æ—¶ï¼Œæ‚¨å¯ä»¥é€‰æ‹©è‡ªåŠ¨åˆ›å»ºäº‘ç½‘ç»œè´Ÿè½½å‡è¡¡å™¨ã€‚è¿™æä¾›äº†ä¸€ä¸ªå¤–éƒ¨å¯è®¿é—®çš„ IP åœ°å€ï¼Œå¯å°†æµé‡åˆ†é…åˆ°é›†ç¾¤èŠ‚ç‚¹ä¸Šçš„æ­£ç¡®ç«¯å£ä¸Š å‡è®¾é›†ç¾¤åœ¨æ”¯æŒçš„ç¯å¢ƒä¸­è¿è¡Œï¼Œå¹¶é…ç½®äº†æ­£ç¡®çš„äº‘è´Ÿè½½å¹³è¡¡å™¨æä¾›å•†åŒ…ã€‚
æœ‰å…³å¦‚ä½•é…ç½®å’Œä½¿ç”¨ Ingress èµ„æºä¸ºæœåŠ¡æä¾›å¤–éƒ¨å¯è®¿é—®çš„ URLã€è´Ÿè½½å‡è¡¡æµé‡ã€ç»ˆæ­¢ SSL ç­‰åŠŸèƒ½ï¼Œè¯·æŸ¥çœ‹ Ingress æ–‡æ¡£ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}  é…ç½®æ–‡ä»¶ è¦åˆ›å»ºå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨ï¼Œè¯·å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° æœåŠ¡é…ç½®æ–‡ä»¶ï¼š
type: LoadBalancer æ‚¨çš„é…ç½®æ–‡ä»¶å¯èƒ½ä¼šå¦‚ä¸‹æ‰€ç¤ºï¼š
apiVersion: v1 kind: Service metadata: name: example-service spec: selector: app: example ports: - port: 8765 targetPort: 9376 type: LoadBalancer ä½¿ç”¨ kubectl æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ kubectl expose å‘½ä»¤åŠå…¶ --type=LoadBalancer å‚æ•°åˆ›å»ºæœåŠ¡ï¼š
kubectl expose rc example --port=8765 --target-port=9376 \  --name=example-service --type=LoadBalancer æ­¤å‘½ä»¤é€šè¿‡ä½¿ç”¨ä¸å¼•ç”¨èµ„æºï¼ˆåœ¨ä¸Šé¢çš„ç¤ºä¾‹çš„æƒ…å†µä¸‹ï¼Œåä¸º example çš„ replication controllerï¼‰ç›¸åŒçš„é€‰æ‹©å™¨æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„æœåŠ¡ã€‚</description>
    </item>
    
    <item>
      <title>é…ç½®ä½ çš„äº‘å¹³å°é˜²ç«å¢™</title>
      <link>https://lijun.in/tasks/access-application-cluster/configure-cloud-provider-firewall/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/configure-cloud-provider-firewall/</guid>
      <description>è®¸å¤šäº‘æœåŠ¡æä¾›å•†ï¼ˆæ¯”å¦‚ è°·æ­Œè®¡ç®—å¼•æ“ï¼‰å®šä¹‰é˜²ç«å¢™ä»¥é˜²æ­¢æœåŠ¡æ— æ„é—´æš´éœ²åˆ°äº’è”ç½‘ä¸Šã€‚ å½“æš´éœ²æœåŠ¡ç»™å¤–ç½‘æ—¶ï¼Œä½ å¯èƒ½éœ€è¦åœ¨é˜²ç«å¢™ä¸Šå¼€å¯ä¸€ä¸ªæˆ–è€…æ›´å¤šçš„ç«¯å£æ¥æ”¯æŒæœåŠ¡ã€‚ æœ¬æ–‡æè¿°äº†è¿™ä¸ªè¿‡ç¨‹ï¼Œä»¥åŠå…¶ä»–äº‘æœåŠ¡å•†çš„å…·ä½“ä¿¡æ¯ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
è´Ÿè½½å‡è¡¡ï¼ˆLoadBalancerï¼‰æœåŠ¡çš„è®¿é—®é™åˆ¶ å½“ä»¥ spec.type: LoadBalancer æ–¹å¼é…ç½®æœåŠ¡æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ spec.loadBalancerSourceRanges æ¥æŒ‡å®šå…è®¸è®¿é—®è´Ÿè½½å‡è¡¡å™¨çš„ ip æ®µã€‚ è¿™ä¸ªå­—æ®µé‡‡ç”¨ CIDR çš„ IP æ®µï¼Œ kubernetes ä½¿ç”¨è¯¥æ®µé…ç½®é˜²ç«å¢™ã€‚ç›®å‰åªæœ‰ è°·æ­Œè®¡ç®—å¼•æ“ï¼Œè°·æ­Œäº‘åŸç”Ÿå¼•æ“ï¼Œäºšé©¬é€Šå¼¹æ€§åŸç”Ÿäº‘æœåŠ¡ å’Œ å¾®è½¯äº‘åŸç”Ÿå¹³å°æ”¯æŒæ­¤åŠŸèƒ½ã€‚ å¦‚æœäº‘æœåŠ¡æä¾›å•†ä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼Œè¿™ä¸ªå­—æ®µå°†è¢«å¿½ç•¥ã€‚
å‡è®¾å†…éƒ¨å­ç½‘ä¸ºå‡è®¾10.0.0.0/8ï¼Œåœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°†åˆ›å»ºä¸€ä¸ªä»…èƒ½ç”±ç¾¤é›†å†…éƒ¨IPè®¿é—®çš„è´Ÿè½½å‡è¡¡å™¨ã€‚æ­¤è´Ÿè½½å‡è¡¡å™¨ä¸å…è®¸æ¥è‡ª kubernetes é›†ç¾¤å¤–éƒ¨å®¢æˆ·ç«¯çš„è®¿é—®ã€‚
apiVersion: v1 kind: Service metadata: name: myapp spec: ports: - port: 8765 targetPort: 9376 selector: app: example type: LoadBalancer loadBalancerSourceRanges: - 10.0.0.0/8 åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°†åˆ›å»ºä¸€ä¸ªåªèƒ½è¢« IP ä¸º 130.211.204.1 å’Œ 130.211.204.2 çš„å®¢æˆ·ç«¯è®¿é—®çš„è´Ÿè½½æ®è¡¡å™¨ã€‚
apiVersion: v1 kind: Service metadata: name: myapp spec: ports: - port: 8765 targetPort: 9376 selector: app: example type: LoadBalancer loadBalancerSourceRanges: - 130.</description>
    </item>
    
    <item>
      <title>åˆ—å‡ºé›†ç¾¤ä¸­æ‰€æœ‰è¿è¡Œå®¹å™¨çš„é•œåƒ</title>
      <link>https://lijun.in/tasks/access-application-cluster/list-all-running-container-images/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/list-all-running-container-images/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•ä½¿ç”¨ kubectl æ¥åˆ—å‡ºé›†ç¾¤ä¸­æ‰€æœ‰è¿è¡Œ pod çš„å®¹å™¨çš„é•œåƒ
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ kubectl æ¥è·å–é›†ç¾¤ä¸­è¿è¡Œçš„æ‰€æœ‰ Podï¼Œå¹¶æ ¼å¼åŒ–è¾“å‡ºæ¥æå–æ¯ä¸ª pod ä¸­çš„å®¹å™¨åˆ—è¡¨ã€‚
åˆ—å‡ºæ‰€æœ‰å‘½åç©ºé—´ä¸‹çš„æ‰€æœ‰å®¹å™¨  ä½¿ç”¨ kubectl get pods --all-namespaces è·å–æ‰€æœ‰å‘½åç©ºé—´ä¸‹çš„æ‰€æœ‰ Pod ä½¿ç”¨ -o jsonpath={..image} æ¥æ ¼å¼åŒ–è¾“å‡ºï¼Œä»¥ä»…åŒ…å«å®¹å™¨é•œåƒåç§°ã€‚ è¿™å°†ä»¥é€’å½’æ–¹å¼ä»è¿”å›çš„ json ä¸­è§£æå‡º image å­—æ®µã€‚  å‚é˜… jsonpath reference æ¥è·å–æ›´å¤šå…³äºå¦‚ä½•ä½¿ç”¨ jsonpath çš„ä¿¡æ¯ã€‚   ä½¿ç”¨æ ‡å‡†åŒ–å·¥å…·æ¥æ ¼å¼åŒ–è¾“å‡ºï¼štr, sort, uniq  ä½¿ç”¨ tr ä»¥ç”¨æ¢è¡Œç¬¦æ›¿æ¢ç©ºæ ¼ ä½¿ç”¨ sort æ¥å¯¹ç»“æœè¿›è¡Œæ’åº ä½¿ç”¨ uniq æ¥èšåˆé•œåƒè®¡æ•°    kubectl get pods --all-namespaces -o jsonpath=&amp;#34;{.</description>
    </item>
    
    <item>
      <title>ä¸ºé›†ç¾¤é…ç½® DNS</title>
      <link>https://lijun.in/tasks/access-application-cluster/configure-dns-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/configure-dns-cluster/</guid>
      <description>Kubernetes æä¾› DNS é›†ç¾¤æ’ä»¶ï¼Œå¤§å¤šæ•°æ”¯æŒçš„ç¯å¢ƒé»˜è®¤æƒ…å†µä¸‹éƒ½ä¼šå¯ç”¨ã€‚
æœ‰å…³å¦‚ä½•ä¸º Kubernetes é›†ç¾¤é…ç½® DNS çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… Kubernetes DNS æ’ä»¶ç¤ºä¾‹.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Service æŠŠå‰ç«¯è¿æ¥åˆ°åç«¯</title>
      <link>https://lijun.in/tasks/access-application-cluster/connecting-frontend-backend/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/connecting-frontend-backend/</guid>
      <description>æœ¬ä»»åŠ¡ä¼šæè¿°å¦‚ä½•åˆ›å»ºå‰ç«¯å¾®æœåŠ¡å’Œåç«¯å¾®æœåŠ¡ã€‚åç«¯å¾®æœåŠ¡æ˜¯ä¸€ä¸ª hello æ¬¢è¿ç¨‹åºã€‚ å‰ç«¯å’Œåç«¯çš„è¿æ¥æ˜¯é€šè¿‡ Kubernetes æœåŠ¡å¯¹è±¡ï¼ˆService objectï¼‰å®Œæˆçš„ã€‚
. heading &amp;ldquo;objectives&amp;rdquo; %}}  ä½¿ç”¨éƒ¨ç½²å¯¹è±¡ï¼ˆDeployment objectï¼‰åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªå¾®æœåŠ¡ ä»åç«¯å°†æµé‡è·¯ç”±åˆ°å‰ç«¯ ä½¿ç”¨æœåŠ¡å¯¹è±¡æŠŠå‰ç«¯åº”ç”¨è¿æ¥åˆ°åç«¯åº”ç”¨  . heading &amp;ldquo;prerequisites&amp;rdquo; %}}   . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
  æœ¬ä»»åŠ¡ä½¿ç”¨ å¤–éƒ¨è´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œ æ‰€ä»¥éœ€è¦å¯¹åº”çš„å¯æ”¯æŒæ­¤åŠŸèƒ½çš„ç¯å¢ƒã€‚å¦‚æœä½ çš„ç¯å¢ƒä¸èƒ½æ”¯æŒï¼Œä½ å¯ä»¥ä½¿ç”¨ NodePort ç±»å‹çš„æœåŠ¡ä»£æ›¿ã€‚
  ä½¿ç”¨éƒ¨ç½²å¯¹è±¡ï¼ˆDeploymentï¼‰åˆ›å»ºåç«¯ åç«¯æ˜¯ä¸€ä¸ªç®€å•çš„ hello æ¬¢è¿å¾®æœåŠ¡åº”ç”¨ã€‚è¿™æ˜¯åç«¯åº”ç”¨çš„ Deployment é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;service/access/hello.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»ºåç«¯ Deploymentï¼š
kubectl apply -f https://k8s.io/examples/service/access/hello.yaml æŸ¥çœ‹åç«¯çš„ Deployment ä¿¡æ¯ï¼š
kubectl describe deployment hello è¾“å‡ºç±»ä¼¼äºï¼š
Name: hello Namespace: default CreationTimestamp: Mon, 24 Oct 2016 14:21:02 -0700 Labels: app=hello tier=backend track=stable Selector: app=hello,tier=backend,track=stable Replicas: 7 updated | 7 total | 7 available | 0 unavailable StrategyType: RollingUpdate MinReadySeconds: 0 RollingUpdateStrategy: 1 max unavailable, 1 max surge OldReplicaSets: &amp;lt;none&amp;gt; NewReplicaSet: hello-3621623197 (7/7 replicas created) Events: .</description>
    </item>
    
    <item>
      <title>åŒ Pod å†…çš„å®¹å™¨ä½¿ç”¨å…±äº«å·é€šä¿¡</title>
      <link>https://lijun.in/tasks/access-application-cluster/communicate-containers-same-pod-shared-volume/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/communicate-containers-same-pod-shared-volume/</guid>
      <description>æœ¬æ–‡æ—¨åœ¨è¯´æ˜å¦‚ä½•è®©ä¸€ä¸ª Pod å†…çš„ä¸¤ä¸ªå®¹å™¨ä½¿ç”¨ä¸€ä¸ªå·ï¼ˆVolumeï¼‰è¿›è¡Œé€šä¿¡ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå®¹å™¨çš„ Pod åœ¨è¿™ä¸ªç»ƒä¹ ä¸­ï¼Œä½ ä¼šåˆ›å»ºä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå®¹å™¨çš„ Podã€‚ä¸¤ä¸ªå®¹å™¨å…±äº«ä¸€ä¸ªå·ç”¨äºä»–ä»¬ä¹‹é—´çš„é€šä¿¡ã€‚ Pod çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š
. codenew file=&amp;quot;pods/two-container-pod.yaml&amp;rdquo; &amp;gt;}}
åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ° Pod æœ‰ä¸€ä¸ªå…±äº«å·ï¼Œåä¸º shared-dataã€‚
é…ç½®æ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªå®¹å™¨è¿è¡Œäº†ä¸€ä¸ª nginx æœåŠ¡å™¨ã€‚å…±äº«å·çš„æŒ‚è½½è·¯å¾„æ˜¯ /usr/share/nginx/htmlã€‚ ç¬¬äºŒä¸ªå®¹å™¨æ˜¯åŸºäº debian é•œåƒçš„ï¼Œæœ‰ä¸€ä¸ª /pod-data çš„æŒ‚è½½è·¯å¾„ã€‚ç¬¬äºŒä¸ªå®¹å™¨è¿è¡Œäº†ä¸‹é¢çš„å‘½ä»¤ç„¶åç»ˆæ­¢ã€‚
echo Hello from the debian container &amp;gt; /pod-data/index.html  æ³¨æ„ï¼Œç¬¬äºŒä¸ªå®¹å™¨åœ¨ nginx æœåŠ¡å™¨çš„æ ¹ç›®å½•ä¸‹å†™äº† index.html æ–‡ä»¶ã€‚
åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå®¹å™¨çš„ Podï¼š
kubectl apply -f https://k8s.io/examples/pods/two-container-pod.yaml  æŸ¥çœ‹ Pod å’Œå®¹å™¨çš„ä¿¡æ¯ï¼š
kubectl get pod two-containers --output=yaml  è¿™æ˜¯è¾“å‡ºçš„ä¸€éƒ¨åˆ†ï¼š
apiVersion: v1 kind: Pod metadata: .</description>
    </item>
    
    <item>
      <title>é…ç½®å¯¹å¤šé›†ç¾¤çš„è®¿é—®</title>
      <link>https://lijun.in/tasks/access-application-cluster/configure-access-multiple-clusters/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/configure-access-multiple-clusters/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•ä½¿ç”¨é…ç½®æ–‡ä»¶æ¥é…ç½®å¯¹å¤šä¸ªé›†ç¾¤çš„è®¿é—®ã€‚ åœ¨å°†é›†ç¾¤ã€ç”¨æˆ·å’Œä¸Šä¸‹æ–‡å®šä¹‰åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªé…ç½®æ–‡ä»¶ä¸­ä¹‹åï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ kubectl config use-context å‘½ä»¤å¿«é€Ÿåœ°åœ¨é›†ç¾¤ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚
. note &amp;gt;}} ç”¨äºé…ç½®é›†ç¾¤è®¿é—®çš„æ–‡ä»¶æœ‰æ—¶è¢«ç§°ä¸º kubeconfig æ–‡ä»¶ã€‚ è¿™æ˜¯ä¸€ç§å¼•ç”¨é…ç½®æ–‡ä»¶çš„é€šç”¨æ–¹å¼ï¼Œå¹¶ä¸æ„å‘³ç€å­˜åœ¨ä¸€ä¸ªåä¸º kubeconfig çš„æ–‡ä»¶ã€‚ . /note &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} éœ€è¦å®‰è£… kubectl å‘½ä»¤è¡Œå·¥å…·ã€‚
å®šä¹‰é›†ç¾¤ã€ç”¨æˆ·å’Œä¸Šä¸‹æ–‡ å‡è®¾ç”¨æˆ·æœ‰ä¸¤ä¸ªé›†ç¾¤ï¼Œä¸€ä¸ªç”¨äºæ­£å¼å¼€å‘å·¥ä½œï¼Œä¸€ä¸ªç”¨äºå…¶å®ƒä¸´æ—¶ç”¨é€”ï¼ˆscratchï¼‰ã€‚ åœ¨ development é›†ç¾¤ä¸­ï¼Œå‰ç«¯å¼€å‘è€…åœ¨åä¸º frontend çš„åå­—ç©ºé—´ä¸‹å·¥ä½œï¼Œ å­˜å‚¨å¼€å‘è€…åœ¨åä¸º storage çš„åå­—ç©ºé—´ä¸‹å·¥ä½œã€‚ åœ¨ scratch é›†ç¾¤ä¸­ï¼Œ å¼€å‘äººå‘˜å¯èƒ½åœ¨é»˜è®¤åå­—ç©ºé—´ä¸‹å·¥ä½œï¼Œä¹Ÿå¯èƒ½è§†æƒ…å†µåˆ›å»ºé™„åŠ çš„åå­—ç©ºé—´ã€‚ è®¿é—®å¼€å‘é›†ç¾¤éœ€è¦é€šè¿‡è¯ä¹¦è¿›è¡Œè®¤è¯ã€‚ è®¿é—®å…¶å®ƒä¸´æ—¶ç”¨é€”çš„é›†ç¾¤éœ€è¦é€šè¿‡ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œè®¤è¯ã€‚
åˆ›å»ºåä¸º config-exercise çš„ç›®å½•ã€‚ åœ¨ config-exercise ç›®å½•ä¸­ï¼Œåˆ›å»ºåä¸º config-demo çš„æ–‡ä»¶ï¼Œå…¶å†…å®¹ä¸ºï¼š
apiVersion: v1 kind: Config preferences: {} clusters: - cluster: name: development - cluster: name: scratch users: - name: developer - name: experimenter contexts: - context: name: dev-frontend - context: name: dev-storage - context: name: exp-scratch é…ç½®æ–‡ä»¶æè¿°äº†é›†ç¾¤ã€ç”¨æˆ·åå’Œä¸Šä¸‹æ–‡ã€‚ config-demo æ–‡ä»¶ä¸­å«æœ‰æè¿°ä¸¤ä¸ªé›†ç¾¤ã€ä¸¤ä¸ªç”¨æˆ·å’Œä¸‰ä¸ªä¸Šä¸‹æ–‡çš„æ¡†æ¶ã€‚</description>
    </item>
    
  </channel>
</rss>