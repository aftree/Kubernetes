<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ğŸ˜ - ç»™åº”ç”¨æ³¨å…¥æ•°æ® on Hugo ä¸»é¢˜çš„ Learn æ–‡æ¡£</title>
    <link>https://lijun.in/tasks/inject-data-application/</link>
    <description>Recent content in ğŸ˜ - ç»™åº”ç”¨æ³¨å…¥æ•°æ® on Hugo ä¸»é¢˜çš„ Learn æ–‡æ¡£</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    
	<atom:link href="https://lijun.in/tasks/inject-data-application/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>ä¸ºå®¹å™¨è®¾ç½®å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤åŠå…¶å…¥å‚</title>
      <link>https://lijun.in/tasks/inject-data-application/define-command-argument-container/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/inject-data-application/define-command-argument-container/</guid>
      <description>æœ¬é¡µå°†å±•ç¤ºå¦‚ä½•ä¸º . glossary_tooltip term_id=&amp;quot;pod&amp;rdquo; &amp;gt;}} ä¸­çš„å®¹å™¨è®¾ç½®å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤åŠå…¶å…¥å‚ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åˆ›å»º Pod æ—¶è®¾ç½®å‘½ä»¤åŠå…¥å‚ åˆ›å»º Pod æ—¶ï¼Œå¯ä»¥ä¸ºå…¶ä¸‹çš„å®¹å™¨è®¾ç½®å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤åŠå…¶å…¥å‚ã€‚å¦‚æœè¦è®¾ç½®å‘½ä»¤ï¼Œå°±å¡«å†™åœ¨é…ç½®æ–‡ä»¶çš„ command å­—æ®µä¸‹ï¼Œå¦‚æœè¦è®¾ç½®å‘½ä»¤çš„å…¥å‚ï¼Œå°±å¡«å†™åœ¨é…ç½®æ–‡ä»¶çš„ args å­—æ®µä¸‹ã€‚ä¸€æ—¦ Pod åˆ›å»ºå®Œæˆï¼Œè¯¥å‘½ä»¤åŠå…¶å…¥å‚å°±æ— æ³•å†è¿›è¡Œæ›´æ”¹äº†ã€‚
å¦‚æœåœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®äº†å®¹å™¨å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤åŠå…¶å…¥å‚ï¼Œé‚£ä¹ˆå®¹å™¨é•œåƒä¸­è‡ªå¸¦çš„å‘½ä»¤ä¸å…¥å‚å°†ä¼šè¢«è¦†ç›–è€Œä¸å†æ‰§è¡Œã€‚å¦‚æœé…ç½®æ–‡ä»¶ä¸­åªæ˜¯è®¾ç½®äº†å…¥å‚ï¼Œå´æ²¡æœ‰è®¾ç½®å…¶å¯¹åº”çš„å‘½ä»¤ï¼Œé‚£ä¹ˆå®¹å™¨é•œåƒä¸­è‡ªå¸¦çš„å‘½ä»¤ä¼šä½¿ç”¨è¯¥æ–°å…¥å‚ä½œä¸ºå…¶æ‰§è¡Œæ—¶çš„å…¥å‚ã€‚
. note &amp;gt;}} åœ¨æœ‰äº›å®¹å™¨è¿è¡Œæ—¶ä¸­ï¼Œcommand å­—æ®µå¯¹åº” entrypointï¼Œè¯·å‚é˜…ä¸‹é¢çš„ æ³¨æ„ã€‚ . /note &amp;gt;}}
æœ¬ç¤ºä¾‹ä¸­ï¼Œå°†åˆ›å»ºä¸€ä¸ªåªåŒ…å«å•ä¸ªå®¹å™¨çš„ Podã€‚åœ¨ Pod é…ç½®æ–‡ä»¶ä¸­è®¾ç½®äº†ä¸€ä¸ªå‘½ä»¤ä¸ä¸¤ä¸ªå…¥å‚ï¼š
. codenew file=&amp;quot;pods/commands.yaml&amp;rdquo; &amp;gt;}}
  åŸºäº YAML æ–‡ä»¶åˆ›å»ºä¸€ä¸ª Podï¼š
kubectl apply -f https://k8s.io/examples/pods/commands.yaml    è·å–æ­£åœ¨è¿è¡Œçš„ Podsï¼š
kubectl get pods ``
æŸ¥è¯¢ç»“æœæ˜¾ç¤ºåœ¨ command-demo è¿™ä¸ª Pod ä¸‹è¿è¡Œçš„å®¹å™¨å·²ç»å¯åŠ¨å®Œæˆã€‚</description>
    </item>
    
    <item>
      <title>ä¸ºå®¹å™¨è®¾ç½®ç¯å¢ƒå˜é‡</title>
      <link>https://lijun.in/tasks/inject-data-application/define-environment-variable-container/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/inject-data-application/define-environment-variable-container/</guid>
      <description>æœ¬é¡µå°†å±•ç¤ºå¦‚ä½•ä¸º kubernetes Pod ä¸‹çš„å®¹å™¨è®¾ç½®ç¯å¢ƒå˜é‡ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ä¸ºå®¹å™¨è®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡ åˆ›å»º Pod æ—¶ï¼Œå¯ä»¥ä¸ºå…¶ä¸‹çš„å®¹å™¨è®¾ç½®ç¯å¢ƒå˜é‡ã€‚é€šè¿‡é…ç½®æ–‡ä»¶çš„ env æˆ–è€… envFrom å­—æ®µæ¥è®¾ç½®ç¯å¢ƒå˜é‡ã€‚
æœ¬ç¤ºä¾‹ä¸­ï¼Œå°†åˆ›å»ºä¸€ä¸ªåªåŒ…å«å•ä¸ªå®¹å™¨çš„ Podã€‚Pod çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ç¯å¢ƒå˜é‡çš„åç§°ä¸º DEMO_GREETINGï¼Œ å…¶å€¼ä¸º &amp;quot;Hello from the environment&amp;quot;ã€‚ä¸‹é¢æ˜¯ Pod çš„é…ç½®æ–‡ä»¶å†…å®¹ï¼š
. codenew file=&amp;quot;pods/inject/envars.yaml&amp;rdquo; &amp;gt;}}
  åŸºäº YAML æ–‡ä»¶åˆ›å»ºä¸€ä¸ª Podï¼š
kubectl apply -f https://k8s.io/examples/pods/inject/envars.yaml     è·å–ä¸€ä¸‹å½“å‰æ­£åœ¨è¿è¡Œçš„ Pods ä¿¡æ¯ï¼š
kubectl get pods -l purpose=demonstrate-envars æŸ¥è¯¢ç»“æœåº”ä¸ºï¼š
NAME READY STATUS RESTARTS AGE envar-demo 1/1 Running 0 9s     è¿›å…¥è¯¥ Pod ä¸‹çš„å®¹å™¨å¹¶æ‰“å¼€ä¸€ä¸ªå‘½ä»¤ç»ˆç«¯ï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ PodPreset å°†ä¿¡æ¯æ³¨å…¥ Pods</title>
      <link>https://lijun.in/tasks/inject-data-application/podpreset/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/inject-data-application/podpreset/</guid>
      <description>åœ¨ pod åˆ›å»ºæ—¶ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ podpreset å¯¹è±¡å°† secretsã€å·æŒ‚è½½å’Œç¯å¢ƒå˜é‡ç­‰ä¿¡æ¯æ³¨å…¥å…¶ä¸­ã€‚ æœ¬æ–‡å±•ç¤ºäº†ä¸€äº› PodPreset èµ„æºä½¿ç”¨çš„ç¤ºä¾‹ã€‚ ç”¨æˆ·å¯ä»¥ä»ç†è§£ Pod Presets ä¸­äº†è§£ PodPresets çš„æ•´ä½“æƒ…å†µã€‚
. toc &amp;gt;}}
åˆ›å»º Pod Preset ç®€å•çš„ Pod Spec ç¤ºä¾‹ è¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•é€šè¿‡ Pod Preset ä¿®æ”¹ Pod spec ã€‚
. codenew file=&amp;quot;podpreset/preset.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»º PodPresetï¼š
kubectl apply -f https://k8s.io/examples/podpreset/preset.yaml æ£€æŸ¥æ‰€åˆ›å»ºçš„ PodPresetï¼š
kubectl get podpreset NAME AGE allow-database 1m æ–°çš„ PodPreset ä¼šå¯¹æ‰€æœ‰å…·æœ‰æ ‡ç­¾ role: frontend çš„ Pods é‡‡å–è¡ŒåŠ¨ã€‚
ç”¨æˆ·æäº¤çš„ pod specï¼š
. codenew file=&amp;quot;podpreset/pod.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»º Podï¼š
kubectl create -f https://k8s.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Secret å®‰å…¨åœ°åˆ†å‘å‡­è¯</title>
      <link>https://lijun.in/tasks/inject-data-application/distribute-credentials-secure/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/inject-data-application/distribute-credentials-secure/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•å®‰å…¨åœ°å°†æ•æ„Ÿæ•°æ®ï¼ˆå¦‚å¯†ç å’ŒåŠ å¯†å¯†é’¥ï¼‰æ³¨å…¥åˆ° Pods ä¸­ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å°† secret æ•°æ®è½¬æ¢ä¸º base-64 å½¢å¼ å‡è®¾ç”¨æˆ·æƒ³è¦æœ‰ä¸¤æ¡ secret æ•°æ®ï¼šç”¨æˆ·å my-app å’Œå¯†ç  39528$vdg7Jbã€‚ é¦–å…ˆä½¿ç”¨ Base64 ç¼–ç  å°†ç”¨æˆ·åå’Œå¯†ç è½¬åŒ–ä¸º base-64 å½¢å¼ã€‚ è¿™é‡Œæ˜¯ä¸€ä¸ª Linux ç¤ºä¾‹ï¼š
```shell echo -n &#39;my-app&#39; | base64 echo -n &#39;39528$vdg7Jb&#39; | base64 ```  ç»“æœæ˜¾ç¤º base-64 å½¢å¼çš„ç”¨æˆ·åä¸º bXktYXBwï¼Œ base-64 å½¢å¼çš„å¯†ç ä¸º Mzk1MjgkdmRnN0piã€‚
åˆ›å»º Secret è¿™é‡Œæ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»ºå­˜æœ‰ç”¨æˆ·åå’Œå¯†ç çš„ Secret:
. codenew file=&amp;quot;pods/inject/secret.yaml&amp;rdquo; &amp;gt;}}
  åˆ›å»º Secret
kubectl create -f https://k8s.io/examples/pods/inject/secret.yaml .</description>
    </item>
    
    <item>
      <title>é€šè¿‡æ–‡ä»¶å°†Podä¿¡æ¯å‘ˆç°ç»™å®¹å™¨</title>
      <link>https://lijun.in/tasks/inject-data-application/downward-api-volume-expose-pod-information/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/inject-data-application/downward-api-volume-expose-pod-information/</guid>
      <description>æ­¤é¡µé¢æè¿°Podå¦‚ä½•ä½¿ç”¨DownwardAPIVolumeFileæŠŠè‡ªå·±çš„ä¿¡æ¯å‘ˆç°ç»™podä¸­è¿è¡Œçš„å®¹å™¨ã€‚DownwardAPIVolumeFileå¯ä»¥å‘ˆç°podçš„å­—æ®µå’Œå®¹å™¨å­—æ®µã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
Downward API æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å°†Podå’ŒContainerå­—æ®µå‘ˆç°ç»™è¿è¡Œä¸­çš„å®¹å™¨ï¼š
 ç¯å¢ƒå˜é‡ DownwardAPIVolumeFile  è¿™ä¸¤ç§å‘ˆç°Podå’ŒContainerå­—æ®µçš„æ–¹å¼éƒ½ç§°ä¸ºDownward APIã€‚
å­˜å‚¨Podå­—æ®µ åœ¨è¿™ä¸ªç»ƒä¹ ä¸­ï¼Œä½ å°†åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸€ä¸ªå®¹å™¨çš„podã€‚è¿™æ˜¯è¯¥podçš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;pods/inject/dapi-volume.yaml&amp;rdquo; &amp;gt;}}
åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°Podæœ‰ä¸€ä¸ªdownwardAPIç±»å‹çš„Volumeï¼Œå¹¶ä¸”æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„/etcã€‚
æŸ¥çœ‹downwardAPIä¸‹é¢çš„itemsæ•°ç»„ã€‚æ¯ä¸ªæ•°ç»„å…ƒç´ éƒ½æ˜¯ä¸€ä¸ª[DownwardAPIVolumeFile](/docs/resources-reference/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#downwardapivolumefile-v1-core)ã€‚ ç¬¬ä¸€ä¸ªå…ƒç´ æŒ‡ç¤ºPodçš„metadata.labelså­—æ®µçš„å€¼ä¿å­˜åœ¨åä¸ºlabelsçš„æ–‡ä»¶ä¸­ã€‚ ç¬¬äºŒä¸ªå…ƒç´ æŒ‡ç¤ºPodçš„annotationså­—æ®µçš„å€¼ä¿å­˜åœ¨åä¸ºannotationsçš„æ–‡ä»¶ä¸­ã€‚
. note &amp;gt;}} æœ¬ç¤ºä¾‹ä¸­çš„å­—æ®µæ˜¯Podå­—æ®µï¼Œä¸æ˜¯Podä¸­å®¹å™¨çš„å­—æ®µã€‚ . /note &amp;gt;}}
åˆ›å»º Podï¼š
kubectl apply -f https://k8s.io/examples/pods/inject/dapi-volume.yaml éªŒè¯Podä¸­çš„å®¹å™¨è¿è¡Œæ­£å¸¸ï¼š
kubectl get pods æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—ï¼š
kubectl logs kubernetes-downwardapi-volume-example è¾“å‡ºæ˜¾ç¤º labels å’Œ annotations æ–‡ä»¶çš„å†…å®¹ï¼š
cluster=&amp;#34;test-cluster1&amp;#34; rack=&amp;#34;rack-22&amp;#34; zone=&amp;#34;us-est-coast&amp;#34; build=&amp;#34;two&amp;#34; builder=&amp;#34;john-doe&amp;#34; è¿›å…¥Podä¸­è¿è¡Œçš„å®¹å™¨ï¼Œæ‰“å¼€ä¸€ä¸ªshellï¼š
kubectl exec -it kubernetes-downwardapi-volume-example -- sh åœ¨è¯¥shellä¸­ï¼ŒæŸ¥çœ‹labelsæ–‡ä»¶ï¼š</description>
    </item>
    
    <item>
      <title>é€šè¿‡ç¯å¢ƒå˜é‡å°†Podä¿¡æ¯å‘ˆç°ç»™å®¹å™¨</title>
      <link>https://lijun.in/tasks/inject-data-application/environment-variable-expose-pod-information/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/inject-data-application/environment-variable-expose-pod-information/</guid>
      <description>æ­¤é¡µé¢æ˜¾ç¤ºäº†Podå¦‚ä½•ä½¿ç”¨ç¯å¢ƒå˜é‡æŠŠè‡ªå·±çš„ä¿¡æ¯å‘ˆç°ç»™podä¸­è¿è¡Œçš„å®¹å™¨ã€‚ç¯å¢ƒå˜é‡å¯ä»¥å‘ˆç°podçš„å­—æ®µå’Œå®¹å™¨å­—æ®µã€‚
æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å°†Podå’ŒContainerå­—æ®µå‘ˆç°ç»™è¿è¡Œä¸­çš„å®¹å™¨ï¼š ç¯å¢ƒå˜é‡ å’Œ[DownwardAPIVolumeFiles](/docs/resources-reference/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#downwardapivolumefile-v1-core). è¿™ä¸¤ç§å‘ˆç°Podå’ŒContainerå­—æ®µçš„æ–¹å¼éƒ½ç§°ä¸ºDownward APIã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
Downward API æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å°†Podå’ŒContainerå­—æ®µå‘ˆç°ç»™è¿è¡Œä¸­çš„å®¹å™¨ï¼š
 ç¯å¢ƒå˜é‡ [DownwardAPIVolumeFiles](/docs/resources-reference/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#downwardapivolumefile-v1-core)  è¿™ä¸¤ç§å‘ˆç°Podå’ŒContainerå­—æ®µçš„æ–¹å¼éƒ½ç§°ä¸ºDownward APIã€‚
ç”¨Podå­—æ®µä½œä¸ºç¯å¢ƒå˜é‡çš„å€¼ åœ¨è¿™ä¸ªç»ƒä¹ ä¸­ï¼Œä½ å°†åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸€ä¸ªå®¹å™¨çš„podã€‚è¿™æ˜¯è¯¥podçš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;pods/inject/dapi-envars-pod.yaml&amp;rdquo; &amp;gt;}}
è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°äº”ä¸ªç¯å¢ƒå˜é‡ã€‚envå­—æ®µæ˜¯ä¸€ä¸ª[EnvVars](/docs/resources-reference/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#envvar-v1-core)ç±»å‹çš„æ•°ç»„ã€‚ æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æŒ‡å®šMY_NODE_NAMEè¿™ä¸ªç¯å¢ƒå˜é‡ä»Podçš„spec.nodeNameå­—æ®µè·å–å˜é‡å€¼ã€‚åŒæ ·ï¼Œå…¶å®ƒç¯å¢ƒå˜é‡ä¹Ÿæ˜¯ä»Podçš„å­—æ®µè·å–å®ƒä»¬çš„å˜é‡å€¼ã€‚
. note &amp;gt;}} æœ¬ç¤ºä¾‹ä¸­çš„å­—æ®µæ˜¯Podå­—æ®µï¼Œä¸æ˜¯Podä¸­å®¹å™¨çš„å­—æ®µã€‚ . /note &amp;gt;}}
åˆ›å»ºPodï¼š
kubectl apply -f https://k8s.io/examples/pods/inject/dapi-envars-pod.yaml éªŒè¯Podä¸­çš„å®¹å™¨è¿è¡Œæ­£å¸¸ï¼š
kubectl get pods æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼š
kubectl logs dapi-envars-fieldref è¾“å‡ºä¿¡æ¯æ˜¾ç¤ºäº†æ‰€é€‰æ‹©çš„ç¯å¢ƒå˜é‡çš„å€¼ï¼š
minikube dapi-envars-fieldref default 172.17.0.4 default è¦äº†è§£ä¸ºä»€ä¹ˆè¿™äº›å€¼åœ¨æ—¥å¿—ä¸­ï¼Œè¯·æŸ¥çœ‹é…ç½®æ–‡ä»¶ä¸­çš„command å’Œ argså­—æ®µã€‚ å½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œå®ƒå°†äº”ä¸ªç¯å¢ƒå˜é‡çš„å€¼å†™å…¥stdoutã€‚æ¯åç§’é‡å¤æ‰§è¡Œä¸€æ¬¡ã€‚</description>
    </item>
    
  </channel>
</rss>