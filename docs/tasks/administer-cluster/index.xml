<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ğŸ˜ - ç®¡ç†é›†ç¾¤ on Hugo ä¸»é¢˜çš„ Learn æ–‡æ¡£</title>
    <link>https://lijun.in/tasks/administer-cluster/</link>
    <description>Recent content in ğŸ˜ - ç®¡ç†é›†ç¾¤ on Hugo ä¸»é¢˜çš„ Learn æ–‡æ¡£</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    
	<atom:link href="https://lijun.in/tasks/administer-cluster/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Debug DNS æ–¹æ¡ˆ</title>
      <link>https://lijun.in/tasks/administer-cluster/dns-debugging-resolution/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/dns-debugging-resolution/</guid>
      <description>This page provides hints on diagnosing DNS problems.
&amp;ndash;&amp;gt;
è¿™ç¯‡æ–‡ç« æä¾›äº†ä¸€äº›å…³äº DNS é—®é¢˜è¯Šæ–­çš„æ–¹æ³•ã€‚
&amp;ndash;&amp;gt;
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}} Kubernetes 1.6 æˆ–è€…ä»¥ä¸Šç‰ˆæœ¬ã€‚ é›†ç¾¤å¿…é¡»ä½¿ç”¨äº† coredns (æˆ–è€… kube-dns)æ’ä»¶ã€‚  åˆ›å»ºä¸€ä¸ªç®€å•çš„ Pod ä½œä¸ºæµ‹è¯•ç¯å¢ƒ æ–°å»ºä¸€ä¸ªåä¸º busybox.yaml çš„æ–‡ä»¶å¹¶å¡«å…¥ä¸‹åˆ—å†…å®¹ï¼š
. codenew file=&amp;quot;admin/dns/busybox.yaml&amp;rdquo; &amp;gt;}}
ç„¶åä½¿ç”¨è¿™ä¸ªæ–‡ä»¶åˆ›å»ºä¸€ä¸ª Pod å¹¶éªŒè¯å…¶çŠ¶æ€ï¼š
kubectl create -f https://k8s.io/examples/admin/dns/busybox.yaml pod/busybox created kubectl get pods busybox NAME READY STATUS RESTARTS AGE busybox 1/1 Running 0 &amp;lt;some-time&amp;gt; åªè¦ Pod å¤„äº running çŠ¶æ€ï¼Œæ‚¨å°±å¯ä»¥åœ¨ç¯å¢ƒé‡Œæ‰§è¡Œ nslookup ã€‚ å¦‚æœæ‚¨çœ‹åˆ°ç±»ä¼¼ä¸‹åˆ—çš„å†…å®¹ï¼Œåˆ™è¡¨ç¤º DNS æ˜¯æ­£å¸¸è¿è¡Œçš„ã€‚</description>
    </item>
    
    <item>
      <title>IP Masquerade Agent ç”¨æˆ·æŒ‡å—</title>
      <link>https://lijun.in/tasks/administer-cluster/ip-masq-agent/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/ip-masq-agent/</guid>
      <description>æ­¤é¡µé¢å±•ç¤ºå¦‚ä½•é…ç½®å’Œå¯ç”¨ ip-masq-agentã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
IP Masquerade Agent ç”¨æˆ·æŒ‡å— ip-masq-agent é…ç½® iptables è§„åˆ™ä»¥éšè—ä½äºé›†ç¾¤èŠ‚ç‚¹ IP åœ°å€åé¢çš„ pod çš„ IP åœ°å€ã€‚ è¿™é€šå¸¸åœ¨å°†æµé‡å‘é€åˆ°é›†ç¾¤çš„ pod CIDR èŒƒå›´ä¹‹å¤–çš„ç›®çš„åœ°æ—¶ä½¿ç”¨ã€‚
å…³é”®è¯  NAT (ç½‘ç»œåœ°å€è§£æ) æ˜¯ä¸€ç§é€šè¿‡ä¿®æ”¹ IP åœ°å€å¤´ä¸­çš„æºå’Œ/æˆ–ç›®æ ‡åœ°å€ä¿¡æ¯å°†ä¸€ä¸ª IP åœ°å€é‡æ–°æ˜ å°„åˆ°å¦ä¸€ä¸ª IP åœ°å€çš„æ–¹æ³•ã€‚é€šå¸¸ç”±æ‰§è¡Œ IP è·¯ç”±çš„è®¾å¤‡æ‰§è¡Œã€‚   ä¼ªè£… NAT çš„ä¸€ç§å½¢å¼ï¼Œé€šå¸¸ç”¨äºæ‰§è¡Œå¤šå¯¹ä¸€åœ°å€è½¬æ¢ï¼Œå…¶ä¸­å¤šä¸ªæº IP åœ°å€è¢«éšè—åœ¨å•ä¸ªåœ°å€åé¢ï¼Œè¯¥åœ°å€é€šå¸¸æ˜¯æ‰§è¡Œ IP è·¯ç”±çš„è®¾å¤‡ã€‚åœ¨ Kubernetes ä¸­ï¼Œè¿™æ˜¯èŠ‚ç‚¹çš„ IP åœ°å€ã€‚   CIDR (æ— ç±»åˆ«åŸŸé—´è·¯ç”±) åŸºäºå¯å˜é•¿åº¦å­ç½‘æ©ç ï¼Œå…è®¸æŒ‡å®šä»»æ„é•¿åº¦çš„å‰ç¼€ã€‚CIDR å¼•å…¥äº†ä¸€ç§æ–°çš„ IP åœ°å€è¡¨ç¤ºæ–¹æ³•ï¼Œç°åœ¨é€šå¸¸ç§°ä¸ºCIDRè¡¨ç¤ºæ³•ï¼Œå…¶ä¸­åœ°å€æˆ–è·¯ç”±å‰ç¼€åæ·»åŠ ä¸€ä¸ªåç¼€ï¼Œç”¨æ¥è¡¨ç¤ºå‰ç¼€çš„ä½æ•°ï¼Œä¾‹å¦‚ 192.168.2.0/24ã€‚   æœ¬åœ°é“¾è·¯ æœ¬åœ°é“¾è·¯æ˜¯ä»…å¯¹ç½‘æ®µæˆ–ä¸»æœºæ‰€è¿æ¥çš„å¹¿æ’­åŸŸå†…çš„é€šä¿¡æœ‰æ•ˆçš„ç½‘ç»œåœ°å€ã€‚IPv4çš„æœ¬åœ°é“¾è·¯åœ°å€åœ¨ CIDR è¡¨ç¤ºæ³•çš„åœ°å€å— 169.</description>
    </item>
    
    <item>
      <title>Kubernetes äº‘ç®¡ç†æ§åˆ¶å™¨</title>
      <link>https://lijun.in/tasks/administer-cluster/running-cloud-controller/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/running-cloud-controller/</guid>
      <description>. feature-state state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
Kubernetes v1.6 åŒ…å«ä¸€ä¸ªæ–°çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå«åš cloud-controller-managerã€‚cloud-controller-manager æ˜¯ä¸€ä¸ªåµŒå…¥äº†ç‰¹å®šäº‘æœåŠ¡æ§åˆ¶å¾ªç¯é€»è¾‘çš„å®ˆæŠ¤è¿›ç¨‹ã€‚è¿™äº›ç‰¹å®šäº‘æœåŠ¡æ§åˆ¶å¾ªç¯é€»è¾‘æœ€åˆå­˜åœ¨äº kube-controller-manager ä¸­ã€‚ç”±äºäº‘æœåŠ¡æä¾›å•†å¼€å‘å’Œå‘å¸ƒçš„é€Ÿåº¦ä¸ Kubernetes é¡¹ç›®ä¸åŒï¼Œå°†æœåŠ¡æä¾›å•†ä¸“ç”¨ä»£ç ä» cloud-controller-manager äºŒè¿›åˆ¶ä¸­æŠ½è±¡å‡ºæ¥æœ‰åŠ©äºäº‘æœåŠ¡å‚å•†åœ¨ Kubernetes æ ¸å¿ƒä»£ç ä¹‹å¤–ç‹¬ç«‹è¿›è¡Œå¼€å‘ã€‚
cloud-controller-manager å¯ä»¥è¢«é“¾æ¥åˆ°ä»»ä½•æ»¡è¶³ cloudprovider.Interface çº¦æŸçš„äº‘æœåŠ¡æä¾›å•†ã€‚ä¸ºäº†å…¼å®¹æ—§ç‰ˆæœ¬ï¼ŒKubernetes æ ¸å¿ƒé¡¹ç›®ä¸­æä¾›çš„ cloud-controller-manager ä½¿ç”¨å’Œ kube-controller-manager ç›¸åŒçš„äº‘æœåŠ¡ç±»åº“ã€‚å·²ç»åœ¨ Kubernetes æ ¸å¿ƒé¡¹ç›®ä¸­æ”¯æŒçš„äº‘æœåŠ¡æä¾›å•†é¢„è®¡å°†é€šè¿‡ä½¿ç”¨ in-tree çš„ cloud-controller-manager è¿‡æ¸¡åˆ° Kubernetes æ ¸å¿ƒä¹‹å¤–ã€‚åœ¨å°†æ¥çš„ Kubernetes å‘å¸ƒä¸­ï¼Œæ‰€æœ‰çš„äº‘ç®¡ç†æ§åˆ¶å™¨å°†åœ¨ Kubernetes æ ¸å¿ƒé¡¹ç›®ä¹‹å¤–ï¼Œç”± sig é¢†å¯¼è€…æˆ–è€…äº‘æœåŠ¡å‚å•†è¿›è¡Œå¼€å‘ã€‚
ç®¡ç† éœ€æ±‚ æ¯ä¸ªäº‘æœåŠ¡éƒ½æœ‰ä¸€å¥—å„è‡ªçš„éœ€æ±‚ç”¨äºç³»ç»Ÿå¹³å°çš„é›†æˆï¼Œè¿™ä¸åº”ä¸è¿è¡Œ kube-controller-manager çš„éœ€æ±‚æœ‰å¤ªå¤§å·®å¼‚ã€‚ä½œä¸ºç»éªŒæ³•åˆ™ï¼Œä½ éœ€è¦ï¼š
 äº‘æœåŠ¡è®¤è¯ / æˆæƒï¼šæ‚¨çš„äº‘æœåŠ¡å¯èƒ½éœ€è¦ä½¿ç”¨ä»¤ç‰Œæˆ–è€… IAM è§„åˆ™ä»¥å…è®¸å¯¹å…¶ API çš„è®¿é—® kubernetes è®¤è¯ / æˆæƒï¼šcloud-controller-manager å¯èƒ½éœ€è¦ RBAC è§„åˆ™ä»¥è®¿é—® kubernetes apiserver é«˜å¯ç”¨ï¼šç±»ä¼¼äº kube-controller-managerï¼Œæ‚¨å¯èƒ½å¸Œæœ›é€šè¿‡ä¸»èŠ‚ç‚¹é€‰ä¸¾ï¼ˆé»˜è®¤å¼€å¯ï¼‰é…ç½®ä¸€ä¸ªé«˜å¯ç”¨çš„äº‘ç®¡ç†æ§åˆ¶å™¨ã€‚  è¿è¡Œäº‘ç®¡ç†æ§åˆ¶å™¨ æ‚¨éœ€è¦å¯¹é›†ç¾¤é…ç½®åšé€‚å½“çš„ä¿®æ”¹ä»¥æˆåŠŸåœ°è¿è¡Œäº‘ç®¡ç†æ§åˆ¶å™¨ï¼š
 ä¸€å®šä¸è¦ä¸º kube-apiserver å’Œ kube-controller-manager æŒ‡å®š --cloud-provider æ ‡å¿—ã€‚è¿™å°†ä¿è¯å®ƒä»¬ä¸ä¼šè¿è¡Œä»»ä½•äº‘æœåŠ¡ä¸“ç”¨å¾ªç¯é€»è¾‘ï¼Œè¿™å°†ä¼šç”±äº‘ç®¡ç†æ§åˆ¶å™¨è¿è¡Œã€‚æœªæ¥è¿™ä¸ªæ ‡è®°å°†è¢«åºŸå¼ƒå¹¶å»é™¤ã€‚ kubelet å¿…é¡»ä½¿ç”¨ --cloud-provider=external è¿è¡Œã€‚è¿™æ˜¯ä¸ºäº†ä¿è¯è®© kubelet çŸ¥é“åœ¨æ‰§è¡Œä»»ä½•ä»»åŠ¡å‰ï¼Œå®ƒå¿…é¡»è¢«äº‘ç®¡ç†æ§åˆ¶å™¨åˆå§‹åŒ–ã€‚  è¯·è®°ä½ï¼Œè®¾ç½®ç¾¤é›†ä½¿ç”¨äº‘ç®¡ç†æ§åˆ¶å™¨å°†ç”¨å¤šç§æ–¹å¼æ›´æ”¹ç¾¤é›†è¡Œä¸ºï¼š</description>
    </item>
    
    <item>
      <title>ä¸º Kubernetes è¿è¡Œ etcd é›†ç¾¤</title>
      <link>https://lijun.in/tasks/administer-cluster/configure-upgrade-etcd/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/configure-upgrade-etcd/</guid>
      <description>. glossary_definition term_id=&amp;quot;etcd&amp;rdquo; length=&amp;quot;all&amp;rdquo; prepend=&amp;quot;etcd æ˜¯ä¸€ä¸ª&amp;quot;&amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å…ˆå†³æ¡ä»¶   è¿è¡Œçš„ etcd é›†ç¾¤ä¸ªæ•°æˆå‘˜ä¸ºå¥‡æ•°ã€‚
  etcd æ˜¯ä¸€ä¸ª leader-based åˆ†å¸ƒå¼ç³»ç»Ÿã€‚ç¡®ä¿ä¸»èŠ‚ç‚¹å®šæœŸå‘æ‰€æœ‰ä»èŠ‚ç‚¹å‘é€å¿ƒè·³ï¼Œä»¥ä¿æŒé›†ç¾¤ç¨³å®šã€‚
  ç¡®ä¿ä¸å‘ç”Ÿèµ„æºä¸è¶³ã€‚
é›†ç¾¤çš„æ€§èƒ½å’Œç¨³å®šæ€§å¯¹ç½‘ç»œå’Œç£ç›˜ IO éå¸¸æ•æ„Ÿã€‚ä»»ä½•èµ„æºåŒ®ä¹éƒ½ä¼šå¯¼è‡´å¿ƒè·³è¶…æ—¶ï¼Œä»è€Œå¯¼è‡´é›†ç¾¤çš„ä¸ç¨³å®šã€‚ä¸ç¨³å®šçš„æƒ…å†µè¡¨æ˜æ²¡æœ‰é€‰å‡ºä»»ä½•ä¸»èŠ‚ç‚¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé›†ç¾¤ä¸èƒ½å¯¹å…¶å½“å‰çŠ¶æ€è¿›è¡Œä»»ä½•æ›´æ”¹ï¼Œè¿™æ„å‘³ç€ä¸èƒ½è°ƒåº¦æ–°çš„ podã€‚
  ä¿æŒç¨³å®šçš„ etcd é›†ç¾¤å¯¹ Kubernetes é›†ç¾¤çš„ç¨³å®šæ€§è‡³å…³é‡è¦ã€‚å› æ­¤ï¼Œè¯·åœ¨ä¸“ç”¨æœºå™¨æˆ–éš”ç¦»ç¯å¢ƒä¸Šè¿è¡Œ etcd é›†ç¾¤ï¼Œä»¥æ»¡è¶³æ‰€éœ€èµ„æºéœ€æ±‚ã€‚
  åœ¨ç”Ÿäº§ä¸­è¿è¡Œçš„ etcd çš„æœ€ä½æ¨èç‰ˆæœ¬æ˜¯ 3.2.10+ã€‚
  èµ„æºè¦æ±‚ ä½¿ç”¨æœ‰é™çš„èµ„æºè¿è¡Œ etcd åªé€‚åˆæµ‹è¯•ç›®çš„ã€‚ä¸ºäº†åœ¨ç”Ÿäº§ä¸­éƒ¨ç½²ï¼Œéœ€è¦å…ˆè¿›çš„ç¡¬ä»¶é…ç½®ã€‚åœ¨ç”Ÿäº§ä¸­éƒ¨ç½² etcd ä¹‹å‰ï¼Œè¯·æŸ¥çœ‹æ‰€éœ€èµ„æºå‚è€ƒæ–‡æ¡£ã€‚
å¯åŠ¨ etcd é›†ç¾¤ æœ¬èŠ‚ä»‹ç»å¦‚ä½•å¯åŠ¨å•èŠ‚ç‚¹å’Œå¤šèŠ‚ç‚¹ etcd é›†ç¾¤ã€‚
å•èŠ‚ç‚¹ etcd é›†ç¾¤ åªä¸ºæµ‹è¯•ç›®çš„ä½¿ç”¨å•èŠ‚ç‚¹ etcd é›†ç¾¤ã€‚</description>
    </item>
    
    <item>
      <title>ä¸ºç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹é¢„ç•™è®¡ç®—èµ„æº</title>
      <link>https://lijun.in/tasks/administer-cluster/reserve-compute-resources/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/reserve-compute-resources/</guid>
      <description>Kubernetes çš„èŠ‚ç‚¹å¯ä»¥æŒ‰ç…§ Capacity è°ƒåº¦ã€‚é»˜è®¤æƒ…å†µä¸‹ pod èƒ½å¤Ÿä½¿ç”¨èŠ‚ç‚¹å…¨éƒ¨å¯ç”¨å®¹é‡ã€‚è¿™æ˜¯ä¸ªé—®é¢˜ï¼Œå› ä¸ºèŠ‚ç‚¹è‡ªå·±é€šå¸¸è¿è¡Œäº†ä¸å°‘é©±åŠ¨ OS å’Œ Kubernetes çš„ç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹ã€‚é™¤éä¸ºè¿™äº›ç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹ç•™å‡ºèµ„æºï¼Œå¦åˆ™å®ƒä»¬å°†ä¸ pod äº‰å¤ºèµ„æºå¹¶å¯¼è‡´èŠ‚ç‚¹èµ„æºçŸ­ç¼ºé—®é¢˜ã€‚
kubelet å…¬å¼€äº†ä¸€ä¸ªåä¸º Node Allocatable çš„ç‰¹æ€§ï¼Œæœ‰åŠ©äºä¸ºç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹é¢„ç•™è®¡ç®—èµ„æºã€‚Kubernetes æ¨èé›†ç¾¤ç®¡ç†å‘˜æŒ‰ç…§æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„å·¥ä½œè´Ÿè½½å¯†åº¦é…ç½® Node Allocatableã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å¯åˆ†é…çš„èŠ‚ç‚¹ Node Capacity --------------------------- | kube-reserved | |-------------------------| | system-reserved | |-------------------------| | eviction-threshold | |-------------------------| | | | allocatable | | (available for pods) | | | | | --------------------------- Kubernetes èŠ‚ç‚¹ä¸Šçš„ Allocatable è¢«å®šä¹‰ä¸º pod å¯ç”¨è®¡ç®—èµ„æºé‡ã€‚è°ƒåº¦å™¨ä¸ä¼šè¶…é¢ç”³è¯· Allocatableã€‚ç›®å‰æ”¯æŒ CPU, memory å’Œ ephemeral-storage è¿™å‡ ä¸ªå‚æ•°ã€‚</description>
    </item>
    
    <item>
      <title>ä¸ºèŠ‚ç‚¹å‘å¸ƒæ‰©å±•èµ„æº</title>
      <link>https://lijun.in/tasks/administer-cluster/extended-resource-node/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/extended-resource-node/</guid>
      <description>æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•ä¸ºèŠ‚ç‚¹æŒ‡å®šæ‰©å±•èµ„æºã€‚ æ‰©å±•èµ„æºå…è®¸é›†ç¾¤ç®¡ç†å‘˜å‘å¸ƒèŠ‚ç‚¹çº§åˆ«çš„èµ„æºï¼Œè¿™äº›èµ„æºåœ¨ä¸è¿›è¡Œå‘å¸ƒçš„æƒ…å†µä¸‹æ— æ³•è¢« Kubernetes æ„ŸçŸ¥ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
è·å–æ‚¨çš„èŠ‚ç‚¹åç§° kubectl get nodes é€‰æ‹©æ‚¨çš„ä¸€ä¸ªèŠ‚ç‚¹ç”¨äºæ­¤ç»ƒä¹ ã€‚
åœ¨æ‚¨çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šå‘å¸ƒä¸€ç§æ–°çš„æ‰©å±•èµ„æº ä¸ºåœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šå‘å¸ƒä¸€ç§æ–°çš„æ‰©å±•èµ„æºï¼Œéœ€è¦å‘é€ä¸€ä¸ª HTTP PATCH è¯·æ±‚åˆ° Kubernetes API serverã€‚ ä¾‹å¦‚ï¼šå‡è®¾æ‚¨çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šå¸¦æœ‰å››ä¸ª dongle èµ„æºã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª PATCH è¯·æ±‚çš„ç¤ºä¾‹ï¼Œ è¯¥è¯·æ±‚ä¸ºæ‚¨çš„èŠ‚ç‚¹å‘å¸ƒå››ä¸ª dongle èµ„æºã€‚
PATCH /api/v1/nodes/&amp;lt;your-node-name&amp;gt;/status HTTP/1.1 Accept: application/json Content-Type: application/json-patch+json Host: k8s-master:8080 [ { &amp;#34;op&amp;#34;: &amp;#34;add&amp;#34;, &amp;#34;path&amp;#34;: &amp;#34;/status/capacity/example.com~1dongle&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;4&amp;#34; } ] æ³¨æ„ï¼šKubernetes ä¸éœ€è¦äº†è§£ dongle èµ„æºçš„å«ä¹‰å’Œç”¨é€”ã€‚ å‰é¢çš„ PATCH è¯·æ±‚ä»…ä»…å‘Šè¯‰ Kubernetes æ‚¨çš„èŠ‚ç‚¹æ‹¥æœ‰å››ä¸ªæ‚¨ç§°ä¹‹ä¸º dongle çš„ä¸œè¥¿ã€‚
å¯åŠ¨ä¸€ä¸ªä»£ç†ï¼ˆproxyï¼‰ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥å¾ˆå®¹æ˜“åœ°å‘ Kubernetes API server å‘é€è¯·æ±‚ï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ CoreDNS è¿›è¡ŒæœåŠ¡å‘ç°</title>
      <link>https://lijun.in/tasks/administer-cluster/coredns/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/coredns/</guid>
      <description>æ­¤é¡µé¢ä»‹ç»äº† CoreDNS å‡çº§è¿‡ç¨‹ä»¥åŠå¦‚ä½•å®‰è£… CoreDNS è€Œä¸æ˜¯ kube-dnsã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å…³äº CoreDNS CoreDNS æ˜¯ä¸€ä¸ªçµæ´»å¯æ‰©å±•çš„ DNS æœåŠ¡å™¨ï¼Œå¯ä»¥ä½œä¸º Kubernetes é›†ç¾¤ DNSã€‚ä¸ Kubernetes ä¸€æ ·ï¼ŒCoreDNS é¡¹ç›®ç”± . glossary_tooltip text=&amp;quot;CNCF&amp;rdquo; term_id=&amp;quot;cncf&amp;rdquo; &amp;gt;}} æ‰˜ç®¡ã€‚
é€šè¿‡åœ¨ç°æœ‰çš„é›†ç¾¤ä¸­æ›¿æ¢ kube-dnsï¼Œå¯ä»¥åœ¨é›†ç¾¤ä¸­ä½¿ç”¨ CoreDNS ä»£æ›¿ kube-dns éƒ¨ç½²ï¼Œæˆ–è€…ä½¿ç”¨ kubeadm ç­‰å·¥å…·æ¥ä¸ºæ‚¨éƒ¨ç½²å’Œå‡çº§é›†ç¾¤ã€‚
å®‰è£… CoreDNS æœ‰å…³æ‰‹åŠ¨éƒ¨ç½²æˆ–æ›¿æ¢ kube-dnsï¼Œè¯·å‚é˜… CoreDNS GitHub å·¥ç¨‹ã€‚
è¿ç§»åˆ° CoreDNS ä½¿ç”¨ kubeadm å‡çº§ç°æœ‰é›†ç¾¤ åœ¨ Kubernetes 1.10 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œå½“æ‚¨ä½¿ç”¨ kubeadm å‡çº§ä½¿ç”¨ kube-dns çš„é›†ç¾¤æ—¶ï¼Œæ‚¨è¿˜å¯ä»¥è¿ç§»åˆ° CoreDNSã€‚ åœ¨æœ¬ä¾‹ä¸­ kubeadm å°†ç”Ÿæˆ CoreDNS é…ç½®ï¼ˆ&amp;ldquo;Corefile&amp;rdquo;ï¼‰åŸºäº kube-dns ConfigMapï¼Œä¿å­˜è”é‚¦ã€å­˜æ ¹åŸŸå’Œä¸Šæ¸¸åç§°æœåŠ¡å™¨çš„é…ç½®ã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ KMS æä¾›å•†è¿›è¡Œæ•°æ®åŠ å¯†</title>
      <link>https://lijun.in/tasks/administer-cluster/kms-provider/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/kms-provider/</guid>
      <description>æœ¬é¡µå±•ç¤ºäº†å¦‚ä½•é…ç½®ç§˜é’¥ç®¡ç†æœåŠ¡â€”â€” Key Management Service (KMS) æä¾›å•†å’Œæ’ä»¶ä»¥å¯ç”¨æ•°æ®åŠ å¯†ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}   éœ€è¦ Kubernetes 1.10.0 æˆ–æ›´æ–°ç‰ˆæœ¬   éœ€è¦ etcd v3 æˆ–æ›´æ–°ç‰ˆæœ¬  . feature-state for_k8s_version=&amp;quot;v1.12&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
KMS åŠ å¯†æä¾›å•†ä½¿ç”¨å°å¥—åŠ å¯†æ¨¡å‹æ¥åŠ å¯† etcd ä¸­çš„æ•°æ®ã€‚æ•°æ®ä½¿ç”¨æ•°æ®åŠ å¯†ç§˜é’¥ï¼ˆDEKï¼‰åŠ å¯†ï¼›æ¯æ¬¡åŠ å¯†éƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„ DEKã€‚è¿™äº› DEK ç»ä¸€ä¸ªç§˜é’¥åŠ å¯†ç§˜é’¥ï¼ˆKEKï¼‰åŠ å¯†ååœ¨ä¸€ä¸ªè¿œç«¯çš„ KMS ä¸­å­˜å‚¨å’Œç®¡ç†ã€‚KMS æä¾›å•†ä½¿ç”¨ gRPC ä¸ä¸€ä¸ªç‰¹å®šçš„ KMS æ’ä»¶é€šä¿¡ã€‚è¿™ä¸ª KMS æ’ä»¶ä½œä¸ºä¸€ä¸ª gRPC æœåŠ¡å™¨è¢«éƒ¨ç½²åœ¨ Kubernetes ä¸»æœåŠ¡å™¨çš„åŒä¸€ä¸ªä¸»æœºä¸Šï¼Œè´Ÿè´£ä¸è¿œç«¯ KMS çš„é€šä¿¡ã€‚
é…ç½® KMS æä¾›å•† ä¸ºäº†åœ¨ API æœåŠ¡å™¨ä¸Šé…ç½® KMS æä¾›å•†ï¼Œåœ¨åŠ å¯†é…ç½®æ–‡ä»¶ä¸­çš„æä¾›å•†æ•°ç»„ä¸­åŠ å…¥ä¸€ä¸ªç±»å‹ä¸º kms çš„æä¾›å•†ï¼Œå¹¶è®¾ç½®ä¸‹åˆ—å±æ€§ï¼š
 name: KMS æ’ä»¶çš„æ˜¾ç¤ºåç§°ã€‚ endpoint: gRPC æœåŠ¡å™¨ï¼ˆKMS æ’ä»¶ï¼‰çš„ç›‘å¬åœ°å€ã€‚è¯¥ç«¯ç‚¹æ˜¯ä¸€ä¸ª UNIX çš„å¥—æ¥å­—ã€‚ cachesize: ä»¥æ˜æ–‡ç¼“å­˜çš„æ•°æ®åŠ å¯†ç§˜é’¥ï¼ˆDEKsï¼‰çš„æ•°é‡ã€‚ä¸€æ—¦è¢«ç¼“å­˜ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ DEKs è€Œæ— éœ€å¦å¤–è°ƒç”¨ KMSï¼›è€Œæœªè¢«ç¼“å­˜çš„ DEKs éœ€è¦è°ƒç”¨ä¸€æ¬¡ KMS æ‰èƒ½è§£åŒ…ã€‚ timeout: åœ¨è¿”å›ä¸€ä¸ªé”™è¯¯ä¹‹å‰ï¼Œkube-apiserver ç­‰å¾… kms-plugin å“åº”çš„æ—¶é—´ï¼ˆé»˜è®¤æ˜¯ 3 ç§’ï¼‰ã€‚  å‚è§ ç†è§£é™æ€æ•°æ®åŠ å¯†é…ç½®</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Kubernetes API è®¿é—®é›†ç¾¤</title>
      <link>https://lijun.in/tasks/administer-cluster/access-cluster-api/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/access-cluster-api/</guid>
      <description>æœ¬é¡µå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Kubernetes API è®¿é—®é›†ç¾¤
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
è®¿é—®é›†ç¾¤ API ä½¿ç”¨ kubectl è¿›è¡Œé¦–æ¬¡è®¿é—® é¦–æ¬¡è®¿é—® Kubernetes API æ—¶ï¼Œè¯·ä½¿ç”¨ Kubernetes å‘½ä»¤è¡Œå·¥å…· kubectl ã€‚
è¦è®¿é—®é›†ç¾¤ï¼Œæ‚¨éœ€è¦çŸ¥é“é›†ç¾¤ä½ç½®å¹¶æ‹¥æœ‰è®¿é—®å®ƒçš„å‡­è¯ã€‚é€šå¸¸ï¼Œå½“æ‚¨å®Œæˆå…¥é—¨æŒ‡å—æ—¶ï¼Œè¿™ä¼šè‡ªåŠ¨è®¾ç½®å®Œæˆï¼Œæˆ–è€…ç”±å…¶ä»–äººè®¾ç½®å¥½é›†ç¾¤å¹¶å°†å‡­è¯å’Œä½ç½®æä¾›ç»™æ‚¨ã€‚
ä½¿ç”¨æ­¤å‘½ä»¤æ£€æŸ¥ kubectl å·²çŸ¥çš„ä½ç½®å’Œå‡­è¯ï¼š
kubectl config view è®¸å¤š[æ ·ä¾‹](https://github.com/kubernetes/examples/tree/. param &amp;ldquo;githubbranch&amp;rdquo; &amp;gt;}}/)æä¾›äº†ä½¿ç”¨ kubectl çš„ä»‹ç»ã€‚å®Œæ•´æ–‡æ¡£è¯·è§ kubectl æ‰‹å†Œã€‚
ç›´æ¥è®¿é—® REST API kubectl å¤„ç†å¯¹ API æœåŠ¡å™¨çš„å®šä½å’Œèº«ä»½éªŒè¯ã€‚å¦‚æœæ‚¨æƒ³é€šè¿‡ http å®¢æˆ·ç«¯ï¼ˆå¦‚ curl æˆ– wgetï¼Œæˆ–æµè§ˆå™¨ï¼‰ç›´æ¥è®¿é—® REST APIï¼Œæ‚¨å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å¯¹ API æœåŠ¡å™¨è¿›è¡Œå®šä½å’Œèº«ä»½éªŒè¯ï¼š
 ä»¥ä»£ç†æ¨¡å¼è¿è¡Œ kubectlï¼ˆæ¨èï¼‰ã€‚ æ¨èä½¿ç”¨æ­¤æ–¹æ³•ï¼Œå› ä¸ºå®ƒç”¨å­˜å‚¨çš„ apiserver ä½ç½®å¹¶ä½¿ç”¨è‡ªç­¾åè¯ä¹¦éªŒè¯ API æœåŠ¡å™¨çš„æ ‡è¯†ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•æ— æ³•è¿›è¡Œä¸­é—´äººï¼ˆMITMï¼‰æ”»å‡»ã€‚ å¦å¤–ï¼Œæ‚¨å¯ä»¥ç›´æ¥ä¸º http å®¢æˆ·ç«¯æä¾›ä½ç½®å’Œèº«ä»½è®¤è¯ã€‚è¿™é€‚ç”¨äºè¢«ä»£ç†æ··æ·†çš„å®¢æˆ·ç«¯ä»£ç ã€‚ä¸ºé˜²æ­¢ä¸­é—´äººæ”»å‡»ï¼Œæ‚¨éœ€è¦å°†æ ¹è¯ä¹¦å¯¼å…¥æµè§ˆå™¨ã€‚  ä½¿ç”¨ Go æˆ– Python å®¢æˆ·ç«¯åº“å¯ä»¥åœ¨ä»£ç†æ¨¡å¼ä¸‹è®¿é—® kubectlã€‚</description>
    </item>
    
    <item>
      <title>å…³é”®æ’ä»¶ Pod çš„è°ƒåº¦ä¿è¯</title>
      <link>https://lijun.in/tasks/administer-cluster/guaranteed-scheduling-critical-addon-pods/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/guaranteed-scheduling-critical-addon-pods/</guid>
      <description>é™¤äº†åœ¨ä¸»æœºä¸Šè¿è¡Œçš„ Kubernetes æ ¸å¿ƒç»„ä»¶ï¼ˆå¦‚ api-server ã€scheduler ã€controller-managerï¼‰ä¹‹å¤–ï¼Œè¿˜æœ‰è®¸å¤šæ’ä»¶ï¼Œç”±äºå„ç§åŸå› ï¼Œ å¿…é¡»åœ¨å¸¸è§„é›†ç¾¤èŠ‚ç‚¹ï¼ˆè€Œä¸æ˜¯ Kubernetes ä¸»èŠ‚ç‚¹ï¼‰ä¸Šè¿è¡Œã€‚ å…¶ä¸­ä¸€äº›æ’ä»¶å¯¹äºåŠŸèƒ½å®Œå¤‡çš„ç¾¤é›†è‡³å…³é‡è¦ï¼Œä¾‹å¦‚ Heapsterã€DNS å’Œ UIã€‚ å¦‚æœå…³é”®æ’ä»¶è¢«é€å‡ºï¼ˆæ‰‹åŠ¨æˆ–ä½œä¸ºå‡çº§ç­‰å…¶ä»–æ“ä½œçš„å‰¯ä½œç”¨ï¼‰æˆ–è€…å˜æˆæŒ‚èµ·çŠ¶æ€ï¼Œç¾¤é›†å¯èƒ½ä¼šåœæ­¢æ­£å¸¸å·¥ä½œã€‚ å…³é”®æ’ä»¶è¿›å…¥æŒ‚èµ·çŠ¶æ€çš„ä¾‹å­æœ‰ï¼šé›†ç¾¤åˆ©ç”¨ç‡è¿‡é«˜ï¼›è¢«é€å‡ºçš„å…³é”®æ’ä»¶ Pod é‡Šæ”¾äº†ç©ºé—´ï¼Œä½†è¯¥ç©ºé—´è¢«ä¹‹å‰æ‚¬å†³çš„ Pod å ç”¨ï¼›ç”±äºå…¶å®ƒåŸå› å¯¼è‡´èŠ‚ç‚¹ä¸Šå¯ç”¨èµ„æºçš„æ€»é‡å‘ç”Ÿå˜åŒ–ã€‚
æ ‡è®°å…³é”® Pod è¦å°† pod æ ‡è®°ä¸ºå…³é”®æ€§ï¼ˆcriticalï¼‰ï¼Œpod å¿…é¡»åœ¨ kube-system å‘½åç©ºé—´ä¸­è¿è¡Œï¼ˆå¯é€šè¿‡å‚æ•°é…ç½®ï¼‰ã€‚ åŒæ—¶ï¼Œéœ€è¦å°† priorityClassName è®¾ç½®ä¸º system-cluster-critical æˆ– system-node-critical ï¼Œåè€…æ˜¯æ•´ä¸ªç¾¤é›†çš„æœ€é«˜çº§åˆ«ã€‚ æˆ–è€…ï¼Œä¹Ÿå¯ä»¥ä¸º Pod æ·»åŠ åä¸º scheduler.alpha.kubernetes.io/critical-podã€å€¼ä¸ºç©ºå­—ç¬¦ä¸²çš„æ³¨è§£ã€‚ ä¸è¿‡ï¼Œè¿™ä¸€æ³¨è§£ä» 1.13 ç‰ˆæœ¬å¼€å§‹ä¸å†æ¨èä½¿ç”¨ï¼Œå¹¶å°†åœ¨ 1.14 ä¸­åˆ é™¤ã€‚</description>
    </item>
    
    <item>
      <title>å¯ç”¨ç«¯ç‚¹åˆ‡ç‰‡</title>
      <link>https://lijun.in/tasks/administer-cluster/enabling-endpointslices/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/enabling-endpointslices/</guid>
      <description>æœ¬é¡µæä¾›å¯ç”¨ Kubernetes ç«¯ç‚¹åˆ‡ç‰‡çš„æ€»è§ˆ
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ä»‹ç» ç«¯ç‚¹åˆ‡ç‰‡ä¸º Kubernetes ç«¯ç‚¹æä¾›äº†å¯ä¼¸ç¼©å’Œå¯æ‰©å±•çš„æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒä»¬å»ºç«‹åœ¨ç«¯ç‚¹æä¾›çš„åŠŸèƒ½åŸºç¡€ä¹‹ä¸Šï¼Œå¹¶ä»¥å¯ä¼¸ç¼©çš„æ–¹å¼è¿›è¡Œæ‰©å±•ã€‚å½“æœåŠ¡å…·æœ‰å¤§é‡ï¼ˆ&amp;gt;100ï¼‰ç½‘ç»œç«¯ç‚¹ï¼Œ å®ƒä»¬å°†è¢«åˆ†æˆå¤šä¸ªè¾ƒå°çš„ç«¯ç‚¹åˆ‡ç‰‡èµ„æºï¼Œè€Œä¸æ˜¯å•ä¸ªå¤§å‹ç«¯ç‚¹èµ„æºã€‚
å¯ç”¨ç«¯ç‚¹åˆ‡ç‰‡ . feature-state for_k8s_version=&amp;quot;v1.16&amp;rdquo; state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
. note &amp;gt;}}
å°½ç®¡ç«¯ç‚¹åˆ‡ç‰‡æœ€ç»ˆå¯èƒ½ä¼šå–ä»£ç«¯ç‚¹ï¼Œä½†è®¸å¤š Kubernetes ç»„ä»¶ä»ç„¶ä¾èµ–äºç«¯ç‚¹ã€‚ç›®å‰ï¼Œå¯ç”¨ç«¯ç‚¹åˆ‡ç‰‡åº”è¯¥è¢«è§†ä¸ºé›†ç¾¤ä¸­ç«¯ç‚¹çš„è¡¥å……ï¼Œè€Œä¸æ˜¯å®ƒä»¬çš„æ›¿ä»£ã€‚
. /note &amp;gt;}}
ä½œä¸º Alpha åŠŸèƒ½ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒKubernetes ä¸­æœªå¯ç”¨ç«¯ç‚¹åˆ‡ç‰‡ã€‚å¯ç”¨ç«¯ç‚¹åˆ‡ç‰‡éœ€è¦å¯¹ Kubernetes é›†ç¾¤è¿›è¡Œå¤šè¾¾ 3 é¡¹é…ç½®ä¿®æ”¹ã€‚
è¦å¯ç”¨åŒ…æ‹¬ç«¯ç‚¹åˆ‡ç‰‡çš„ Discovery API ç»„ï¼Œè¯·ä½¿ç”¨è¿è¡Œæ—¶é…ç½®æ ‡å¿—ï¼ˆ--runtime-config=discovery.k8s.io/v1alpha1=trueï¼‰ã€‚
è¯¥é€»è¾‘è´Ÿè´£ç›‘è§†æœåŠ¡ï¼Œpod å’ŒèŠ‚ç‚¹ä»¥åŠåˆ›å»ºæˆ–æ›´æ–°ä¸ä¹‹å…³è”ï¼Œåœ¨ç«¯ç‚¹åˆ‡ç‰‡æ§åˆ¶å™¨å†…çš„ç«¯ç‚¹åˆ‡ç‰‡ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤åŠŸèƒ½å¤„äºç¦ç”¨çŠ¶æ€ï¼Œä½†å¯ä»¥é€šè¿‡å¯ç”¨åœ¨ kube-controller-manager æ§åˆ¶å™¨çš„æ ‡å¿—ï¼ˆ--controllers=endpointsliceï¼‰æ¥å¼€å¯ã€‚
å¯¹äºåƒ kube-proxy è¿™æ ·çš„ Kubernetes ç»„ä»¶çœŸæ­£å¼€å§‹ä½¿ç”¨ç«¯ç‚¹åˆ‡ç‰‡ï¼Œéœ€è¦å¼€å¯ç«¯ç‚¹åˆ‡ç‰‡åŠŸèƒ½æ ‡å¿—ï¼ˆ--feature-gates=EndpointSlice=trueï¼‰ã€‚
ä½¿ç”¨ç«¯ç‚¹åˆ‡ç‰‡ åœ¨é›†ç¾¤ä¸­å®Œå…¨å¯ç”¨ç«¯ç‚¹åˆ‡ç‰‡çš„æƒ…å†µä¸‹ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°å¯¹åº”çš„æ¯ä¸ªç«¯ç‚¹èµ„æºçš„ç«¯ç‚¹åˆ‡ç‰‡èµ„æºã€‚é™¤äº†å…¼å®¹ç°æœ‰çš„ç«¯ç‚¹åŠŸèƒ½ï¼Œç«¯ç‚¹åˆ‡ç‰‡åº”åŒ…æ‹¬æ‹“æ‰‘ç­‰æ–°çš„ä¿¡æ¯ã€‚å®ƒä»¬å°†ä½¿é›†ç¾¤ä¸­ç½‘ç»œç«¯ç‚¹å…·æœ‰æ›´å¼ºçš„å¯ä¼¸ç¼©æ€§ï¼Œå¯æ‰©å±•æ€§ã€‚</description>
    </item>
    
    <item>
      <title>å‘½åç©ºé—´æ¼”ç»ƒ</title>
      <link>https://lijun.in/tasks/administer-cluster/namespaces-walkthrough/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/namespaces-walkthrough/</guid>
      <description>Kubernetes . glossary_tooltip text=&amp;quot;å‘½åç©ºé—´&amp;rdquo; term_id=&amp;quot;namespace&amp;rdquo; &amp;gt;}} æœ‰åŠ©äºä¸åŒçš„é¡¹ç›®ã€å›¢é˜Ÿæˆ–å®¢æˆ·å»å…±äº« Kubernetes é›†ç¾¤ã€‚
åå­—ç©ºé—´é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°è¿™ç‚¹ï¼š
 ä¸ºåå­—è®¾ç½®ä½œç”¨åŸŸ. ä¸ºé›†ç¾¤ä¸­çš„éƒ¨åˆ†èµ„æºå…³è”é‰´æƒå’Œç­–ç•¥çš„æœºåˆ¶ã€‚  ä½¿ç”¨å¤šä¸ªå‘½åç©ºé—´æ˜¯å¯é€‰çš„ã€‚
æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Kubernetes å‘½åç©ºé—´ç»†åˆ†ç¾¤é›†ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ç¯å¢ƒå‡†å¤‡ æ­¤ç¤ºä¾‹ä½œå¦‚ä¸‹å‡è®¾ï¼š
 æ‚¨å·²æ‹¥æœ‰ä¸€ä¸ª é…ç½®å¥½çš„ Kubernetes é›†ç¾¤ã€‚ æ‚¨å·²å¯¹ Kubernetes çš„ Pods, Services å’Œ Deployments æœ‰åŸºæœ¬ç†è§£ã€‚   ç†è§£é»˜è®¤å‘½åç©ºé—´  é»˜è®¤æƒ…å†µä¸‹ï¼ŒKubernetes é›†ç¾¤ä¼šåœ¨é…ç½®é›†ç¾¤æ—¶å®ä¾‹åŒ–ä¸€ä¸ªé»˜è®¤å‘½åç©ºé—´ï¼Œç”¨ä»¥å­˜æ”¾é›†ç¾¤æ‰€ä½¿ç”¨çš„é»˜è®¤ Podsã€Services å’Œ Deployments é›†åˆã€‚
å‡è®¾æ‚¨æœ‰ä¸€ä¸ªæ–°çš„é›†ç¾¤ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹æ“ä½œæ¥æ£€æŸ¥å¯ç”¨çš„å‘½åç©ºé—´ï¼š
kubectl get namespaces NAME STATUS AGE default Active 13m åˆ›å»ºæ–°çš„å‘½åç©ºé—´ åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸¤ä¸ªé¢å¤–çš„ Kubernetes å‘½åç©ºé—´æ¥ä¿å­˜æˆ‘ä»¬çš„å†…å®¹ã€‚
æˆ‘ä»¬å‡è®¾ä¸€ä¸ªåœºæ™¯ï¼ŒæŸç»„ç»‡æ­£åœ¨ä½¿ç”¨å…±äº«çš„ Kubernetes é›†ç¾¤æ¥æ”¯æŒå¼€å‘å’Œç”Ÿäº§ï¼š</description>
    </item>
    
    <item>
      <title>åœ¨ Kubernetes é›†ç¾¤ä¸­ä½¿ç”¨ NodeLocal DNSCache</title>
      <link>https://lijun.in/tasks/administer-cluster/nodelocaldns/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/nodelocaldns/</guid>
      <description>æœ¬é¡µæ¦‚è¿°äº† Kubernetes ä¸­çš„ NodeLocal DNSCache åŠŸèƒ½ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å¼•è¨€ NodeLocal DNSCache é€šè¿‡åœ¨é›†ç¾¤èŠ‚ç‚¹ä¸Šä½œä¸º DaemonSet è¿è¡Œ dns ç¼“å­˜ä»£ç†æ¥æé«˜é›†ç¾¤ DNS æ€§èƒ½ã€‚ åœ¨å½“ä»Šçš„ä½“ç³»ç»“æ„ä¸­ï¼Œå¤„äº ClusterFirst DNS æ¨¡å¼çš„ Pod å¯ä»¥è¿æ¥åˆ° kube-dns serviceIP è¿›è¡Œ DNS æŸ¥è¯¢ã€‚ é€šè¿‡ kube-proxy æ·»åŠ çš„ iptables è§„åˆ™å°†å…¶è½¬æ¢ä¸º kube-dns/CoreDNS ç«¯ç‚¹ã€‚ å€ŸåŠ©è¿™ç§æ–°æ¶æ„ï¼ŒPods å°†å¯ä»¥è®¿é—®åœ¨åŒä¸€èŠ‚ç‚¹ä¸Šè¿è¡Œçš„ dns ç¼“å­˜ä»£ç†ï¼Œä»è€Œé¿å…äº† iptables DNAT è§„åˆ™å’Œè¿æ¥è·Ÿè¸ªã€‚ æœ¬åœ°ç¼“å­˜ä»£ç†å°†æŸ¥è¯¢ kube-dns æœåŠ¡ä»¥è·å–é›†ç¾¤ä¸»æœºåçš„ç¼“å­˜ç¼ºå¤±ï¼ˆé»˜è®¤ä¸º cluster.local åç¼€ï¼‰ã€‚
åŠ¨æœº  ä½¿ç”¨å½“å‰çš„ DNS ä½“ç³»ç»“æ„ï¼Œå¦‚æœæ²¡æœ‰æœ¬åœ° kube-dns/CoreDNS å®ä¾‹ï¼Œåˆ™å…·æœ‰æœ€é«˜ DNS QPS çš„ Pod å¯èƒ½å¿…é¡»å»¶ä¼¸åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ã€‚ åœ¨è¿™ç§è„šæœ¬ä¸‹ï¼Œæ‹¥æœ‰æœ¬åœ°ç¼“å­˜å°†æœ‰åŠ©äºæ”¹å–„å»¶è¿Ÿã€‚   è·³è¿‡ iptables DNAT å’Œè¿æ¥è·Ÿè¸ªå°†æœ‰åŠ©äºå‡å°‘ conntrack ç«äº‰å¹¶é¿å… UDP DNS æ¡ç›®å¡«æ»¡ conntrack è¡¨ã€‚   ä»æœ¬åœ°ç¼“å­˜ä»£ç†åˆ° kube-dns æœåŠ¡çš„è¿æ¥å¯ä»¥å‡çº§åˆ° TCP ã€‚ TCP conntrack æ¡ç›®å°†åœ¨è¿æ¥å…³é—­æ—¶è¢«åˆ é™¤ï¼Œç›¸å UDP æ¡ç›®å¿…é¡»è¶…æ—¶(é»˜è®¤ nf_conntrack_udp_timeout æ˜¯ 30 ç§’)   å°† DNS æŸ¥è¯¢ä» UDP å‡çº§åˆ° TCP å°†å‡å°‘å½’å› äºä¸¢å¼ƒçš„ UDP æ•°æ®åŒ…å’Œ DNS è¶…æ—¶çš„å°¾éƒ¨ç­‰å¾…æ—¶é—´ï¼Œé€šå¸¸é•¿è¾¾ 30 ç§’ï¼ˆ3 æ¬¡é‡è¯•+ 10 ç§’è¶…æ—¶ï¼‰ã€‚   åœ¨èŠ‚ç‚¹çº§åˆ«å¯¹ dns è¯·æ±‚çš„åº¦é‡å’Œå¯è§æ€§ã€‚   å¯ä»¥é‡æ–°å¯ç”¨è´Ÿç¼“å­˜ï¼Œä»è€Œå‡å°‘å¯¹ kube-dns æœåŠ¡çš„æŸ¥è¯¢æ•°é‡ã€‚  æ¶æ„å›¾ å¯ç”¨ NodeLocal DNSCache ä¹‹åï¼Œè¿™æ˜¯ DNS æŸ¥è¯¢æ‰€éµå¾ªçš„è·¯å¾„ï¼š</description>
    </item>
    
    <item>
      <title>åœ¨ Kubernetes é›†ç¾¤ä¸­ä½¿ç”¨ sysctl</title>
      <link>https://lijun.in/tasks/administer-cluster/sysctl-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/sysctl-cluster/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;v1.11&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•é€šè¿‡ sysctl æ¥å£åœ¨ Kubernetes é›†ç¾¤ä¸­é…ç½®å’Œä½¿ç”¨å†…æ ¸å‚æ•°ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
è·å– Sysctl çš„å‚æ•°åˆ—è¡¨ åœ¨ Linux ä¸­ï¼Œç®¡ç†å‘˜å¯ä»¥é€šè¿‡ sysctl æ¥å£ä¿®æ”¹å†…æ ¸è¿è¡Œæ—¶çš„å‚æ•°ã€‚åœ¨ /proc/sys/ è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹å­˜æ”¾è®¸å¤šå†…æ ¸å‚æ•°ã€‚è¿™äº›å‚æ•°æ¶‰åŠäº†å¤šä¸ªå†…æ ¸å­ç³»ç»Ÿï¼Œå¦‚ï¼š
 å†…æ ¸å­ç³»ç»Ÿ (é€šå¸¸å‰ç¼€ä¸º: kernel.) ç½‘ç»œå­ç³»ç»Ÿ (é€šå¸¸å‰ç¼€ä¸º: net.) è™šæ‹Ÿå†…å­˜å­ç³»ç»Ÿ (é€šå¸¸å‰ç¼€ä¸º: vm.) MDADM å­ç³»ç»Ÿ (é€šå¸¸å‰ç¼€ä¸º: dev.) æ›´å¤šå­ç³»ç»Ÿè¯·å‚è§ å†…æ ¸æ–‡æ¡£ã€‚  è‹¥è¦è·å–å®Œæ•´çš„å‚æ•°åˆ—è¡¨ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤
$ sudo sysctl -a å¯ç”¨éå®‰å…¨çš„ Sysctl å‚æ•° sysctl å‚æ•°åˆ†ä¸º å®‰å…¨ å’Œ éå®‰å…¨çš„ã€‚å®‰å…¨ sysctl å‚æ•°é™¤äº†éœ€è¦è®¾ç½®æ°å½“çš„å‘½åç©ºé—´å¤–ï¼Œåœ¨åŒä¸€ node ä¸Šçš„ä¸åŒ Pod ä¹‹é—´ä¹Ÿå¿…é¡»æ˜¯ ç›¸äº’éš”ç¦»çš„ã€‚è¿™æ„å‘³ç€åœ¨ Pod ä¸Šè®¾ç½® å®‰å…¨ sysctl å‚æ•°</description>
    </item>
    
    <item>
      <title>åœ¨å®æ—¶é›†ç¾¤ä¸Šé‡æ–°é…ç½®èŠ‚ç‚¹çš„ Kubelet</title>
      <link>https://lijun.in/tasks/administer-cluster/reconfigure-kubelet/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/reconfigure-kubelet/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;v1.11&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
åŠ¨æ€Kubeleté…ç½® å¼•å¯¼ä½ åœ¨ä¸€ä¸ªè¿è¡Œçš„ Kubernetes é›†ç¾¤ä¸Šæ›´æ”¹æ¯ä¸€ä¸ª Kubelet çš„é…ç½®ï¼Œé€šè¿‡éƒ¨ç½² ConfigMap å¹¶é…ç½®æ¯ä¸ªèŠ‚ç‚¹æ¥ä½¿ç”¨å®ƒã€‚
. warning &amp;gt;}}
è­¦å‘Šï¼šæ‰€æœ‰Kubeleté…ç½®å‚æ•°éƒ½å¯ä»¥åŠ¨æ€åœ°æ›´æ”¹ï¼Œä½†è¿™å¯¹æŸäº›å‚æ•°æ¥è¯´æ˜¯ä¸å®‰å…¨çš„ã€‚åœ¨å†³å®šåŠ¨æ€æ›´æ”¹å‚æ•°ä¹‹å‰ï¼Œä½ éœ€è¦æ·±åˆ»ç†è§£è¿™ç§å˜åŒ–å°†å¦‚ä½•å½±å“ä½ çš„é›†ç¾¤çš„è¡Œä¸ºã€‚ åœ¨æŠŠä¸€ç»„èŠ‚ç‚¹æ¨å¹¿åˆ°é›†ç¾¤èŒƒå›´ä¹‹å‰ï¼Œéƒ½è¦ä»”ç»†åœ°æµ‹è¯•è¿™äº›èŠ‚ç‚¹ä¸Šçš„é…ç½®å˜åŒ–ã€‚ä¸é…ç½®ç›¸å…³çš„å»ºè®®å¯ä»¥åœ¨å…·ä½“çš„æ–‡ä»¶ä¸‹æ‰¾åˆ°ï¼Œå†…è” KubeletConfiguration ç±»å‹æ–‡æ¡£ã€‚ . /warning &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  Kubernetes v1.11 æˆ–è€…æ›´é«˜ç‰ˆæœ¬é…ç½®åœ¨ä¸»èŠ‚ç‚¹å’ŒèŠ‚ç‚¹ä¸Š kubectl v1.11 æˆ–è€…æ›´é«˜ç‰ˆæœ¬å’Œé›†ç¾¤é…ç½®é€šä¿¡ The Kubelet --dynamic-config-dir flag å¿…é¡»è®¾ç½®åœ¨èŠ‚ç‚¹çš„å¯å†™ç›®å½•ä¸Š  åœ¨ä½ é›†ç¾¤ä¸­çš„ä¸€ä¸ªå®æ—¶èŠ‚ç‚¹ä¸Šé…ç½®Kubelet åŸºæœ¬å·¥ä½œæµç¨‹æ¦‚è¿° åœ¨å®æ—¶é›†ç¾¤ä¸­é…ç½® Kubelet çš„åŸºæœ¬å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š
 ç¼–å†™ä¸€ä¸ª YAML æˆ– JSON çš„é…ç½®æ–‡ä»¶åŒ…å« Kubelet çš„é…ç½®ã€‚ å°†æ­¤æ–‡ä»¶åŒ…è£…åœ¨ ConfigMap ä¸­å¹¶å°†å…¶ä¿å­˜åˆ° Kubernetes æ§åˆ¶å¹³é¢ã€‚ æ›´æ–° Kubelet çš„ç›¸åº”èŠ‚ç‚¹å¯¹è±¡ä»¥ä½¿ç”¨æ­¤ ConfigMapã€‚  æ¯ä¸ª Kubelet éƒ½ä¼šåœ¨å…¶å„è‡ªçš„èŠ‚ç‚¹å¯¹è±¡ä¸ŠæŸ¥çœ‹é…ç½®å¼•ç”¨ã€‚å½“æ­¤å¼•ç”¨æ›´æ”¹æ—¶ï¼ŒKubelet å°†ä¸‹è½½æ–°é…ç½®ï¼Œ æ›´æ–°æœ¬åœ°å¼•ç”¨ä»¥å¼•ç”¨è¯¥æ–‡ä»¶ï¼Œç„¶åé€€å‡ºã€‚ è¦æƒ³ä½¿è¯¥åŠŸèƒ½æ­£å¸¸åœ°å·¥ä½œï¼Œæ‚¨å¿…é¡»è¿è¡Œæ“ä½œç³»ç»Ÿçº§åˆ«çš„æœåŠ¡ç®¡ç†å™¨ï¼ˆå¦‚systemdï¼‰ï¼Œå¦‚æœé€€å‡ºï¼Œå°†é‡å¯Kubeletã€‚ å½“Kubeleté‡æ–°å¯åŠ¨æ—¶ï¼Œå®ƒå°†å¼€å§‹ä½¿ç”¨æ–°é…ç½®ã€‚</description>
    </item>
    
    <item>
      <title>å£°æ˜ç½‘ç»œç­–ç•¥</title>
      <link>https://lijun.in/tasks/administer-cluster/declare-network-policy/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/declare-network-policy/</guid>
      <description>æœ¬æ–‡å¯ä»¥å¸®åŠ©æ‚¨å¼€å§‹ä½¿ç”¨ Kubernetes çš„ NetworkPolicy API å£°æ˜ç½‘ç»œç­–ç•¥å»ç®¡ç† Pod ä¹‹é—´çš„é€šä¿¡
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} æ‚¨é¦–å…ˆéœ€è¦æœ‰ä¸€ä¸ªæ”¯æŒç½‘ç»œç­–ç•¥çš„ Kubernetes é›†ç¾¤ã€‚å·²ç»æœ‰è®¸å¤šæ”¯æŒ NetworkPolicy çš„ç½‘ç»œæä¾›å•†ï¼ŒåŒ…æ‹¬ï¼š
 Calico Romana Weave ç½‘ç»œ  æ³¨æ„ï¼šä»¥ä¸Šåˆ—è¡¨æ˜¯æ ¹æ®äº§å“åç§°æŒ‰å­—æ¯é¡ºåºæ’åºï¼Œè€Œä¸æ˜¯æŒ‰æ¨èæˆ–åå¥½æ’åºã€‚ä¸‹é¢ç¤ºä¾‹å¯¹äºä½¿ç”¨äº†ä¸Šé¢ä»»ä½•æä¾›å•†çš„ Kubernetes é›†ç¾¤éƒ½æ˜¯æœ‰æ•ˆçš„
åˆ›å»ºä¸€ä¸ªnginx deployment å¹¶ä¸”é€šè¿‡æœåŠ¡å°†å…¶æš´éœ² ä¸ºäº†æŸ¥çœ‹ Kubernetes ç½‘ç»œç­–ç•¥æ˜¯æ€æ ·å·¥ä½œçš„ï¼Œå¯ä»¥ä»åˆ›å»ºä¸€ä¸ªnginx deployment å¹¶ä¸”é€šè¿‡æœåŠ¡å°†å…¶æš´éœ²å¼€å§‹
$ kubectl run nginx --image=nginx --replicas=2 deployment &amp;quot;nginx&amp;quot; created $ kubectl expose deployment nginx --port=80 service &amp;quot;nginx&amp;quot; exposed åœ¨ default å‘½åç©ºé—´ä¸‹è¿è¡Œäº†ä¸¤ä¸ª nginx podï¼Œè€Œä¸”é€šè¿‡ä¸€ä¸ªåå­—ä¸º nginx çš„æœåŠ¡è¿›è¡Œäº†æš´éœ²
$ kubectl get svc,pod NAME CLUSTER-IP EXTERNAL-IP PORT(S) AGE svc/kubernetes 10.100.0.1 &amp;lt;none&amp;gt; 443/TCP 46m svc/nginx 10.</description>
    </item>
    
    <item>
      <title>å¼€å‘äº‘æ§åˆ¶å™¨ç®¡ç†å™¨</title>
      <link>https://lijun.in/tasks/administer-cluster/developing-cloud-controller-manager/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/developing-cloud-controller-manager/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;v1.11&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
åœ¨å³å°†å‘å¸ƒçš„ç‰ˆæœ¬ä¸­ï¼Œäº‘æ§åˆ¶å™¨ç®¡ç†å™¨å°†æ˜¯æŠŠ Kubernetes ä¸ä»»ä½•äº‘é›†æˆçš„é¦–é€‰æ–¹å¼ã€‚ è¿™å°†ç¡®ä¿é©±åŠ¨å¯ä»¥ç‹¬ç«‹äºæ ¸å¿ƒ Kubernetes å‘å¸ƒå‘¨æœŸå¼€å‘å…¶åŠŸèƒ½ã€‚
. feature-state for_k8s_version=&amp;quot;1.8&amp;rdquo; state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
åœ¨è®¨è®ºå¦‚ä½•æ„å»ºè‡ªå·±çš„äº‘æ§åˆ¶å™¨ç®¡ç†å™¨ä¹‹å‰ï¼Œäº†è§£æœ‰å…³å®ƒå¦‚ä½•å·¥ä½œçš„ä¸€äº›èƒŒæ™¯çŸ¥è¯†æ˜¯æœ‰å¸®åŠ©çš„ã€‚äº‘æ§åˆ¶å™¨ç®¡ç†å™¨æ˜¯æ¥è‡ª kube-controller-manager çš„ä»£ç ï¼Œåˆ©ç”¨ Go æ¥å£å…è®¸æ’å…¥ä»»ä½•äº‘çš„å®ç°ã€‚å¤§å¤šæ•°æ¡†æ¶å’Œé€šç”¨æ§åˆ¶å™¨çš„å®ç°åœ¨ coreï¼Œä½†åªè¦æ»¡è¶³ äº‘æä¾›è€…æ¥å£ï¼Œå®ƒå°±ä¼šå§‹ç»ˆæ‰§è¡Œå®ƒæ‰€æä¾›çš„äº‘æ¥å£ã€‚
ä¸ºäº†æ·±å…¥äº†è§£å®æ–½ç»†èŠ‚ï¼Œæ‰€æœ‰äº‘æ§åˆ¶å™¨ç®¡ç†å™¨éƒ½å°†ä» Kubernetes æ ¸å¿ƒå¯¼å…¥ä¾èµ–åŒ…ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯æ¯ä¸ªé¡¹ç›®éƒ½ä¼šé€šè¿‡è°ƒç”¨ cloudprovider.RegisterCloudProvider æ¥æ³¨å†Œè‡ªå·±çš„é©±åŠ¨ï¼Œæ›´æ–°å¯ç”¨é©±åŠ¨çš„å…¨å±€å˜é‡ã€‚
å¼€å‘ Out of Tree è¦ä¸ºæ‚¨çš„äº‘æ„å»ºä¸€ä¸ª out-of-tree äº‘æ§åˆ¶å™¨ç®¡ç†å™¨ï¼Œè¯·æŒ‰ç…§ä¸‹åˆ—æ­¥éª¤æ“ä½œï¼š
 ä½¿ç”¨æ»¡è¶³ cloudprovider.Interface çš„å®ç°åˆ›å»ºä¸€ä¸ª go åŒ…ã€‚ ä½¿ç”¨æ¥è‡ª Kubernetes æ ¸å¿ƒåŒ…çš„ cloud-controller-manager ä¸­çš„ main.go ä½œä¸º main.go çš„æ¨¡æ¿ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œå”¯ä¸€çš„åŒºåˆ«åº”è¯¥æ˜¯å°†å¯¼å…¥çš„äº‘åŒ…ã€‚ åœ¨ main.go ä¸­å¯¼å…¥ä½ çš„äº‘åŒ…ï¼Œç¡®ä¿ä½ çš„åŒ…æœ‰ä¸€ä¸ª init å—æ¥è¿è¡Œ cloudprovider.RegisterCloudProviderã€‚  ç”¨ç°æœ‰çš„ out-of-tree äº‘é©±åŠ¨ä½œä¸ºä¾‹å­å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ° æ¸…å•ã€‚
In Tree å¯¹äº in-tree é©±åŠ¨ï¼Œæ‚¨å¯ä»¥å°† in-tree äº‘æ§åˆ¶å™¨ç®¡ç†å™¨ä½œä¸ºç¾¤é›†ä¸­çš„ Daemonset è¿è¡Œã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… è¿è¡Œçš„äº‘æ§åˆ¶å™¨ç®¡ç†å™¨æ–‡æ¡£ã€‚</description>
    </item>
    
    <item>
      <title>æ§åˆ¶èŠ‚ç‚¹ä¸Šçš„ CPU ç®¡ç†ç­–ç•¥</title>
      <link>https://lijun.in/tasks/administer-cluster/cpu-management-policies/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/cpu-management-policies/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;v1.12&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
æŒ‰ç…§è®¾è®¡ï¼ŒKubernetes å¯¹ pod æ‰§è¡Œç›¸å…³çš„å¾ˆå¤šæ–¹é¢è¿›è¡Œäº†æŠ½è±¡ï¼Œä½¿å¾—ç”¨æˆ·ä¸å¿…å…³å¿ƒã€‚ç„¶ è€Œï¼Œä¸ºäº†æ­£å¸¸è¿è¡Œï¼Œæœ‰äº›å·¥ä½œè´Ÿè½½è¦æ±‚åœ¨å»¶è¿Ÿå’Œ/æˆ–æ€§èƒ½æ–¹é¢æœ‰æ›´å¼ºçš„ä¿è¯ã€‚ ä¸ºæ­¤ï¼Œkubelet æä¾›æ–¹æ³•æ¥å®ç°æ›´å¤æ‚çš„è´Ÿè½½æ”¾ç½®ç­–ç•¥ï¼ŒåŒæ—¶ä¿æŒæŠ½è±¡ï¼Œé¿å…æ˜¾å¼çš„æ”¾ç½®æŒ‡ä»¤ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
CPU ç®¡ç†ç­–ç•¥ é»˜è®¤æƒ…å†µä¸‹ï¼Œkubelet ä½¿ç”¨ CFS é…é¢ æ¥æ‰§è¡Œ pod çš„ CPU çº¦æŸã€‚å½“èŠ‚ç‚¹ä¸Šè¿è¡Œäº†å¾ˆå¤š CPU å¯†é›†çš„ pod æ—¶ï¼Œå·¥ä½œè´Ÿè½½å¯èƒ½ä¼šè¿ç§»åˆ°ä¸åŒçš„ CPU æ ¸ï¼Œè¿™å–å†³äºè°ƒåº¦æ—¶ pod æ˜¯å¦è¢«æ‰¼åˆ¶ï¼Œä»¥åŠå“ªäº› CPU æ ¸æ˜¯å¯ç”¨çš„ã€‚è®¸å¤šå·¥ä½œè´Ÿè½½å¯¹è¿™ç§è¿ç§»ä¸æ•æ„Ÿï¼Œå› æ­¤æ— éœ€ä»»ä½•å¹²é¢„å³å¯æ­£å¸¸å·¥ä½œã€‚
ç„¶è€Œï¼Œæœ‰äº›å·¥ä½œè´Ÿè½½çš„æ€§èƒ½æ˜æ˜¾åœ°å—åˆ° CPU ç¼“å­˜äº²å’Œæ€§ä»¥åŠè°ƒåº¦å»¶è¿Ÿçš„å½±å“ï¼Œå¯¹æ­¤ï¼Œkubelet æä¾›äº†å¯é€‰çš„ CPU ç®¡ç†ç­–ç•¥ï¼Œæ¥ç¡®å®šèŠ‚ç‚¹ä¸Šçš„ä¸€äº›åˆ†é…åå¥½ã€‚
é…ç½® CPU ç®¡ç†å™¨ï¼ˆCPU Managerï¼‰ä½œä¸º alpha ç‰¹æ€§å¼•å…¥ Kubernetes 1.8 ç‰ˆæœ¬ã€‚ä» 1.10 ç‰ˆæœ¬å¼€å§‹ï¼Œä½œä¸º beta ç‰¹æ€§é»˜è®¤å¼€å¯ã€‚
CPU ç®¡ç†ç­–ç•¥é€šè¿‡ kubelet å‚æ•° --cpu-manager-policy æ¥æŒ‡å®šã€‚æ”¯æŒä¸¤ç§ç­–ç•¥ï¼š
 none: é»˜è®¤ç­–ç•¥ï¼Œè¡¨ç¤ºç°æœ‰çš„è°ƒåº¦è¡Œä¸ºã€‚ static: å…è®¸ä¸ºèŠ‚ç‚¹ä¸Šå…·æœ‰æŸäº›èµ„æºç‰¹å¾çš„ pod èµ‹äºˆå¢å¼ºçš„ CPU äº²å’Œæ€§å’Œç‹¬å æ€§ã€‚  CPU ç®¡ç†å™¨å®šæœŸé€šè¿‡ CRI å†™å…¥èµ„æºæ›´æ–°ï¼Œä»¥ä¿è¯å†…å­˜ä¸­ CPU åˆ†é…ä¸ cgroupfs ä¸€è‡´ã€‚åŒæ­¥é¢‘ç‡é€šè¿‡æ–°å¢çš„ Kubelet é…ç½®å‚æ•° --cpu-manager-reconcile-period æ¥è®¾ç½®ã€‚ å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä¸ --node-status-update-frequency çš„å‘¨æœŸç›¸åŒã€‚</description>
    </item>
    
    <item>
      <title>æ§åˆ¶èŠ‚ç‚¹ä¸Šçš„æ‹“æ‰‘ç®¡ç†ç­–ç•¥</title>
      <link>https://lijun.in/tasks/administer-cluster/topology-manager/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/topology-manager/</guid>
      <description>. feature-state state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
è¶Šæ¥è¶Šå¤šçš„ç³»ç»Ÿåˆ©ç”¨ CPU å’Œç¡¬ä»¶åŠ é€Ÿå™¨çš„ç»„åˆæ¥æ”¯æŒå¯¹å»¶è¿Ÿè¦æ±‚è¾ƒé«˜çš„ä»»åŠ¡å’Œé«˜ååé‡çš„å¹¶è¡Œè®¡ç®—ã€‚ è¿™ç±»è´Ÿè½½åŒ…æ‹¬ç”µä¿¡ã€ç§‘å­¦è®¡ç®—ã€æœºå™¨å­¦ä¹ ã€é‡‘èæœåŠ¡å’Œæ•°æ®åˆ†æç­‰ã€‚ æ­¤ç±»æ··åˆç³»ç»Ÿå³ç”¨äºæ„é€ è¿™äº›é«˜æ€§èƒ½ç¯å¢ƒã€‚
ä¸ºäº†è·å¾—æœ€ä½³æ€§èƒ½ï¼Œéœ€è¦è¿›è¡Œä¸ CPU éš”ç¦»ã€å†…å­˜å’Œè®¾å¤‡å±€éƒ¨æ€§æœ‰å…³çš„ä¼˜åŒ–ã€‚ ä½†æ˜¯ï¼Œåœ¨ Kubernetes ä¸­ï¼Œè¿™äº›ä¼˜åŒ–ç”±å„è‡ªç‹¬ç«‹çš„ç»„ä»¶é›†åˆæ¥å¤„ç†ã€‚
æ‹“æ‰‘ç®¡ç†å™¨ï¼ˆTopology Managerï¼‰ æ˜¯ä¸€ä¸ª Kubelet çš„ä¸€éƒ¨åˆ†ï¼Œæ—¨åœ¨åè°ƒè´Ÿè´£è¿™äº›ä¼˜åŒ–çš„ä¸€ç»„ç»„ä»¶ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
æ‹“æ‰‘ç®¡ç†å™¨å¦‚ä½•å·¥ä½œ åœ¨å¼•å…¥æ‹“æ‰‘ç®¡ç†å™¨ä¹‹å‰ï¼Œ Kubernetes ä¸­çš„ CPU å’Œè®¾å¤‡ç®¡ç†å™¨ç›¸äº’ç‹¬ç«‹åœ°åšå‡ºèµ„æºåˆ†é…å†³ç­–ã€‚ è¿™å¯èƒ½ä¼šå¯¼è‡´åœ¨å¤šå¤„ç†ç³»ç»Ÿä¸Šå‡ºç°å¹¶éæœŸæœ›çš„èµ„æºåˆ†é…ï¼›ç”±äºè¿™äº›ä¸æœŸæœ›ç›¸å·¦çš„åˆ†é…ï¼Œå¯¹æ€§èƒ½æˆ–å»¶è¿Ÿæ•æ„Ÿçš„åº”ç”¨å°†å—åˆ°å½±å“ã€‚ è¿™é‡Œçš„ä¸ç¬¦åˆæœŸæœ›æ„æŒ‡ï¼Œä¾‹å¦‚ï¼Œ CPU å’Œè®¾å¤‡æ˜¯ä»ä¸åŒçš„ NUMA èŠ‚ç‚¹åˆ†é…çš„ï¼Œå› æ­¤ä¼šå¯¼è‡´é¢å¤–çš„å»¶è¿Ÿã€‚
æ‹“æ‰‘ç®¡ç†å™¨æ˜¯ä¸€ä¸ª Kubelet ç»„ä»¶ï¼Œæ‰®æ¼”ä¿¡æ¯æºçš„è§’è‰²ï¼Œä»¥ä¾¿å…¶ä»– Kubelet ç»„ä»¶å¯ä»¥åšå‡ºä¸æ‹“æ‰‘ç»“æ„ç›¸å¯¹åº”çš„èµ„æºåˆ†é…å†³å®šã€‚
æ‹“æ‰‘ç®¡ç†å™¨ä¸ºç»„ä»¶æä¾›äº†ä¸€ä¸ªç§°ä¸º å»ºè®®ä¾›åº”è€…ï¼ˆHint Providersï¼‰ çš„æ¥å£ï¼Œä»¥å‘é€å’Œæ¥æ”¶æ‹“æ‰‘ä¿¡æ¯ã€‚ æ‹“æ‰‘ç®¡ç†å™¨å…·æœ‰ä¸€ç»„èŠ‚ç‚¹çº§ç­–ç•¥ï¼Œå…·ä½“è¯´æ˜å¦‚ä¸‹ã€‚
æ‹“æ‰‘ç®¡ç†å™¨ä» å»ºè®®æä¾›è€… æ¥æ”¶æ‹“æ‰‘ä¿¡æ¯ï¼Œä½œä¸ºè¡¨ç¤ºå¯ç”¨çš„ NUMA èŠ‚ç‚¹å’Œé¦–é€‰åˆ†é…æŒ‡ç¤ºçš„ä½æ©ç ã€‚ æ‹“æ‰‘ç®¡ç†å™¨ç­–ç•¥å¯¹æ‰€æä¾›çš„å»ºè®®æ‰§è¡Œä¸€ç»„æ“ä½œï¼Œå¹¶æ ¹æ®ç­–ç•¥å¯¹æç¤ºè¿›è¡Œçº¦å‡ä»¥å¾—åˆ°æœ€ä¼˜è§£ï¼›å¦‚æœå­˜å‚¨äº†ä¸é¢„æœŸä¸ç¬¦çš„å»ºè®®ï¼Œåˆ™è¯¥å»ºè®®çš„ä¼˜é€‰å­—æ®µå°†è¢«è®¾ç½®ä¸º falseã€‚ åœ¨å½“å‰ç­–ç•¥ä¸­ï¼Œé¦–é€‰çš„æ˜¯æœ€çª„çš„ä¼˜é€‰æ©ç ã€‚ æ‰€é€‰å»ºè®®å°†è¢«å­˜å‚¨ä¸ºæ‹“æ‰‘ç®¡ç†å™¨çš„ä¸€éƒ¨åˆ†ã€‚ å–å†³äºæ‰€é…ç½®çš„ç­–ç•¥ï¼Œæ‰€é€‰å»ºè®®å¯ç”¨æ¥å†³å®šèŠ‚ç‚¹æ¥å—æˆ–æ‹’ç» Pod ã€‚ ä¹‹åï¼Œå»ºè®®ä¼šè¢«å­˜å‚¨åœ¨æ‹“æ‰‘ç®¡ç†å™¨ä¸­ï¼Œä¾› å»ºè®®æä¾›è€… è¿›è¡Œèµ„æºåˆ†é…å†³ç­–æ—¶ä½¿ç”¨ã€‚
æ‹“æ‰‘ç®¡ç†å™¨ç­–ç•¥ å½“å‰æ‹“æ‰‘ç®¡ç†å™¨ï¼š</description>
    </item>
    
    <item>
      <title>æ­å»ºé«˜å¯ç”¨çš„ Kubernetes Masters</title>
      <link>https://lijun.in/tasks/administer-cluster/highly-available-master/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/highly-available-master/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;1.5&amp;rdquo; state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
æ‚¨å¯ä»¥åœ¨è°·æ­Œè®¡ç®—å¼•æ“ï¼ˆGCEï¼‰çš„ kubeup æˆ– kube-down è„šæœ¬ä¸­å¤åˆ¶ Kubernetes Masterã€‚ æœ¬æ–‡æè¿°äº†å¦‚ä½•ä½¿ç”¨ kube-up/down è„šæœ¬æ¥ç®¡ç†é«˜å¯ç”¨ï¼ˆHAï¼‰çš„ Masterï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ GCE å®ç°é«˜å¯ç”¨ Masterã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å¯åŠ¨ä¸€ä¸ªå…¼å®¹é«˜å¯ç”¨çš„é›†ç¾¤ è¦åˆ›å»ºä¸€ä¸ªæ–°çš„å…¼å®¹é«˜å¯ç”¨çš„é›†ç¾¤ï¼Œæ‚¨å¿…é¡»åœ¨ kubeup è„šæœ¬ä¸­è®¾ç½®ä»¥ä¸‹æ ‡å¿—:
  MULTIZONE=true - ä¸ºäº†é˜²æ­¢ä»ä¸åŒäº Master é»˜è®¤åŒºåŸŸçš„åŒºåŸŸä¸­åˆ é™¤ kubelets å‰¯æœ¬ã€‚å¦‚æœæ‚¨å¸Œæœ›åœ¨ä¸åŒçš„åŒºåŸŸè¿è¡Œ Master å‰¯æœ¬ï¼Œé‚£ä¹ˆè¿™ä¸€é¡¹æ˜¯å¿…éœ€å¹¶ä¸”æ¨èçš„ã€‚
  ENABLE_ETCD_QUORUM_READ=true - ç¡®ä¿ä»æ‰€æœ‰ API æœåŠ¡å™¨è¯»å–æ•°æ®æ—¶å°†è¿”å›æœ€æ–°çš„æ•°æ®ã€‚å¦‚æœä¸º trueï¼Œè¯»æ“ä½œå°†è¢«å®šå‘åˆ° leader etcd å‰¯æœ¬ã€‚å¯ä»¥é€‰æ‹©å°†è¿™ä¸ªå€¼è®¾ç½®ä¸º trueï¼Œé‚£ä¹ˆè¯»å–å°†æ›´å¯é ï¼Œä½†ä¹Ÿä¼šæ›´æ…¢ã€‚
  æ‚¨è¿˜å¯ä»¥æŒ‡å®šä¸€ä¸ª GCE åŒºåŸŸï¼Œåœ¨è¿™é‡Œåˆ›å»ºç¬¬ä¸€ä¸ª Master å‰¯æœ¬ã€‚è®¾ç½®ä»¥ä¸‹æ ‡å¿—:
 KUBE_GCE_ZONE=zone - å°†è¿è¡Œç¬¬ä¸€ä¸ª Master å‰¯æœ¬çš„åŒºåŸŸã€‚  ä¸‹é¢çš„å‘½ä»¤æ¼”ç¤ºåœ¨ GCE europe-west1-b åŒºåŸŸä¸­è®¾ç½®ä¸€ä¸ªå…¼å®¹é«˜å¯ç”¨çš„é›†ç¾¤:</description>
    </item>
    
    <item>
      <title>æ”¹å˜é»˜è®¤ StorageClass</title>
      <link>https://lijun.in/tasks/administer-cluster/change-default-storage-class/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/change-default-storage-class/</guid>
      <description>æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•æ”¹å˜é»˜è®¤çš„ Storage Classï¼Œå®ƒç”¨äºä¸ºæ²¡æœ‰ç‰¹æ®Šéœ€æ±‚çš„ PersistentVolumeClaims é…ç½® volumesã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ä¸ºä»€ä¹ˆè¦æ”¹å˜é»˜è®¤ storage classï¼Ÿ å–å†³äºå®‰è£…æ¨¡å¼ï¼Œæ‚¨çš„ Kubernetes é›†ç¾¤å¯èƒ½å’Œä¸€ä¸ªè¢«æ ‡è®°ä¸ºé»˜è®¤çš„å·²æœ‰ StorageClass ä¸€èµ·éƒ¨ç½²ã€‚è¿™ä¸ªé»˜è®¤çš„ StorageClass ä»¥åå°†è¢«ç”¨äºåŠ¨æ€çš„ä¸ºæ²¡æœ‰ç‰¹å®š storage class éœ€æ±‚çš„ PersistentVolumeClaims é…ç½®å­˜å‚¨ã€‚æ›´å¤šç»†èŠ‚è¯·æŸ¥çœ‹ PersistentVolumeClaim æ–‡æ¡£ã€‚
é¢„å…ˆå®‰è£…çš„é»˜è®¤ StorageClass å¯èƒ½ä¸èƒ½å¾ˆå¥½çš„é€‚åº”æ‚¨æœŸæœ›çš„å·¥ä½œè´Ÿè½½ï¼›ä¾‹å¦‚ï¼Œå®ƒé…ç½®çš„å­˜å‚¨å¯èƒ½å¤ªè¿‡æ˜‚è´µã€‚å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œæ‚¨å¯ä»¥æ”¹å˜é»˜è®¤ StorageClassï¼Œæˆ–è€…å®Œå…¨ç¦ç”¨å®ƒä»¥é˜²æ­¢åŠ¨æ€é…ç½®å­˜å‚¨ã€‚
ç®€å•çš„åˆ é™¤é»˜è®¤ StorageClass å¯èƒ½è¡Œä¸é€šï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šè¢«æ‚¨é›†ç¾¤ä¸­çš„æ‰©å±•ç®¡ç†å™¨è‡ªåŠ¨é‡å»ºã€‚è¯·æŸ¥é˜…æ‚¨çš„å®‰è£…æ–‡æ¡£ä¸­å…³äºæ‰©å±•ç®¡ç†å™¨çš„ç»†èŠ‚ï¼Œä»¥åŠå¦‚ä½•ç¦ç”¨å•ä¸ªæ‰©å±•ã€‚
æ”¹å˜é»˜è®¤ StorageClass   åˆ—å‡ºæ‚¨é›†ç¾¤ä¸­çš„ StorageClassesï¼š
kubectl get storageclass è¾“å‡ºç±»ä¼¼è¿™æ ·ï¼š
NAME PROVISIONER AGE standard (default) kubernetes.io/gce-pd 1d gold kubernetes.io/gce-pd 1d é»˜è®¤ StorageClass ä»¥ (default) æ ‡è®°ã€‚
  æ ‡è®°é»˜è®¤ StorageClass éé»˜è®¤ï¼š</description>
    </item>
    
    <item>
      <title>æ›´æ”¹ PersistentVolume çš„å›æ”¶ç­–ç•¥</title>
      <link>https://lijun.in/tasks/administer-cluster/change-pv-reclaim-policy/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/change-pv-reclaim-policy/</guid>
      <description>æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•æ›´æ”¹ Kubernetes PersistentVolume çš„å›æ”¶ç­–ç•¥ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ä¸ºä»€ä¹ˆè¦æ›´æ”¹ PersistentVolume çš„å›æ”¶ç­–ç•¥ PersistentVolumes å¯ä»¥æœ‰å¤šç§å›æ”¶ç­–ç•¥ï¼ŒåŒ…æ‹¬ &amp;ldquo;Retain&amp;rdquo;ã€&amp;ldquo;Recycle&amp;rdquo; å’Œ &amp;ldquo;Delete&amp;rdquo;ã€‚å¯¹äºåŠ¨æ€é…ç½®çš„ PersistentVolumes æ¥è¯´ï¼Œé»˜è®¤å›æ”¶ç­–ç•¥ä¸º &amp;ldquo;Delete&amp;rdquo;ã€‚è¿™è¡¨ç¤ºå½“ç”¨æˆ·åˆ é™¤å¯¹åº”çš„ PersistentVolumeClaim æ—¶ï¼ŒåŠ¨æ€é…ç½®çš„ volume å°†è¢«è‡ªåŠ¨åˆ é™¤ã€‚å¦‚æœ volume åŒ…å«é‡è¦æ•°æ®æ—¶ï¼Œè¿™ç§è‡ªåŠ¨è¡Œä¸ºå¯èƒ½æ˜¯ä¸åˆé€‚çš„ã€‚é‚£ç§æƒ…å†µä¸‹ï¼Œæ›´é€‚åˆä½¿ç”¨ &amp;ldquo;Retain&amp;rdquo; ç­–ç•¥ã€‚ä½¿ç”¨ &amp;ldquo;Retain&amp;rdquo; æ—¶ï¼Œå¦‚æœç”¨æˆ·åˆ é™¤ PersistentVolumeClaimï¼Œå¯¹åº”çš„ PersistentVolume ä¸ä¼šè¢«åˆ é™¤ã€‚ç›¸åï¼Œå®ƒå°†å˜ä¸º Released çŠ¶æ€ï¼Œè¡¨ç¤ºæ‰€æœ‰çš„æ•°æ®å¯ä»¥è¢«æ‰‹åŠ¨æ¢å¤ã€‚
æ›´æ”¹ PersistentVolume çš„å›æ”¶ç­–ç•¥   åˆ—å‡ºä½ é›†ç¾¤ä¸­çš„ PersistentVolumes
kubectl get pv  è¾“å‡ºç±»ä¼¼äºè¿™æ ·ï¼š
 NAME CAPACITY ACCESSMODES RECLAIMPOLICY STATUS CLAIM REASON AGE pvc-b6efd8da-b7b5-11e6-9d58-0ed433a7dd94 4Gi RWO Delete Bound default/claim1 10s pvc-b95650f8-b7b5-11e6-9d58-0ed433a7dd94 4Gi RWO Delete Bound default/claim2 6s pvc-bb3ca71d-b7b5-11e6-9d58-0ed433a7dd94 4Gi RWO Delete Bound default/claim3 3s  è¿™ä¸ªåˆ—è¡¨åŒæ ·åŒ…å«äº†ç»‘å®šåˆ°æ¯ä¸ª volume çš„ claims åç§°ï¼Œä»¥ä¾¿æ›´å®¹æ˜“çš„è¯†åˆ«åŠ¨æ€é…ç½®çš„ volumesã€‚</description>
    </item>
    
    <item>
      <title>è‡ªå®šä¹‰ DNS æœåŠ¡</title>
      <link>https://lijun.in/tasks/administer-cluster/dns-custom-nameservers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/dns-custom-nameservers/</guid>
      <description>æœ¬é¡µè¯´æ˜å¦‚ä½•é…ç½® DNS Pod å’Œè‡ªå®šä¹‰ DNS è§£æè¿‡ç¨‹ã€‚ åœ¨ Kubernetes 1.11 å’Œæ›´é«˜ç‰ˆæœ¬ä¸­ï¼ŒCoreDNS ä½äº GA å¹¶ä¸”é»˜è®¤æƒ…å†µä¸‹ä¸ kubeadm ä¸€èµ·å®‰è£…ã€‚ è¯·å‚è§CoreDNS çš„ ConfigMap é€‰é¡¹ and ä½¿ç”¨ CoreDNS è¿›è¡ŒæœåŠ¡å‘ç°ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}} Kubernetes ç‰ˆæœ¬ 1.6 æˆ–æ›´æ–°ã€‚å¦‚æœä¸ CoreDNS åŒ¹é…ï¼Œç‰ˆæœ¬ 1.9 æˆ–æ›´æ–°ã€‚ åˆé€‚çš„ add-on æ’ä»¶: kube-dns æˆ– CoreDNS. ä½¿ç”¨ kubeadm å®‰è£…ï¼Œè¯·å‚è§ kubeadm å¸®åŠ©æ–‡æ¡£.  ä»‹ç» DNS æ˜¯ä½¿ç”¨æ’ä»¶ç®¡ç†å™¨[é›†ç¾¤ add-on](http://releases.k8s.io/. param &amp;ldquo;githubbranch&amp;rdquo; &amp;gt;}}/cluster/addons/README.md)è‡ªåŠ¨å¯åŠ¨çš„å†…ç½®çš„ Kubernetes æœåŠ¡ã€‚
ä» Kubernetes v1.12 å¼€å§‹ï¼ŒCoreDNS æ˜¯æ¨èçš„ DNS æœåŠ¡å™¨ï¼Œå–ä»£äº†kube-dnsã€‚ ä½†æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒæŸäº› Kubernetes å®‰è£…ç¨‹åºå·¥å…·ä»å¯èƒ½å®‰è£… kube-dnsã€‚ è¯·å‚é˜…å®‰è£…ç¨‹åºæä¾›çš„æ–‡æ¡£ï¼Œä»¥äº†è§£é»˜è®¤æƒ…å†µä¸‹å®‰è£…äº†å“ªä¸ª DNS æœåŠ¡å™¨ã€‚</description>
    </item>
    
    <item>
      <title>è®¿é—®é›†ç¾¤ä¸Šè¿è¡Œçš„æœåŠ¡</title>
      <link>https://lijun.in/tasks/administer-cluster/access-cluster-services/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/access-cluster-services/</guid>
      <description>æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•è¿æ¥ Kubernetes é›†ç¾¤ä¸Šè¿è¡Œçš„æœåŠ¡ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
è®¿é—®é›†ç¾¤ä¸Šè¿è¡Œçš„æœåŠ¡ åœ¨ Kubernetes é‡Œï¼Œ nodesã€pods å’Œ services éƒ½æœ‰å®ƒä»¬è‡ªå·±çš„ IPã€‚è®¸å¤šæƒ…å†µä¸‹ï¼Œé›†ç¾¤ä¸Šçš„ node IPã€pod IP å’ŒæŸäº› service IP è·¯ç”±ä¸å¯è¾¾ï¼Œæ‰€ä»¥ä¸èƒ½ä»ä¸€ä¸ªé›†ç¾¤ä¹‹å¤–çš„èŠ‚ç‚¹è®¿é—®å®ƒä»¬ï¼Œä¾‹å¦‚ä»ä½ è‡ªå·±çš„å°å¼æœºã€‚
è¿æ¥æ–¹å¼ ä½ æœ‰å¤šç§ä»é›†ç¾¤å¤–è¿æ¥ nodesã€pods å’Œ services çš„é€‰é¡¹ï¼š
 é€šè¿‡å…¬å…± IP è®¿é—® servicesã€‚  ä½¿ç”¨å…·æœ‰ NodePort æˆ– LoadBalancer ç±»å‹çš„ serviceï¼Œå¯ä»¥ä»å¤–éƒ¨è®¿é—®å®ƒä»¬ã€‚è¯·æŸ¥é˜… services å’Œ kubectl expose æ–‡æ¡£ã€‚ å–å†³äºä½ çš„é›†ç¾¤ç¯å¢ƒï¼Œä½ å¯ä»¥ä»…æŠŠ service æš´éœ²åœ¨ä½ çš„ä¼ä¸šç½‘ç»œç¯å¢ƒä¸­ï¼Œä¹Ÿå¯ä»¥å°†å…¶æš´éœ²åœ¨å› ç‰¹ç½‘ä¸Šã€‚éœ€è¦è€ƒè™‘æš´éœ²çš„ service æ˜¯å¦å®‰å…¨ï¼Œå®ƒæ˜¯å¦æœ‰è‡ªå·±çš„ç”¨æˆ·è®¤è¯ï¼Ÿ å°† pods æ”¾ç½®äº services èƒŒåã€‚å¦‚æœè¦è®¿é—®ä¸€ä¸ªå‰¯æœ¬é›†åˆä¸­ç‰¹å®šçš„ podï¼Œä¾‹å¦‚ç”¨äºè°ƒè¯•ç›®çš„æ—¶ï¼Œè¯·ç»™ pod æŒ‡å®šä¸€ä¸ªç‹¬ç‰¹çš„æ ‡ç­¾å¹¶åˆ›å»ºä¸€ä¸ªæ–° service é€‰æ‹©è¿™ä¸ªæ ‡ç­¾ã€‚ å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œéƒ½ä¸éœ€è¦åº”ç”¨å¼€å‘è€…é€šè¿‡èŠ‚ç‚¹ IP ç›´æ¥è®¿é—® nodesã€‚   é€šè¿‡ Proxy Verb è®¿é—® servicesã€nodes æˆ–è€… podsã€‚  åœ¨è®¿é—® Apiserver è¿œç¨‹æœåŠ¡ä¹‹å‰æ˜¯å¦ç»è¿‡è®¤è¯å’Œæˆæƒï¼Ÿå¦‚æœä½ çš„æœåŠ¡æš´éœ²åˆ°å› ç‰¹ç½‘ä¸­ä¸å¤Ÿå®‰å…¨ï¼Œæˆ–è€…éœ€è¦è·å– node IP ä¹‹ä¸Šçš„ç«¯å£ï¼Œåˆæˆ–è€…å¤„äºè°ƒè¯•ç›®çš„æ—¶ï¼Œè¯·ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ã€‚ Proxies å¯èƒ½ç»™æŸäº›åº”ç”¨å¸¦æ¥éº»çƒ¦ã€‚ ä»…é€‚ç”¨äº HTTP/HTTPSã€‚ åœ¨è¿™é‡Œæè¿°   ä»é›†ç¾¤ä¸­çš„ node æˆ–è€… pod è®¿é—®ã€‚  è¿è¡Œä¸€ä¸ª podï¼Œç„¶åä½¿ç”¨ kubectl exec è¿æ¥åˆ°å®ƒçš„ä¸€ä¸ªshellã€‚ä»é‚£ä¸ª shell è¿æ¥å…¶ä»–çš„ nodesã€pods å’Œ servicesã€‚ æŸäº›é›†ç¾¤å¯èƒ½å…è®¸ä½  ssh åˆ°é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ã€‚ä½ å¯èƒ½å¯ä»¥ä»é‚£å„¿è®¿é—®é›†ç¾¤æœåŠ¡ã€‚è¿™æ˜¯ä¸€ä¸ªéæ ‡å‡†çš„æ–¹å¼ï¼Œå¯èƒ½åœ¨ä¸€äº›é›†ç¾¤ä¸Šèƒ½å·¥ä½œï¼Œä½†åœ¨å¦ä¸€äº›ä¸Šå´ä¸èƒ½ã€‚æµè§ˆå™¨å’Œå…¶ä»–å·¥å…·å¯èƒ½å®‰è£…æˆ–å¯èƒ½ä¸ä¼šå®‰è£…ã€‚é›†ç¾¤ DNS å¯èƒ½ä¸ä¼šæ­£å¸¸å·¥ä½œã€‚    å‘ç°å†…ç½®æœåŠ¡ å…¸å‹æƒ…å†µä¸‹ï¼Œkube-system ä¼šå¯åŠ¨é›†ç¾¤ä¸­çš„å‡ ä¸ªæœåŠ¡ã€‚ä½¿ç”¨ kubectl cluster-info å‘½ä»¤è·å–å®ƒä»¬çš„åˆ—è¡¨ï¼š</description>
    </item>
    
    <item>
      <title>é€šè¿‡å‘½åç©ºé—´å…±äº«é›†ç¾¤</title>
      <link>https://lijun.in/tasks/administer-cluster/namespaces/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/namespaces/</guid>
      <description>æœ¬é¡µå±•ç¤ºäº†å¦‚ä½•æŸ¥çœ‹ã€ä½¿ç”¨å’Œåˆ é™¤. glossary_tooltip text=&amp;quot;namespaces&amp;rdquo; term_id=&amp;quot;namespace&amp;rdquo; &amp;gt;}}ã€‚æœ¬é¡µåŒæ—¶å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Kubernetes å‘½åç©ºé—´å»ç»†åˆ†é›†ç¾¤ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  æ‚¨å·²æ‹¥æœ‰ä¸€ä¸ª é…ç½®å¥½çš„ Kubernetes é›†ç¾¤. æ‚¨å·²å¯¹ Kubernetes çš„ Pods, Services, å’Œ Deployments æœ‰åŸºæœ¬ç†è§£ã€‚  æŸ¥çœ‹å‘½åç©ºé—´  åˆ—å‡ºé›†ç¾¤ä¸­ç°æœ‰çš„å‘½åç©ºé—´ï¼š  kubectl get namespaces NAME STATUS AGE default Active 11d kube-system Active 11d kube-public Active 11d åˆå§‹çŠ¶æ€ä¸‹ï¼ŒKubernetes å…·æœ‰ä¸‰ä¸ªåå­—ç©ºé—´ï¼š
 default æ— å‘½åç©ºé—´å¯¹è±¡çš„é»˜è®¤å‘½åç©ºé—´ kube-system ç”± Kubernetes ç³»ç»Ÿåˆ›å»ºçš„å¯¹è±¡çš„å‘½åç©ºé—´ kube-public è‡ªåŠ¨åˆ›å»ºä¸”è¢«æ‰€æœ‰ç”¨æˆ·å¯è¯»çš„å‘½åç©ºé—´ï¼ˆåŒ…æ‹¬æœªç»èº«ä»½è®¤è¯çš„ï¼‰ã€‚æ­¤å‘½åç©ºé—´é€šå¸¸åœ¨æŸäº›èµ„æºåœ¨æ•´ä¸ªé›†ç¾¤ä¸­å¯è§ä¸”å¯å…¬å¼€è¯»å–æ—¶è¢«é›†ç¾¤ä½¿ç”¨ã€‚æ­¤å‘½åç©ºé—´çš„å…¬å…±æ–¹é¢åªæ˜¯ä¸€ä¸ªçº¦å®šï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¿…è¦æ¡ä»¶ã€‚  æ‚¨è¿˜å¯ä»¥é€šè¿‡ä¸‹åˆ—å‘½ä»¤è·å–ç‰¹å®šå‘½åç©ºé—´çš„æ‘˜è¦ï¼š
kubectl get namespaces &amp;lt;name&amp;gt; æˆ–è·å–è¯¦ç»†ä¿¡æ¯ï¼š
kubectl describe namespaces &amp;lt;name&amp;gt; Name: default Labels: &amp;lt;none&amp;gt; Annotations: &amp;lt;none&amp;gt; Status: Active No resource quota.</description>
    </item>
    
    <item>
      <title>é€šè¿‡é…ç½®æ–‡ä»¶è®¾ç½® Kubelet å‚æ•°</title>
      <link>https://lijun.in/tasks/administer-cluster/kubelet-config-file/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/kubelet-config-file/</guid>
      <description>. feature-state state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
é€šè¿‡ä¿å­˜åœ¨ç¡¬ç›˜çš„é…ç½®æ–‡ä»¶è®¾ç½® Kubelet çš„é…ç½®å‚æ•°å­é›†ï¼Œå¯ä»¥ä½œä¸ºå‘½ä»¤è¡Œå‚æ•°çš„æ›¿ä»£ã€‚æ­¤åŠŸèƒ½åœ¨ v1.10 ä¸­ä¸º beta ç‰ˆã€‚
å»ºè®®é€šè¿‡é…ç½®æ–‡ä»¶çš„æ–¹å¼æä¾›å‚æ•°ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥ç®€åŒ–èŠ‚ç‚¹éƒ¨ç½²å’Œé…ç½®ç®¡ç†ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  éœ€è¦å®‰è£… 1.10 æˆ–æ›´é«˜ç‰ˆæœ¬çš„ Kubelet äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ‰èƒ½å®ç° beta åŠŸèƒ½ã€‚  åˆ›å»ºé…ç½®æ–‡ä»¶ KubeletConfiguration ç»“æ„ä½“å®šä¹‰äº†å¯ä»¥é€šè¿‡æ–‡ä»¶é…ç½®çš„ Kubelet é…ç½®å­é›†ï¼Œè¯¥ç»“æ„ä½“åœ¨ [è¿™é‡Œï¼ˆv1beta1ï¼‰](https://github.com/kubernetes/kubernetes/blob/. param &amp;ldquo;docsbranch&amp;rdquo; &amp;gt;}}/staging/src/k8s.io/kubelet/config/v1beta1/types.go) å¯ä»¥æ‰¾åˆ°, é…ç½®æ–‡ä»¶å¿…é¡»æ˜¯è¿™ä¸ªç»“æ„ä½“ä¸­å‚æ•°çš„ JSON æˆ– YAML è¡¨ç°å½¢å¼ã€‚
åœ¨å•ç‹¬çš„æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸º kubelet çš„æ–‡ä»¶ï¼Œå¹¶ä¿è¯ Kubelet å¯ä»¥è¯»å–è¯¥æ–‡ä»¶å¤¹åŠæ–‡ä»¶ã€‚æ‚¨åº”è¯¥åœ¨è¿™ä¸ª kubelet æ–‡ä»¶ä¸­ç¼–å†™ Kubelet é…ç½®ã€‚
è¿™æ˜¯ä¸€ä¸ª Kubelet é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š
kind: KubeletConfiguration apiVersion: kubelet.config.k8s.io/v1beta1 evictionHard: memory.available: &amp;quot;200Mi&amp;quot; åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­, å½“å¯ç”¨å†…å­˜ä½äº200Mi æ—¶, Kubelet å°†ä¼šå¼€å§‹é©±é€ Podsã€‚ æ²¡æœ‰å£°æ˜çš„å…¶ä½™é…ç½®é¡¹éƒ½å°†ä½¿ç”¨é»˜è®¤å€¼, å‘½ä»¤è¡Œä¸­çš„ flags å°†ä¼šè¦†ç›–é…ç½®æ–‡ä»¶ä¸­çš„å¯¹åº”å€¼ã€‚
ä½œä¸ºä¸€ä¸ªå°æŠ€å·§ï¼Œæ‚¨å¯ä»¥ä»æ´»åŠ¨èŠ‚ç‚¹ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œç›¸å…³æ–¹æ³•è¯·æŸ¥çœ‹ é‡æ–°é…ç½®æ´»åŠ¨é›†ç¾¤èŠ‚ç‚¹çš„ Kubeletã€‚</description>
    </item>
    
    <item>
      <title>é…ç½® API å¯¹è±¡é…é¢</title>
      <link>https://lijun.in/tasks/administer-cluster/quota-api-object/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/quota-api-object/</guid>
      <description>æœ¬æ–‡è®¨è®ºå¦‚ä½•ä¸º API å¯¹è±¡é…ç½®é…é¢ï¼ŒåŒ…æ‹¬ PersistentVolumeClaims å’Œ Servicesã€‚ é…é¢é™åˆ¶äº†å¯ä»¥åœ¨å‘½åç©ºé—´ä¸­åˆ›å»ºçš„ç‰¹å®šç±»å‹å¯¹è±¡çš„æ•°é‡ã€‚ æ‚¨å¯ä»¥åœ¨ [ResourceQuota](/docs/reference/generated/kubernetes-api/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#resourcequota-v1-core) å¯¹è±¡ä¸­æŒ‡å®šé…é¢ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åˆ›å»ºå‘½åç©ºé—´ åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ä»¥ä¾¿æœ¬ä¾‹ä¸­åˆ›å»ºçš„èµ„æºå’Œé›†ç¾¤ä¸­çš„å…¶ä½™éƒ¨åˆ†ç›¸éš”ç¦»ã€‚
kubectl create namespace quota-object-example åˆ›å»º ResourceQuota ä¸‹é¢æ˜¯ä¸€ä¸ª ResourceQuota å¯¹è±¡çš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;admin/resource/quota-objects.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»º ResourceQuota
kubectl create -f https://k8s.io/examples/admin/resource/quota-objects.yaml --namespace=quota-object-example æŸ¥çœ‹ ResourceQuota çš„è¯¦ç»†ä¿¡æ¯ï¼š
kubectl get resourcequota object-quota-demo --namespace=quota-object-example --output=yaml è¾“å‡ºç»“æœè¡¨æ˜åœ¨ quota-object-example å‘½åç©ºé—´ä¸­ï¼Œè‡³å¤šåªèƒ½æœ‰ä¸€ä¸ª PersistentVolumeClaimï¼Œæœ€å¤šä¸¤ä¸ª LoadBalancer ç±»å‹çš„æœåŠ¡ï¼Œä¸èƒ½æœ‰ NodePort ç±»å‹çš„æœåŠ¡ã€‚
status: hard: persistentvolumeclaims: &amp;#34;1&amp;#34; services.loadbalancers: &amp;#34;2&amp;#34; services.nodeports: &amp;#34;0&amp;#34; used: persistentvolumeclaims: &amp;#34;0&amp;#34; services.</description>
    </item>
    
    <item>
      <title>é…ç½®å¤šä¸ªè°ƒåº¦å™¨</title>
      <link>https://lijun.in/tasks/administer-cluster/configure-multiple-schedulers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/configure-multiple-schedulers/</guid>
      <description>Kubernetes è‡ªå¸¦äº†ä¸€ä¸ªé»˜è®¤è°ƒåº¦å™¨ï¼Œå…¶è¯¦ç»†æè¿°è¯·æŸ¥é˜…è¿™é‡Œã€‚
å¦‚æœé»˜è®¤è°ƒåº¦å™¨ä¸é€‚åˆæ‚¨çš„éœ€æ±‚ï¼Œæ‚¨å¯ä»¥å®ç°è‡ªå·±çš„è°ƒåº¦å™¨ã€‚
ä¸ä»…å¦‚æ­¤ï¼Œæ‚¨ç”šè‡³å¯ä»¥ä¼´éšç€é»˜è®¤è°ƒåº¦å™¨åŒæ—¶è¿è¡Œå¤šä¸ªè°ƒåº¦å™¨ï¼Œå¹¶å‘Šè¯‰ Kubernetes ä¸ºæ¯ä¸ª pod ä½¿ç”¨ä»€ä¹ˆè°ƒåº¦å™¨ã€‚ è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­è®²è¿°å¦‚ä½•åœ¨ Kubernetes ä¸­è¿è¡Œå¤šä¸ªè°ƒåº¦å™¨ã€‚
å…³äºå®ç°è°ƒåº¦å™¨çš„å…·ä½“ç»†èŠ‚æè¿°è¶…å‡ºäº†æœ¬æ–‡èŒƒå›´ã€‚ è¯·å‚è€ƒ kube-scheduler çš„å®ç°ï¼Œè§„èŒƒç¤ºä¾‹ä»£ç ä½äº [pkg/scheduler](https://github.com/kubernetes/kubernetes/tree/. param &amp;ldquo;githubbranch&amp;rdquo; &amp;gt;}}/pkg/scheduler)ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
æ‰“åŒ…è°ƒåº¦å™¨ å°†è°ƒåº¦å™¨äºŒè¿›åˆ¶æ–‡ä»¶æ‰“åŒ…åˆ°å®¹å™¨é•œåƒä¸­ã€‚å‡ºäºç¤ºä¾‹ç›®çš„ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨é»˜è®¤è°ƒåº¦å™¨ï¼ˆkube-schedulerï¼‰ä½œä¸ºæˆ‘ä»¬çš„ç¬¬äºŒä¸ªè°ƒåº¦å™¨ã€‚
ä» Github å…‹éš† Kubernetes æºä»£ç ï¼Œå¹¶ç¼–è¯‘æ„å»ºæºä»£ç ã€‚
git clone https://github.com/kubernetes/kubernetes.git cd kubernetes make åˆ›å»ºä¸€ä¸ªåŒ…å« kube-scheduler äºŒè¿›åˆ¶æ–‡ä»¶çš„å®¹å™¨é•œåƒã€‚ç”¨äºæ„å»ºé•œåƒçš„ Dockerfile å†…å®¹å¦‚ä¸‹ï¼š
FROMbusyboxADD ./_output/dockerized/bin/linux/amd64/kube-scheduler /usr/local/bin/kube-schedulerå°†æ–‡ä»¶ä¿å­˜ä¸º Dockerfileï¼Œæ„å»ºé•œåƒå¹¶å°†å…¶æ¨é€åˆ°é•œåƒä»“åº“ã€‚ æ­¤ç¤ºä¾‹å°†é•œåƒæ¨é€åˆ° Google å®¹å™¨é•œåƒä»“åº“ï¼ˆGCRï¼‰ã€‚
æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯» GCR æ–‡æ¡£ã€‚
docker build -t gcr.io/my-gcp-project/my-kube-scheduler:1.0 . gcloud docker -- push gcr.io/my-gcp-project/my-kube-scheduler:1.0 ä¸ºè°ƒåº¦å™¨å®šä¹‰ Kubernetes Deployment ç°åœ¨æˆ‘ä»¬å°†è°ƒåº¦å™¨æ”¾åœ¨å®¹å™¨é•œåƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå®ƒåˆ›å»ºä¸€ä¸ª pod é…ç½®ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„ Kubernetes é›†ç¾¤ä¸­è¿è¡Œå®ƒã€‚ ä½†æ˜¯ä¸å…¶åœ¨é›†ç¾¤ä¸­ç›´æ¥åˆ›å»ºä¸€ä¸ª podï¼Œä¸å¦‚ä½¿ç”¨ Deploymentã€‚ Deployment ç®¡ç†ä¸€ä¸ª Replica Setï¼ŒReplica Set å†ç®¡ç† podï¼Œä»è€Œä½¿è°ƒåº¦å™¨èƒ½å¤Ÿé€‚åº”æ•…éšœã€‚ ä»¥ä¸‹æ˜¯ Deployment é…ç½®ï¼Œè¢«ä¿å­˜ä¸º my-scheduler.</description>
    </item>
    
    <item>
      <title>é…ç½®èµ„æºä¸è¶³æ—¶çš„å¤„ç†æ–¹å¼</title>
      <link>https://lijun.in/tasks/administer-cluster/out-of-resource/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/out-of-resource/</guid>
      <description>æœ¬é¡µä»‹ç»äº†å¦‚ä½•ä½¿ç”¨kubeleté…ç½®èµ„æºä¸è¶³æ—¶çš„å¤„ç†æ–¹å¼ã€‚
å½“å¯ç”¨è®¡ç®—èµ„æºè¾ƒå°‘æ—¶ï¼Œkubeletéœ€è¦ä¿è¯èŠ‚ç‚¹ç¨³å®šæ€§ã€‚è¿™åœ¨å¤„ç†å¦‚å†…å­˜å’Œç¡¬ç›˜ä¹‹ç±»çš„ä¸å¯å‹ç¼©èµ„æºæ—¶å°¤ä¸ºé‡è¦ã€‚å¦‚æœä»»æ„ä¸€ç§èµ„æºè€—å°½ï¼ŒèŠ‚ç‚¹å°†ä¼šå˜å¾—ä¸ç¨³å®šã€‚
é©±é€ç­–ç•¥ kubelet èƒ½å¤Ÿä¸»åŠ¨ç›‘æµ‹å’Œé˜²æ­¢è®¡ç®—èµ„æºçš„å…¨é¢çŸ­ç¼ºã€‚åœ¨é‚£ç§æƒ…å†µä¸‹ï¼Œkubeletå¯ä»¥ä¸»åŠ¨åœ°ç»“æŸä¸€ä¸ªæˆ–å¤šä¸ª pod ä»¥å›æ”¶çŸ­ç¼ºçš„èµ„æºã€‚å½“ kubelet ç»“æŸä¸€ä¸ª pod æ—¶ï¼Œå®ƒå°†ç»ˆæ­¢ pod ä¸­çš„æ‰€æœ‰å®¹å™¨ï¼Œè€Œ pod çš„ PodPhase å°†å˜ä¸º Failedã€‚
å¦‚æœè¢«é©±é€çš„ Pod ç”± Deployment ç®¡ç†ï¼Œè¿™ä¸ª Deployment ä¼šåˆ›å»ºå¦ä¸€ä¸ª Pod ç»™ Kubernetes æ¥è°ƒåº¦ã€‚
é©±é€ä¿¡å· kubelet æ”¯æŒæŒ‰ç…§ä»¥ä¸‹è¡¨æ ¼ä¸­æè¿°çš„ä¿¡å·è§¦å‘é©±é€å†³å®šã€‚æ¯ä¸ªä¿¡å·çš„å€¼åœ¨ description åˆ—æè¿°ï¼ŒåŸºäº kubelet æ‘˜è¦ APIã€‚
   é©±é€ä¿¡å· æè¿°     memory.available memory.available := node.status.capacity[memory] - node.stats.memory.workingSet   nodefs.available nodefs.available := node.stats.fs.available   nodefs.inodesFree nodefs.inodesFree := node.stats.fs.inodesFree   imagefs.available imagefs.available := node.stats.runtime.imagefs.available   imagefs.</description>
    </item>
    
    <item>
      <title>é™åˆ¶å­˜å‚¨æ¶ˆè€—</title>
      <link>https://lijun.in/tasks/administer-cluster/limit-storage-consumption/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/limit-storage-consumption/</guid>
      <description>æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†ä¸€ç§é™åˆ¶å‘½åç©ºé—´ä¸­å­˜å‚¨ä½¿ç”¨é‡çš„ç®€ä¾¿æ–¹æ³•ã€‚
æ¼”ç¤ºä¸­ç”¨åˆ°äº†ä»¥ä¸‹èµ„æºï¼šResourceQuotaï¼ŒLimitRange å’Œ PersistentVolumeClaimã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}  åœºæ™¯ï¼šé™åˆ¶å­˜å‚¨æ¶ˆè€— é›†ç¾¤ç®¡ç†å‘˜ä»£è¡¨ç”¨æˆ·ç¾¤æ“ä½œé›†ç¾¤ï¼Œç®¡ç†å‘˜å¸Œæœ›æ§åˆ¶å•ä¸ªåç§°ç©ºé—´å¯ä»¥æ¶ˆè€—å¤šå°‘å­˜å‚¨ç©ºé—´ä»¥æ§åˆ¶æˆæœ¬ã€‚
ç®¡ç†å‘˜æƒ³è¦é™åˆ¶ï¼š
 å‘½åç©ºé—´ä¸­æŒä¹…å·ç”³é¢†ï¼ˆpersistent volume claimsï¼‰çš„æ•°é‡ æ¯ä¸ªç”³é¢†ï¼ˆclaimï¼‰å¯ä»¥è¯·æ±‚çš„å­˜å‚¨é‡ å‘½åç©ºé—´å¯ä»¥å…·æœ‰çš„ç´¯è®¡å­˜å‚¨é‡  ä½¿ç”¨ LimitRange é™åˆ¶å­˜å‚¨è¯·æ±‚ å°† LimitRange æ·»åŠ åˆ°å‘½åç©ºé—´ä¼šä¸ºå­˜å‚¨è¯·æ±‚å¤§å°å¼ºåˆ¶è®¾ç½®æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚å­˜å‚¨æ˜¯é€šè¿‡ PersistentVolumeClaim æ¥å‘èµ·è¯·æ±‚çš„ã€‚æ‰§è¡Œé™åˆ¶èŒƒå›´æ§åˆ¶çš„å‡†å…¥æ§åˆ¶å™¨ä¼šæ‹’ç»ä»»ä½•é«˜äºæˆ–ä½äºç®¡ç†å‘˜æ‰€è®¾é˜ˆå€¼çš„ PVCã€‚
åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œè¯·æ±‚ 10Gi å­˜å‚¨çš„ PVC å°†è¢«æ‹’ç»ï¼Œå› ä¸ºå®ƒè¶…è¿‡äº†æœ€å¤§ 2Giã€‚
apiVersion: v1 kind: LimitRange metadata: name: storagelimits spec: limits: - type: PersistentVolumeClaim max: storage: 2Gi min: storage: 1Gi å½“åº•å±‚å­˜å‚¨æä¾›ç¨‹åºéœ€è¦æŸäº›æœ€å°å€¼æ—¶ï¼Œå°†ä¼šç”¨åˆ°æ‰€è®¾ç½®æœ€å°å­˜å‚¨è¯·æ±‚å€¼ã€‚ä¾‹å¦‚ï¼ŒAWS EBS volumes çš„æœ€ä½è¦æ±‚ä¸º 1Giã€‚
ä½¿ç”¨ StorageQuota é™åˆ¶ PVC æ•°ç›®å’Œç´¯è®¡å­˜å‚¨å®¹é‡ ç®¡ç†å‘˜å¯ä»¥é™åˆ¶æŸä¸ªå‘½åç©ºé—´ä¸­çš„ PVCs ä¸ªæ•°ä»¥åŠè¿™äº› PVCs çš„ç´¯è®¡å®¹é‡ã€‚æ–° PVCs è¯·æ±‚å¦‚æœè¶…è¿‡ä»»ä¸€ä¸Šé™å€¼å°†è¢«æ‹’ç»ã€‚</description>
    </item>
    
    <item>
      <title>é›†ç¾¤ DNS æœåŠ¡è‡ªåŠ¨ä¼¸ç¼©</title>
      <link>https://lijun.in/tasks/administer-cluster/dns-horizontal-autoscaling/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/dns-horizontal-autoscaling/</guid>
      <description>æœ¬é¡µå±•ç¤ºäº†å¦‚ä½•åœ¨é›†ç¾¤ä¸­å¯ç”¨å’Œé…ç½® DNS æœåŠ¡çš„è‡ªåŠ¨ä¼¸ç¼©åŠŸèƒ½ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}    æœ¬æŒ‡å—å‡è®¾æ‚¨çš„èŠ‚ç‚¹ä½¿ç”¨ AMD64 æˆ– Intel 64 CPU æ¶æ„
  ç¡®ä¿å·²å¯ç”¨ DNS åŠŸèƒ½æœ¬èº«ã€‚
  å»ºè®®ä½¿ç”¨ Kubernetes 1.4.0 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚
  ç¡®å®šæ˜¯å¦ DNS æ°´å¹³ æ°´å¹³è‡ªåŠ¨ä¼¸ç¼©ç‰¹æ€§å·²ç»å¯ç”¨ åœ¨ kube-system å‘½åç©ºé—´ä¸­åˆ—å‡ºé›†ç¾¤ä¸­çš„ . glossary_tooltip text=&amp;quot;Deployments&amp;rdquo; term_id=&amp;quot;deployment&amp;rdquo; &amp;gt;}} ï¼š
kubectl get deployment --namespace=kube-system è¾“å‡ºç±»ä¼¼å¦‚ä¸‹è¿™æ ·ï¼š
NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE ... dns-autoscaler 1 1 1 1 ... ...  å¦‚æœåœ¨è¾“å‡ºä¸­çœ‹åˆ° â€œdns-autoscalerâ€ï¼Œè¯´æ˜ DNS æ°´å¹³è‡ªåŠ¨ä¼¸ç¼©å·²ç»å¯ç”¨ï¼Œå¯ä»¥è·³åˆ° è°ƒä¼˜è‡ªåŠ¨ä¼¸ç¼©å‚æ•°ã€‚</description>
    </item>
    
    <item>
      <title>é›†ç¾¤å®‰å…¨</title>
      <link>https://lijun.in/tasks/administer-cluster/securing-a-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/securing-a-cluster/</guid>
      <description>æœ¬æ–‡æ¡£æ¶‰åŠä¸ä¿æŠ¤é›†ç¾¤å…å—æ„å¤–æˆ–æ¶æ„è®¿é—®æœ‰å…³çš„ä¸»é¢˜ï¼Œå¹¶å¯¹æ€»ä½“å®‰å…¨æ€§æå‡ºå»ºè®®ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}  æ§åˆ¶å¯¹ Kubernetes API çš„è®¿é—® å› ä¸º Kubernetes æ˜¯å®Œå…¨é€šè¿‡ API é©±åŠ¨çš„ï¼Œæ‰€ä»¥ï¼Œæ§åˆ¶å’Œé™åˆ¶è°å¯ä»¥é€šè¿‡ API è®¿é—®é›†ç¾¤ï¼Œä»¥åŠå…è®¸è¿™äº›è®¿é—®è€…æ‰§è¡Œä»€ä¹ˆæ ·çš„ API åŠ¨ä½œï¼Œå°±æˆä¸ºäº†å®‰å…¨æ§åˆ¶çš„ç¬¬ä¸€é“é˜²çº¿ã€‚
ä¸º API äº¤äº’æä¾›ä¼ è¾“å±‚å®‰å…¨ ï¼ˆTLSï¼‰ Kubernetes æœŸæœ›é›†ç¾¤ä¸­æ‰€æœ‰çš„ API é€šä¿¡åœ¨é»˜è®¤æƒ…å†µä¸‹éƒ½ä½¿ç”¨ TLS åŠ å¯†ï¼Œå¤§å¤šæ•°å®‰è£…æ–¹æ³•ä¹Ÿå…è®¸åˆ›å»ºæ‰€éœ€çš„è¯ä¹¦å¹¶ä¸”åˆ†å‘åˆ°é›†ç¾¤ç»„ä»¶ä¸­ã€‚è¯·æ³¨æ„ï¼ŒæŸäº›ç»„ä»¶å’Œå®‰è£…æ–¹æ³•å¯èƒ½ä½¿ç”¨ HTTP æ¥è®¿é—®æœ¬åœ°ç«¯å£ï¼Œ ç®¡ç†å‘˜åº”è¯¥ç†Ÿæ‚‰æ¯ä¸ªç»„ä»¶çš„è®¾ç½®ï¼Œä»¥è¯†åˆ«æ½œåœ¨çš„ä¸å®‰å…¨çš„æµé‡ã€‚
API è®¤è¯ å®‰è£…é›†ç¾¤æ—¶ï¼Œé€‰æ‹©ä¸€ä¸ª API æœåŠ¡å™¨çš„èº«ä»½éªŒè¯æœºåˆ¶ï¼Œå»ä½¿ç”¨ä¸ä¹‹åŒ¹é…çš„å…¬å…±è®¿é—®æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå°å‹çš„å•ç”¨æˆ·é›†ç¾¤å¯èƒ½å¸Œæœ›ä½¿ç”¨ç®€å•çš„è¯ä¹¦æˆ–é™æ€æ‰¿è½½ä»¤ç‰Œæ–¹æ³•ã€‚æ›´å¤§çš„é›†ç¾¤åˆ™å¯èƒ½å¸Œæœ›æ•´åˆç°æœ‰çš„ã€OIDCã€LDAP ç­‰å…è®¸ç”¨æˆ·åˆ†ç»„çš„æœåŠ¡å™¨ã€‚
æ‰€æœ‰ API å®¢æˆ·ç«¯éƒ½å¿…é¡»ç»è¿‡èº«ä»½éªŒè¯ï¼Œå³ä½¿å®ƒæ˜¯åŸºç¡€è®¾æ–½çš„ä¸€éƒ¨åˆ†ï¼Œæ¯”å¦‚èŠ‚ç‚¹ã€ä»£ç†ã€è°ƒåº¦ç¨‹åºå’Œå·æ’ä»¶ã€‚è¿™äº›å®¢æˆ·ç«¯é€šå¸¸ä½¿ç”¨ æœåŠ¡å¸æˆ· æˆ– X509 å®¢æˆ·ç«¯è¯ä¹¦ï¼Œå¹¶åœ¨é›†ç¾¤å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºæˆ–æ˜¯ä½œä¸ºé›†ç¾¤å®‰è£…çš„ä¸€éƒ¨åˆ†è¿›è¡Œè®¾ç½®ã€‚
å¦‚æœæ‚¨å¸Œæœ›è·å–æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ è®¤è¯å‚è€ƒæ–‡æ¡£ã€‚
API æˆæƒ ä¸€æ—¦ä½¿ç”¨æˆæƒï¼Œæ¯ä¸ª API çš„è°ƒç”¨éƒ½å°†é€šè¿‡æˆæƒæ£€æŸ¥ã€‚Kubernetes é›†æˆ åŸºäºè®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰ çš„ç»„ä»¶ï¼Œå°†ä¼ å…¥çš„ç”¨æˆ·æˆ–ç»„ä¸ä¸€ç»„ç»‘å®šåˆ°è§’è‰²çš„æƒé™åŒ¹é…ã€‚è¿™äº›æƒé™å°†åŠ¨ä½œï¼ˆgetï¼Œcreateï¼Œdeleteï¼‰å’Œèµ„æºï¼ˆpodï¼Œservice, nodeï¼‰åœ¨å‘½åç©ºé—´æˆ–è€…é›†ç¾¤èŒƒå›´å†…ç»“åˆèµ·æ¥ï¼Œæ ¹æ®å®¢æˆ·å¯èƒ½å¸Œæœ›æ‰§è¡Œçš„æ“ä½œï¼Œæä¾›äº†ä¸€ç»„æä¾›åˆç†çš„è¿çº¦è´£ä»»åˆ†ç¦»çš„å¤–åŒ…è§’è‰²ã€‚å»ºè®®æ‚¨å°†èŠ‚ç‚¹ å’Œ RBAC ä¸€èµ·ä½œä¸ºæˆæƒè€…ï¼Œå†ä¸ NodeRestriction å‡†å…¥æ’ä»¶ç»“åˆä½¿ç”¨ã€‚
ä¸èº«ä»½éªŒè¯ä¸€æ ·ï¼Œç®€å•è€Œå¹¿æ³›çš„è§’è‰²å¯èƒ½é€‚åˆäºè¾ƒå°çš„é›†ç¾¤ï¼Œä½†æ˜¯éšç€æ›´å¤šçš„ç”¨æˆ·ä¸é›†ç¾¤äº¤äº’ï¼Œå¯èƒ½éœ€è¦å°†å›¢é˜Ÿåˆ’åˆ†æˆæœ‰æ›´å¤šè§’è‰²é™åˆ¶çš„å•ç‹¬çš„å‘½åç©ºé—´ã€‚</description>
    </item>
    
    <item>
      <title>é›†ç¾¤ç®¡ç†</title>
      <link>https://lijun.in/tasks/administer-cluster/cluster-management/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/cluster-management/</guid>
      <description>. toc &amp;gt;}}
æœ¬æ–‡æè¿°äº†å’Œé›†ç¾¤ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„å‡ ä¸ªä¸»é¢˜ï¼šåˆ›å»ºæ–°é›†ç¾¤ã€æ›´æ–°é›†ç¾¤çš„ master å’Œ worker èŠ‚ç‚¹ã€æ‰§è¡ŒèŠ‚ç‚¹ç»´æŠ¤ï¼ˆä¾‹å¦‚å‡çº§å†…æ ¸ï¼‰ä»¥åŠå‡çº§è¿è¡Œä¸­é›†ç¾¤çš„ Kubernetes API ç‰ˆæœ¬ã€‚
åˆ›å»ºå’Œé…ç½®é›†ç¾¤ è¦åœ¨ä¸€ç»„æœºå™¨ä¸Šå®‰è£… Kubernetesï¼Œ è¯·æ ¹æ®æ‚¨çš„ç¯å¢ƒï¼ŒæŸ¥é˜…ç°æœ‰çš„ å…¥é—¨æŒ‡å—
å‡çº§é›†ç¾¤ é›†ç¾¤å‡çº§å½“å‰æ˜¯é…å¥—æä¾›çš„ï¼ŒæŸäº›å‘å¸ƒç‰ˆæœ¬åœ¨å‡çº§æ—¶å¯èƒ½éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚æ¨èç®¡ç†å‘˜åœ¨å‡çº§ä»–ä»¬çš„é›†ç¾¤å‰ï¼ŒåŒæ—¶æŸ¥é˜… å‘è¡Œè¯´æ˜ å’Œç‰ˆæœ¬å…·ä½“å‡çº§è¯´æ˜ã€‚
 å‡çº§åˆ° 1.6  å‡çº§ Google Compute Engine é›†ç¾¤ Google Compute Engine Open Source (GCE-OSS) é€šè¿‡åˆ é™¤å’Œé‡å»º master æ¥æ”¯æŒ master å‡çº§ã€‚é€šè¿‡ç»´æŒç›¸åŒçš„ Persistent Disk (PD) ä»¥ä¿è¯åœ¨å‡çº§è¿‡ç¨‹ä¸­ä¿ç•™æ•°æ®ã€‚
GCE çš„ Node å‡çº§é‡‡ç”¨ ç®¡ç†å®ä¾‹ç»„ï¼Œæ¯ä¸ªèŠ‚ç‚¹å°†è¢«é¡ºåºçš„åˆ é™¤ï¼Œç„¶åä½¿ç”¨æ–°è½¯ä»¶é‡å»ºã€‚ä»»ä½•è¿è¡Œåœ¨é‚£ä¸ªèŠ‚ç‚¹ä¸Šçš„ Pod éœ€è¦ç”¨ Replication Controller æ§åˆ¶ï¼Œæˆ–è€…åœ¨æ‰©å®¹ä¹‹åæ‰‹åŠ¨é‡å»ºã€‚
å¼€æº Google Compute Engine (GCE) é›†ç¾¤ä¸Šçš„å‡çº§è¿‡ç¨‹ç”± cluster/gce/upgrade.sh è„šæœ¬æ§åˆ¶ã€‚
è¿è¡Œ cluster/gce/upgrade.sh -h è·å–ä½¿ç”¨è¯´æ˜ã€‚
ä¾‹å¦‚ï¼Œåªå°† master å‡çº§åˆ°ä¸€ä¸ªæŒ‡å®šçš„ç‰ˆæœ¬ (v1.0.2):</description>
    </item>
    
    <item>
      <title>é™æ€åŠ å¯† Secret æ•°æ®</title>
      <link>https://lijun.in/tasks/administer-cluster/encrypt-data/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/encrypt-data/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•å¯ç”¨å’Œé…ç½®é™æ€ Secret æ•°æ®çš„åŠ å¯†
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}    éœ€è¦ Kubernetes 1.7.0 æˆ–è€…æ›´é«˜ç‰ˆæœ¬
  éœ€è¦ etcd v3 æˆ–è€…æ›´é«˜ç‰ˆæœ¬
  é™æ€æ•°æ®åŠ å¯†åœ¨ 1.7.0 ä¸­ä»ç„¶æ˜¯ alpha ç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€å®ƒå¯èƒ½ä¼šåœ¨æ²¡æœ‰é€šçŸ¥çš„æƒ…å†µä¸‹è¿›è¡Œæ›´æ”¹ã€‚åœ¨å‡çº§åˆ° 1.8.0 ä¹‹å‰ï¼Œç”¨æˆ·å¯èƒ½éœ€è¦è§£å¯†ä»–ä»¬çš„æ•°æ®ã€‚
  . toc &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
é…ç½®å¹¶ç¡®å®šæ˜¯å¦å·²å¯ç”¨é™æ€æ•°æ®åŠ å¯† kube-apiserver çš„å‚æ•° --experimental-encryption-provider-config æ§åˆ¶ API æ•°æ®åœ¨ etcd ä¸­çš„åŠ å¯†æ–¹å¼ã€‚ ä¸‹é¢æä¾›ä¸€ä¸ªé…ç½®ç¤ºä¾‹ã€‚
ç†è§£é™æ€æ•°æ®åŠ å¯† kind: EncryptionConfiguration apiVersion: apiserver.config.k8s.io/v1 resources: - resources: - secrets providers: - identity: {} - aesgcm: keys: - name: key1 secret: c2VjcmV0IGlzIHNlY3VyZQ== - name: key2 secret: dGhpcyBpcyBwYXNzd29yZA== - aescbc: keys: - name: key1 secret: c2VjcmV0IGlzIHNlY3VyZQ== - name: key2 secret: dGhpcyBpcyBwYXNzd29yZA== - secretbox: keys: - name: key1 secret: YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoxMjM0NTY= æ¯ä¸ª resources æ•°ç»„é¡¹ç›®æ˜¯ä¸€ä¸ªå•ç‹¬çš„å®Œæ•´çš„é…ç½®ã€‚ resources.</description>
    </item>
    
  </channel>
</rss>