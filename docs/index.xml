<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>æ–‡æ¡£ on Hugo ä¸»é¢˜çš„ Learn æ–‡æ¡£</title>
    <link>https://lijun.in/</link>
    <description>Recent content in æ–‡æ¡£ on Hugo ä¸»é¢˜çš„ Learn æ–‡æ¡£</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    
	<atom:link href="https://lijun.in/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>å®¹å™¨æ¦‚è¿°</title>
      <link>https://lijun.in/concepts/containers/overview/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/containers/overview/</guid>
      <description>å®¹å™¨æ˜¯ä¸€ç§ç”¨æ¥æ‰“åŒ…å·²ç»ç¼–è¯‘å¥½çš„ä»£ç ä»¥åŠè¿è¡Œæ—¶éœ€è¦çš„å„ä¸ªä¾èµ–é¡¹çš„æŠ€æœ¯ã€‚æ‚¨è¿è¡Œçš„æ¯ä¸ªå®¹å™¨éƒ½æ˜¯å¯ä»¥é‡å¤è¿è¡Œçš„ï¼›åŒ…å«ä¾èµ–é¡¹çš„æ ‡å‡†åŒ–æ„å‘³ç€æ‚¨åœ¨ä»»ä½•åœ°ç‚¹è¿è¡Œå®ƒéƒ½ä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœã€‚
å®¹å™¨å°†åº”ç”¨ç¨‹åºå’Œåº•å±‚ä¸»æœºæ¶æ„è§£è€¦ï¼Œè¿™ä½¿å¾—åœ¨ä¸åŒçš„äº‘æˆ–OSç¯å¢ƒä¸­éƒ¨ç½²åº”ç”¨æ›´åŠ å®¹æ˜“ã€‚
å®¹å™¨é•œåƒ å®¹å™¨é•œåƒæ˜¯ä¸€ä¸ªç°æˆçš„è½¯ä»¶åŒ…ï¼ŒåŒ…å«äº†è¿è¡Œåº”ç”¨ç¨‹åºæ—¶æ‰€éœ€è¦çš„ä¸€åˆ‡ï¼šä»£ç å’Œä»»ä½•è¿è¡Œæ—¶æ‰€éœ€çš„ä¸œè¥¿ï¼Œåº”ç”¨ç¨‹åºå’Œç³»ç»Ÿåº“ï¼Œä»¥åŠä»»ä½•åŸºæœ¬è®¾ç½®çš„é»˜è®¤å€¼ã€‚
æ ¹æ®è®¾è®¡ï¼Œå®¹å™¨æ˜¯ä¸å¯å˜çš„ï¼šä½ ä¸èƒ½æ›´æ”¹å·²ç»åœ¨è¿è¡Œçš„å®¹å™¨ä¸­çš„ä»£ç ã€‚å¦‚æœæ‚¨æœ‰ä¸€ä¸ªå®¹å™¨åŒ–çš„åº”ç”¨ç¨‹åºï¼Œæƒ³è¦åšä¸€äº›æ›´æ”¹ï¼Œæ‚¨éœ€è¦æ„å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ï¼Œæ¥åŒ…å«æ‰€åšçš„æ›´æ”¹ï¼Œç„¶åä½¿ç”¨å·²ç»æ›´æ–°è¿‡çš„é•œåƒæ¥é‡æ–°åˆ›å»ºå®¹å™¨ã€‚
##å®¹å™¨è¿è¡Œæ—¶
term_id=&amp;quot;container-runtime&amp;rdquo; length=&amp;quot;all&amp;rdquo; &amp;gt;}}
  é˜…è¯»æœ‰å…³å®¹å™¨é•œåƒ é˜…è¯»æœ‰å…³ Pods  </description>
    </item>
    
    <item>
      <title>ğŸ˜ - æ ‡å‡†åŒ–è¯æ±‡è¡¨</title>
      <link>https://lijun.in/reference/glossary/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/glossary/</guid>
      <description></description>
    </item>
    
    <item>
      <title>ğŸ˜ - ä½ å¥½ Minikube</title>
      <link>https://lijun.in/tutorials/hello-minikube/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/hello-minikube/</guid>
      <description>æœ¬æ•™ç¨‹å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ Minikube å’Œ Katacoda åœ¨ Kubernetes ä¸Šè¿è¡Œä¸€ä¸ªç®€å•çš„ â€œHello Worldâ€ Node.js åº”ç”¨ç¨‹åºã€‚Katacoda æä¾›å…è´¹çš„æµè§ˆå™¨å†… Kubernetes ç¯å¢ƒã€‚
. note &amp;gt;}}
å¦‚æœæ‚¨å·²åœ¨æœ¬åœ°å®‰è£… Minikubeï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§æœ¬æ•™ç¨‹æ“ä½œã€‚
. /note &amp;gt;}}
heading &amp;ldquo;objectives&amp;rdquo; %}}  å°† &amp;ldquo;Hello World&amp;rdquo; åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ° Minikubeã€‚ è¿è¡Œåº”ç”¨ç¨‹åºã€‚ æŸ¥çœ‹åº”ç”¨æ—¥å¿—  . heading &amp;ldquo;prerequisites&amp;rdquo; %}} æœ¬æ•™ç¨‹æä¾›äº†ä»ä»¥ä¸‹æ–‡ä»¶æ„å»ºçš„å®¹å™¨é•œåƒï¼š
. codenew language=&amp;quot;js&amp;rdquo; file=&amp;quot;minikube/server.js&amp;rdquo; &amp;gt;}}
. codenew language=&amp;quot;conf&amp;rdquo; file=&amp;quot;minikube/Dockerfile&amp;rdquo; &amp;gt;}}
æœ‰å…³ docker build å‘½ä»¤çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… Docker æ–‡æ¡£ã€‚
åˆ›å»º Minikube é›†ç¾¤   ç‚¹å‡» å¯åŠ¨ç»ˆç«¯
. kat-button &amp;gt;}}
. note &amp;gt;}}If you installed Minikube locally, run minikube start.</description>
    </item>
    
    <item>
      <title>Endpoint Slices</title>
      <link>https://lijun.in/concepts/services-networking/endpoint-slices/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/services-networking/endpoint-slices/</guid>
      <description>feature-state for_k8s_version=&amp;quot;v1.17&amp;rdquo; state=&amp;quot;beta&amp;rdquo;
Endpoint Slices æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥è·Ÿè¸ª Kubernetes é›†ç¾¤ä¸­çš„ç½‘ç»œç«¯ç‚¹ï¼ˆnetwork endpointsï¼‰ã€‚å®ƒä»¬ä¸º Endpoints æä¾›äº†ä¸€ç§å¯ä¼¸ç¼©å’Œå¯æ‹“å±•çš„æ›¿ä»£æ–¹æ¡ˆã€‚
Endpoint Slice èµ„æº åœ¨ Kubernetes ä¸­ï¼ŒEndpointSlice åŒ…å«å¯¹ä¸€ç»„ç½‘ç»œç«¯ç‚¹çš„å¼•ç”¨ã€‚æŒ‡å®šé€‰æ‹©å™¨åï¼ŒEndpointSlice æ§åˆ¶å™¨ä¼šè‡ªåŠ¨ä¸º Kubernetes æœåŠ¡åˆ›å»º EndpointSliceã€‚è¿™äº› EndpointSlice å°†åŒ…å«å¯¹ä¸æœåŠ¡é€‰æ‹©å™¨åŒ¹é…çš„æ‰€æœ‰ Pod çš„å¼•ç”¨ã€‚EndpointSlice é€šè¿‡å”¯ä¸€çš„æœåŠ¡å’Œç«¯å£ç»„åˆå°†ç½‘ç»œç«¯ç‚¹ç»„ç»‡åœ¨ä¸€èµ·ã€‚
ä¾‹å¦‚ï¼Œè¿™é‡Œæ˜¯ KubernetesæœåŠ¡ example çš„ç¤ºä¾‹ EndpointSlice èµ„æºã€‚
apiVersion: discovery.k8s.io/v1beta1 kind: EndpointSlice metadata: name: example-abc labels: kubernetes.io/service-name: example addressType: IPv4 ports: - name: http protocol: TCP port: 80 endpoints: - addresses: - &amp;#34;10.1.2.3&amp;#34; conditions: ready: true hostname: pod-1 topology: kubernetes.io/hostname: node-1 topology.kubernetes.io/zone: us-west2-a é»˜è®¤æƒ…å†µä¸‹ï¼Œç”± EndpointSlice æ§åˆ¶å™¨ç®¡ç†çš„ Endpoint Slice å°†æœ‰ä¸è¶…è¿‡ 100 ä¸ª endpointsã€‚ä½äºæ­¤æ¯”ä¾‹æ—¶ï¼ŒEndpoint Slices åº”ä¸ Endpoints å’ŒæœåŠ¡è¿›è¡Œ 1ï¼š1 æ˜ å°„ï¼Œå¹¶å…·æœ‰ç›¸ä¼¼çš„æ€§èƒ½ã€‚</description>
    </item>
    
    <item>
      <title>kubeadm æ¦‚è¿°</title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/kubeadm/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/kubeadm/</guid>
      <description>kubeadm é€šè¿‡æ‰§è¡Œå¿…è¦çš„æ“ä½œæ¥å¯åŠ¨å’Œè¿è¡Œä¸€ä¸ªæœ€å°å¯ç”¨çš„é›†ç¾¤ã€‚å®ƒè¢«æ•…æ„è®¾è®¡ä¸ºåªå…³å¿ƒå¯åŠ¨é›†ç¾¤ï¼Œè€Œä¸æ˜¯å‡†å¤‡èŠ‚ç‚¹ç¯å¢ƒçš„å·¥ä½œã€‚åŒæ ·çš„ï¼Œè¯¸å¦‚å®‰è£…å„ç§å„æ ·çš„å¯æœ‰å¯æ— çš„æ’ä»¶ï¼Œä¾‹å¦‚ Kubernetes æ§åˆ¶é¢æ¿ã€ç›‘æ§è§£å†³æ–¹æ¡ˆä»¥åŠç‰¹å®šäº‘æä¾›å•†çš„æ’ä»¶ï¼Œè¿™äº›éƒ½ä¸åœ¨å®ƒè´Ÿè´£çš„èŒƒå›´ã€‚
ç›¸åï¼Œæˆ‘ä»¬æœŸæœ›ç”±ä¸€ä¸ªåŸºäº kubeadm ä»æ›´é«˜å±‚è®¾è®¡çš„æ›´åŠ åˆé€‚çš„å·¥å…·æ¥åšè¿™äº›äº‹æƒ…ï¼›å¹¶ä¸”ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œä½¿ç”¨ kubeadm ä½œä¸ºæ‰€æœ‰éƒ¨ç½²çš„åŸºç¡€å°†ä¼šä½¿å¾—åˆ›å»ºä¸€ä¸ªç¬¦åˆæœŸæœ›çš„é›†ç¾¤å˜å¾—å®¹æ˜“ã€‚
æ¥ä¸‹å¯ä»¥åšä»€ä¹ˆ  kubeadm init å¯åŠ¨ä¸€ä¸ª Kubernetes ä¸»èŠ‚ç‚¹   kubeadm join å¯åŠ¨ä¸€ä¸ª Kubernetes å·¥ä½œèŠ‚ç‚¹å¹¶ä¸”å°†å…¶åŠ å…¥åˆ°é›†ç¾¤   kubeadm upgrade æ›´æ–°ä¸€ä¸ª Kubernetes é›†ç¾¤åˆ°æ–°ç‰ˆæœ¬   kubeadm config å¦‚æœä½ ä½¿ç”¨ kubeadm v1.7.x æˆ–è€…æ›´ä½ç‰ˆæœ¬ï¼Œä½ éœ€è¦å¯¹ä½ çš„é›†ç¾¤åšä¸€äº›é…ç½®ä»¥ä¾¿ä½¿ç”¨ kubeadm upgrade å‘½ä»¤   kubeadm token ä½¿ç”¨ kubeadm join æ¥ç®¡ç†ä»¤ç‰Œ   kubeadm reset è¿˜åŸä¹‹å‰ä½¿ç”¨ kubeadm init æˆ–è€… kubeadm join å¯¹èŠ‚ç‚¹äº§ç”Ÿçš„æ”¹å˜   kubeadm version æ‰“å°å‡º kubeadm ç‰ˆæœ¬   kubeadm alpha é¢„è§ˆä¸€ç»„å¯ç”¨çš„æ–°åŠŸèƒ½ä»¥ä¾¿ä»ç¤¾åŒºæœé›†åé¦ˆ  </description>
    </item>
    
    <item>
      <title>Kubernetes API æ€»è§ˆ</title>
      <link>https://lijun.in/reference/using-api/api-overview/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/using-api/api-overview/</guid>
      <description>æ­¤é¡µæä¾› Kubernetes API çš„æ€»è§ˆ
REST API æ˜¯ Kubernetes çš„åŸºç¡€æ¶æ„ã€‚ç»„ä»¶ä¹‹é—´çš„æ‰€æœ‰æ“ä½œå’Œé€šä¿¡ï¼Œä»¥åŠå¤–éƒ¨ç”¨æˆ·å‘½ä»¤éƒ½æ˜¯ API Server å¤„ç†çš„ REST API è°ƒç”¨ã€‚å› æ­¤ï¼ŒKubernetes å¹³å°ä¸­çš„æ‰€æœ‰èµ„æºè¢«è§†ä¸º API å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨ [API](/docs/reference/generated/kubernetes-api/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/) ä¸­éƒ½æœ‰å¯¹åº”çš„å®šä¹‰é¡¹ã€‚
å¤§å¤šæ•°æ“ä½œå¯ä»¥é€šè¿‡ kubectl å‘½ä»¤è¡Œç•Œé¢æˆ–å…¶ä»–å‘½ä»¤è¡Œå·¥å…·æ‰§è¡Œï¼Œä¾‹å¦‚ kubeadmï¼Œå®ƒä»¬æœ¬èº«ä¹Ÿä½¿ç”¨ APIã€‚ä½†æ˜¯ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ REST è°ƒç”¨ç›´æ¥è®¿é—® APIã€‚
å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ Kubernetes API ç¼–å†™åº”ç”¨ç¨‹åºï¼Œè¯·è€ƒè™‘ä½¿ç”¨ å®¢æˆ·ç«¯åº“ã€‚
API ç‰ˆæœ¬æ§åˆ¶ ä¸ºäº†æ¶ˆé™¤å­—æ®µæˆ–é‡ç»„èµ„æºè¡¨ç¤ºå½¢å¼ï¼ŒKubernetes æ”¯æŒå¤šä¸ª API ç‰ˆæœ¬ï¼Œæ¯ä¸ªç‰ˆæœ¬åœ¨ä¸åŒçš„ API è·¯å¾„ä¸‹ã€‚ä¾‹å¦‚ï¼š/api/v1 æˆ–è€… /apis/extensions/v1beta1ã€‚
ç‰ˆæœ¬æ˜¯åœ¨ API çº§åˆ«è€Œéèµ„æºæˆ–å­—æ®µçº§åˆ«é…ç½®çš„ï¼š
 ç¡®ä¿ API å‘ˆç°å‡ºæ¸…æ™°ä¸€è‡´çš„ç³»ç»Ÿèµ„æºå’Œè¡Œä¸ºè§†å›¾ã€‚ å…è®¸æ§åˆ¶å¯¹å·²å¯¿ç»ˆæ­£å¯çš„ API å’Œ/æˆ–å®éªŒæ€§ API çš„è®¿é—®ã€‚  JSON å’Œ Protobuf åºåˆ—åŒ–æ¨¡å¼åœ¨å‡ºç°æ¨¡å¼å˜æ›´æ—¶å‡éµå¾ªè¿™äº›å‡†åˆ™ã€‚ä»¥ä¸‹è¯´æ˜åŒæ—¶é€‚ç”¨äºè¿™ä¸¤ç§æ ¼å¼ã€‚
. note &amp;gt;}} API ç‰ˆæœ¬å’Œè½¯ä»¶ç‰ˆæœ¬æ˜¯é—´æ¥ç›¸å…³çš„ã€‚API å’Œå‘å¸ƒç‰ˆæœ¬å»ºè®® æè¿°äº† API ç‰ˆæœ¬å’Œè½¯ä»¶ç‰ˆæœ¬ä¹‹é—´çš„å…³ç³»ã€‚ .</description>
    </item>
    
    <item>
      <title>Kubernetes æ˜¯ä»€ä¹ˆï¼Ÿ</title>
      <link>https://lijun.in/concepts/overview/what-is-kubernetes/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/overview/what-is-kubernetes/</guid>
      <description>æ­¤é¡µé¢æ˜¯ Kubernetes çš„æ¦‚è¿°ã€‚
Kubernetes æ˜¯ä¸€ä¸ªå¯ç§»æ¤çš„ã€å¯æ‰©å±•çš„å¼€æºå¹³å°ï¼Œç”¨äºç®¡ç†å®¹å™¨åŒ–çš„å·¥ä½œè´Ÿè½½å’ŒæœåŠ¡ï¼Œå¯ä¿ƒè¿›å£°æ˜å¼é…ç½®å’Œè‡ªåŠ¨åŒ–ã€‚Kubernetes æ‹¥æœ‰ä¸€ä¸ªåºå¤§ä¸”å¿«é€Ÿå¢é•¿çš„ç”Ÿæ€ç³»ç»Ÿã€‚Kubernetes çš„æœåŠ¡ã€æ”¯æŒå’Œå·¥å…·å¹¿æ³›å¯ç”¨ã€‚
åç§° Kubernetes æºäºå¸Œè…Šè¯­ï¼Œæ„ä¸º &amp;ldquo;èˆµæ‰‹&amp;rdquo; æˆ– &amp;ldquo;é£è¡Œå‘˜&amp;rdquo;ã€‚Google åœ¨ 2014 å¹´å¼€æºäº† Kubernetes é¡¹ç›®ã€‚Kubernetes å»ºç«‹åœ¨ Google åœ¨å¤§è§„æ¨¡è¿è¡Œç”Ÿäº§å·¥ä½œè´Ÿè½½æ–¹é¢æ‹¥æœ‰åå‡ å¹´çš„ç»éªŒçš„åŸºç¡€ä¸Šï¼Œç»“åˆäº†ç¤¾åŒºä¸­æœ€å¥½çš„æƒ³æ³•å’Œå®è·µã€‚
è¨€å½’æ­£ä¼  è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä¸ºä»€ä¹ˆ Kubernetes å¦‚æ­¤æœ‰ç”¨ã€‚
ä¼ ç»Ÿéƒ¨ç½²æ—¶ä»£ï¼š æ—©æœŸï¼Œç»„ç»‡åœ¨ç‰©ç†æœåŠ¡å™¨ä¸Šè¿è¡Œåº”ç”¨ç¨‹åºã€‚æ— æ³•ä¸ºç‰©ç†æœåŠ¡å™¨ä¸­çš„åº”ç”¨ç¨‹åºå®šä¹‰èµ„æºè¾¹ç•Œï¼Œè¿™ä¼šå¯¼è‡´èµ„æºåˆ†é…é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨ç‰©ç†æœåŠ¡å™¨ä¸Šè¿è¡Œå¤šä¸ªåº”ç”¨ç¨‹åºï¼Œåˆ™å¯èƒ½ä¼šå‡ºç°ä¸€ä¸ªåº”ç”¨ç¨‹åºå ç”¨å¤§éƒ¨åˆ†èµ„æºçš„æƒ…å†µï¼Œç»“æœå¯èƒ½å¯¼è‡´å…¶ä»–åº”ç”¨ç¨‹åºçš„æ€§èƒ½ä¸‹é™ã€‚ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯åœ¨ä¸åŒçš„ç‰©ç†æœåŠ¡å™¨ä¸Šè¿è¡Œæ¯ä¸ªåº”ç”¨ç¨‹åºï¼Œä½†æ˜¯ç”±äºèµ„æºåˆ©ç”¨ä¸è¶³è€Œæ— æ³•æ‰©å±•ï¼Œå¹¶ä¸”ç»„ç»‡ç»´æŠ¤è®¸å¤šç‰©ç†æœåŠ¡å™¨çš„æˆæœ¬å¾ˆé«˜ã€‚
è™šæ‹ŸåŒ–éƒ¨ç½²æ—¶ä»£ï¼š ä½œä¸ºè§£å†³æ–¹æ¡ˆï¼Œå¼•å…¥äº†è™šæ‹ŸåŒ–åŠŸèƒ½ï¼Œå®ƒå…è®¸æ‚¨åœ¨å•ä¸ªç‰©ç†æœåŠ¡å™¨çš„ CPU ä¸Šè¿è¡Œå¤šä¸ªè™šæ‹Ÿæœºï¼ˆVMï¼‰ã€‚è™šæ‹ŸåŒ–åŠŸèƒ½å…è®¸åº”ç”¨ç¨‹åºåœ¨ VM ä¹‹é—´éš”ç¦»ï¼Œå¹¶æä¾›å®‰å…¨çº§åˆ«ï¼Œå› ä¸ºä¸€ä¸ªåº”ç”¨ç¨‹åºçš„ä¿¡æ¯ä¸èƒ½è¢«å¦ä¸€åº”ç”¨ç¨‹åºè‡ªç”±åœ°è®¿é—®ã€‚
å› ä¸ºè™šæ‹ŸåŒ–å¯ä»¥è½»æ¾åœ°æ·»åŠ æˆ–æ›´æ–°åº”ç”¨ç¨‹åºã€é™ä½ç¡¬ä»¶æˆæœ¬ç­‰ç­‰ï¼Œæ‰€ä»¥è™šæ‹ŸåŒ–å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨ç‰©ç†æœåŠ¡å™¨ä¸­çš„èµ„æºï¼Œå¹¶å¯ä»¥å®ç°æ›´å¥½çš„å¯ä¼¸ç¼©æ€§ã€‚
æ¯ä¸ª VM æ˜¯ä¸€å°å®Œæ•´çš„è®¡ç®—æœºï¼Œåœ¨è™šæ‹ŸåŒ–ç¡¬ä»¶ä¹‹ä¸Šè¿è¡Œæ‰€æœ‰ç»„ä»¶ï¼ŒåŒ…æ‹¬å…¶è‡ªå·±çš„æ“ä½œç³»ç»Ÿã€‚
å®¹å™¨éƒ¨ç½²æ—¶ä»£ï¼š å®¹å™¨ç±»ä¼¼äº VMï¼Œä½†æ˜¯å®ƒä»¬å…·æœ‰è½»é‡çº§çš„éš”ç¦»å±æ€§ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¹‹é—´å…±äº«æ“ä½œç³»ç»Ÿï¼ˆOSï¼‰ã€‚å› æ­¤ï¼Œå®¹å™¨è¢«è®¤ä¸ºæ˜¯è½»é‡çº§çš„ã€‚å®¹å™¨ä¸ VM ç±»ä¼¼ï¼Œå…·æœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿã€CPUã€å†…å­˜ã€è¿›ç¨‹ç©ºé—´ç­‰ã€‚ç”±äºå®ƒä»¬ä¸åŸºç¡€æ¶æ„åˆ†ç¦»ï¼Œå› æ­¤å¯ä»¥è·¨äº‘å’Œ OS åˆ†å‘è¿›è¡Œç§»æ¤ã€‚
å®¹å™¨å› å…·æœ‰è®¸å¤šä¼˜åŠ¿è€Œå˜å¾—æµè¡Œèµ·æ¥ã€‚ä¸‹é¢åˆ—å‡ºäº†å®¹å™¨çš„ä¸€äº›å¥½å¤„ï¼š
 æ•æ·åº”ç”¨ç¨‹åºçš„åˆ›å»ºå’Œéƒ¨ç½²ï¼šä¸ä½¿ç”¨ VM é•œåƒç›¸æ¯”ï¼Œæé«˜äº†å®¹å™¨é•œåƒåˆ›å»ºçš„ç®€ä¾¿æ€§å’Œæ•ˆç‡ã€‚ æŒç»­å¼€å‘ã€é›†æˆå’Œéƒ¨ç½²ï¼šé€šè¿‡å¿«é€Ÿç®€å•çš„å›æ»š(ç”±äºé•œåƒä¸å¯å˜æ€§)ï¼Œæä¾›å¯é ä¸”é¢‘ç¹çš„å®¹å™¨é•œåƒæ„å»ºå’Œéƒ¨ç½²ã€‚ å…³æ³¨å¼€å‘ä¸è¿ç»´çš„åˆ†ç¦»ï¼šåœ¨æ„å»º/å‘å¸ƒæ—¶è€Œä¸æ˜¯åœ¨éƒ¨ç½²æ—¶åˆ›å»ºåº”ç”¨ç¨‹åºå®¹å™¨é•œåƒï¼Œä»è€Œå°†åº”ç”¨ç¨‹åºä¸åŸºç¡€æ¶æ„åˆ†ç¦»ã€‚ å¯è§‚å¯Ÿæ€§ä¸ä»…å¯ä»¥æ˜¾ç¤ºæ“ä½œç³»ç»Ÿçº§åˆ«çš„ä¿¡æ¯å’ŒæŒ‡æ ‡ï¼Œè¿˜å¯ä»¥æ˜¾ç¤ºåº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶å†µå’Œå…¶ä»–æŒ‡æ ‡ä¿¡å·ã€‚ è·¨å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§çš„ç¯å¢ƒä¸€è‡´æ€§ï¼šåœ¨ä¾¿æºå¼è®¡ç®—æœºä¸Šä¸åœ¨äº‘ä¸­ç›¸åŒåœ°è¿è¡Œã€‚ äº‘å’Œæ“ä½œç³»ç»Ÿåˆ†å‘çš„å¯ç§»æ¤æ€§ï¼šå¯åœ¨ Ubuntuã€RHELã€CoreOSã€æœ¬åœ°ã€Google Kubernetes Engine å’Œå…¶ä»–ä»»ä½•åœ°æ–¹è¿è¡Œã€‚ ä»¥åº”ç”¨ç¨‹åºä¸ºä¸­å¿ƒçš„ç®¡ç†ï¼šæé«˜æŠ½è±¡çº§åˆ«ï¼Œä»åœ¨è™šæ‹Ÿç¡¬ä»¶ä¸Šè¿è¡Œ OS åˆ°ä½¿ç”¨é€»è¾‘èµ„æºåœ¨ OS ä¸Šè¿è¡Œåº”ç”¨ç¨‹åºã€‚ æ¾æ•£è€¦åˆã€åˆ†å¸ƒå¼ã€å¼¹æ€§ã€è§£æ”¾çš„å¾®æœåŠ¡ï¼šåº”ç”¨ç¨‹åºè¢«åˆ†è§£æˆè¾ƒå°çš„ç‹¬ç«‹éƒ¨åˆ†ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€éƒ¨ç½²å’Œç®¡ç† - è€Œä¸æ˜¯åœ¨ä¸€å°å¤§å‹å•æœºä¸Šæ•´ä½“è¿è¡Œã€‚ èµ„æºéš”ç¦»ï¼šå¯é¢„æµ‹çš„åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚ èµ„æºåˆ©ç”¨ï¼šé«˜æ•ˆç‡å’Œé«˜å¯†åº¦ã€‚  ä¸ºä»€ä¹ˆéœ€è¦ Kubernetesï¼Œå®ƒèƒ½åšä»€ä¹ˆ?</description>
    </item>
    
    <item>
      <title>Kubernetes é—®é¢˜è¿½è¸ª</title>
      <link>https://lijun.in/reference/issues-security/issues/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/issues-security/issues/</guid>
      <description>è¦æŠ¥å‘Šå®‰å…¨é—®é¢˜ï¼Œè¯·éµå¾ª Kubernetes å®‰å…¨é—®é¢˜å…¬å¼€æµç¨‹ã€‚
ä½¿ç”¨ GitHub Issues è·Ÿè¸ª Kubernetes ç¼–ç å·¥ä½œå’Œå…¬å¼€é—®é¢˜ã€‚
 CVE ç›¸å…³é—®é¢˜  ä¸å®‰å…¨æ€§ç›¸å…³çš„å…¬å‘Šè¯·å‘é€åˆ° kubernetes-security-announce@googlegroups.com é‚®ä»¶åˆ—è¡¨ã€‚</description>
    </item>
    
    <item>
      <title>Pod æ¦‚è§ˆ</title>
      <link>https://lijun.in/concepts/workloads/pods/pod-overview/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/pods/pod-overview/</guid>
      <description>æœ¬èŠ‚æä¾›äº† Pod çš„æ¦‚è§ˆä¿¡æ¯ï¼ŒPod æ˜¯æœ€å°å¯éƒ¨ç½²çš„ Kubernetes å¯¹è±¡æ¨¡å‹ã€‚
ç†è§£ Pod Pod æ˜¯ Kubernetes åº”ç”¨ç¨‹åºçš„åŸºæœ¬æ‰§è¡Œå•å…ƒï¼Œå³å®ƒæ˜¯ Kubernetes å¯¹è±¡æ¨¡å‹ä¸­åˆ›å»ºæˆ–éƒ¨ç½²çš„æœ€å°å’Œæœ€ç®€å•çš„å•å…ƒã€‚Pod è¡¨ç¤ºåœ¨ glossary_tooltip term_id=&amp;quot;cluster&amp;rdquo; &amp;gt;}} ä¸Šè¿è¡Œçš„è¿›ç¨‹ã€‚
Pod å°è£…äº†åº”ç”¨ç¨‹åºå®¹å™¨ï¼ˆæˆ–è€…åœ¨æŸäº›æƒ…å†µä¸‹å°è£…å¤šä¸ªå®¹å™¨ï¼‰ã€å­˜å‚¨èµ„æºã€å”¯ä¸€ç½‘ç»œ IP ä»¥åŠæ§åˆ¶å®¹å™¨åº”è¯¥å¦‚ä½•è¿è¡Œçš„é€‰é¡¹ã€‚ Pod è¡¨ç¤ºéƒ¨ç½²å•å…ƒï¼šKubernetes ä¸­åº”ç”¨ç¨‹åºçš„å•ä¸ªå®ä¾‹ï¼Œå®ƒå¯èƒ½ç”±å•ä¸ªglossary_tooltip text=&amp;quot;å®¹å™¨&amp;rdquo; term_id=&amp;quot;container&amp;rdquo; &amp;gt;}} æˆ–å°‘é‡ç´§å¯†è€¦åˆå¹¶å…±äº«èµ„æºçš„å®¹å™¨ç»„æˆã€‚
Docker æ˜¯ Kubernetes Pod ä¸­æœ€å¸¸ç”¨çš„å®¹å™¨è¿è¡Œæ—¶ï¼Œä½† Pod ä¹Ÿèƒ½æ”¯æŒå…¶ä»–çš„å®¹å™¨è¿è¡Œæ—¶ã€‚
Kubernetes é›†ç¾¤ä¸­çš„ Pod å¯è¢«ç”¨äºä»¥ä¸‹ä¸¤ä¸ªä¸»è¦ç”¨é€”ï¼š
 è¿è¡Œå•ä¸ªå®¹å™¨çš„ Podã€‚&amp;ldquo;æ¯ä¸ª Pod ä¸€ä¸ªå®¹å™¨&amp;quot;æ¨¡å‹æ˜¯æœ€å¸¸è§çš„ Kubernetes ç”¨ä¾‹ï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥å°† Pod çœ‹ä½œå•ä¸ªå®¹å™¨çš„åŒ…è£…å™¨ï¼Œå¹¶ä¸” Kubernetes ç›´æ¥ç®¡ç† Podï¼Œè€Œä¸æ˜¯å®¹å™¨ã€‚ è¿è¡Œå¤šä¸ªååŒå·¥ä½œçš„å®¹å™¨çš„ Podã€‚ Pod å¯èƒ½å°è£…ç”±å¤šä¸ªç´§å¯†è€¦åˆä¸”éœ€è¦å…±äº«èµ„æºçš„å…±å¤„å®¹å™¨ç»„æˆçš„åº”ç”¨ç¨‹åºã€‚ è¿™äº›ä½äºåŒä¸€ä½ç½®çš„å®¹å™¨å¯èƒ½å½¢æˆå•ä¸ªå†…èšçš„æœåŠ¡å•å…ƒ â€”â€” ä¸€ä¸ªå®¹å™¨å°†æ–‡ä»¶ä»å…±äº«å·æä¾›ç»™å…¬ä¼—ï¼Œè€Œå¦ä¸€ä¸ªå•ç‹¬çš„â€œæŒ‚æ–—â€ï¼ˆsidecarï¼‰å®¹å™¨åˆ™åˆ·æ–°æˆ–æ›´æ–°è¿™äº›æ–‡ä»¶ã€‚ Pod å°†è¿™äº›å®¹å™¨å’Œå­˜å‚¨èµ„æºæ‰“åŒ…ä¸ºä¸€ä¸ªå¯ç®¡ç†çš„å®ä½“ã€‚ Kubernetes åšå®¢ ä¸Šæœ‰ä¸€äº›å…¶ä»–çš„ Pod ç”¨ä¾‹ä¿¡æ¯ã€‚æ›´å¤šä¿¡æ¯è¯·å‚è€ƒï¼š   åˆ†å¸ƒå¼ç³»ç»Ÿå·¥å…·åŒ…ï¼šå®¹å™¨ç»„åˆçš„æ¨¡å¼ å®¹å™¨è®¾è®¡æ¨¡å¼  æ¯ä¸ª Pod è¡¨ç¤ºè¿è¡Œç»™å®šåº”ç”¨ç¨‹åºçš„å•ä¸ªå®ä¾‹ã€‚å¦‚æœå¸Œæœ›æ¨ªå‘æ‰©å±•åº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚ï¼Œè¿è¡Œå¤šä¸ªå®ä¾‹ï¼‰ï¼Œåˆ™åº”è¯¥ä½¿ç”¨å¤šä¸ª Podï¼Œæ¯ä¸ªåº”ç”¨å®ä¾‹ä½¿ç”¨ä¸€ä¸ª Pod ã€‚åœ¨ Kubernetes ä¸­ï¼Œè¿™é€šå¸¸è¢«ç§°ä¸º å‰¯æœ¬ã€‚é€šå¸¸ä½¿ç”¨ä¸€ä¸ªç§°ä¸ºæ§åˆ¶å™¨çš„æŠ½è±¡æ¥åˆ›å»ºå’Œç®¡ç†ä¸€ç»„å‰¯æœ¬ Podã€‚æ›´å¤šä¿¡æ¯è¯·å‚è§ Pod å’Œæ§åˆ¶å™¨ã€‚</description>
    </item>
    
    <item>
      <title>ReplicaSet</title>
      <link>https://lijun.in/concepts/workloads/controllers/replicaset/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/controllers/replicaset/</guid>
      <description>ReplicaSet æ˜¯ä¸‹ä¸€ä»£çš„ Replication Controllerã€‚ ReplicaSet å’Œ Replication Controller çš„å”¯ä¸€åŒºåˆ«æ˜¯é€‰æ‹©å™¨çš„æ”¯æŒã€‚ReplicaSet æ”¯æŒæ–°çš„åŸºäºé›†åˆçš„é€‰æ‹©å™¨éœ€æ±‚ï¼Œè¿™åœ¨æ ‡ç­¾ç”¨æˆ·æŒ‡å—ä¸­æœ‰æè¿°ã€‚è€Œ Replication Controller ä»…æ”¯æŒåŸºäºç›¸ç­‰é€‰æ‹©å™¨çš„éœ€æ±‚ã€‚
æ€æ ·ä½¿ç”¨ ReplicaSet å¤§å¤šæ•°æ”¯æŒ Replication Controllers çš„kubectlå‘½ä»¤ä¹Ÿæ”¯æŒ ReplicaSetsã€‚ä½†rolling-update å‘½ä»¤æ˜¯ä¸ªä¾‹å¤–ã€‚å¦‚æœæ‚¨æƒ³è¦æ»šåŠ¨æ›´æ–°åŠŸèƒ½è¯·è€ƒè™‘ä½¿ç”¨ Deploymentã€‚rolling-update å‘½ä»¤æ˜¯å¿…éœ€çš„ï¼Œè€Œ Deployment æ˜¯å£°æ˜æ€§çš„ï¼Œå› æ­¤æˆ‘ä»¬å»ºè®®é€šè¿‡ rolloutå‘½ä»¤ä½¿ç”¨ Deploymentã€‚
è™½ç„¶ ReplicaSets å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼Œä½†ä»Šå¤©å®ƒä¸»è¦è¢«Deployments ç”¨ä½œåè°ƒ Pod åˆ›å»ºã€åˆ é™¤å’Œæ›´æ–°çš„æœºåˆ¶ã€‚ å½“æ‚¨ä½¿ç”¨ Deployment æ—¶ï¼Œæ‚¨ä¸å¿…æ‹…å¿ƒè¿˜è¦ç®¡ç†å®ƒä»¬åˆ›å»ºçš„ ReplicaSetã€‚Deployment ä¼šæ‹¥æœ‰å¹¶ç®¡ç†å®ƒä»¬çš„ ReplicaSetã€‚
ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ ReplicaSet ReplicaSet ç¡®ä¿ä»»ä½•æ—¶é—´éƒ½æœ‰æŒ‡å®šæ•°é‡çš„ Pod å‰¯æœ¬åœ¨è¿è¡Œã€‚ ç„¶è€Œï¼ŒDeployment æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„æ¦‚å¿µï¼Œå®ƒç®¡ç† ReplicaSetï¼Œå¹¶å‘ Pod æä¾›å£°æ˜å¼çš„æ›´æ–°ä»¥åŠè®¸å¤šå…¶ä»–æœ‰ç”¨çš„åŠŸèƒ½ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨ Deployment è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ ReplicaSetï¼Œé™¤éæ‚¨éœ€è¦è‡ªå®šä¹‰æ›´æ–°ä¸šåŠ¡æµç¨‹æˆ–æ ¹æœ¬ä¸éœ€è¦æ›´æ–°ã€‚
è¿™å®é™…ä¸Šæ„å‘³ç€ï¼Œæ‚¨å¯èƒ½æ°¸è¿œä¸éœ€è¦æ“ä½œ ReplicaSet å¯¹è±¡ï¼šè€Œæ˜¯ä½¿ç”¨ Deploymentï¼Œå¹¶åœ¨ spec éƒ¨åˆ†å®šä¹‰æ‚¨çš„åº”ç”¨ã€‚
ç¤ºä¾‹ codenew file=&amp;quot;controllers/frontend.yaml&amp;rdquo; &amp;gt;}}
å°†æ­¤æ¸…å•ä¿å­˜åˆ° frontend.yaml ä¸­ï¼Œå¹¶å°†å…¶æäº¤åˆ° Kubernetes é›†ç¾¤ï¼Œåº”è¯¥å°±èƒ½åˆ›å»º yaml æ–‡ä»¶æ‰€å®šä¹‰çš„ ReplicaSet åŠå…¶ç®¡ç†çš„ Podã€‚</description>
    </item>
    
    <item>
      <title>Service æ‹“æ‰‘</title>
      <link>https://lijun.in/concepts/services-networking/service-topology/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/services-networking/service-topology/</guid>
      <description>feature-state for_k8s_version=&amp;quot;v1.17&amp;rdquo; state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
Service æ‹“æ‰‘å¯ä»¥è®©ä¸€ä¸ªæœåŠ¡åŸºäºé›†ç¾¤çš„ Node æ‹“æ‰‘è¿›è¡Œæµé‡è·¯ç”±ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæœåŠ¡å¯ä»¥æŒ‡å®šæµé‡æ˜¯è¢«ä¼˜å…ˆè·¯ç”±åˆ°ä¸€ä¸ªå’Œå®¢æˆ·ç«¯åœ¨åŒä¸€ä¸ª Node æˆ–è€…åœ¨åŒä¸€å¯ç”¨åŒºåŸŸçš„ç«¯ç‚¹ã€‚
ä»‹ç» é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘å¾€ ClusterIP æˆ–è€… NodePort æœåŠ¡çš„æµé‡å¯èƒ½ä¼šè¢«è·¯ç”±åˆ°ä»»æ„ä¸€ä¸ªæœåŠ¡åç«¯çš„åœ°å€ä¸Šã€‚ä» Kubernetes 1.7 å¼€å§‹ï¼Œå¯ä»¥å°†â€œå¤–éƒ¨â€æµé‡è·¯ç”±åˆ°èŠ‚ç‚¹ä¸Šè¿è¡Œçš„ pod ä¸Šï¼Œä½†ä¸æ”¯æŒ ClusterIP æœåŠ¡ï¼Œæ›´å¤æ‚çš„æ‹“æ‰‘ â€” æ¯”å¦‚åˆ†åŒºè·¯ç”± â€” ä¹Ÿè¿˜ä¸æ”¯æŒã€‚é€šè¿‡å…è®¸ Service åˆ›å»ºè€…æ ¹æ®æº Node å’Œç›®çš„ Node çš„æ ‡ç­¾æ¥å®šä¹‰æµé‡è·¯ç”±ç­–ç•¥ï¼ŒService æ‹“æ‰‘ç‰¹æ€§å®ç°äº†æœåŠ¡æµé‡çš„è·¯ç”±ã€‚
é€šè¿‡å¯¹æº Node å’Œç›®çš„ Node æ ‡ç­¾çš„åŒ¹é…ï¼Œè¿è¥è€…å¯ä»¥ä½¿ç”¨ä»»ä½•ç¬¦åˆè¿è¥è€…è¦æ±‚çš„åº¦é‡å€¼æ¥æŒ‡å®šå½¼æ­¤â€œè¾ƒè¿‘â€å’Œâ€œè¾ƒè¿œâ€çš„èŠ‚ç‚¹ç»„ã€‚ä¾‹å¦‚ï¼Œå¯¹äºåœ¨å…¬æœ‰äº‘ä¸Šçš„è¿è¥è€…æ¥è¯´ï¼Œæ›´åå‘äºæŠŠæµé‡æ§åˆ¶åœ¨åŒä¸€åŒºåŸŸå†…ï¼Œå› ä¸ºåŒºåŸŸé—´çš„æµé‡æ˜¯æœ‰è´¹ç”¨æˆæœ¬çš„ï¼Œè€ŒåŒºåŸŸå†…çš„æµé‡æ²¡æœ‰ã€‚å…¶å®ƒå¸¸ç”¨éœ€æ±‚è¿˜åŒ…æ‹¬æŠŠæµé‡è·¯ç”±åˆ°ç”± DaemonSet ç®¡ç†çš„æœ¬åœ° Pod ä¸Šï¼Œæˆ–è€…æŠŠä¿æŒæµé‡åœ¨è¿æ¥åŒä¸€æœºæ¶äº¤æ¢æœºçš„ Node ä¸Šï¼Œä»¥è·å¾—ä½å»¶æ—¶ã€‚
å‰ææ¡ä»¶ ä¸ºäº†å¯ç”¨æ‹“æ‰‘æ„ŸçŸ¥æœåŠ¡è·¯ç”±åŠŸèƒ½ï¼Œå¿…é¡»è¦æ»¡è¶³ä»¥ä¸‹ä¸€äº›å‰ææ¡ä»¶ï¼š
 Kubernetes çš„ç‰ˆæœ¬ä¸ä½äº 1.17 Kube-proxy è¿è¡Œåœ¨ iptables æ¨¡å¼æˆ–è€… IPVS æ¨¡å¼ å¯ç”¨ ç«¯ç‚¹åˆ‡ç‰‡åŠŸèƒ½  å¯ç”¨ Service æ‹“æ‰‘ è¦å¯ç”¨ Service æ‹“æ‰‘ï¼Œå°±è¦ç»™ kube-apiserver å’Œ kube-proxy å¯ç”¨ ServiceTopology åŠŸèƒ½ï¼š</description>
    </item>
    
    <item>
      <title>Services</title>
      <link>https://lijun.in/concepts/services-networking/service/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/services-networking/service/</guid>
      <description>apiVersion: v1 kind: Service # string Required èµ„æºç±»å‹ metadata: # Object Required å…ƒæ•°æ® name: string # string Required Serviceåç§° namespace: string # string Required å‘½åç©ºé—´ï¼Œé»˜è®¤default labels: # list Required è‡ªå®šä¹‰æ ‡ç­¾å±æ€§åˆ—è¡¨ - name: string annotations: # list Required è‡ªå®šä¹‰æ³¨è§£å±æ€§åˆ—è¡¨ - name: string spec: # Object Required è¯¦ç»†æè¿° selector: [] # list Required Label Selectoré…ç½®ï¼Œå°†é€‰æ‹©å…·æœ‰æŒ‡å®šLabelæ ‡ç­¾çš„Podä½œä¸ºç®¡ç†èŒƒå›´ type: string # string Required Serviceçš„ç±»å‹ï¼ŒæŒ‡å®šServiceçš„è®¿é—®æ–¹å¼ï¼Œé»˜è®¤ä¸ºClusterIP # ClusterIPï¼šè™šæ‹Ÿçš„æœåŠ¡IPåœ°å€ï¼Œæ”¹åœ°å€ç”¨äºKubernetesé›†ç¾¤å†…éƒ¨çš„Podè®¿é—®ï¼Œåœ¨Nodeä¸Škube-proxyé€šè¿‡è®¾ç½®iptablesè§„åˆ™è¿›è¡Œè½¬å‘ # NodePort: ä½¿ç”¨å®¿ä¸»æœºçš„ç«¯å£ï¼Œä½¿èƒ½å¤Ÿè®¿é—®ä¸ªNodeçš„å¤–éƒ¨å®¢æˆ·ç«¯é€šè¿‡Nodeçš„IPåœ°å€å’Œç«¯å£å·å°±èƒ½è®¿é—®æœåŠ¡ # LoadBalancer: ä½¿ç”¨å¤–æ¥è´Ÿè½½å‡è¡¡å®Œæˆåˆ°æœåŠ¡çš„è´Ÿè½½åˆ†å‘ï¼Œéœ€è¦åœ¨spec.status.loadBalancerå­—æ®µæŒ‡å®šå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨çš„IPåœ°å€ï¼Œ # å¹¶åŒæ—¶å®šä¹‰nodePortå’ŒclusterIPï¼Œç”¨äºå…¬æœ‰äº‘ç¯å¢ƒ clusterIP: string # string è™šæ‹ŸæœåŠ¡IPåœ°å€ï¼Œå½“type=ClusterIPæ—¶ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šï¼›å½“type=LoaderBalanceréœ€è¦æŒ‡å®š sessionAffinity: string # string æ˜¯å¦æ”¯æŒSessionï¼Œå¯é€‰å€¼ä¸ºClientIPï¼Œé»˜è®¤ä¸ºç©º # ClientIP: è¡¨ç¤ºå°†åŒä¸€ä¸ªå®¢æˆ·ç«¯ï¼ˆæ ¹æ®IPåœ°å€å†³å®šï¼‰çš„è®¿é—®è¯·æ±‚éƒ½è½¬å‘åˆ°åŒä¸€ä¸ªåç«¯Pod ports: # list éœ€è¦æš´éœ²çš„ç«¯å£åˆ—è¡¨ - name: string # ç«¯å£åç§° protocol: string # ç«¯å£åè®® æ”¯æŒtcpå’Œudpï¼Œé»˜è®¤ä¸ºtcp port: int # æœåŠ¡ç›‘å¬çš„ç«¯å£å· targetPort: int # éœ€è¦è½¬å‘åˆ°åç«¯Podçš„ç«¯å£å· nodePort: int # å½“spec.</description>
    </item>
    
    <item>
      <title>Using a Service to Expose Your App</title>
      <link>https://lijun.in/tutorials/kubernetes-basics/expose/expose-intro/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/kubernetes-basics/expose/expose-intro/</guid>
      <description>Objectives  Learn about a Service in Kubernetes Understand how labels and LabelSelector objects relate to a Service Expose an application outside a Kubernetes cluster using a Service   Overview of Kubernetes Services Kubernetes Pods are mortal. Pods in fact have a lifecycle. When a worker node dies, the Pods running on the Node are also lost. A ReplicaSet might then dynamically drive the cluster back to desired state via creation of new Pods to keep your application running.</description>
    </item>
    
    <item>
      <title>Volumes</title>
      <link>https://lijun.in/concepts/storage/volumes/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/storage/volumes/</guid>
      <description>å®¹å™¨ä¸­çš„æ–‡ä»¶åœ¨ç£ç›˜ä¸Šæ˜¯ä¸´æ—¶å­˜æ”¾çš„ï¼Œè¿™ç»™å®¹å™¨ä¸­è¿è¡Œçš„ç‰¹æ®Šåº”ç”¨ç¨‹åºå¸¦æ¥ä¸€äº›é—®é¢˜ã€‚ é¦–å…ˆï¼Œå½“å®¹å™¨å´©æºƒæ—¶ï¼Œkubelet å°†é‡æ–°å¯åŠ¨å®¹å™¨ï¼Œå®¹å™¨ä¸­çš„æ–‡ä»¶å°†ä¼šä¸¢å¤±â€”â€”å› ä¸ºå®¹å™¨ä¼šä»¥å¹²å‡€çš„çŠ¶æ€é‡å»ºã€‚ å…¶æ¬¡ï¼Œå½“åœ¨ä¸€ä¸ª Pod ä¸­åŒæ—¶è¿è¡Œå¤šä¸ªå®¹å™¨æ—¶ï¼Œå¸¸å¸¸éœ€è¦åœ¨è¿™äº›å®¹å™¨ä¹‹é—´å…±äº«æ–‡ä»¶ã€‚ Kubernetes æŠ½è±¡å‡º Volume å¯¹è±¡æ¥è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ã€‚
é˜…è¯»æœ¬æ–‡å‰å»ºè®®æ‚¨ç†Ÿæ‚‰ä¸€ä¸‹ Podsã€‚
èƒŒæ™¯ Docker ä¹Ÿæœ‰ Volume çš„æ¦‚å¿µï¼Œä½†å¯¹å®ƒåªæœ‰å°‘é‡ä¸”æ¾æ•£çš„ç®¡ç†ã€‚ åœ¨ Docker ä¸­ï¼ŒVolume æ˜¯ç£ç›˜ä¸Šæˆ–è€…å¦å¤–ä¸€ä¸ªå®¹å™¨å†…çš„ä¸€ä¸ªç›®å½•ã€‚ ç›´åˆ°æœ€è¿‘ï¼ŒDocker æ‰æ”¯æŒå¯¹åŸºäºæœ¬åœ°ç£ç›˜çš„ Volume çš„ç”Ÿå­˜æœŸè¿›è¡Œç®¡ç†ã€‚ è™½ç„¶ Docker ç°åœ¨ä¹Ÿèƒ½æä¾› Volume é©±åŠ¨ç¨‹åºï¼Œä½†æ˜¯ç›®å‰åŠŸèƒ½è¿˜éå¸¸æœ‰é™ï¼ˆä¾‹å¦‚ï¼Œæˆªè‡³ Docker 1.7ï¼Œæ¯ä¸ªå®¹å™¨åªå…è®¸æœ‰ä¸€ä¸ª Volume é©±åŠ¨ç¨‹åºï¼Œå¹¶ä¸”æ— æ³•å°†å‚æ•°ä¼ é€’ç»™å·ï¼‰ã€‚
å¦ä¸€æ–¹é¢ï¼ŒKubernetes å·å…·æœ‰æ˜ç¡®çš„ç”Ÿå‘½å‘¨æœŸâ€”â€”ä¸åŒ…è£¹å®ƒçš„ Pod ç›¸åŒã€‚ å› æ­¤ï¼Œå·æ¯” Pod ä¸­è¿è¡Œçš„ä»»ä½•å®¹å™¨çš„å­˜æ´»æœŸéƒ½é•¿ï¼Œåœ¨å®¹å™¨é‡æ–°å¯åŠ¨æ—¶æ•°æ®ä¹Ÿä¼šå¾—åˆ°ä¿ç•™ã€‚ å½“ç„¶ï¼Œå½“ä¸€ä¸ª Pod ä¸å†å­˜åœ¨æ—¶ï¼Œå·ä¹Ÿå°†ä¸å†å­˜åœ¨ã€‚ä¹Ÿè®¸æ›´é‡è¦çš„æ˜¯ï¼ŒKubernetes å¯ä»¥æ”¯æŒè®¸å¤šç±»å‹çš„å·ï¼ŒPod ä¹Ÿèƒ½åŒæ—¶ä½¿ç”¨ä»»æ„æ•°é‡çš„å·ã€‚
å·çš„æ ¸å¿ƒæ˜¯åŒ…å«ä¸€äº›æ•°æ®çš„ç›®å½•ï¼ŒPod ä¸­çš„å®¹å™¨å¯ä»¥è®¿é—®è¯¥ç›®å½•ã€‚ ç‰¹å®šçš„å·ç±»å‹å¯ä»¥å†³å®šè¿™ä¸ªç›®å½•å¦‚ä½•å½¢æˆçš„ï¼Œå¹¶èƒ½å†³å®šå®ƒæ”¯æŒä½•ç§ä»‹è´¨ï¼Œä»¥åŠç›®å½•ä¸­å­˜æ”¾ä»€ä¹ˆå†…å®¹ã€‚
ä½¿ç”¨å·æ—¶, Pod å£°æ˜ä¸­éœ€è¦æä¾›å·çš„ç±»å‹ (.spec.volumes å­—æ®µ)å’Œå·æŒ‚è½½çš„ä½ç½® (.spec.containers.volumeMounts å­—æ®µ).
å®¹å™¨ä¸­çš„è¿›ç¨‹èƒ½çœ‹åˆ°ç”±å®ƒä»¬çš„ Docker é•œåƒå’Œå·ç»„æˆçš„æ–‡ä»¶ç³»ç»Ÿè§†å›¾ã€‚ Docker é•œåƒ ä½äºæ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡ç»“æ„çš„æ ¹éƒ¨ï¼Œå¹¶ä¸”ä»»ä½• Volume éƒ½æŒ‚è½½åœ¨é•œåƒå†…çš„æŒ‡å®šè·¯å¾„ä¸Šã€‚ å·ä¸èƒ½æŒ‚è½½åˆ°å…¶ä»–å·ï¼Œä¹Ÿä¸èƒ½ä¸å…¶ä»–å·æœ‰ç¡¬é“¾æ¥ã€‚ Pod ä¸­çš„æ¯ä¸ªå®¹å™¨å¿…é¡»ç‹¬ç«‹åœ°æŒ‡å®šæ¯ä¸ªå·çš„æŒ‚è½½ä½ç½®ã€‚
Volume çš„ç±»å‹ Kubernetes æ”¯æŒä¸‹åˆ—ç±»å‹çš„å·ï¼š</description>
    </item>
    
    <item>
      <title>ä¸ºå‘½åç©ºé—´é…ç½®é»˜è®¤çš„å†…å­˜è¯·æ±‚å’Œé™åˆ¶</title>
      <link>https://lijun.in/tasks/administer-cluster/manage-resources/memory-default-namespace/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/manage-resources/memory-default-namespace/</guid>
      <description>æœ¬æ–‡ä»‹ç»æ€æ ·ç»™å‘½åç©ºé—´é…ç½®é»˜è®¤çš„å†…å­˜è¯·æ±‚å’Œé™åˆ¶ã€‚å¦‚æœåœ¨ä¸€ä¸ªæœ‰é»˜è®¤å†…å­˜é™åˆ¶çš„å‘½åç©ºé—´åˆ›å»ºå®¹å™¨ï¼Œè¯¥å®¹å™¨æ²¡æœ‰å£°æ˜è‡ªå·±çš„å†…å­˜é™åˆ¶æ—¶ï¼Œå°†ä¼šè¢«æŒ‡å®šé»˜è®¤å†…å­˜é™åˆ¶ã€‚Kubernetes è¿˜ä¸ºæŸäº›æƒ…å†µæŒ‡å®šäº†é»˜è®¤çš„å†…å­˜è¯·æ±‚ï¼Œæœ¬ç« åé¢ä¼šè¿›è¡Œä»‹ç»ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ä½ çš„é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å¿…é¡»è‡³å°‘æœ‰2 GiBçš„å†…å­˜ã€‚
åˆ›å»ºå‘½åç©ºé—´ åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œä»¥ä¾¿æœ¬ç»ƒä¹ ä¸­æ‰€å»ºçš„èµ„æºä¸é›†ç¾¤çš„å…¶ä½™èµ„æºç›¸éš”ç¦»ã€‚
kubectl create namespace default-mem-example åˆ›å»º LimitRange å’Œ Pod è¿™é‡Œç»™å‡ºäº†ä¸€ä¸ªé™åˆ¶èŒƒå›´å¯¹è±¡çš„é…ç½®æ–‡ä»¶ã€‚è¯¥é…ç½®å£°æ˜äº†ä¸€ä¸ªé»˜è®¤çš„å†…å­˜è¯·æ±‚å’Œä¸€ä¸ªé»˜è®¤çš„å†…å­˜é™åˆ¶ã€‚
. codenew file=&amp;quot;admin/resource/memory-defaults.yaml&amp;rdquo; &amp;gt;}}
åœ¨ default-mem-example å‘½åç©ºé—´åˆ›å»ºé™åˆ¶èŒƒå›´ï¼š
kubectl create -f https://k8s.io/examples/admin/resource/memory-defaults.yaml --namespace=default-mem-example ç°åœ¨ï¼Œå¦‚æœåœ¨ default-mem-example å‘½åç©ºé—´åˆ›å»ºå®¹å™¨ï¼Œå¹¶ä¸”è¯¥å®¹å™¨æ²¡æœ‰å£°æ˜è‡ªå·±çš„å†…å­˜è¯·æ±‚å’Œé™åˆ¶å€¼ï¼Œå®ƒå°†è¢«æŒ‡å®šä¸€ä¸ªé»˜è®¤çš„å†…å­˜è¯·æ±‚256 MiBå’Œä¸€ä¸ªé»˜è®¤çš„å†…å­˜é™åˆ¶512 Mibã€‚
. codenew file=&amp;quot;admin/resource/memory-defaults-pod.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»º Pod
kubectl create -f https://k8s.io/examples/admin/resource/memory-defaults-pod.yaml --namespace=default-mem-example æŸ¥çœ‹ Pod çš„è¯¦æƒ…ï¼š
kubectl get pod default-mem-demo --output=yaml --namespace=default-mem-example è¾“å‡ºå†…å®¹æ˜¾ç¤ºè¯¥Podçš„å®¹å™¨æœ‰ä¸€ä¸ª256 MiBçš„å†…å­˜è¯·æ±‚å’Œä¸€ä¸ª512 MiBçš„å†…å­˜é™åˆ¶ã€‚è¿™äº›éƒ½æ˜¯é™åˆ¶èŒƒå›´å£°æ˜çš„é»˜è®¤å€¼ã€‚
containers: - image: nginx imagePullPolicy: Always name: default-mem-demo-ctr resources: limits: memory: 512Mi requests: memory: 256Mi åˆ é™¤ä½ çš„ Podï¼š</description>
    </item>
    
    <item>
      <title>ä¸ºå®¹å™¨å’Œ Pod åˆ†é…å†…å­˜èµ„æº</title>
      <link>https://lijun.in/tasks/configure-pod-container/assign-memory-resource/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/assign-memory-resource/</guid>
      <description>æ­¤é¡µé¢æ˜¾ç¤ºå¦‚ä½•å°†å†…å­˜ è¯·æ±‚ ï¼ˆrequestï¼‰å’Œå†…å­˜ é™åˆ¶ ï¼ˆlimitï¼‰åˆ†é…ç»™ä¸€ä¸ªå®¹å™¨ã€‚æˆ‘ä»¬ä¿éšœå®¹å™¨æ‹¥æœ‰å®ƒè¯·æ±‚æ•°é‡çš„å†…å­˜ï¼Œä½†ä¸å…è®¸ä½¿ç”¨è¶…è¿‡é™åˆ¶æ•°é‡çš„å†…å­˜ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
æ‚¨é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å¿…é¡»æ‹¥æœ‰è‡³å°‘ 300 MiB çš„å†…å­˜ã€‚
è¯¥é¡µé¢ä¸Šçš„ä¸€äº›æ­¥éª¤è¦æ±‚æ‚¨åœ¨é›†ç¾¤ä¸­è¿è¡Œ metrics-server æœåŠ¡ã€‚å¦‚æœæ‚¨å·²ç»æœ‰åœ¨è¿è¡Œä¸­çš„ metrics-serverï¼Œåˆ™å¯ä»¥è·³è¿‡è¿™äº›æ­¥éª¤ã€‚
å¦‚æœæ‚¨è¿è¡Œçš„æ˜¯ Minikubeï¼Œå¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤å¯ç”¨ metrics-serverï¼š
minikube addons enable metrics-server è¦æŸ¥çœ‹ metrics-server æˆ–èµ„æºæŒ‡æ ‡ API (metrics.k8s.io) æ˜¯å¦å·²ç»è¿è¡Œï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
kubectl get apiservices å¦‚æœèµ„æºæŒ‡æ ‡ API å¯ç”¨ï¼Œåˆ™è¾“å‡ºç»“æœå°†åŒ…å«å¯¹ metrics.k8s.io çš„å¼•ç”¨ä¿¡æ¯ã€‚
NAME v1beta1.metrics.k8s.io åˆ›å»ºå‘½åç©ºé—´ åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œä»¥ä¾¿å°†æœ¬ç»ƒä¹ ä¸­åˆ›å»ºçš„èµ„æºä¸é›†ç¾¤çš„å…¶ä½™éƒ¨åˆ†éš”ç¦»ã€‚
kubectl create namespace mem-example æŒ‡å®šå†…å­˜è¯·æ±‚å’Œé™åˆ¶ è¦ä¸ºå®¹å™¨æŒ‡å®šå†…å­˜è¯·æ±‚ï¼Œè¯·åœ¨å®¹å™¨èµ„æºæ¸…å•ä¸­åŒ…å« resourcesï¼šrequests å­—æ®µã€‚ åŒç†ï¼Œè¦æŒ‡å®šå†…å­˜é™åˆ¶ï¼Œè¯·åŒ…å« resourcesï¼šlimitsã€‚
åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œæ‚¨å°†åˆ›å»ºä¸€ä¸ªæ‹¥æœ‰ä¸€ä¸ªå®¹å™¨çš„ Podã€‚ å®¹å™¨å°†ä¼šè¯·æ±‚ 100 MiB å†…å­˜ï¼Œå¹¶ä¸”å†…å­˜ä¼šè¢«é™åˆ¶åœ¨ 200 MiB ä»¥å†…ã€‚ è¿™æ˜¯ Pod çš„é…ç½®æ–‡ä»¶ï¼š</description>
    </item>
    
    <item>
      <title>ä¸ºå®¹å™¨è®¾ç½®å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤åŠå…¶å…¥å‚</title>
      <link>https://lijun.in/tasks/inject-data-application/define-command-argument-container/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/inject-data-application/define-command-argument-container/</guid>
      <description>æœ¬é¡µå°†å±•ç¤ºå¦‚ä½•ä¸º . glossary_tooltip term_id=&amp;quot;pod&amp;rdquo; &amp;gt;}} ä¸­çš„å®¹å™¨è®¾ç½®å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤åŠå…¶å…¥å‚ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åˆ›å»º Pod æ—¶è®¾ç½®å‘½ä»¤åŠå…¥å‚ åˆ›å»º Pod æ—¶ï¼Œå¯ä»¥ä¸ºå…¶ä¸‹çš„å®¹å™¨è®¾ç½®å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤åŠå…¶å…¥å‚ã€‚å¦‚æœè¦è®¾ç½®å‘½ä»¤ï¼Œå°±å¡«å†™åœ¨é…ç½®æ–‡ä»¶çš„ command å­—æ®µä¸‹ï¼Œå¦‚æœè¦è®¾ç½®å‘½ä»¤çš„å…¥å‚ï¼Œå°±å¡«å†™åœ¨é…ç½®æ–‡ä»¶çš„ args å­—æ®µä¸‹ã€‚ä¸€æ—¦ Pod åˆ›å»ºå®Œæˆï¼Œè¯¥å‘½ä»¤åŠå…¶å…¥å‚å°±æ— æ³•å†è¿›è¡Œæ›´æ”¹äº†ã€‚
å¦‚æœåœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®äº†å®¹å™¨å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤åŠå…¶å…¥å‚ï¼Œé‚£ä¹ˆå®¹å™¨é•œåƒä¸­è‡ªå¸¦çš„å‘½ä»¤ä¸å…¥å‚å°†ä¼šè¢«è¦†ç›–è€Œä¸å†æ‰§è¡Œã€‚å¦‚æœé…ç½®æ–‡ä»¶ä¸­åªæ˜¯è®¾ç½®äº†å…¥å‚ï¼Œå´æ²¡æœ‰è®¾ç½®å…¶å¯¹åº”çš„å‘½ä»¤ï¼Œé‚£ä¹ˆå®¹å™¨é•œåƒä¸­è‡ªå¸¦çš„å‘½ä»¤ä¼šä½¿ç”¨è¯¥æ–°å…¥å‚ä½œä¸ºå…¶æ‰§è¡Œæ—¶çš„å…¥å‚ã€‚
. note &amp;gt;}} åœ¨æœ‰äº›å®¹å™¨è¿è¡Œæ—¶ä¸­ï¼Œcommand å­—æ®µå¯¹åº” entrypointï¼Œè¯·å‚é˜…ä¸‹é¢çš„ æ³¨æ„ã€‚ . /note &amp;gt;}}
æœ¬ç¤ºä¾‹ä¸­ï¼Œå°†åˆ›å»ºä¸€ä¸ªåªåŒ…å«å•ä¸ªå®¹å™¨çš„ Podã€‚åœ¨ Pod é…ç½®æ–‡ä»¶ä¸­è®¾ç½®äº†ä¸€ä¸ªå‘½ä»¤ä¸ä¸¤ä¸ªå…¥å‚ï¼š
. codenew file=&amp;quot;pods/commands.yaml&amp;rdquo; &amp;gt;}}
  åŸºäº YAML æ–‡ä»¶åˆ›å»ºä¸€ä¸ª Podï¼š
kubectl apply -f https://k8s.io/examples/pods/commands.yaml    è·å–æ­£åœ¨è¿è¡Œçš„ Podsï¼š
kubectl get pods ``
æŸ¥è¯¢ç»“æœæ˜¾ç¤ºåœ¨ command-demo è¿™ä¸ª Pod ä¸‹è¿è¡Œçš„å®¹å™¨å·²ç»å¯åŠ¨å®Œæˆã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Calico ä½œä¸º NetworkPolicy</title>
      <link>https://lijun.in/tasks/administer-cluster/network-policy-provider/calico-network-policy/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/network-policy-provider/calico-network-policy/</guid>
      <description>æœ¬é¡µå±•ç¤ºäº†ä¸¤ç§åœ¨ Kubernetes ä¸Šå¿«é€Ÿåˆ›å»º Calico é›†ç¾¤çš„æ–¹æ³•ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} å†³å®šæ‚¨æƒ³éƒ¨ç½²ä¸€ä¸ªäº‘ è¿˜æ˜¯ æœ¬åœ° é›†ç¾¤ã€‚
åœ¨ Google Kubernetes Engine (GKE) ä¸Šåˆ›å»ºä¸€ä¸ª Calico é›†ç¾¤ å…ˆå†³æ¡ä»¶: gcloud
  å¯åŠ¨ä¸€ä¸ªå¸¦æœ‰ Calico çš„ GKE é›†ç¾¤ï¼Œåªéœ€åŠ ä¸Šflag --enable-network-policyã€‚
è¯­æ³•
gcloud container clusters create [CLUSTER_NAME] --enable-network-policy ç¤ºä¾‹
gcloud container clusters create my-calico-cluster --enable-network-policy   ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤éªŒè¯éƒ¨ç½²æ˜¯å¦æ­£ç¡®ã€‚
kubectl get pods --namespace=kube-system Calico çš„ pods åä»¥ calico æ‰“å¤´ï¼Œæ£€æŸ¥ç¡®è®¤æ¯ä¸ª pods çŠ¶æ€ä¸º Runningã€‚
  ä½¿ç”¨ kubeadm åˆ›å»ºä¸€ä¸ªæœ¬åœ° Calico é›†ç¾¤ åœ¨15åˆ†é’Ÿå†…ä½¿ç”¨ kubeadm å¾—åˆ°ä¸€ä¸ªæœ¬åœ°å•ä¸»æœº Calico é›†ç¾¤ï¼Œè¯·å‚è€ƒ Calico å¿«é€Ÿå…¥é—¨ã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ CronJob è¿è¡Œè‡ªåŠ¨åŒ–ä»»åŠ¡</title>
      <link>https://lijun.in/tasks/job/automated-tasks-with-cron-jobs/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/job/automated-tasks-with-cron-jobs/</guid>
      <description>ä½ å¯ä»¥åˆ©ç”¨ CronJobs æ‰§è¡ŒåŸºäºæ—¶é—´è°ƒåº¦çš„ä»»åŠ¡ã€‚è¿™äº›è‡ªåŠ¨åŒ–ä»»åŠ¡å’Œ Linux æˆ–è€… Unix ç³»ç»Ÿçš„ Cron ä»»åŠ¡ç±»ä¼¼ã€‚
CronJobs åœ¨åˆ›å»ºå‘¨æœŸæ€§ä»¥åŠé‡å¤æ€§çš„ä»»åŠ¡æ—¶å¾ˆæœ‰å¸®åŠ©ï¼Œä¾‹å¦‚æ‰§è¡Œå¤‡ä»½æ“ä½œæˆ–è€…å‘é€é‚®ä»¶ã€‚CronJobs ä¹Ÿå¯ä»¥åœ¨ç‰¹å®šæ—¶é—´è°ƒåº¦å•ä¸ªä»»åŠ¡ï¼Œä¾‹å¦‚ä½ æƒ³è°ƒåº¦ä½æ´»è·ƒå‘¨æœŸçš„ä»»åŠ¡ã€‚
. note &amp;gt;}}
ä»é›†ç¾¤ç‰ˆæœ¬1.8å¼€å§‹ï¼Œbatch/v2alpha1 API ç»„ä¸­çš„ CronJob èµ„æºå·²ç»è¢«åºŸå¼ƒã€‚ ä½ åº”è¯¥åˆ‡æ¢åˆ° API æœåŠ¡å™¨é»˜è®¤å¯ç”¨çš„ batch/v1beta1 API ç»„ã€‚æœ¬æ–‡ä¸­çš„æ‰€æœ‰ç¤ºä¾‹ä½¿ç”¨äº†batch/v1beta1ã€‚ . /note &amp;gt;}}
CronJobs æœ‰ä¸€äº›é™åˆ¶å’Œç‰¹ç‚¹ã€‚ ä¾‹å¦‚ï¼Œåœ¨ç‰¹å®šçŠ¶å†µä¸‹ï¼ŒåŒä¸€ä¸ª CronJob å¯ä»¥åˆ›å»ºå¤šä¸ªä»»åŠ¡ã€‚ å› æ­¤ï¼Œä»»åŠ¡åº”è¯¥æ˜¯å¹‚ç­‰çš„ã€‚ æŸ¥çœ‹æ›´å¤šé™åˆ¶ï¼Œè¯·å‚è€ƒ CronJobsã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}   ä½ éœ€è¦ä¸€ä¸ªç‰ˆæœ¬ &amp;gt;=1.8 ä¸”å·¥ä½œæ­£å¸¸çš„ Kubernetes é›†ç¾¤ã€‚å¯¹äºæ›´æ—©çš„ç‰ˆæœ¬ï¼ˆ &amp;lt;1.8 ï¼‰ï¼Œä½ éœ€è¦å¯¹ API æœåŠ¡å™¨è®¾ç½® --runtime-config=batch/v2alpha1=true æ¥å¼€å¯ batch/v2alpha1 APIï¼Œ(æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹ ä¸ºä½ çš„é›†ç¾¤å¼€å¯æˆ–å…³é—­ API ç‰ˆæœ¬ ), ç„¶åé‡å¯ API æœåŠ¡å™¨å’Œæ§åˆ¶ç®¡ç†å™¨ã€‚  åˆ›å»º CronJob CronJob éœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚ æœ¬ä¾‹ä¸­ CronJob çš„.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ kubectl åˆ›å»º Deployment</title>
      <link>https://lijun.in/tutorials/kubernetes-basics/deploy-app/deploy-intro/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/kubernetes-basics/deploy-app/deploy-intro/</guid>
      <description>Objectives -- ç›®æ ‡ Learn about application Deployments. Deploy your first app on Kubernetes with kubectl.  --  å­¦ä¹ äº†è§£åº”ç”¨çš„éƒ¨ç½² ä½¿ç”¨ kubectl åœ¨ Kubernetes ä¸Šéƒ¨ç½²ç¬¬ä¸€ä¸ªåº”ç”¨   Kubernetes Deployments -- Kubernetes éƒ¨ç½² Once you have a running Kubernetes cluster, you can deploy your containerized applications on top of it. To do so, you create a Kubernetes Deployment configuration. The Deployment instructs Kubernetes how to create and update instances of your application.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Minikube åˆ›å»ºé›†ç¾¤</title>
      <link>https://lijun.in/tutorials/kubernetes-basics/create-cluster/cluster-intro/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/kubernetes-basics/create-cluster/cluster-intro/</guid>
      <description>ç›®æ ‡  äº†è§£ Kubernetes é›†ç¾¤ã€‚ äº†è§£ Minikube ã€‚ ä½¿ç”¨åœ¨çº¿ç»ˆç«¯å¼€å¯ä¸€ä¸ª Kubernetes é›†ç¾¤ã€‚    Kubernetes é›†ç¾¤   Kubernetes åè°ƒä¸€ä¸ªé«˜å¯ç”¨è®¡ç®—æœºé›†ç¾¤ï¼Œæ¯ä¸ªè®¡ç®—æœºä½œä¸ºç‹¬ç«‹å•å…ƒäº’ç›¸è¿æ¥å·¥ä½œã€‚ Kubernetes ä¸­çš„æŠ½è±¡å…è®¸æ‚¨å°†å®¹å™¨åŒ–çš„åº”ç”¨éƒ¨ç½²åˆ°ç¾¤é›†ï¼Œè€Œæ— éœ€å°†å®ƒä»¬ç»‘å®šåˆ°æŸä¸ªç‰¹å®šçš„ç‹¬ç«‹è®¡ç®—æœºã€‚ä¸ºäº†ä½¿ç”¨è¿™ç§æ–°çš„éƒ¨ç½²æ¨¡å‹ï¼Œåº”ç”¨éœ€è¦ä»¥å°†åº”ç”¨ä¸å•ä¸ªä¸»æœºåˆ†ç¦»çš„æ–¹å¼æ‰“åŒ…ï¼šå®ƒä»¬éœ€è¦è¢«å®¹å™¨åŒ–ã€‚ä¸è¿‡å»çš„é‚£ç§åº”ç”¨ç›´æ¥ä»¥åŒ…çš„æ–¹å¼æ·±åº¦ä¸ä¸»æœºé›†æˆçš„éƒ¨ç½²æ¨¡å‹ç›¸æ¯”ï¼Œå®¹å™¨åŒ–åº”ç”¨æ›´çµæ´»ã€æ›´å¯ç”¨ã€‚ Kubernetes ä»¥æ›´é«˜æ•ˆçš„æ–¹å¼è·¨ç¾¤é›†è‡ªåŠ¨åˆ†å‘å’Œè°ƒåº¦åº”ç”¨å®¹å™¨ã€‚ Kubernetes æ˜¯ä¸€ä¸ªå¼€æºå¹³å°ï¼Œå¹¶ä¸”å¯åº”ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚ ä¸€ä¸ª Kubernetes é›†ç¾¤åŒ…å«ä¸¤ç§ç±»å‹çš„èµ„æº:   Master è°ƒåº¦æ•´ä¸ªé›†ç¾¤  Nodes è´Ÿè´£è¿è¡Œåº”ç”¨   æ€»ç»“:   Kubernetes é›†ç¾¤  Minikube     Kubernetes æ˜¯ä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„å¼€æºå¹³å°ï¼Œå¯åè°ƒåœ¨è®¡ç®—æœºé›†ç¾¤å†…å’Œè·¨è®¡ç®—æœºé›†ç¾¤çš„åº”ç”¨å®¹å™¨çš„éƒ¨ç½²ï¼ˆè°ƒåº¦ï¼‰å’Œæ‰§è¡Œ. 
   é›†ç¾¤å›¾      Master è´Ÿè´£ç®¡ç†æ•´ä¸ªé›†ç¾¤ã€‚ Master åè°ƒé›†ç¾¤ä¸­çš„æ‰€æœ‰æ´»åŠ¨ï¼Œä¾‹å¦‚è°ƒåº¦åº”ç”¨ã€ç»´æŠ¤åº”ç”¨çš„æ‰€éœ€çŠ¶æ€ã€åº”ç”¨æ‰©å®¹ä»¥åŠæ¨å‡ºæ–°çš„æ›´æ–°ã€‚
 Node æ˜¯ä¸€ä¸ªè™šæ‹Ÿæœºæˆ–è€…ç‰©ç†æœºï¼Œå®ƒåœ¨ Kubernetes é›†ç¾¤ä¸­å……å½“å·¥ä½œæœºå™¨çš„è§’è‰² æ¯ä¸ªNodeéƒ½æœ‰ Kubelet , å®ƒç®¡ç† Node è€Œä¸”æ˜¯ Node ä¸ Master é€šä¿¡çš„ä»£ç†ã€‚ Node è¿˜åº”è¯¥å…·æœ‰ç”¨äºâ€‹â€‹å¤„ç†å®¹å™¨æ“ä½œçš„å·¥å…·ï¼Œä¾‹å¦‚ Docker æˆ– rkt ã€‚å¤„ç†ç”Ÿäº§çº§æµé‡çš„ Kubernetes é›†ç¾¤è‡³å°‘åº”å…·æœ‰ä¸‰ä¸ª Node ã€‚</description>
    </item>
    
    <item>
      <title>å…¬å¼€å¤–éƒ¨ IP åœ°å€ä»¥è®¿é—®é›†ç¾¤ä¸­åº”ç”¨ç¨‹åº</title>
      <link>https://lijun.in/tutorials/stateless-application/expose-external-ip-address/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/stateless-application/expose-external-ip-address/</guid>
      <description>æ­¤é¡µé¢æ˜¾ç¤ºå¦‚ä½•åˆ›å»ºå…¬å¼€å¤–éƒ¨ IP åœ°å€çš„ Kubernetes æœåŠ¡å¯¹è±¡ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}   å®‰è£… kubectl.
  ä½¿ç”¨ Google Kubernetes Engine æˆ– Amazon Web Services ç­‰äº‘ä¾›åº”å•†åˆ›å»º Kubernetes ç¾¤é›†ã€‚ æœ¬æ•™ç¨‹åˆ›å»ºäº†ä¸€ä¸ªå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨ï¼Œéœ€è¦äº‘ä¾›åº”å•†ã€‚
  é…ç½® kubectl ä¸ Kubernetes API æœåŠ¡å™¨é€šä¿¡ã€‚æœ‰å…³è¯´æ˜ï¼Œè¯·å‚é˜…äº‘ä¾›åº”å•†æ–‡æ¡£ã€‚
  . heading &amp;ldquo;objectives&amp;rdquo; %}}  è¿è¡Œ Hello World åº”ç”¨ç¨‹åºçš„äº”ä¸ªå®ä¾‹ã€‚ åˆ›å»ºä¸€ä¸ªå…¬å¼€å¤–éƒ¨ IP åœ°å€çš„ Service å¯¹è±¡ã€‚ ä½¿ç”¨ Service å¯¹è±¡è®¿é—®æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚  ä¸ºä¸€ä¸ªåœ¨äº”ä¸ª pod ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºåˆ›å»ºæœåŠ¡  åœ¨é›†ç¾¤ä¸­è¿è¡Œ Hello World åº”ç”¨ç¨‹åºï¼š  . codenew file=&amp;quot;service/load-balancer-example.yaml&amp;rdquo; &amp;gt;}}
kubectl apply -f https://k8s.</description>
    </item>
    
    <item>
      <title>å®‰è£… kubeadm</title>
      <link>https://lijun.in/setup/production-environment/tools/kubeadm/install-kubeadm/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/tools/kubeadm/install-kubeadm/</guid>
      <description>æœ¬é¡µé¢æ˜¾ç¤ºå¦‚ä½•å®‰è£… kubeadm å·¥å…·ç®±ã€‚ æœ‰å…³åœ¨æ‰§è¡Œæ­¤å®‰è£…è¿‡ç¨‹åå¦‚ä½•ä½¿ç”¨ kubeadm åˆ›å»ºé›†ç¾¤çš„ä¿¡æ¯ï¼Œè¯·å‚è§ä½¿ç”¨ kubeadm åˆ›å»ºé›†ç¾¤ é¡µé¢ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  ä¸€å°æˆ–å¤šå°è¿è¡Œç€ä¸‹åˆ—ç³»ç»Ÿçš„æœºå™¨ï¼š  Ubuntu 16.04+ Debian 9+ CentOS 7 Red Hat Enterprise Linux (RHEL) 7 Fedora 25+ HypriotOS v1.0.1+ Container Linux (æµ‹è¯• 1800.6.0 ç‰ˆæœ¬)   æ¯å°æœºå™¨ 2 GB æˆ–æ›´å¤šçš„ RAM (å¦‚æœå°‘äºè¿™ä¸ªæ•°å­—å°†ä¼šå½±å“æ‚¨åº”ç”¨çš„è¿è¡Œå†…å­˜) 2 CPU æ ¸æˆ–æ›´å¤š é›†ç¾¤ä¸­çš„æ‰€æœ‰æœºå™¨çš„ç½‘ç»œå½¼æ­¤å‡èƒ½ç›¸äº’è¿æ¥(å…¬ç½‘å’Œå†…ç½‘éƒ½å¯ä»¥) èŠ‚ç‚¹ä¹‹ä¸­ä¸å¯ä»¥æœ‰é‡å¤çš„ä¸»æœºåã€MAC åœ°å€æˆ– product_uuidã€‚è¯·å‚è§è¿™é‡Œ äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚ å¼€å¯æœºå™¨ä¸Šçš„æŸäº›ç«¯å£ã€‚è¯·å‚è§è¿™é‡Œ äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚ ç¦ç”¨äº¤æ¢åˆ†åŒºã€‚ä¸ºäº†ä¿è¯ kubelet æ­£å¸¸å·¥ä½œï¼Œæ‚¨ å¿…é¡» ç¦ç”¨äº¤æ¢åˆ†åŒºã€‚  ç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹ä¸Š MAC åœ°å€å’Œ product_uuid çš„å”¯ä¸€æ€§  æ‚¨å¯ä»¥ä½¿ç”¨å‘½ä»¤ ip link æˆ– ifconfig -a æ¥è·å–ç½‘ç»œæ¥å£çš„ MAC åœ°å€ å¯ä»¥ä½¿ç”¨ sudo cat /sys/class/dmi/id/product_uuid å‘½ä»¤å¯¹ product_uuid æ ¡éªŒ  ä¸€èˆ¬æ¥è®²ï¼Œç¡¬ä»¶è®¾å¤‡ä¼šæ‹¥æœ‰å”¯ä¸€çš„åœ°å€ï¼Œä½†æ˜¯æœ‰äº›è™šæ‹Ÿæœºçš„åœ°å€å¯èƒ½ä¼šé‡å¤ã€‚Kubernetes ä½¿ç”¨è¿™äº›å€¼æ¥å”¯ä¸€ç¡®å®šé›†ç¾¤ä¸­çš„èŠ‚ç‚¹ã€‚ å¦‚æœè¿™äº›å€¼åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šä¸å”¯ä¸€ï¼Œå¯èƒ½ä¼šå¯¼è‡´å®‰è£…å¤±è´¥ã€‚</description>
    </item>
    
    <item>
      <title>å®‰è£…å¹¶è®¾ç½® kubectl</title>
      <link>https://lijun.in/tasks/tools/install-kubectl/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/tools/install-kubectl/</guid>
      <description>åœ¨ Kubernetes ä¸Šä½¿ç”¨ Kubernetes å‘½ä»¤è¡Œå·¥å…· kubectl éƒ¨ç½²å’Œç®¡ç†åº”ç”¨ç¨‹åºã€‚ä½¿ç”¨ kubectlï¼Œæ‚¨å¯ä»¥æ£€æŸ¥é›†ç¾¤èµ„æºï¼›åˆ›å»ºã€åˆ é™¤å’Œæ›´æ–°ç»„ä»¶ï¼›æŸ¥çœ‹æ‚¨çš„æ–°é›†ç¾¤ï¼›å¹¶å¯åŠ¨å®ä¾‹åº”ç”¨ç¨‹åºã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} æ‚¨å¿…é¡»ä½¿ç”¨ä¸é›†ç¾¤å°ç‰ˆæœ¬å·å·®åˆ«ä¸ºä¸€çš„ kubectl ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼Œ1.2ç‰ˆæœ¬çš„å®¢æˆ·ç«¯åº”è¯¥ä¸1.1ç‰ˆæœ¬ã€1.2ç‰ˆæœ¬å’Œ1.3ç‰ˆæœ¬çš„ä¸»èŠ‚ç‚¹ä¸€èµ·ä½¿ç”¨ã€‚ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ kubectl æœ‰åŠ©äºé¿å…æ— æ³•é¢„æ–™çš„é—®é¢˜ã€‚
å®‰è£… kubectl ä»¥ä¸‹æ˜¯ä¸€äº›å®‰è£… kubectl çš„æ–¹æ³•ã€‚
ä½¿ç”¨æœ¬åœ°è½¯ä»¶åŒ…ç®¡ç†è½¯ä»¶å®‰è£… kubectl äºŒè¿›åˆ¶æ–‡ä»¶ . tabs name=&amp;quot;kubectl_install&amp;rdquo; &amp;gt;}} . tab name=&amp;quot;Ubuntu, Debian or HypriotOS&amp;rdquo; codelang=&amp;quot;bash&amp;rdquo; &amp;gt;}} sudo apt-get update &amp;amp;&amp;amp; sudo apt-get install -y apt-transport-https curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add - echo &amp;ldquo;deb https://apt.kubernetes.io/ kubernetes-xenial main&amp;rdquo; | sudo tee -a /etc/apt/sources.list.d/kubernetes.list sudo apt-get update sudo apt-get install -y kubectl .</description>
    </item>
    
    <item>
      <title>å®¹å™¨è¿è¡Œæ—¶</title>
      <link>https://lijun.in/setup/production-environment/container-runtimes/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/container-runtimes/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;v1.6&amp;rdquo; state=&amp;quot;stable&amp;rdquo; &amp;gt;}}
Kubernetes ä½¿ç”¨å®¹å™¨è¿è¡Œæ—¶æ¥å®ç°åœ¨ pod ä¸­è¿è¡Œå®¹å™¨ã€‚ è¿™æ˜¯å„ç§è¿è¡Œæ—¶çš„å®‰è£…è¯´æ˜ã€‚
. caution &amp;gt;}}
æˆ‘ä»¬å‘ç° runc åœ¨è¿è¡Œå®¹å™¨ï¼Œå¤„ç†ç³»ç»Ÿæ–‡ä»¶æè¿°ç¬¦æ—¶å­˜åœ¨ä¸€ä¸ªæ¼æ´ã€‚ æ¶æ„å®¹å™¨å¯ä»¥åˆ©ç”¨æ­¤æ¼æ´è¦†ç›– runc äºŒè¿›åˆ¶æ–‡ä»¶çš„å†…å®¹ï¼Œå¹¶ä»¥æ­¤åœ¨ä¸»æœºç³»ç»Ÿçš„å®¹å™¨ä¸Šè¿è¡Œä»»æ„çš„å‘½ä»¤ã€‚
è¯·å‚è€ƒæ­¤é“¾æ¥ä»¥è·å–æœ‰å…³æ­¤é—®é¢˜çš„æ›´å¤šä¿¡æ¯ [cve-2019-5736 : runc vulnerability ] (https://access.redhat.com/security/cve/cve-2019-5736) . /caution &amp;gt;}}
é€‚ç”¨æ€§ . note &amp;gt;}}
æœ¬æ–‡æ¡£æ˜¯ä¸ºåœ¨ Linux ä¸Šå®‰è£… CRI çš„ç”¨æˆ·ç¼–å†™çš„ã€‚ å¯¹äºå…¶ä»–æ“ä½œç³»ç»Ÿï¼Œè¯·æŸ¥æ‰¾ç‰¹å®šäºæ‚¨å¹³å°çš„æ–‡æ¡£ã€‚ . /note &amp;gt;}}
æ‚¨åº”è¯¥ä»¥ root èº«ä»½æ‰§è¡Œæœ¬æŒ‡å—ä¸­çš„æ‰€æœ‰å‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ sudo å‰ç¼€å‘½ä»¤ï¼Œæˆ–è€…æˆä¸º root å¹¶ä»¥è¯¥ç”¨æˆ·èº«ä»½è¿è¡Œå‘½ä»¤ã€‚
Cgroup é©±åŠ¨ç¨‹åº å½“æŸä¸ª Linux ç³»ç»Ÿå‘è¡Œç‰ˆä½¿ç”¨ systemd ä½œä¸ºå…¶åˆå§‹åŒ–ç³»ç»Ÿæ—¶ï¼Œåˆå§‹åŒ–è¿›ç¨‹ä¼šç”Ÿæˆå¹¶ä½¿ç”¨ä¸€ä¸ª root æ§åˆ¶ç»„ ï¼ˆcgroupï¼‰ï¼Œå¹¶å……å½“ cgroup ç®¡ç†å™¨ã€‚ systemd ä¸ cgroup é›†æˆç´§å¯†ï¼Œå¹¶å°†ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é… cgroupã€‚ æ‚¨ä¹Ÿå¯ä»¥é…ç½®å®¹å™¨è¿è¡Œæ—¶å’Œ kubelet ä½¿ç”¨ cgroupfsã€‚ è¿åŒ systemd ä¸€èµ·ä½¿ç”¨ cgroupfs æ„å‘³ç€å°†æœ‰ä¸¤ä¸ªä¸åŒçš„ cgroup ç®¡ç†å™¨ã€‚</description>
    </item>
    
    <item>
      <title>æ‰§è¡Œæ»šåŠ¨æ›´æ–°</title>
      <link>https://lijun.in/tutorials/kubernetes-basics/update/update-intro/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/kubernetes-basics/update/update-intro/</guid>
      <description>Objectives  Perform a rolling update using kubectl. -- ä½¿ç”¨ kubectl æ‰§è¡Œæ»šåŠ¨æ›´æ–°ã€‚   Updating an application -- æ›´æ–°åº”ç”¨ç¨‹åº Users expect applications to be available all the time and developers are expected to deploy new versions of them several times a day. In Kubernetes this is done with rolling updates. Rolling updates allow Deployments&#39; update to take place with zero downtime by incrementally updating Pods instances with new ones.</description>
    </item>
    
    <item>
      <title>æ‰©å±• Kubernetes é›†ç¾¤</title>
      <link>https://lijun.in/concepts/extend-kubernetes/extend-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/extend-kubernetes/extend-cluster/</guid>
      <description>Kubernetes æ˜¯é«˜åº¦å¯é…ç½®å’Œå¯æ‰©å±•çš„ã€‚å› æ­¤ï¼Œæå°‘éœ€è¦åˆ†å‘æˆ–æäº¤è¡¥ä¸ä»£ç ç»™ Kubernetes é¡¹ç›®ã€‚
æœ¬æ–‡æ¡£ä»‹ç»è‡ªå®šä¹‰ Kubernetes é›†ç¾¤çš„é€‰é¡¹ã€‚æœ¬æ–‡æ¡£çš„ç›®æ ‡è¯»è€… text=&amp;quot;cluster operators&amp;rdquo; term_id=&amp;quot;cluster-operator&amp;rdquo; &amp;gt;}} æ˜¯å¸Œæœ›äº†è§£å¦‚ä½•ä½¿ Kubernetes é›†ç¾¤æ»¡è¶³å…¶ä¸šåŠ¡ç¯å¢ƒéœ€æ±‚çš„é›†ç¾¤è¿ç»´äººå‘˜ã€‚Kubernetes é¡¹ç›®çš„è´¡çŒ®è€… text=&amp;quot;Contributors&amp;rdquo; term_id=&amp;quot;contributor&amp;rdquo; &amp;gt;}} æˆ–æ½œåœ¨çš„å¹³å°å¼€å‘äººå‘˜ text=&amp;quot;Platform Developers&amp;rdquo; term_id=&amp;quot;platform-developer&amp;rdquo; &amp;gt;}} ä¹Ÿå¯ä»¥ä»æœ¬æ–‡æ‰¾åˆ°æœ‰ç”¨çš„ä¿¡æ¯ï¼Œå¦‚å¯¹å·²å­˜åœ¨æ‰©å±•ç‚¹å’Œæ¨¡å¼çš„ä»‹ç»ï¼Œä»¥åŠå®ƒä»¬çš„æƒè¡¡å’Œé™åˆ¶ã€‚
æ¦‚è¿° å®šåˆ¶æ–¹æ³•å¯ä»¥å¤§è‡´åˆ†ä¸º é…ç½® å’Œ æ‰©å±• ã€‚é…ç½® åªæ¶‰åŠæ›´æ”¹æ ‡å¿—å‚æ•°ã€æœ¬åœ°é…ç½®æ–‡ä»¶æˆ– API èµ„æºï¼›æ‰©å±• æ¶‰åŠè¿è¡Œé¢å¤–çš„ç¨‹åºæˆ–æœåŠ¡ã€‚æœ¬æ–‡æ¡£ä¸»è¦å†…å®¹æ˜¯å…³äºæ‰©å±•ã€‚
é…ç½® å…³äº é…ç½®æ–‡ä»¶ å’Œ æ ‡å¿— çš„è¯´æ˜æ–‡æ¡£ä½äºåœ¨çº¿æ–‡æ¡£çš„å‚è€ƒéƒ¨åˆ†ï¼ŒæŒ‰ç…§äºŒè¿›åˆ¶ç»„ä»¶å„è‡ªæè¿°ï¼š
 kubelet kube-apiserver kube-controller-manager kube-scheduler.  åœ¨æ‰˜ç®¡çš„ Kubernetes æœåŠ¡æˆ–å—æ§å®‰è£…çš„ Kubernetes ç‰ˆæœ¬ä¸­ï¼Œæ ‡å¿—å’Œé…ç½®æ–‡ä»¶å¯èƒ½å¹¶ä¸æ€»æ˜¯å¯ä»¥æ›´æ”¹çš„ã€‚è€Œä¸”å½“å®ƒä»¬å¯ä»¥è¿›è¡Œæ›´æ”¹æ—¶ï¼Œå®ƒä»¬é€šå¸¸åªèƒ½ç”±é›†ç¾¤ç®¡ç†å‘˜è¿›è¡Œæ›´æ”¹ã€‚æ­¤å¤–ï¼Œæ ‡å¿—å’Œé…ç½®æ–‡ä»¶åœ¨æœªæ¥çš„ Kubernetes ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¹¶ä¸”æ›´æ”¹è®¾ç½®åå®ƒä»¬å¯èƒ½éœ€è¦é‡æ–°å¯åŠ¨è¿›ç¨‹ã€‚å‡ºäºè¿™äº›åŸå› ï¼Œåªæœ‰åœ¨æ²¡æœ‰å…¶ä»–é€‰æ‹©çš„æƒ…å†µä¸‹æ‰ä½¿ç”¨å®ƒä»¬ã€‚
å†…ç½®ç­–ç•¥ API ï¼Œä¾‹å¦‚ ResourceQuotaã€PodSecurityPolicyã€NetworkPolicy å’ŒåŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ (RBAC)ï¼Œæ˜¯å†…ç½®çš„ Kubernetes APIã€‚API é€šå¸¸ä¸æ‰˜ç®¡çš„ Kubernetes æœåŠ¡å’Œå—æ§çš„ Kubernetes å®‰è£…ä¸€èµ·ä½¿ç”¨ã€‚ å®ƒä»¬æ˜¯å£°æ˜æ€§çš„ï¼Œå¹¶ä½¿ç”¨ä¸å…¶ä»– Kubernetes èµ„æºï¼ˆå¦‚ Pod ï¼‰ç›¸åŒçš„çº¦å®šï¼Œæ‰€ä»¥æ–°çš„é›†ç¾¤é…ç½®å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œå¹¶ä»¥ä¸åº”ç”¨ç¨‹åºç›¸åŒçš„æ–¹å¼è¿›è¡Œç®¡ç†ã€‚è€Œä¸”ï¼Œå½“ä»–ä»¬å˜ç¨³å®šåï¼Œä»–ä»¬å’Œå…¶ä»– Kubernetes API ä¸€æ ·äº«å—å®šä¹‰æ”¯æŒæ”¿ç­–ã€‚å‡ºäºè¿™äº›åŸå› ï¼Œåœ¨åˆé€‚çš„æƒ…å†µä¸‹å®ƒä»¬ä¼˜å…ˆäº é…ç½®æ–‡ä»¶ å’Œ æ ‡å¿— è¢«ä½¿ç”¨ã€‚</description>
    </item>
    
    <item>
      <title>æ‰©å±•èµ„æºçš„èµ„æºç®±æ‰“åŒ…</title>
      <link>https://lijun.in/concepts/configuration/resource-bin-packing/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/configuration/resource-bin-packing/</guid>
      <description>for_k8s_version=&amp;quot;1.16&amp;rdquo; state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
å¯ä»¥å°† kube-scheduler é…ç½®ä¸ºä½¿ç”¨ RequestedToCapacityRatioResourceAllocation ä¼˜å…ˆçº§å‡½æ•°å¯ç”¨èµ„æºç®±æ‰“åŒ…ä»¥åŠæ‰©å±•èµ„æºã€‚ ä¼˜å…ˆçº§å‡½æ•°å¯ç”¨äºæ ¹æ®è‡ªå®šä¹‰éœ€æ±‚å¾®è°ƒ kube-scheduler ã€‚
ä½¿ç”¨ RequestedToCapacityRatioResourceAllocation å¯ç”¨è£…ç®± åœ¨ Kubernetes 1.15 ä¹‹å‰ï¼ŒKube-scheduler ç”¨äºå…è®¸æ ¹æ®ä¸»è¦èµ„æºï¼Œå¦‚ CPU å’Œå†…å­˜å¯¹å®¹é‡ä¹‹æ¯”çš„è¯·æ±‚å¯¹èŠ‚ç‚¹è¿›è¡Œè¯„åˆ†ã€‚ Kubernetes 1.16 åœ¨ä¼˜å…ˆçº§å‡½æ•°ä¸­æ·»åŠ äº†ä¸€ä¸ªæ–°å‚æ•°ï¼Œè¯¥å‚æ•°å…è®¸ç”¨æˆ·æŒ‡å®šèµ„æºä»¥åŠæ¯ä¸ªèµ„æºçš„æƒé‡ï¼Œä»¥ä¾¿æ ¹æ®å®¹é‡ä¹‹æ¯”çš„è¯·æ±‚ä¸ºèŠ‚ç‚¹è¯„åˆ†ã€‚ è¿™å…è®¸ç”¨æˆ·é€šè¿‡ä½¿ç”¨é€‚å½“çš„å‚æ•°æ¥æ‰“åŒ…æ‰©å±•èµ„æºï¼Œä»è€Œæé«˜äº†å¤§å‹é›†ç¾¤ä¸­ç¨€ç¼ºèµ„æºçš„åˆ©ç”¨ç‡ã€‚ RequestedToCapacityRatioResourceAllocation ä¼˜å…ˆçº§å‡½æ•°çš„è¡Œä¸ºå¯ä»¥é€šè¿‡åä¸º requestedToCapacityRatioArguments çš„é…ç½®é€‰é¡¹è¿›è¡Œæ§åˆ¶ã€‚ è¿™ä¸ªè®ºè¯ç”±ä¸¤ä¸ªå‚æ•° shape å’Œ resources ç»„æˆã€‚ Shape å…è®¸ç”¨æˆ·æ ¹æ® utilization å’Œ score å€¼å°†åŠŸèƒ½è°ƒæ•´ä¸ºè¦æ±‚æœ€å°‘æˆ–è¦æ±‚æœ€é«˜çš„åŠŸèƒ½ã€‚ èµ„æºç”± name å’Œ weight ç»„æˆï¼Œname æŒ‡å®šè¯„åˆ†æ—¶è¦è€ƒè™‘çš„èµ„æºï¼Œweight æŒ‡å®šæ¯ç§èµ„æºçš„æƒé‡ã€‚
ä»¥ä¸‹æ˜¯ä¸€ä¸ªé…ç½®ç¤ºä¾‹ï¼Œè¯¥é…ç½®å°† requestedToCapacityRatioArguments è®¾ç½®ä¸ºæ‰©å±•èµ„æº intel.com/foo å’Œ intel.com/bar çš„è£…ç®±è¡Œä¸º
{ &amp;#34;kind&amp;#34; : &amp;#34;Policy&amp;#34;, &amp;#34;apiVersion&amp;#34; : &amp;#34;v1&amp;#34;, ... &amp;#34;priorities&amp;#34; : [ ... { &amp;#34;name&amp;#34;: &amp;#34;RequestedToCapacityRatioPriority&amp;#34;, &amp;#34;weight&amp;#34;: 2, &amp;#34;argument&amp;#34;: { &amp;#34;requestedToCapacityRatioArguments&amp;#34;: { &amp;#34;shape&amp;#34;: [ {&amp;#34;utilization&amp;#34;: 0, &amp;#34;score&amp;#34;: 0}, {&amp;#34;utilization&amp;#34;: 100, &amp;#34;score&amp;#34;: 10} ], &amp;#34;resources&amp;#34;: [ {&amp;#34;name&amp;#34;: &amp;#34;intel.</description>
    </item>
    
    <item>
      <title>æŸ¥çœ‹ pod å’Œå·¥ä½œèŠ‚ç‚¹</title>
      <link>https://lijun.in/tutorials/kubernetes-basics/explore/explore-intro/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/kubernetes-basics/explore/explore-intro/</guid>
      <description>Objectives -- ç›®æ ‡  Learn about Kubernetes Pods. Learn about Kubernetes Nodes. Troubleshoot deployed applications. -- äº†è§£ Kubernetes Podã€‚ äº†è§£ Kubernetes å·¥ä½œèŠ‚ç‚¹ã€‚ å¯¹å·²éƒ¨ç½²çš„åº”ç”¨æ•…éšœæ’é™¤ã€‚   Kubernetes Pods -- Kubernetes Pods When you created a Deployment in Module 2, Kubernetes created a Pod to host your application instance. A Pod is a Kubernetes abstraction that represents a group of one or more application containers (such as Docker or rkt), and some shared resources for those containers.</description>
    </item>
    
    <item>
      <title>ç‰¹æ€§é—¨æ§</title>
      <link>https://lijun.in/reference/command-line-tools-reference/feature-gates/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/command-line-tools-reference/feature-gates/</guid>
      <description>æœ¬é¡µè¯¦è¿°äº†ç®¡ç†å‘˜å¯ä»¥åœ¨ä¸åŒçš„ Kubernetes ç»„ä»¶ä¸ŠæŒ‡å®šçš„å„ç§ç‰¹æ€§é—¨æ§ã€‚
å…³äºç‰¹æ€§å„ä¸ªé˜¶æ®µçš„è¯´æ˜ï¼Œè¯·å‚è§ç‰¹æ€§é˜¶æ®µã€‚
æ¦‚è¿° ç‰¹æ€§é—¨æ§æ˜¯æè¿° Kubernetes ç‰¹æ€§çš„ä¸€ç»„é”®å€¼å¯¹ã€‚æ‚¨å¯ä»¥åœ¨ Kubernetes çš„æ¯ä¸€ä¸ªç»„ä»¶ä¸­ä½¿ç”¨ --feature-gates flag æ¥å¯ç”¨æˆ–ç¦ç”¨è¿™äº›ç‰¹æ€§ã€‚
æ¯ä¸ª Kubernetes ç»„ä»¶éƒ½æ”¯æŒå¯ç”¨æˆ–ç¦ç”¨ä¸è¯¥ç»„ä»¶ç›¸å…³çš„ä¸€ç»„ç‰¹æ€§é—¨æ§ã€‚ ä½¿ç”¨ -h å‚æ•°æ¥æŸ¥çœ‹æ‰€æœ‰ç»„ä»¶æ”¯æŒçš„å®Œæ•´ç‰¹æ€§é—¨æ§ã€‚ è¦ä¸ºè¯¸å¦‚ kubelet ä¹‹ç±»çš„ç»„ä»¶è®¾ç½®ç‰¹æ€§é—¨æ§ï¼Œè¯·ä½¿ç”¨ --feature-gates å‚æ•°ï¼Œå¹¶å‘å…¶ä¼ é€’ä¸€ç»„ç‰¹æ€§ï¼š
--feature-gates=&amp;#34;...,DynamicKubeletConfig=true&amp;#34; ä¸‹è¡¨æ€»ç»“äº†åœ¨ä¸åŒçš„ Kubernetes ç»„ä»¶ä¸Šå¯ä»¥è®¾ç½®çš„ç‰¹æ€§é—¨æ§ã€‚
 å¼•å…¥ç‰¹æ€§æˆ–æ›´æ”¹å…¶å‘å¸ƒé˜¶æ®µåï¼Œ&amp;ldquo;Since&amp;rdquo; åˆ—å°†åŒ…å« Kubernetes ç‰ˆæœ¬ã€‚ &amp;ldquo;Until&amp;rdquo; åˆ—ï¼ˆå¦‚æœä¸ä¸ºç©ºï¼‰åŒ…å«æœ€åä¸€ä¸ª Kubernetes ç‰ˆæœ¬ï¼Œæ‚¨ä»å¯ä»¥åœ¨å…¶ä¸­ä½¿ç”¨ç‰¹æ€§é—¨æ§ã€‚ å¦‚æœæŸä¸ªç‰¹æ€§å¤„äº Alpha æˆ– Beta çŠ¶æ€ï¼Œæ‚¨å¯ä»¥åœ¨ Alpha å’Œ Beta ç‰¹æ€§é—¨æ§è¡¨ä¸­æ‰¾åˆ°è¯¥ç‰¹æ€§ã€‚ å¦‚æœæŸä¸ªç‰¹æ€§å¤„äºç¨³å®šçŠ¶æ€ï¼Œæ‚¨å¯ä»¥åœ¨æ¯•ä¸šå’ŒåºŸå¼ƒç‰¹æ€§é—¨æ§è¡¨.ä¸­æ‰¾åˆ°è¯¥ç‰¹æ€§çš„æ‰€æœ‰é˜¶æ®µã€‚ æ¯•ä¸šå’ŒåºŸå¼ƒç‰¹æ€§é—¨æ§è¡¨ è¿˜åˆ—å‡ºäº†åºŸå¼ƒçš„å’Œå·²è¢«ç§»é™¤çš„ç‰¹æ€§ã€‚  Alpha å’Œ Beta çš„ç‰¹æ€§é—¨æ§ . table caption=&amp;quot;å¤„äº Alpha æˆ– Beta çŠ¶æ€çš„ç‰¹æ€§é—¨æ§&amp;rdquo; &amp;gt;}}
   ç‰¹æ€§ é»˜è®¤å€¼ çŠ¶æ€ å¼€å§‹(Since) ç»“æŸ(Until)     APIListChunking false Alpha 1.</description>
    </item>
    
    <item>
      <title>ç†è§£ Kubernetes å¯¹è±¡</title>
      <link>https://lijun.in/concepts/overview/working-with-objects/kubernetes-objects/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/overview/working-with-objects/kubernetes-objects/</guid>
      <description>æœ¬é¡µè¯´æ˜äº† Kubernetes å¯¹è±¡åœ¨ Kubernetes API ä¸­æ˜¯å¦‚ä½•è¡¨ç¤ºçš„ï¼Œä»¥åŠå¦‚ä½•åœ¨ .yaml æ ¼å¼çš„æ–‡ä»¶ä¸­è¡¨ç¤ºã€‚
ç†è§£ Kubernetes å¯¹è±¡ åœ¨ Kubernetes ç³»ç»Ÿä¸­ï¼ŒKubernetes å¯¹è±¡ æ˜¯æŒä¹…åŒ–çš„å®ä½“ã€‚Kubernetes ä½¿ç”¨è¿™äº›å®ä½“å»è¡¨ç¤ºæ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€ã€‚ç‰¹åˆ«åœ°ï¼Œå®ƒä»¬æè¿°äº†å¦‚ä¸‹ä¿¡æ¯ï¼š
 å“ªäº›å®¹å™¨åŒ–åº”ç”¨åœ¨è¿è¡Œï¼ˆä»¥åŠåœ¨å“ªä¸ª Node ä¸Šï¼‰ å¯ä»¥è¢«åº”ç”¨ä½¿ç”¨çš„èµ„æº å…³äºåº”ç”¨è¿è¡Œæ—¶è¡¨ç°çš„ç­–ç•¥ï¼Œæ¯”å¦‚é‡å¯ç­–ç•¥ã€å‡çº§ç­–ç•¥ï¼Œä»¥åŠå®¹é”™ç­–ç•¥  Kubernetes å¯¹è±¡æ˜¯ â€œç›®æ ‡æ€§è®°å½•â€ â€”â€” ä¸€æ—¦åˆ›å»ºå¯¹è±¡ï¼ŒKubernetes ç³»ç»Ÿå°†æŒç»­å·¥ä½œä»¥ç¡®ä¿å¯¹è±¡å­˜åœ¨ã€‚é€šè¿‡åˆ›å»ºå¯¹è±¡ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨å‘ŠçŸ¥ Kubernetes ç³»ç»Ÿï¼Œæ‰€éœ€è¦çš„é›†ç¾¤å·¥ä½œè´Ÿè½½çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œè¿™å°±æ˜¯ Kubernetes é›†ç¾¤çš„ æœŸæœ›çŠ¶æ€ï¼ˆDesired Stateï¼‰ã€‚
æ“ä½œ Kubernetes å¯¹è±¡ â€”â€” æ— è®ºæ˜¯åˆ›å»ºã€ä¿®æ”¹ï¼Œæˆ–è€…åˆ é™¤ â€”â€” éœ€è¦ä½¿ç”¨ Kubernetes APIã€‚æ¯”å¦‚ï¼Œå½“ä½¿ç”¨ kubectl å‘½ä»¤è¡Œæ¥å£æ—¶ï¼ŒCLI ä¼šæ‰§è¡Œå¿…è¦çš„ Kubernetes API è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ç¨‹åºä¸­ä½¿ç”¨ å®¢æˆ·ç«¯åº“ ç›´æ¥è°ƒç”¨ Kubernetes APIã€‚
å¯¹è±¡è§„çº¦ï¼ˆSpecï¼‰ä¸çŠ¶æ€ï¼ˆStatusï¼‰ æ¯ä¸ª Kubernetes å¯¹è±¡åŒ…å«ä¸¤ä¸ªåµŒå¥—çš„å¯¹è±¡å­—æ®µï¼Œå®ƒä»¬è´Ÿè´£ç®¡ç†å¯¹è±¡çš„é…ç½®ï¼šå¯¹è±¡ spec å’Œ å¯¹è±¡ status ã€‚ spec æ˜¯å¿…éœ€çš„ï¼Œå®ƒæè¿°äº†å¯¹è±¡çš„ æœŸæœ›çŠ¶æ€ï¼ˆDesired Stateï¼‰ â€”â€” å¸Œæœ›å¯¹è±¡æ‰€å…·æœ‰çš„ç‰¹å¾ã€‚ status æè¿°äº†å¯¹è±¡çš„ å®é™…çŠ¶æ€ï¼ˆActual Stateï¼‰ ï¼Œå®ƒæ˜¯ç”± Kubernetes ç³»ç»Ÿæä¾›å’Œæ›´æ–°çš„ã€‚åœ¨ä»»ä½•æ—¶åˆ»ï¼ŒKubernetes æ§åˆ¶é¢ä¸€ç›´åŠªåŠ›åœ°ç®¡ç†ç€å¯¹è±¡çš„å®é™…çŠ¶æ€ä»¥ä¸æœŸæœ›çŠ¶æ€ç›¸åŒ¹é…ã€‚</description>
    </item>
    
    <item>
      <title>ç½‘ç»œæ’ä»¶</title>
      <link>https://lijun.in/concepts/extend-kubernetes/compute-storage-net/network-plugins/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/extend-kubernetes/compute-storage-net/network-plugins/</guid>
      <description>state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
Alpha ç‰¹æ€§è¿…é€Ÿå˜åŒ–ã€‚
Kubernetesä¸­çš„ç½‘ç»œæ’ä»¶æœ‰å‡ ç§ç±»å‹ï¼š
 CNI æ’ä»¶ï¼š éµå®ˆ appc/CNI è§„çº¦ï¼Œä¸ºäº’æ“ä½œæ€§è®¾è®¡ã€‚ Kubenet æ’ä»¶ï¼šä½¿ç”¨ bridge å’Œ host-local CNI æ’ä»¶å®ç°äº†åŸºæœ¬çš„ cbr0ã€‚  å®‰è£… kubelet æœ‰ä¸€ä¸ªå•ç‹¬çš„é»˜è®¤ç½‘ç»œæ’ä»¶ï¼Œä»¥åŠä¸€ä¸ªå¯¹æ•´ä¸ªé›†ç¾¤é€šç”¨çš„é»˜è®¤ç½‘ç»œã€‚ å®ƒåœ¨å¯åŠ¨æ—¶æ¢æµ‹æ’ä»¶ï¼Œè®°ä½æ‰¾åˆ°çš„å†…å®¹ï¼Œå¹¶åœ¨ pod ç”Ÿå‘½å‘¨æœŸçš„é€‚å½“æ—¶é—´æ‰§è¡Œæ‰€é€‰æ’ä»¶ï¼ˆè¿™ä»…é€‚ç”¨äº Dockerï¼Œå› ä¸º rkt ç®¡ç†è‡ªå·±çš„ CNI æ’ä»¶ï¼‰ã€‚ åœ¨ä½¿ç”¨æ’ä»¶æ—¶ï¼Œéœ€è¦è®°ä½ä¸¤ä¸ª Kubelet å‘½ä»¤è¡Œå‚æ•°ï¼š
 cni-bin-dirï¼š Kubelet åœ¨å¯åŠ¨æ—¶æ¢æµ‹è¿™ä¸ªç›®å½•ä¸­çš„æ’ä»¶ network-pluginï¼š è¦ä½¿ç”¨çš„ç½‘ç»œæ’ä»¶æ¥è‡ª cni-bin-dirã€‚å®ƒå¿…é¡»ä¸ä»æ’ä»¶ç›®å½•æ¢æµ‹åˆ°çš„æ’ä»¶æŠ¥å‘Šçš„åç§°åŒ¹é…ã€‚å¯¹äº CNI æ’ä»¶ï¼Œå…¶å€¼ä¸º &amp;ldquo;cni&amp;rdquo;ã€‚  ç½‘ç»œæ’ä»¶è¦æ±‚ é™¤äº†æä¾›[NetworkPlugin æ¥å£](https://github.com/kubernetes/kubernetes/tree/param &amp;ldquo;fullversion&amp;rdquo; &amp;gt;}}/pkg/kubelet/dockershim/network/plugins.go)æ¥é…ç½®å’Œæ¸…ç† pod ç½‘ç»œä¹‹å¤–ï¼Œè¯¥æ’ä»¶è¿˜å¯èƒ½éœ€è¦å¯¹ kube-proxy çš„ç‰¹å®šæ”¯æŒã€‚ iptables ä»£ç†æ˜¾ç„¶ä¾èµ–äº iptablesï¼Œæ’ä»¶å¯èƒ½éœ€è¦ç¡®ä¿ iptables èƒ½å¤Ÿç›‘æ§å®¹å™¨çš„ç½‘ç»œé€šä¿¡ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ’ä»¶å°†å®¹å™¨è¿æ¥åˆ° Linux ç½‘æ¡¥ï¼Œæ’ä»¶å¿…é¡»å°† net/bridge/bridge-nf-call-iptables ç³»ç»Ÿå‚æ•°è®¾ç½®ä¸º1ï¼Œä»¥ç¡®ä¿ iptables ä»£ç†æ­£å¸¸å·¥ä½œã€‚ å¦‚æœæ’ä»¶ä¸ä½¿ç”¨ Linux ç½‘æ¡¥ï¼ˆè€Œæ˜¯ç±»ä¼¼äº Open vSwitch æˆ–è€…å…¶å®ƒä¸€äº›æœºåˆ¶ï¼‰ï¼Œå®ƒåº”è¯¥ç¡®ä¿ä¸ºä»£ç†å¯¹å®¹å™¨é€šä¿¡æ‰§è¡Œæ­£ç¡®çš„è·¯ç”±ã€‚</description>
    </item>
    
    <item>
      <title>ç½‘é¡µç•Œé¢ (Dashboard)</title>
      <link>https://lijun.in/tasks/access-application-cluster/web-ui-dashboard/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/web-ui-dashboard/</guid>
      <description>Dashboard æ˜¯åŸºäºç½‘é¡µçš„ Kubernetes ç”¨æˆ·ç•Œé¢ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Dashboard å°†å®¹å™¨åº”ç”¨éƒ¨ç½²åˆ° Kubernetes é›†ç¾¤ä¸­ï¼Œä¹Ÿå¯ä»¥å¯¹å®¹å™¨åº”ç”¨æ’é”™ï¼Œè¿˜èƒ½ç®¡ç†é›†ç¾¤èµ„æºã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Dashboard è·å–è¿è¡Œåœ¨é›†ç¾¤ä¸­çš„åº”ç”¨çš„æ¦‚è§ˆä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºæˆ–è€…ä¿®æ”¹ Kubernetes èµ„æºï¼ˆå¦‚ Deploymentï¼ŒJobï¼ŒDaemonSet ç­‰ç­‰ï¼‰ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å¯¹ Deployment å®ç°å¼¹æ€§ä¼¸ç¼©ã€å‘èµ·æ»šåŠ¨å‡çº§ã€é‡å¯ Pod æˆ–è€…ä½¿ç”¨å‘å¯¼åˆ›å»ºæ–°çš„åº”ç”¨ã€‚
Dashboard åŒæ—¶å±•ç¤ºäº† Kubernetes é›†ç¾¤ä¸­çš„èµ„æºçŠ¶æ€ä¿¡æ¯å’Œæ‰€æœ‰æŠ¥é”™ä¿¡æ¯ã€‚
éƒ¨ç½² Dashboard UI é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šéƒ¨ç½² Dashboardã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤éƒ¨ç½²ï¼š
kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0/aio/deploy/recommended.yaml è®¿é—® Dashboard UI ä¸ºäº†ä¿æŠ¤æ‚¨çš„é›†ç¾¤æ•°æ®ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒDashboard ä¼šä½¿ç”¨æœ€å°‘çš„ RBAC é…ç½®è¿›è¡Œéƒ¨ç½²ã€‚ å½“å‰ï¼ŒDashboard ä»…æ”¯æŒä½¿ç”¨ Bearer ä»¤ç‰Œç™»å½•ã€‚ è¦ä¸ºæ­¤æ ·æœ¬æ¼”ç¤ºåˆ›å»ºä»¤ç‰Œï¼Œæ‚¨å¯ä»¥æŒ‰ç…§åˆ›å»ºç¤ºä¾‹ç”¨æˆ·ä¸Šçš„æŒ‡å—è¿›è¡Œæ“ä½œã€‚
. warning &amp;gt;}} åœ¨æ•™ç¨‹ä¸­åˆ›å»ºçš„æ ·æœ¬ç”¨æˆ·å°†å…·æœ‰ç®¡ç†ç‰¹æƒï¼Œå¹¶ä¸”ä»…ç”¨äºæ•™è‚²ç›®çš„ã€‚ . /warning &amp;gt;}}
å‘½ä»¤è¡Œä»£ç† æ‚¨å¯ä»¥ä½¿ç”¨ kubectl å‘½ä»¤è¡Œå·¥å…·è®¿é—® Dashboardï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š
kubectl proxy kubectl ä¼šä½¿å¾— Dashboard å¯ä»¥é€šè¿‡ http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/ è®¿é—®ã€‚
UI åªèƒ½ é€šè¿‡æ‰§è¡Œè¿™æ¡å‘½ä»¤çš„æœºå™¨è¿›è¡Œè®¿é—®ã€‚æ›´å¤šé€‰é¡¹å‚è§ kubectl proxy --helpã€‚
. note &amp;gt;}} Kubeconfig èº«ä»½éªŒè¯æ–¹æ³•ä¸æ”¯æŒå¤–éƒ¨èº«ä»½æä¾›ç¨‹åºæˆ–åŸºäº x509 è¯ä¹¦çš„èº«ä»½éªŒè¯ã€‚ .</description>
    </item>
    
    <item>
      <title>èŠ‚ç‚¹</title>
      <link>https://lijun.in/concepts/architecture/nodes/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/architecture/nodes/</guid>
      <description>åœ¨ Kubernetes ä¸­ï¼ŒèŠ‚ç‚¹ï¼ˆNodeï¼‰æ˜¯æ‰§è¡Œå·¥ä½œçš„æœºå™¨ï¼Œä»¥å‰å«åš minionã€‚æ ¹æ®ä½ çš„é›†ç¾¤ç¯å¢ƒï¼ŒèŠ‚ç‚¹å¯ä»¥æ˜¯ä¸€ä¸ªè™šæ‹Ÿæœºæˆ–è€…ç‰©ç†æœºå™¨ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«ç”¨äºè¿è¡Œ pods çš„å¿…è¦æœåŠ¡ï¼Œå¹¶ç”±ä¸»æ§ç»„ä»¶ç®¡ç†ã€‚èŠ‚ç‚¹ä¸Šçš„æœåŠ¡åŒ…æ‹¬ å®¹å™¨è¿è¡Œæ—¶ã€kubelet å’Œ kube-proxyã€‚æŸ¥é˜…æ¶æ„è®¾è®¡æ–‡æ¡£ä¸­ Kubernetes èŠ‚ç‚¹ ä¸€èŠ‚è·å–æ›´å¤šç»†èŠ‚ã€‚
èŠ‚ç‚¹çŠ¶æ€ ä¸€ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€åŒ…å«ä»¥ä¸‹ä¿¡æ¯:
 åœ°å€ æ¡ä»¶ å®¹é‡ä¸å¯åˆ†é… ä¿¡æ¯  å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ˜¾ç¤ºèŠ‚ç‚¹çŠ¶æ€å’Œæœ‰å…³èŠ‚ç‚¹çš„å…¶ä»–è¯¦ç»†ä¿¡æ¯ï¼š
kubectl describe node &amp;lt;insert-node-name-here&amp;gt; ä¸‹é¢å¯¹æ¯ä¸ªç« èŠ‚è¿›è¡Œè¯¦ç»†æè¿°ã€‚
åœ°å€ è¿™äº›å­—æ®µç»„åˆçš„ç”¨æ³•å–å†³äºä½ çš„äº‘æœåŠ¡å•†æˆ–è€…è£¸æœºé…ç½®ã€‚
 HostNameï¼šç”±èŠ‚ç‚¹çš„å†…æ ¸æŒ‡å®šã€‚å¯ä»¥é€šè¿‡ kubelet çš„ --hostname-override å‚æ•°è¦†ç›–ã€‚ ExternalIPï¼šé€šå¸¸æ˜¯å¯ä»¥å¤–éƒ¨è·¯ç”±çš„èŠ‚ç‚¹ IP åœ°å€ï¼ˆä»é›†ç¾¤å¤–å¯è®¿é—®ï¼‰ã€‚ InternalIPï¼šé€šå¸¸æ˜¯ä»…å¯åœ¨é›†ç¾¤å†…éƒ¨è·¯ç”±çš„èŠ‚ç‚¹ IP åœ°å€ã€‚  æ¡ä»¶ conditions å­—æ®µæè¿°äº†æ‰€æœ‰ Running èŠ‚ç‚¹çš„çŠ¶æ€ã€‚æ¡ä»¶çš„ç¤ºä¾‹åŒ…æ‹¬ï¼š
   èŠ‚ç‚¹æ¡ä»¶ æè¿°     OutOfDisk True è¡¨ç¤ºèŠ‚ç‚¹çš„ç©ºé—²ç©ºé—´ä¸è¶³ä»¥ç”¨äºæ·»åŠ æ–° pods, å¦åˆ™ä¸º False   Ready è¡¨ç¤ºèŠ‚ç‚¹æ˜¯å¥åº·çš„å¹¶å·²ç»å‡†å¤‡å¥½æ¥å— podsï¼›False è¡¨ç¤ºèŠ‚ç‚¹ä¸å¥åº·è€Œä¸”ä¸èƒ½æ¥å— podsï¼›Unknown è¡¨ç¤ºèŠ‚ç‚¹æ§åˆ¶å™¨åœ¨æœ€è¿‘ 40 ç§’å†…æ²¡æœ‰æ”¶åˆ°èŠ‚ç‚¹çš„æ¶ˆæ¯   MemoryPressure True è¡¨ç¤ºèŠ‚ç‚¹å­˜åœ¨å†…å­˜å‹åŠ› &amp;ndash; å³èŠ‚ç‚¹å†…å­˜ç”¨é‡ä½ï¼Œå¦åˆ™ä¸º False   PIDPressure True è¡¨ç¤ºèŠ‚ç‚¹å­˜åœ¨è¿›ç¨‹å‹åŠ› &amp;ndash; å³è¿›ç¨‹è¿‡å¤šï¼›å¦åˆ™ä¸º False   DiskPressure True è¡¨ç¤ºèŠ‚ç‚¹å­˜åœ¨ç£ç›˜å‹åŠ› &amp;ndash; å³ç£ç›˜å¯ç”¨é‡ä½ï¼Œå¦åˆ™ä¸º False   NetworkUnavailable True è¡¨ç¤ºèŠ‚ç‚¹ç½‘ç»œé…ç½®ä¸æ­£ç¡®ï¼›å¦åˆ™ä¸º False    èŠ‚ç‚¹æ¡ä»¶ä½¿ç”¨ä¸€ä¸ª JSON å¯¹è±¡è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„å“åº”æè¿°äº†ä¸€ä¸ªå¥åº·çš„èŠ‚ç‚¹ã€‚</description>
    </item>
    
    <item>
      <title>èµ„æºé…é¢</title>
      <link>https://lijun.in/concepts/policy/resource-quotas/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/policy/resource-quotas/</guid>
      <description>å½“å¤šä¸ªç”¨æˆ·æˆ–å›¢é˜Ÿå…±äº«å…·æœ‰å›ºå®šèŠ‚ç‚¹æ•°ç›®çš„é›†ç¾¤æ—¶ï¼Œäººä»¬ä¼šæ‹…å¿ƒæœ‰äººä½¿ç”¨è¶…è¿‡å…¶åŸºäºå…¬å¹³åŸåˆ™æ‰€åˆ†é…åˆ°çš„èµ„æºé‡ã€‚
èµ„æºé…é¢æ˜¯å¸®åŠ©ç®¡ç†å‘˜è§£å†³è¿™ä¸€é—®é¢˜çš„å·¥å…·ã€‚
èµ„æºé…é¢ï¼Œé€šè¿‡ ResourceQuota å¯¹è±¡æ¥å®šä¹‰ï¼Œå¯¹æ¯ä¸ªå‘½åç©ºé—´çš„èµ„æºæ¶ˆè€—æ€»é‡æä¾›é™åˆ¶ã€‚å®ƒå¯ä»¥é™åˆ¶å‘½åç©ºé—´ä¸­æŸç§ç±»å‹çš„å¯¹è±¡çš„æ€»æ•°ç›®ä¸Šé™ï¼Œä¹Ÿå¯ä»¥é™åˆ¶å‘½ä»¤ç©ºé—´ä¸­çš„ Pod å¯ä»¥ä½¿ç”¨çš„è®¡ç®—èµ„æºçš„æ€»ä¸Šé™ã€‚
èµ„æºé…é¢çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ï¼š
 ä¸åŒçš„å›¢é˜Ÿå¯ä»¥åœ¨ä¸åŒçš„å‘½åç©ºé—´ä¸‹å·¥ä½œï¼Œç›®å‰è¿™æ˜¯éçº¦æŸæ€§çš„ï¼Œåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šé€šè¿‡ ACL (Access Control List è®¿é—®æ§åˆ¶åˆ—è¡¨) æ¥å®ç°å¼ºåˆ¶æ€§çº¦æŸã€‚ é›†ç¾¤ç®¡ç†å‘˜å¯ä»¥ä¸ºæ¯ä¸ªå‘½åç©ºé—´åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºé…é¢å¯¹è±¡ã€‚ å½“ç”¨æˆ·åœ¨å‘½åç©ºé—´ä¸‹åˆ›å»ºèµ„æºï¼ˆå¦‚ Podã€Service ç­‰ï¼‰æ—¶ï¼ŒKubernetes çš„é…é¢ç³»ç»Ÿä¼šè·Ÿè¸ªé›†ç¾¤çš„èµ„æºä½¿ç”¨æƒ…å†µï¼Œä»¥ç¡®ä¿ä½¿ç”¨çš„èµ„æºç”¨é‡ä¸è¶…è¿‡èµ„æºé…é¢ä¸­å®šä¹‰çš„ç¡¬æ€§èµ„æºé™é¢ã€‚ å¦‚æœèµ„æºåˆ›å»ºæˆ–è€…æ›´æ–°è¯·æ±‚è¿åäº†é…é¢çº¦æŸï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚ä¼šæŠ¥é”™ï¼ˆHTTP 403 FORBIDDENï¼‰ï¼Œå¹¶åœ¨æ¶ˆæ¯ä¸­ç»™å‡ºæœ‰å¯èƒ½è¿åçš„çº¦æŸã€‚ å¦‚æœå‘½åç©ºé—´ä¸‹çš„è®¡ç®—èµ„æº ï¼ˆå¦‚ cpu å’Œ memoryï¼‰çš„é…é¢è¢«å¯ç”¨ï¼Œåˆ™ç”¨æˆ·å¿…é¡»ä¸ºè¿™äº›èµ„æºè®¾å®šè¯·æ±‚å€¼ï¼ˆrequestï¼‰å’Œçº¦æŸå€¼ï¼ˆlimitï¼‰ï¼Œå¦åˆ™é…é¢ç³»ç»Ÿå°†æ‹’ç» Pod çš„åˆ›å»ºã€‚ æç¤º: å¯ä½¿ç”¨ LimitRanger å‡†å…¥æ§åˆ¶å™¨æ¥ä¸ºæ²¡æœ‰è®¾ç½®è®¡ç®—èµ„æºéœ€æ±‚çš„ Pod è®¾ç½®é»˜è®¤å€¼ã€‚ è‹¥æƒ³é¿å…è¿™ç±»é—®é¢˜ï¼Œè¯·å‚è€ƒæ¼”ç»ƒä¸­çš„ç¤ºä¾‹ã€‚  ä¸‹é¢æ˜¯ä½¿ç”¨å‘½åç©ºé—´å’Œé…é¢æ„å»ºç­–ç•¥çš„ç¤ºä¾‹ï¼š
 åœ¨å…·æœ‰ 32 GiB å†…å­˜å’Œ 16 æ ¸ CPU èµ„æºçš„é›†ç¾¤ä¸­ï¼Œå…è®¸ A å›¢é˜Ÿä½¿ç”¨ 20 GiB å†…å­˜ å’Œ 10 æ ¸çš„ CPU èµ„æºï¼Œå…è®¸ B å›¢é˜Ÿä½¿ç”¨ 10 GiB å†…å­˜å’Œ 4 æ ¸çš„ CPU èµ„æºï¼Œå¹¶ä¸”é¢„ç•™ 2 GiB å†…å­˜å’Œ 2 æ ¸çš„ CPU èµ„æºä¾›å°†æ¥åˆ†é…ã€‚ é™åˆ¶ &amp;ldquo;testing&amp;rdquo; å‘½åç©ºé—´ä½¿ç”¨ 1 æ ¸ CPU èµ„æºå’Œ 1GiB å†…å­˜ã€‚å…è®¸ &amp;ldquo;production&amp;rdquo; å‘½åç©ºé—´ä½¿ç”¨ä»»æ„æ•°é‡ã€‚  åœ¨é›†ç¾¤å®¹é‡å°äºå„å‘½åç©ºé—´é…é¢æ€»å’Œçš„æƒ…å†µä¸‹ï¼Œå¯èƒ½å­˜åœ¨èµ„æºç«äº‰ã€‚èµ„æºç«äº‰æ—¶ï¼ŒKubernetes ç³»ç»Ÿä¼šéµå¾ªå…ˆåˆ°å…ˆå¾—çš„åŸåˆ™ã€‚</description>
    </item>
    
    <item>
      <title>è¿è¡Œåº”ç”¨ç¨‹åºçš„å¤šä¸ªå®ä¾‹</title>
      <link>https://lijun.in/tutorials/kubernetes-basics/scale/scale-intro/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/kubernetes-basics/scale/scale-intro/</guid>
      <description>Objectives -- ç›®çš„  Scale an app using kubectl. -- ç”¨ kubectl æ‰©ç¼©åº”ç”¨ç¨‹åº   Scaling an application -- æ‰©ç¼©åº”ç”¨ç¨‹åº In the previous modules we created a Deployment, and then exposed it publicly via a Service. The Deployment created only one Pod for running our application. When traffic increases, we will need to scale the application to keep up with user demand.
-- åœ¨ä¹‹å‰çš„æ¨¡å—ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Deploymentï¼Œç„¶åé€šè¿‡ Serviceè®©å…¶å¯ä»¥å¼€æ”¾è®¿é—®ã€‚Deployment ä»…ä¸ºè·‘è¿™ä¸ªåº”ç”¨ç¨‹åºåˆ›å»ºäº†ä¸€ä¸ª Podã€‚ å½“æµé‡å¢åŠ æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰©å®¹åº”ç”¨ç¨‹åºæ»¡è¶³ç”¨æˆ·éœ€æ±‚ã€‚</description>
    </item>
    
    <item>
      <title>é€šè¿‡èšåˆå±‚æ‰©å±• Kubernetes API</title>
      <link>https://lijun.in/concepts/extend-kubernetes/api-extension/apiserver-aggregation/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/extend-kubernetes/api-extension/apiserver-aggregation/</guid>
      <description>èšåˆå±‚å…è®¸ Kubernetes é€šè¿‡é¢å¤–çš„ API è¿›è¡Œæ‰©å±•ï¼Œè€Œä¸å±€é™äº Kubernetes æ ¸å¿ƒ API æä¾›çš„åŠŸèƒ½ã€‚
æ¦‚è¿° èšåˆå±‚ä½¿æ‚¨çš„é›†ç¾¤å¯ä»¥å®‰è£…å…¶ä»– Kubernetes é£æ ¼çš„ APIã€‚è¿™äº› API å¯ä»¥æ˜¯é¢„ç¼–è¯‘çš„ã€ç¬¬ä¸‰æ–¹çš„è§£å†³æ–¹æ¡ˆæä¾›çš„ä¾‹å¦‚service-catalogã€æˆ–è€…ç”¨æˆ·åˆ›å»ºçš„ç±»ä¼¼apiserver-builderä¸€æ ·çš„APIå¯ä»¥å¸®åŠ©ä½ ä¸Šæ‰‹ã€‚
èšåˆå±‚åœ¨ kube-apiserver è¿›ç¨‹å†…è¿è¡Œã€‚åœ¨æ‰©å±•èµ„æºæ³¨å†Œä¹‹å‰ï¼Œèšåˆå±‚ä¸åšä»»ä½•äº‹æƒ…ã€‚è¦æ³¨å†Œ APIï¼Œç”¨æˆ·å¿…é¡»æ·»åŠ ä¸€ä¸ª APIService å¯¹è±¡ï¼Œç”¨å®ƒæ¥ç”³é¢† Kubernetes API ä¸­çš„ URL è·¯å¾„ã€‚è‡ªæ­¤ä»¥åï¼Œèšåˆå±‚å°†ä¼šæŠŠå‘ç»™è¯¥ API è·¯å¾„çš„æ‰€æœ‰å†…å®¹ï¼ˆä¾‹å¦‚ /apis/myextension.mycompany.io/v1/â€¦ï¼‰ä»£ç†åˆ°å·²æ³¨å†Œçš„ APIServiceã€‚
æ­£å¸¸æƒ…å†µä¸‹ï¼ŒAPIService ä¼šå®ç°ä¸ºè¿è¡Œäºé›†ç¾¤ä¸­æŸ Pod å†…çš„ extension-apiserverã€‚å¦‚æœéœ€è¦å¯¹å¢åŠ çš„èµ„æºè¿›è¡ŒåŠ¨æ€ç®¡ç†ï¼Œextension-apiserver ç»å¸¸éœ€è¦å’Œä¸€ä¸ªæˆ–å¤šä¸ªæ§åˆ¶å™¨ä¸€èµ·ä½¿ç”¨ã€‚å› æ­¤ï¼Œapiserver-builder åŒæ—¶æä¾›ç”¨æ¥ç®¡ç†æ–°èµ„æºçš„ API æ¡†æ¶å’Œæ§åˆ¶å™¨æ¡†æ¶ã€‚å¦å¤–ä¸€ä¸ªä¾‹å­ï¼Œå½“å®‰è£…äº† service-catalog æ—¶ï¼Œå®ƒä¼šä¸ºè‡ªå·±æä¾›çš„æœåŠ¡æä¾› extension-apiserver å’Œæ§åˆ¶å™¨ã€‚
extension-apiserver ä¸ kube-apiserver ä¹‹é—´çš„è¿æ¥åº”å…·æœ‰ä½å»¶è¿Ÿã€‚ ç‰¹åˆ«æ˜¯ï¼Œå‘ç°è¯·æ±‚éœ€è¦åœ¨äº”ç§’é’Ÿæˆ–æ›´çŸ­çš„æ—¶é—´å†…ä» kube-apiserver å¾€è¿”ã€‚ å¦‚æœæ‚¨çš„éƒ¨ç½²æ— æ³•å®ç°æ­¤ç›®çš„ï¼Œåˆ™åº”è€ƒè™‘å¦‚ä½•è¿›è¡Œæ›´æ”¹ã€‚ç›®å‰ï¼Œåœ¨ kube-apiserver ä¸Šè®¾ç½® EnableAggregatedDiscoveryTimeout=false åŠŸèƒ½å¼€å…³å°†ç¦ç”¨è¶…æ—¶é™åˆ¶ã€‚å®ƒå°†åœ¨å°†æ¥çš„ç‰ˆæœ¬ä¸­è¢«åˆ é™¤ã€‚
 é˜…è¯»é…ç½®èšåˆå±‚ æ–‡æ¡£ï¼Œäº†è§£å¦‚ä½•åœ¨è‡ªå·±çš„ç¯å¢ƒä¸­å¯ç”¨èšåˆå™¨ï¼ˆaggregatorï¼‰ã€‚ ç„¶åå®‰è£…æ‰©å±•çš„ api-server æ¥å¼€å§‹ä½¿ç”¨èšåˆå±‚ã€‚ ä¹Ÿå¯ä»¥å­¦ä¹ æ€æ · ä½¿ç”¨è‡ªå®šä¹‰èµ„æºå®šä¹‰æ‰©å±• Kubernetes APIã€‚  </description>
    </item>
    
    <item>
      <title>é…ç½®æœ€ä½³å®è·µ</title>
      <link>https://lijun.in/concepts/configuration/overview/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/configuration/overview/</guid>
      <description>æœ¬æ–‡æ¡£é‡ç‚¹ä»‹ç»å¹¶æ•´åˆäº†æ•´ä¸ªç”¨æˆ·æŒ‡å—ã€å…¥é—¨æ–‡æ¡£å’Œç¤ºä¾‹ä¸­ä»‹ç»çš„é…ç½®æœ€ä½³å®è·µã€‚
è¿™æ˜¯ä¸€ä»½æ´»æ–‡ä»¶ã€‚ å¦‚æœæ‚¨è®¤ä¸ºæŸäº›å†…å®¹ä¸åœ¨æ­¤åˆ—è¡¨ä¸­ä½†å¯èƒ½å¯¹å…¶ä»–äººæœ‰ç”¨ï¼Œè¯·ä¸è¦çŠ¹è±«ï¼Œæäº¤é—®é¢˜æˆ–æäº¤ PRã€‚
ä¸€èˆ¬é…ç½®æç¤º  å®šä¹‰é…ç½®æ—¶ï¼Œè¯·æŒ‡å®šæœ€æ–°çš„ç¨³å®š API ç‰ˆæœ¬ã€‚   åœ¨æ¨é€åˆ°é›†ç¾¤ä¹‹å‰ï¼Œé…ç½®æ–‡ä»¶åº”å­˜å‚¨åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸­ã€‚ è¿™å…è®¸æ‚¨åœ¨å¿…è¦æ—¶å¿«é€Ÿå›æ»šé…ç½®æ›´æ”¹ã€‚ å®ƒè¿˜æœ‰åŠ©äºé›†ç¾¤é‡æ–°åˆ›å»ºå’Œæ¢å¤ã€‚   ä½¿ç”¨ YAML è€Œä¸æ˜¯ JSON ç¼–å†™é…ç½®æ–‡ä»¶ã€‚è™½ç„¶è¿™äº›æ ¼å¼å‡ ä¹å¯ä»¥åœ¨æ‰€æœ‰åœºæ™¯ä¸­äº’æ¢ä½¿ç”¨ï¼Œä½† YAML å¾€å¾€æ›´åŠ ç”¨æˆ·å‹å¥½ã€‚   åªè¦æœ‰æ„ä¹‰ï¼Œå°±å°†ç›¸å…³å¯¹è±¡åˆ†ç»„åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚ ä¸€ä¸ªæ–‡ä»¶é€šå¸¸æ¯”å‡ ä¸ªæ–‡ä»¶æ›´å®¹æ˜“ç®¡ç†ã€‚ è¯·å‚é˜…[guestbook-all-in-one.yaml](https://github.com/kubernetes/examples/tree/param &amp;ldquo;githubbranch&amp;rdquo; &amp;gt;}}/guestbook/all-in-one/guestbook-all-in-one.yaml) æ–‡ä»¶ä½œä¸ºæ­¤è¯­æ³•çš„ç¤ºä¾‹ã€‚   å¦è¯·æ³¨æ„ï¼Œå¯ä»¥åœ¨ç›®å½•ä¸Šè°ƒç”¨è®¸å¤škubectlå‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨é…ç½®æ–‡ä»¶çš„ç›®å½•ä¸­è°ƒç”¨kubectl applyã€‚   é™¤éå¿…è¦ï¼Œå¦åˆ™ä¸æŒ‡å®šé»˜è®¤å€¼ï¼šç®€å•çš„æœ€å°é…ç½®ä¼šé™ä½é”™è¯¯çš„å¯èƒ½æ€§ã€‚   å°†å¯¹è±¡æè¿°æ”¾åœ¨æ³¨é‡Šä¸­ï¼Œä»¥ä¾¿æ›´å¥½åœ°è¿›è¡Œå†…çœã€‚  â€œNakedâ€Pods ä¸ ReplicaSetï¼ŒDeployment å’Œ Jobs  å¦‚æœæ‚¨èƒ½é¿å…ï¼Œä¸è¦ä½¿ç”¨ naked Podsï¼ˆå³ï¼ŒPod æœªç»‘å®šåˆ°ReplicaSet æˆ–Deploymentï¼‰ã€‚ å¦‚æœèŠ‚ç‚¹å‘ç”Ÿæ•…éšœï¼Œå°†ä¸ä¼šé‡æ–°å®‰æ’ Naked Podsã€‚  Deploymentï¼Œå®ƒåˆ›å»ºä¸€ä¸ª ReplicaSet ä»¥ç¡®ä¿æ‰€éœ€æ•°é‡çš„ Pod å§‹ç»ˆå¯ç”¨ï¼Œå¹¶æŒ‡å®šæ›¿æ¢ Pod çš„ç­–ç•¥(ä¾‹å¦‚ RollingUpdate)ï¼Œé™¤äº†ä¸€äº›æ˜¾å¼çš„restartPolicy: Neveråœºæ™¯ä¹‹å¤–ï¼Œå‡ ä¹æ€»æ˜¯ä¼˜å…ˆè€ƒè™‘ç›´æ¥åˆ›å»º Podã€‚ Job ä¹Ÿå¯èƒ½æ˜¯åˆé€‚çš„ã€‚</description>
    </item>
    
    <item>
      <title>é…ç½®èšåˆå±‚</title>
      <link>https://lijun.in/tasks/access-kubernetes-api/configure-aggregation-layer/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-kubernetes-api/configure-aggregation-layer/</guid>
      <description>é…ç½® èšåˆå±‚ å…è®¸ Kubernetes apiserver ä½¿ç”¨å…¶å®ƒ API æ‰©å±•ï¼Œè¿™äº› API ä¸æ˜¯æ ¸å¿ƒ Kubernetes API çš„ä¸€éƒ¨åˆ†ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
. note &amp;gt;}}
è¦ä½¿èšåˆå±‚åœ¨æ‚¨çš„ç¯å¢ƒä¸­æ­£å¸¸å·¥ä½œä»¥æ”¯æŒä»£ç†æœåŠ¡å™¨å’Œæ‰©å±• apiserver ä¹‹é—´çš„ç›¸äº’ TLS èº«ä»½éªŒè¯ï¼Œéœ€è¦æ»¡è¶³ä¸€äº›è®¾ç½®è¦æ±‚ã€‚Kubernetes å’Œ kube-apiserver å…·æœ‰å¤šä¸ª CAï¼Œå› æ­¤è¯·ç¡®ä¿ä»£ç†æ˜¯ç”±èšåˆå±‚ CA ç­¾åçš„ï¼Œè€Œä¸æ˜¯ç”±ä¸» CA ç­¾åçš„ã€‚
. caution &amp;gt;}}
å¯¹ä¸åŒçš„å®¢æˆ·ç«¯ç±»å‹é‡å¤ä½¿ç”¨ç›¸åŒçš„ CA ä¼šå¯¹ç¾¤é›†çš„åŠŸèƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ CAé‡ç”¨å’Œå†²çªã€‚
. /caution &amp;gt;}} . /note &amp;gt;}}
è®¤è¯æµç¨‹ ä¸è‡ªå®šä¹‰èµ„æºå®šä¹‰ï¼ˆCRDï¼‰ä¸åŒï¼Œé™¤æ ‡å‡†çš„ Kubernetes apiserver å¤–ï¼ŒAggregation API è¿˜æ¶‰åŠå¦ä¸€ä¸ªæœåŠ¡å™¨ï¼šæ‰©å±• apiserverã€‚Kubernetes apiserver å°†éœ€è¦ä¸æ‚¨çš„æ‰©å±• apiserver é€šä¿¡ï¼Œå¹¶ä¸”æ‚¨çš„æ‰©å±• apiserver ä¹Ÿéœ€è¦ä¸ Kubernetes apiserver é€šä¿¡ã€‚ä¸ºäº†ç¡®ä¿æ­¤é€šä¿¡çš„å®‰å…¨ï¼ŒKubernetes apiserver ä½¿ç”¨ x509 è¯ä¹¦å‘æ‰©å±• apiserver è®¤è¯ã€‚</description>
    </item>
    
    <item>
      <title>é•œåƒ</title>
      <link>https://lijun.in/concepts/containers/images/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/containers/images/</guid>
      <description>åˆ›å»º Docker é•œåƒå¹¶å°†å…¶æ¨é€åˆ°ä»“åº“ï¼Œç„¶ååœ¨ Kubernetes pod ä¸­å¼•ç”¨å®ƒã€‚
å®¹å™¨çš„ image å±æ€§æ”¯æŒä¸ docker å‘½ä»¤ç›¸åŒçš„è¯­æ³•ï¼ŒåŒ…æ‹¬ç§æœ‰ä»“åº“å’Œæ ‡ç­¾ã€‚
å‡çº§é•œåƒ é»˜è®¤çš„é•œåƒæ‹‰å–ç­–ç•¥æ˜¯ IfNotPresentï¼Œåœ¨é•œåƒå·²ç»å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œkubelet å°†ä¸å†å»æ‹‰å–é•œåƒã€‚å¦‚æœæ€»æ˜¯æƒ³è¦æ‹‰å–é•œåƒï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
 è®¾ç½®å®¹å™¨çš„ imagePullPolicy ä¸º Alwaysã€‚ çœç•¥ imagePullPolicyï¼Œå¹¶ä½¿ç”¨ :latest ä½œä¸ºè¦ä½¿ç”¨çš„é•œåƒçš„æ ‡ç­¾ã€‚ çœç•¥ imagePullPolicy å’Œè¦ä½¿ç”¨çš„é•œåƒæ ‡ç­¾ã€‚ å¯ç”¨ AlwaysPullImages å‡†å…¥æ§åˆ¶å™¨ï¼ˆadmission controllerï¼‰ã€‚  æ³¨æ„åº”é¿å…ä½¿ç”¨ :latest æ ‡ç­¾ï¼Œå‚è§é…ç½®é•œåƒæœ€ä½³å®è·µ è·å–æ›´å¤šä¿¡æ¯ã€‚
ä½¿ç”¨æ¸…å•ï¼ˆmanifestï¼‰æ„å»ºå¤šæ¶æ„é•œåƒ Docker CLI ç°åœ¨æ”¯æŒä»¥ä¸‹å‘½ä»¤ docker manifest ä»¥åŠ createã€annotateã€push ç­‰å­å‘½ä»¤ã€‚è¿™äº›å‘½ä»¤å¯ç”¨äºæ„å»ºå’Œæ¨é€æ¸…å•ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ docker manifest inspect æ¥æŸ¥çœ‹æ¸…å•ã€‚
è¯·åœ¨æ­¤å¤„æŸ¥çœ‹ docker æ¸…å•æ–‡æ¡£ï¼š https://docs.docker.com/edge/engine/reference/commandline/manifest/
æŸ¥çœ‹æœ‰å…³å¦‚ä½•åœ¨æ„å»ºå·¥å…·ä¸­ä½¿ç”¨æ¸…å•çš„ç¤ºä¾‹ï¼š https://cs.k8s.io/?q=docker%20manifest%20(create%7Cpush%7Cannotate)&amp;amp;i=nope&amp;amp;files=&amp;amp;repos=
è¿™äº›å‘½ä»¤ä¾èµ–äº Docker CLI å¹¶ä»…åœ¨ Docker CLI ä¸Šå®ç°ã€‚éœ€è¦ç¼–è¾‘ $HOME/.docker/config.json å¹¶å°† experimental è®¾ç½®ä¸º enabledï¼Œæˆ–è€…ä»…åœ¨è°ƒç”¨ CLI å‘½ä»¤æ—¶å°† DOCKER_CLI_EXPERIMENTAL ç¯å¢ƒå˜é‡è®¾ç½®ä¸º enabledã€‚</description>
    </item>
    
    <item>
      <title>é™åˆ¶èŒƒå›´</title>
      <link>https://lijun.in/concepts/policy/limit-range/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/policy/limit-range/</guid>
      <description>é»˜è®¤æƒ…å†µä¸‹ï¼Œ Kubernetes é›†ç¾¤ä¸Šçš„å®¹å™¨è¿è¡Œä½¿ç”¨çš„è®¡ç®—èµ„æº æ²¡æœ‰é™åˆ¶ã€‚ ä½¿ç”¨èµ„æºé…é¢ï¼Œé›†ç¾¤ç®¡ç†å‘˜å¯ä»¥ä»¥å‘½åç©ºé—´ä¸ºå•ä½ï¼Œé™åˆ¶å…¶èµ„æºçš„ä½¿ç”¨ä¸åˆ›å»ºã€‚ åœ¨å‘½åç©ºé—´ä¸­ï¼Œä¸€ä¸ª Pod æˆ– Container æœ€å¤šèƒ½å¤Ÿä½¿ç”¨å‘½åç©ºé—´çš„èµ„æºé…é¢æ‰€å®šä¹‰çš„ CPU å’Œå†…å­˜ç”¨é‡ã€‚æœ‰äººæ‹…å¿ƒï¼Œä¸€ä¸ª Pod æˆ– Container ä¼šå„æ–­æ‰€æœ‰å¯ç”¨çš„èµ„æºã€‚LimitRange æ˜¯åœ¨å‘½åç©ºé—´å†…é™åˆ¶èµ„æºåˆ†é…ï¼ˆç»™å¤šä¸ª Pod æˆ– Containerï¼‰çš„ç­–ç•¥å¯¹è±¡ã€‚
ä¸€ä¸ª LimitRange å¯¹è±¡æä¾›çš„é™åˆ¶èƒ½å¤Ÿåšåˆ°ï¼š
 åœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸­å®æ–½å¯¹æ¯ä¸ª Pod æˆ– Container æœ€å°å’Œæœ€å¤§çš„èµ„æºä½¿ç”¨é‡çš„é™åˆ¶ã€‚ åœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸­å®æ–½å¯¹æ¯ä¸ª PersistentVolumeClaim èƒ½ç”³è¯·çš„æœ€å°å’Œæœ€å¤§çš„å­˜å‚¨ç©ºé—´å¤§å°çš„é™åˆ¶ã€‚ åœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸­å®æ–½å¯¹ä¸€ç§èµ„æºçš„ç”³è¯·å€¼å’Œé™åˆ¶å€¼çš„æ¯”å€¼çš„æ§åˆ¶ã€‚ è®¾ç½®ä¸€ä¸ªå‘½åç©ºé—´ä¸­å¯¹è®¡ç®—èµ„æºçš„é»˜è®¤ç”³è¯·/é™åˆ¶å€¼ï¼Œå¹¶ä¸”è‡ªåŠ¨çš„åœ¨è¿è¡Œæ—¶æ³¨å…¥åˆ°å¤šä¸ª Container ä¸­ã€‚  å¯ç”¨ LimitRange å¯¹ LimitRange çš„æ”¯æŒé»˜è®¤åœ¨å¤šæ•° Kubernetes å‘è¡Œç‰ˆä¸­å¯ç”¨ã€‚å½“ apiserver çš„ --enable-admission-plugins æ ‡å¿—çš„å‚æ•°åŒ…å« LimitRanger å‡†å…¥æ§åˆ¶å™¨æ—¶å³å¯ç”¨ã€‚
å½“ä¸€ä¸ªå‘½åç©ºé—´ä¸­æœ‰ LimitRange æ—¶ï¼Œå®æ–½è¯¥ LimitRange æ‰€å®šä¹‰çš„é™åˆ¶ã€‚
LimitRange çš„åç§°å¿…é¡»æ˜¯åˆæ³•çš„ DNS å­åŸŸåã€‚
é™åˆ¶èŒƒå›´æ€»è§ˆ  ç®¡ç†å‘˜åœ¨ä¸€ä¸ªå‘½åç©ºé—´å†…åˆ›å»ºä¸€ä¸ª LimitRange å¯¹è±¡ã€‚ ç”¨æˆ·åœ¨å‘½åç©ºé—´å†…åˆ›å»º Pod ï¼ŒContainer å’Œ PersistentVolumeClaim ç­‰èµ„æºã€‚ LimitRanger å‡†å…¥æ§åˆ¶å™¨å¯¹æ‰€æœ‰æ²¡æœ‰è®¾ç½®è®¡ç®—èµ„æºéœ€æ±‚çš„ Pod å’Œ Container è®¾ç½®é»˜è®¤å€¼ä¸é™åˆ¶å€¼ï¼Œå¹¶è·Ÿè¸ªå…¶ä½¿ç”¨é‡ä»¥ä¿è¯æ²¡æœ‰è¶…å‡ºå‘½åç©ºé—´ä¸­å­˜åœ¨çš„ä»»æ„ LimitRange å¯¹è±¡ä¸­çš„æœ€å°ã€æœ€å¤§èµ„æºä½¿ç”¨é‡ä»¥åŠä½¿ç”¨é‡æ¯”å€¼ã€‚ è‹¥åˆ›å»ºæˆ–æ›´æ–°èµ„æºï¼ˆPod, Container, PersistentVolumeClaimï¼‰è¿åäº† LimitRange çš„çº¦æŸï¼Œå‘ API æœåŠ¡å™¨çš„è¯·æ±‚ä¼šå¤±è´¥ï¼Œå¹¶è¿”å› HTTP çŠ¶æ€ç  403 FORBIDDEN ä¸æè¿°å“ªä¸€é¡¹çº¦æŸè¢«è¿åçš„æ¶ˆæ¯ã€‚ è‹¥å‘½åç©ºé—´ä¸­çš„ LimitRange å¯ç”¨äº†å¯¹ cpu å’Œ memory çš„é™åˆ¶ï¼Œç”¨æˆ·å¿…é¡»æŒ‡å®šè¿™äº›å€¼çš„éœ€æ±‚ä½¿ç”¨é‡ä¸é™åˆ¶ä½¿ç”¨é‡ã€‚å¦åˆ™ï¼Œç³»ç»Ÿå°†ä¼šæ‹’ç»åˆ›å»º Podã€‚ LimitRange çš„éªŒè¯ä»…åœ¨ Pod å‡†å…¥é˜¶æ®µè¿›è¡Œï¼Œä¸å¯¹æ­£åœ¨è¿è¡Œçš„ Pod è¿›è¡ŒéªŒè¯ã€‚  èƒ½å¤Ÿä½¿ç”¨é™åˆ¶èŒƒå›´åˆ›å»ºç­–ç•¥çš„ä¾‹å­æœ‰ï¼š</description>
    </item>
    
    <item>
      <title>é›†ç¾¤ç®¡ç†æ¦‚è¿°</title>
      <link>https://lijun.in/concepts/cluster-administration/cluster-administration-overview/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/cluster-administration/cluster-administration-overview/</guid>
      <description>é›†ç¾¤ç®¡ç†æ¦‚è¿°é¢å‘ä»»ä½•åˆ›å»ºå’Œç®¡ç† Kubernetes é›†ç¾¤çš„è¯»è€…äººç¾¤ã€‚ æˆ‘ä»¬å‡è®¾ä½ å¯¹ç”¨æˆ·æŒ‡å—ä¸­çš„æ¦‚å¿µå¤§æ¦‚äº†è§£ã€‚
è§„åˆ’é›†ç¾¤ æŸ¥é˜… å®‰è£… ä¸­çš„æŒ‡å¯¼ï¼Œè·å–å¦‚ä½•è§„åˆ’ã€å»ºç«‹ä»¥åŠé…ç½® Kubernetes é›†ç¾¤çš„ç¤ºä¾‹ã€‚æœ¬æ–‡æ‰€åˆ—çš„æ–‡ç« ç§°ä¸ºå‘è¡Œç‰ˆ ã€‚
åœ¨é€‰æ‹©ä¸€ä¸ªæŒ‡å—å‰ï¼Œæœ‰ä¸€äº›å› ç´ éœ€è¦è€ƒè™‘ï¼š
 ä½ æ˜¯æ‰“ç®—åœ¨ä½ çš„ç”µè„‘ä¸Šå°è¯• Kubernetesï¼Œè¿˜æ˜¯è¦æ„å»ºä¸€ä¸ªé«˜å¯ç”¨çš„å¤šèŠ‚ç‚¹é›†ç¾¤ï¼Ÿè¯·é€‰æ‹©æœ€é€‚åˆä½ éœ€æ±‚çš„å‘è¡Œç‰ˆã€‚ å¦‚æœä½ æ­£åœ¨è®¾è®¡ä¸€ä¸ªé«˜å¯ç”¨é›†ç¾¤ï¼Œè¯·äº†è§£åœ¨å¤šä¸ª zones ä¸­é…ç½®é›†ç¾¤ã€‚ æ‚¨æ­£åœ¨ä½¿ç”¨ ç±»ä¼¼ Google Kubernetes Engine è¿™æ ·çš„è¢«æ‰˜ç®¡çš„Kubernetesé›†ç¾¤, è¿˜æ˜¯ç®¡ç†æ‚¨è‡ªå·±çš„é›†ç¾¤? ä½ çš„é›†ç¾¤æ˜¯åœ¨æœ¬åœ°è¿˜æ˜¯ äº‘ï¼ˆIaaSï¼‰ ä¸Šï¼Ÿ Kubernetes ä¸èƒ½ç›´æ¥æ”¯æŒæ··åˆé›†ç¾¤ã€‚ä½œä¸ºä»£æ›¿ï¼Œä½ å¯ä»¥å»ºç«‹å¤šä¸ªé›†ç¾¤ã€‚ å¦‚æœä½ åœ¨æœ¬åœ°é…ç½® Kubernetesï¼Œéœ€è¦è€ƒè™‘å“ªç§ç½‘ç»œæ¨¡å‹æœ€é€‚åˆã€‚ ä½ çš„ Kubernetes åœ¨ è£¸é‡‘å±ç¡¬ä»¶ è¿˜æ˜¯ è™šæ‹Ÿæœºï¼ˆVMsï¼‰ ä¸Šè¿è¡Œï¼Ÿ ä½ åªæƒ³è¿è¡Œä¸€ä¸ªé›†ç¾¤ï¼Œè¿˜æ˜¯æ‰“ç®—æ´»åŠ¨å¼€å‘ Kubernetes é¡¹ç›®ä»£ç ï¼Ÿå¦‚æœæ˜¯åè€…ï¼Œè¯·é€‰æ‹©ä¸€ä¸ªæ´»åŠ¨å¼€å‘çš„å‘è¡Œç‰ˆã€‚æŸäº›å‘è¡Œç‰ˆåªæä¾›äºŒè¿›åˆ¶å‘å¸ƒç‰ˆï¼Œä½†æä¾›æ›´å¤šçš„é€‰æ‹©ã€‚ è®©ä½ è‡ªå·±ç†Ÿæ‚‰è¿è¡Œä¸€ä¸ªé›†ç¾¤æ‰€éœ€çš„ç»„ä»¶ ã€‚  è¯·æ³¨æ„ï¼šä¸æ˜¯æ‰€æœ‰çš„å‘è¡Œç‰ˆéƒ½è¢«ç§¯æç»´æŠ¤ç€ã€‚è¯·é€‰æ‹©æµ‹è¯•è¿‡æœ€è¿‘ç‰ˆæœ¬çš„ Kubernetes çš„å‘è¡Œç‰ˆã€‚
ç®¡ç†é›†ç¾¤   ç®¡ç†é›†ç¾¤å™è¿°äº†å’Œé›†ç¾¤ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„å‡ ä¸ªä¸»é¢˜ï¼šåˆ›å»ºä¸€ä¸ªæ–°é›†ç¾¤ã€å‡çº§é›†ç¾¤çš„ master å’Œ worker èŠ‚ç‚¹ã€æ‰§è¡ŒèŠ‚ç‚¹ç»´æŠ¤ï¼ˆä¾‹å¦‚å†…æ ¸å‡çº§ï¼‰ä»¥åŠå‡çº§æ´»åŠ¨é›†ç¾¤çš„ Kubernetes API ç‰ˆæœ¬ã€‚
  å­¦ä¹ å¦‚ä½• ç®¡ç†èŠ‚ç‚¹.
  å­¦ä¹ å¦‚ä½•è®¾å®šå’Œç®¡ç†é›†ç¾¤å…±äº«çš„ èµ„æºé…é¢ ã€‚
  é›†ç¾¤å®‰å…¨   Certificates æè¿°äº†ä½¿ç”¨ä¸åŒçš„å·¥å…·é“¾ç”Ÿæˆè¯ä¹¦çš„æ­¥éª¤ã€‚</description>
    </item>
    
    <item>
      <title>Kubernetes å¯¹è±¡ç®¡ç†</title>
      <link>https://lijun.in/concepts/overview/working-with-objects/object-management/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/overview/working-with-objects/object-management/</guid>
      <description>kubectl å‘½ä»¤è¡Œå·¥å…·æ”¯æŒå¤šç§ä¸åŒçš„æ–¹å¼æ¥åˆ›å»ºå’Œç®¡ç† Kubernetes å¯¹è±¡ã€‚æœ¬æ–‡æ¡£æ¦‚è¿°äº†ä¸åŒçš„æ–¹æ³•ã€‚é˜…è¯» Kubectl book æ¥äº†è§£ kubectl ç®¡ç†å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯ã€‚
ç®¡ç†æŠ€å·§ åº”è¯¥åªä½¿ç”¨ä¸€ç§æŠ€æœ¯æ¥ç®¡ç† Kubernetes å¯¹è±¡ã€‚æ··åˆå’ŒåŒ¹é…æŠ€æœ¯ä½œç”¨åœ¨åŒä¸€å¯¹è±¡ä¸Šå°†å¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚
   Management technique Operates on Recommended environment Supported writers Learning curve     Imperative commands Live objects Development projects 1+ Lowest   Imperative object configuration Individual files Production projects 1 Moderate   Declarative object configuration Directories of files Production projects 1+ Highest    å‘½ä»¤å¼å‘½ä»¤ ä½¿ç”¨å‘½ä»¤å¼å‘½ä»¤æ—¶ï¼Œç”¨æˆ·å¯ä»¥åœ¨é›†ç¾¤ä¸­çš„æ´»åŠ¨å¯¹è±¡ä¸Šè¿›è¡Œæ“ä½œã€‚ç”¨æˆ·å°†æ“ä½œä¼ ç»™ kubectl å‘½ä»¤ä½œä¸ºå‚æ•°æˆ–æ ‡å¿—ã€‚
è¿™æ˜¯å¼€å§‹æˆ–è€…åœ¨é›†ç¾¤ä¸­è¿è¡Œä¸€æ¬¡æ€§ä»»åŠ¡çš„æœ€ç®€å•æ–¹æ³•ã€‚å› ä¸ºè¿™ä¸ªæŠ€æœ¯ç›´æ¥åœ¨æ´»åŠ¨å¯¹è±¡ä¸Šæ“ä½œï¼Œæ‰€ä»¥å®ƒä¸æä¾›ä»¥å‰é…ç½®çš„å†å²è®°å½•ã€‚
ä¾‹å­ é€šè¿‡åˆ›å»º Deployment å¯¹è±¡æ¥è¿è¡Œ nginx å®¹å™¨çš„å®ä¾‹ï¼š</description>
    </item>
    
    <item>
      <title>è®¾ç½®ä¸€ä¸ªæ‰©å±•çš„ API server</title>
      <link>https://lijun.in/tasks/access-kubernetes-api/setup-extension-api-server/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-kubernetes-api/setup-extension-api-server/</guid>
      <description>è®¾ç½®ä¸€ä¸ªæ‰©å±•çš„ API server æ¥ä½¿ç”¨èšåˆå±‚ä»¥è®© Kubernetes apiserver ä½¿ç”¨å…¶å®ƒ API è¿›è¡Œæ‰©å±•ï¼Œè¿™äº› API ä¸æ˜¯æ ¸å¿ƒ Kubernetes API çš„ä¸€éƒ¨åˆ†ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  æ‚¨éœ€è¦æ‹¥æœ‰ä¸€ä¸ªè¿è¡Œçš„ Kubernetes é›†ç¾¤ã€‚ æ‚¨å¿…é¡» é…ç½®èšåˆå±‚ å¹¶ä¸”å¯ç”¨ apiserver çš„ç›¸å…³å‚æ•°ã€‚  . heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
è®¾ç½®ä¸€ä¸ªæ‰©å±•çš„ api-server æ¥ä½¿ç”¨èšåˆå±‚ ä»¥ä¸‹æ­¥éª¤æè¿°å¦‚ä½• åœ¨ä¸€ä¸ªé«˜å±‚æ¬¡ è®¾ç½®ä¸€ä¸ªæ‰©å±•çš„ apiserverã€‚æ— è®ºæ‚¨ä½¿ç”¨çš„æ˜¯ YAML é…ç½®è¿˜æ˜¯ä½¿ç”¨ APIï¼Œè¿™äº›æ­¥éª¤éƒ½é€‚ç”¨ã€‚ç›®å‰æˆ‘ä»¬æ­£åœ¨å°è¯•åŒºåˆ†å‡ºä¸¤è€…çš„åŒºåˆ«ã€‚æœ‰å…³ä½¿ç”¨ YAML é…ç½®çš„å…·ä½“ç¤ºä¾‹ï¼Œæ‚¨å¯ä»¥åœ¨ Kubernetes åº“ä¸­æŸ¥çœ‹ sample-apiserverã€‚
æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç°æœ‰çš„ç¬¬ä¸‰æ–¹è§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚ apiserver-builderï¼Œå®ƒå°†ç”Ÿæˆæ¡†æ¶å¹¶è‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ‰€æœ‰æ­¥éª¤ã€‚
 ç¡®ä¿å¯ç”¨äº† APIService APIï¼ˆæ£€æŸ¥ --runtime-configï¼‰ã€‚é»˜è®¤åº”è¯¥æ˜¯å¯ç”¨çš„ï¼Œé™¤éè¢«ç‰¹æ„å…³é—­äº†ã€‚ æ‚¨å¯èƒ½éœ€è¦åˆ¶å®šä¸€ä¸ª RBAC è§„åˆ™ï¼Œä»¥å…è®¸æ‚¨æ·»åŠ  APIService å¯¹è±¡ï¼Œæˆ–è®©æ‚¨çš„é›†ç¾¤ç®¡ç†å‘˜åˆ›å»ºä¸€ä¸ªã€‚ï¼ˆç”±äº API æ‰©å±•ä¼šå½±å“æ•´ä¸ªé›†ç¾¤ï¼Œå› æ­¤ä¸å»ºè®®åœ¨å®æ—¶é›†ç¾¤ä¸­å¯¹ API æ‰©å±•è¿›è¡Œæµ‹è¯•/å¼€å‘/è°ƒè¯•ï¼‰ åˆ›å»º Kubernetes å‘½åç©ºé—´ï¼Œæ‰©å±•çš„ api-service å°†è¿è¡Œåœ¨è¯¥å‘½åç©ºé—´ä¸­ã€‚ åˆ›å»ºï¼ˆæˆ–è·å–ï¼‰ç”¨æ¥ç­¾ç½²æœåŠ¡å™¨è¯ä¹¦çš„ CA è¯ä¹¦ï¼Œæ‰©å±• api-server ä¸­å°†ä½¿ç”¨è¯¥è¯ä¹¦åš HTTPS è¿æ¥ã€‚ ä¸º api-server åˆ›å»ºä¸€ä¸ªæœåŠ¡ç«¯çš„è¯ä¹¦ï¼ˆæˆ–ç§˜é’¥ï¼‰ä»¥ä½¿ç”¨ HTTPSã€‚è¿™ä¸ªè¯ä¹¦åº”è¯¥ç”±ä¸Šè¿°çš„ CA ç­¾ç½²ã€‚åŒæ—¶åº”è¯¥è¿˜è¦æœ‰ä¸€ä¸ª Kube DNS åç§°çš„ CNï¼Œè¿™æ˜¯ä» Kubernetes æœåŠ¡æ´¾ç”Ÿè€Œæ¥çš„ï¼Œæ ¼å¼ä¸º &amp;lt;service name&amp;gt;.</description>
    </item>
    
    <item>
      <title>ConfigMap</title>
      <link>https://lijun.in/concepts/configuration/configmap/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/configuration/configmap/</guid>
      <description>n term_id=&amp;quot;configmap&amp;rdquo; length=&amp;quot;all&amp;rdquo; &amp;gt;}}
ConfigMap å¹¶ä¸æä¾›ä¿å¯†æˆ–è€…åŠ å¯†åŠŸèƒ½ã€‚å¦‚æœä½ æƒ³å­˜å‚¨çš„æ•°æ®æ˜¯æœºå¯†çš„ï¼Œè¯·ä½¿ç”¨ text=&amp;quot;Secret&amp;rdquo; term_id=&amp;quot;secret&amp;rdquo; &amp;gt;}} ï¼Œæˆ–è€…ä½¿ç”¨å…¶ä»–ç¬¬ä¸‰æ–¹å·¥å…·æ¥ä¿è¯ä½ çš„æ•°æ®çš„ç§å¯†æ€§ï¼Œè€Œä¸æ˜¯ç”¨ ConfigMapã€‚
åŠ¨æœº ä½¿ç”¨ ConfigMap æ¥å°†ä½ çš„é…ç½®æ•°æ®å’Œåº”ç”¨ç¨‹åºä»£ç åˆ†å¼€ã€‚
æ¯”å¦‚ï¼Œå‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªåº”ç”¨ï¼Œå®ƒå¯ä»¥åœ¨ä½ è‡ªå·±çš„ç”µè„‘ä¸Šï¼ˆç”¨äºå¼€å‘ï¼‰å’Œåœ¨äº‘ä¸Šï¼ˆç”¨äºå®é™…æµé‡ï¼‰è¿è¡Œã€‚ä½ çš„ä»£ç é‡Œæœ‰ä¸€æ®µæ˜¯ç”¨äºæŸ¥çœ‹ç¯å¢ƒå˜é‡ DATABASE_HOSTï¼Œåœ¨æœ¬åœ°è¿è¡Œæ—¶ï¼Œä½ å°†è¿™ä¸ªå˜é‡è®¾ç½®ä¸º localhostï¼Œåœ¨äº‘ä¸Šï¼Œä½ å°†å…¶è®¾ç½®ä¸ºå¼•ç”¨ Kubernetes é›†ç¾¤ä¸­çš„å…¬å¼€æ•°æ®åº“ text=&amp;quot;Service&amp;rdquo; term_id=&amp;quot;service&amp;rdquo; &amp;gt;}} ä¸­çš„ç»„ä»¶ã€‚
è¿™è®©æ‚¨å¯ä»¥è·å–åœ¨äº‘ä¸­è¿è¡Œçš„å®¹å™¨é•œåƒï¼Œå¹¶ä¸”å¦‚æœæœ‰éœ€è¦çš„è¯ï¼Œåœ¨æœ¬åœ°è°ƒè¯•å®Œå…¨ç›¸åŒçš„ä»£ç ã€‚
ConfigMap å¯¹è±¡ ConfigMap æ˜¯ä¸€ä¸ª API å¯¹è±¡ï¼Œè®©ä½ å¯ä»¥å­˜å‚¨å…¶ä»–å¯¹è±¡æ‰€éœ€è¦ä½¿ç”¨çš„é…ç½®ã€‚å’Œå…¶ä»– Kubernetes å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª spec ä¸åŒçš„æ˜¯ï¼ŒConfigMap ä½¿ç”¨ data å—æ¥å­˜å‚¨å…ƒç´ ï¼ˆé”®åï¼‰å’Œå®ƒä»¬çš„å€¼ã€‚
ConfigMap çš„åå­—å¿…é¡»æ˜¯ä¸€ä¸ªåˆæ³•çš„ DNS å­åŸŸåã€‚
ConfigMaps å’Œ Pods æ‚¨å¯ä»¥å†™ä¸€ä¸ªå¼•ç”¨ ConfigMap çš„ Pod çš„ specï¼Œå¹¶æ ¹æ® ConfigMap ä¸­çš„æ•°æ®åœ¨è¯¥ Pod ä¸­é…ç½®å®¹å™¨ã€‚è¿™ä¸ª Pod å’Œ ConfigMap å¿…é¡»è¦åœ¨åŒä¸€ä¸ª text=&amp;quot;å‘½åç©ºé—´&amp;rdquo; term_id=&amp;quot;namespace&amp;rdquo; &amp;gt;}} ä¸­ã€‚
è¿™æ˜¯ä¸€ä¸ª ConfigMap çš„ç¤ºä¾‹ï¼Œå®ƒçš„ä¸€äº›é”®åªæœ‰ä¸€ä¸ªå€¼ï¼Œå…¶ä»–é”®çš„å€¼çœ‹èµ·æ¥åƒæ˜¯é…ç½®çš„ç‰‡æ®µæ ¼å¼ã€‚
apiVersion: v1 kind: ConfigMap metadata: Name: game-demo data: # ç±»å±æ€§é”®ï¼›æ¯ä¸€ä¸ªé”®éƒ½æ˜ å°„åˆ°ä¸€ä¸ªç®€å•çš„å€¼ player_initial_lives: 3 ui_properties_file_name: &amp;#34;user-interface.</description>
    </item>
    
    <item>
      <title>kubeadm init</title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-init/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-init/</guid>
      <description>æ­¤å‘½ä»¤åˆå§‹åŒ–ä¸€ä¸ª Kubernetes æ§åˆ¶å¹³é¢èŠ‚ç‚¹ã€‚
. include &amp;ldquo;generated/kubeadm_init.md&amp;rdquo; &amp;gt;}}
Init å‘½ä»¤çš„å·¥ä½œæµç¨‹ kubeadm init å‘½ä»¤é€šè¿‡æ‰§è¡Œä¸‹åˆ—æ­¥éª¤æ¥å¯åŠ¨ä¸€ä¸ª Kubernetes æ§åˆ¶å¹³é¢èŠ‚ç‚¹ã€‚
 åœ¨åšå‡ºå˜æ›´å‰è¿è¡Œä¸€ç³»åˆ—çš„é¢„æ£€é¡¹æ¥éªŒè¯ç³»ç»ŸçŠ¶æ€ã€‚ä¸€äº›æ£€æŸ¥é¡¹ç›®ä»…ä»…è§¦å‘è­¦å‘Šï¼Œå…¶å®ƒçš„åˆ™ä¼šè¢«è§†ä¸ºé”™è¯¯å¹¶ä¸”é€€å‡º kubeadmï¼Œé™¤éé—®é¢˜å¾—åˆ°è§£å†³æˆ–è€…ç”¨æˆ·æŒ‡å®šäº† --ignore-preflight-errors=&amp;lt;list-of-errors&amp;gt; å‚æ•°ã€‚  ç”Ÿæˆä¸€ä¸ªè‡ªç­¾åçš„ CA è¯ä¹¦ (æˆ–è€…ä½¿ç”¨ç°æœ‰çš„è¯ä¹¦ï¼Œå¦‚æœæä¾›çš„è¯) æ¥ä¸ºé›†ç¾¤ä¸­çš„æ¯ä¸€ä¸ªç»„ä»¶å»ºç«‹èº«ä»½æ ‡è¯†ã€‚å¦‚æœç”¨æˆ·å·²ç»é€šè¿‡ --cert-dir é…ç½®çš„è¯ä¹¦ç›®å½•ï¼ˆé»˜è®¤ä¸º /etc/kubernetes/pkiï¼‰æä¾›äº†ä»–ä»¬è‡ªå·±çš„ CA è¯ä¹¦ä»¥åŠ/æˆ–è€…å¯†é’¥ï¼Œ é‚£ä¹ˆå°†ä¼šè·³è¿‡è¿™ä¸ªæ­¥éª¤ï¼Œæ­£å¦‚æ–‡æ¡£ä½¿ç”¨è‡ªå®šä¹‰è¯ä¹¦æ‰€è¿°ã€‚å¦‚æœæŒ‡å®šäº† --apiserver-cert-extra-sans å‚æ•°, APIServer çš„è¯ä¹¦å°†ä¼šæœ‰é¢å¤–çš„ SAN æ¡ç›®ï¼Œå¦‚æœå¿…è¦çš„è¯ï¼Œå°†ä¼šè¢«è½¬ä¸ºå°å†™ã€‚  å°† kubeconfig æ–‡ä»¶å†™å…¥ /etc/kubernetes/ ç›®å½•ä»¥ä¾¿ kubeletã€æ§åˆ¶å™¨ç®¡ç†å™¨å’Œè°ƒåº¦å™¨ç”¨æ¥è¿æ¥åˆ° API æœåŠ¡å™¨ï¼Œå®ƒä»¬æ¯ä¸€ä¸ªéƒ½æœ‰è‡ªå·±çš„èº«ä»½æ ‡è¯†ï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä¸ªåä¸º admin.conf çš„ç‹¬ç«‹çš„ kubeconfig æ–‡ä»¶ï¼Œç”¨äºç®¡ç†æ“ä½œã€‚  ä¸º API æœåŠ¡å™¨ã€æ§åˆ¶å™¨ç®¡ç†å™¨å’Œè°ƒåº¦å™¨ç”Ÿæˆé™æ€ Pod çš„æ¸…å•æ–‡ä»¶ã€‚å‡ä½¿æ²¡æœ‰æä¾›ä¸€ä¸ªå¤–éƒ¨çš„ etcd æœåŠ¡çš„è¯ï¼Œä¹Ÿä¼šä¸º etcd ç”Ÿæˆä¸€ä»½é¢å¤–çš„é™æ€ Pod æ¸…å•æ–‡ä»¶ã€‚  é™æ€ Pod çš„æ¸…å•æ–‡ä»¶è¢«å†™å…¥åˆ° /etc/kubernetes/manifests ç›®å½•; kubelet ä¼šç›‘è§†è¿™ä¸ªç›®å½•ä»¥ä¾¿åœ¨ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™åˆ›å»º Podã€‚</description>
    </item>
    
    <item>
      <title>kubectl æ¦‚è¿°</title>
      <link>https://lijun.in/reference/kubectl/overview/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/kubectl/overview/</guid>
      <description>Kubectl æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œæ¥å£ï¼Œç”¨äºå¯¹ Kubernetes é›†ç¾¤è¿è¡Œå‘½ä»¤ã€‚kubectl åœ¨ $HOME/.kube ç›®å½•ä¸­å¯»æ‰¾ä¸€ä¸ªåä¸º config çš„æ–‡ä»¶ã€‚æ‚¨å¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ KUBECONFIG æˆ–è®¾ç½® --kubeconfig å‚æ•°æŒ‡å®šå…¶å®ƒ kubeconfig æ–‡ä»¶ã€‚
æœ¬æ–‡æ¦‚è¿°äº† kubectl è¯­æ³•å’Œå‘½ä»¤æ“ä½œæè¿°ï¼Œå¹¶æä¾›äº†å¸¸è§çš„ç¤ºä¾‹ã€‚æœ‰å…³æ¯ä¸ªå‘½ä»¤çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ‰€æœ‰å—æ”¯æŒçš„å‚æ•°å’Œå­å‘½ä»¤ï¼Œè¯·å‚é˜… kubectl å‚è€ƒæ–‡æ¡£ã€‚æœ‰å…³å®‰è£…è¯´æ˜ï¼Œè¯·å‚è§ å®‰è£… kubectl ã€‚
è¯­æ³• ä½¿ç”¨ä»¥ä¸‹è¯­æ³• kubectl ä»ç»ˆç«¯çª—å£è¿è¡Œå‘½ä»¤ï¼š
kubectl [command] [TYPE] [NAME] [flags] å…¶ä¸­ commandã€TYPEã€NAME å’Œ flags åˆ†åˆ«æ˜¯ï¼š
  commandï¼šæŒ‡å®šè¦å¯¹ä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºæ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚ createã€getã€describeã€deleteã€‚
  TYPEï¼šæŒ‡å®šèµ„æºç±»å‹ã€‚èµ„æºç±»å‹ä¸åŒºåˆ†å¤§å°å†™ï¼Œå¯ä»¥æŒ‡å®šå•æ•°ã€å¤æ•°æˆ–ç¼©å†™å½¢å¼ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤è¾“å‡ºç›¸åŒçš„ç»“æœ:
```shell kubectl get pod pod1 kubectl get pods pod1 kubectl get po pod1 ```      NAMEï¼šæŒ‡å®šèµ„æºçš„åç§°ã€‚åç§°åŒºåˆ†å¤§å°å†™ã€‚å¦‚æœçœç•¥åç§°ï¼Œåˆ™æ˜¾ç¤ºæ‰€æœ‰èµ„æºçš„è¯¦ç»†ä¿¡æ¯ kubectl get podsã€‚
åœ¨å¯¹å¤šä¸ªèµ„æºæ‰§è¡Œæ“ä½œæ—¶ï¼Œæ‚¨å¯ä»¥æŒ‰ç±»å‹å’Œåç§°æŒ‡å®šæ¯ä¸ªèµ„æºï¼Œæˆ–æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼š
    è¦æŒ‰ç±»å‹å’Œåç§°æŒ‡å®šèµ„æºï¼š</description>
    </item>
    
    <item>
      <title>Kubernetes å®‰å…¨å’Œä¿¡æ¯æŠ«éœ²</title>
      <link>https://lijun.in/reference/issues-security/security/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/issues-security/security/</guid>
      <description>æœ¬é¡µé¢ä»‹ç» Kubernetes å®‰å…¨å’Œä¿¡æ¯æŠ«éœ²ç›¸å…³çš„å†…å®¹ã€‚
å®‰å…¨å…¬å‘Š åŠ å…¥ kubernets-announce ç»„ï¼Œä»¥è·å–å…³äºå®‰å…¨æ€§å’Œä¸»è¦ API å…¬å‘Šçš„ç”µå­é‚®ä»¶ã€‚
æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨æ­¤é“¾æ¥è®¢é˜…ä¸Šè¿°çš„ RSS åé¦ˆã€‚
æŠ¥å‘Šä¸€ä¸ªæ¼æ´ æˆ‘ä»¬éå¸¸æ„Ÿè°¢å‘ Kubernetes å¼€æºç¤¾åŒºæŠ¥å‘Šæ¼æ´çš„å®‰å…¨ç ”ç©¶äººå‘˜å’Œç”¨æˆ·ã€‚ æ‰€æœ‰çš„æŠ¥å‘Šéƒ½ç”±ç¤¾åŒºå¿—æ„¿è€…è¿›è¡Œå½»åº•è°ƒæŸ¥ã€‚
å¦‚éœ€æŠ¥å‘Šï¼Œè¯·è¿åŒå®‰å…¨ç»†èŠ‚ä»¥åŠé¢„æœŸçš„æ‰€æœ‰ Kubernetes bug æŠ¥å‘Šè¯¦ç»†ä¿¡æ¯ç”µé‚®åˆ°security@kubernetes.io åˆ—è¡¨ã€‚
æ‚¨è¿˜å¯ä»¥é€šè¿‡ç”µå­é‚®ä»¶å‘ç§æœ‰ security@kubernetes.io åˆ—è¡¨å‘é€ç”µå­é‚®ä»¶ï¼Œé‚®ä»¶ä¸­åº”è¯¥åŒ…å«æ‰€æœ‰ Kubernetes é”™è¯¯æŠ¥å‘Šæ‰€éœ€çš„è¯¦ç»†ä¿¡æ¯ã€‚
æ‚¨å¯ä»¥ä½¿ç”¨äº§å“å®‰å…¨å›¢é˜Ÿæˆå‘˜çš„ GPG å¯†é’¥åŠ å¯†æ‚¨çš„ç”µå­é‚®ä»¶åˆ°æ­¤åˆ—è¡¨ã€‚ ä½¿ç”¨ GPG åŠ å¯†ä¸éœ€è¦å…¬å¼€ã€‚
æˆ‘åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™æŠ¥å‘Šæ¼æ´ï¼Ÿ  æ‚¨è®¤ä¸ºåœ¨ Kubernetes ä¸­å‘ç°äº†ä¸€ä¸ªæ½œåœ¨çš„å®‰å…¨æ¼æ´ æ‚¨ä¸ç¡®å®šæ¼æ´å¦‚ä½•å½±å“ Kubernetes æ‚¨è®¤ä¸ºæ‚¨åœ¨ Kubernetes ä¾èµ–çš„å¦ä¸€ä¸ªé¡¹ç›®ä¸­å‘ç°äº†ä¸€ä¸ªæ¼æ´  å¯¹äºå…·æœ‰æ¼æ´æŠ¥å‘Šå’ŒæŠ«éœ²æµç¨‹çš„é¡¹ç›®ï¼Œè¯·ç›´æ¥åœ¨è¯¥é¡¹ç›®å¤„æŠ¥å‘Š    æˆ‘ä»€ä¹ˆæ—¶å€™ä¸åº”è¯¥æŠ¥å‘Šæ¼æ´ï¼Ÿ  æ‚¨éœ€è¦å¸®åŠ©è°ƒæ•´ Kubernetes ç»„ä»¶çš„å®‰å…¨æ€§ æ‚¨éœ€è¦å¸®åŠ©åº”ç”¨ä¸å®‰å…¨ç›¸å…³çš„æ›´æ–° æ‚¨çš„é—®é¢˜ä¸å®‰å…¨æ— å…³  å®‰å…¨æ¼æ´å“åº” æ¯ä¸ªæŠ¥å‘Šåœ¨ 3 ä¸ªå·¥ä½œæ—¥å†…ç”±äº§å“å®‰å…¨å›¢é˜Ÿæˆå‘˜ç¡®è®¤å’Œåˆ†æã€‚è¿™å°†å¯åŠ¨å®‰å…¨å‘å¸ƒè¿‡ç¨‹ã€‚
ä¸äº§å“å®‰å…¨å›¢é˜Ÿå…±äº«çš„ä»»ä½•æ¼æ´ä¿¡æ¯éƒ½ä¿ç•™åœ¨ Kubernetes é¡¹ç›®ä¸­ï¼Œé™¤éæœ‰å¿…è¦ä¿®å¤è¯¥é—®é¢˜ï¼Œå¦åˆ™ä¸ä¼šä¼ æ’­åˆ°å…¶ä»–é¡¹ç›®ã€‚
éšç€å®‰å…¨é—®é¢˜ä»åˆ†ç±»ã€è¯†åˆ«ä¿®å¤ã€å‘å¸ƒè®¡åˆ’ç­‰æ–¹é¢çš„è¿›å±•ï¼Œæˆ‘ä»¬å°†ä¸æ–­æ›´æ–°æŠ¥å‘Šã€‚
å…¬å¼€æŠ«éœ²æ—¶é—´ å…¬å¼€æŠ«éœ²æ—¥æœŸç”± Kubernetes äº§å“å®‰å…¨å›¢é˜Ÿå’Œ bug æäº¤è€…åå•†ã€‚æˆ‘ä»¬å€¾å‘äºåœ¨ç”¨æˆ·ç¼“è§£æªæ–½å¯ç”¨æ—¶å°½å¿«å®Œå…¨æŠ«éœ²è¯¥ bugã€‚</description>
    </item>
    
    <item>
      <title>Kubernetes ç»„ä»¶</title>
      <link>https://lijun.in/concepts/overview/components/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/overview/components/</guid>
      <description>å½“ä½ éƒ¨ç½²å®Œ Kubernetes, å³æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„é›†ç¾¤ã€‚ term_id=&amp;quot;cluster&amp;rdquo; length=&amp;quot;all&amp;rdquo; prepend=&amp;quot;ä¸€ä¸ª Kubernetes é›†ç¾¤åŒ…å«&amp;quot;&amp;gt;}}
æœ¬æ–‡æ¡£æ¦‚è¿°äº†äº¤ä»˜æ­£å¸¸è¿è¡Œçš„ Kubernetes é›†ç¾¤æ‰€éœ€çš„å„ç§ç»„ä»¶ã€‚
è¿™å¼ å›¾è¡¨å±•ç¤ºäº†åŒ…å«æ‰€æœ‰ç›¸äº’å…³è”ç»„ä»¶çš„ Kubernetes é›†ç¾¤ã€‚
æ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆControl Plane Componentsï¼‰ æ§åˆ¶å¹³é¢çš„ç»„ä»¶å¯¹é›†ç¾¤åšå‡ºå…¨å±€å†³ç­–(æ¯”å¦‚è°ƒåº¦)ï¼Œä»¥åŠæ£€æµ‹å’Œå“åº”é›†ç¾¤äº‹ä»¶ï¼ˆä¾‹å¦‚ï¼Œå½“ä¸æ»¡è¶³éƒ¨ç½²çš„ replicas å­—æ®µæ—¶ï¼Œå¯åŠ¨æ–°çš„ text=&amp;quot;pod&amp;rdquo; term_id=&amp;quot;pod&amp;quot;&amp;gt;}}ï¼‰ã€‚
æ§åˆ¶å¹³é¢ç»„ä»¶å¯ä»¥åœ¨é›†ç¾¤ä¸­çš„ä»»ä½•èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚ç„¶è€Œï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œè®¾ç½®è„šæœ¬é€šå¸¸ä¼šåœ¨åŒä¸€ä¸ªè®¡ç®—æœºä¸Šå¯åŠ¨æ‰€æœ‰æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œå¹¶ä¸”ä¸ä¼šåœ¨æ­¤è®¡ç®—æœºä¸Šè¿è¡Œç”¨æˆ·å®¹å™¨ã€‚è¯·å‚é˜…æ„å»ºé«˜å¯ç”¨æ€§é›†ç¾¤ä¸­å¯¹äºå¤šä¸»æœº VM çš„è®¾ç½®ç¤ºä¾‹ã€‚
kube-apiserver term_id=&amp;quot;kube-apiserver&amp;rdquo; length=&amp;quot;all&amp;rdquo; &amp;gt;}}
etcd term_id=&amp;quot;etcd&amp;rdquo; length=&amp;quot;all&amp;rdquo; &amp;gt;}}
kube-scheduler term_id=&amp;quot;kube-scheduler&amp;rdquo; length=&amp;quot;all&amp;rdquo; &amp;gt;}}
kube-controller-manager n term_id=&amp;quot;kube-controller-manager&amp;rdquo; length=&amp;quot;all&amp;rdquo; &amp;gt;}}
è¿™äº›æ§åˆ¶å™¨åŒ…æ‹¬:
 èŠ‚ç‚¹æ§åˆ¶å™¨ï¼ˆNode Controllerï¼‰: è´Ÿè´£åœ¨èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶è¿›è¡Œé€šçŸ¥å’Œå“åº”ã€‚ å‰¯æœ¬æ§åˆ¶å™¨ï¼ˆReplication Controllerï¼‰: è´Ÿè´£ä¸ºç³»ç»Ÿä¸­çš„æ¯ä¸ªå‰¯æœ¬æ§åˆ¶å™¨å¯¹è±¡ç»´æŠ¤æ­£ç¡®æ•°é‡çš„ Podã€‚ ç«¯ç‚¹æ§åˆ¶å™¨ï¼ˆEndpoints Controllerï¼‰: å¡«å……ç«¯ç‚¹(Endpoints)å¯¹è±¡(å³åŠ å…¥ Service ä¸ Pod)ã€‚ æœåŠ¡å¸æˆ·å’Œä»¤ç‰Œæ§åˆ¶å™¨ï¼ˆService Account &amp;amp; Token Controllersï¼‰: ä¸ºæ–°çš„å‘½åç©ºé—´åˆ›å»ºé»˜è®¤å¸æˆ·å’Œ API è®¿é—®ä»¤ç‰Œ.  äº‘æ§åˆ¶å™¨ç®¡ç†å™¨-(cloud-controller-manager) cloud-controller-manager è¿è¡Œä¸åŸºç¡€äº‘æä¾›å•†äº¤äº’çš„æ§åˆ¶å™¨ã€‚cloud-controller-manager äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ Kubernetes 1.</description>
    </item>
    
    <item>
      <title>Pod ä¸ Service çš„ DNS</title>
      <link>https://lijun.in/concepts/services-networking/dns-pod-service/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/services-networking/dns-pod-service/</guid>
      <description>è¯¥é¡µé¢æ¦‚è¿°äº†Kuberneteså¯¹DNSçš„æ”¯æŒã€‚
ä»‹ç» Kubernetes DNS åœ¨ç¾¤é›†ä¸Šè°ƒåº¦ DNS Pod å’ŒæœåŠ¡ï¼Œå¹¶é…ç½® kubelet ä»¥å‘ŠçŸ¥å„ä¸ªå®¹å™¨ä½¿ç”¨ DNS æœåŠ¡çš„ IP æ¥è§£æ DNS åç§°ã€‚
æ€æ ·è·å– DNS åå­—? åœ¨é›†ç¾¤ä¸­å®šä¹‰çš„æ¯ä¸ª Serviceï¼ˆåŒ…æ‹¬ DNS æœåŠ¡å™¨è‡ªèº«ï¼‰éƒ½ä¼šè¢«æŒ‡æ´¾ä¸€ä¸ª DNS åç§°ã€‚ é»˜è®¤ï¼Œä¸€ä¸ªå®¢æˆ·ç«¯ Pod çš„ DNS æœç´¢åˆ—è¡¨å°†åŒ…å«è¯¥ Pod è‡ªå·±çš„ Namespace å’Œé›†ç¾¤é»˜è®¤åŸŸã€‚ é€šè¿‡å¦‚ä¸‹ç¤ºä¾‹å¯ä»¥å¾ˆå¥½åœ°è¯´æ˜ï¼š
å‡è®¾åœ¨ Kubernetes é›†ç¾¤çš„ Namespace bar ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ªService fooã€‚ è¿è¡Œåœ¨Namespace bar ä¸­çš„ä¸€ä¸ª Podï¼Œå¯ä»¥ç®€å•åœ°é€šè¿‡ DNS æŸ¥è¯¢ foo æ¥æ‰¾åˆ°è¯¥ Serviceã€‚ è¿è¡Œåœ¨ Namespace quux ä¸­çš„ä¸€ä¸ª Pod å¯ä»¥é€šè¿‡ DNS æŸ¥è¯¢ foo.bar æ‰¾åˆ°è¯¥ Serviceã€‚
ä»¥ä¸‹å„èŠ‚è¯¦ç»†ä»‹ç»äº†å—æ”¯æŒçš„è®°å½•ç±»å‹å’Œæ”¯æŒçš„å¸ƒå±€ã€‚ å…¶ä¸­ä»£ç éƒ¨åˆ†çš„å¸ƒå±€ï¼Œåç§°æˆ–æŸ¥è¯¢å‘½ä»¤å‡è¢«è§†ä¸ºå®ç°ç»†èŠ‚ï¼Œå¦‚æœ‰æ›´æ”¹ï¼Œæ•ä¸å¦è¡Œé€šçŸ¥ã€‚ æœ‰å…³æœ€æ–°è§„èŒƒè¯·æŸ¥çœ‹ Kubernetes åŸºäº DNS çš„æœåŠ¡å‘ç°.
æ”¯æŒçš„ DNS æ¨¡å¼ ä¸‹é¢å„æ®µè¯¦ç»†è¯´æ˜æ”¯æŒçš„è®°å½•ç±»å‹å’Œå¸ƒå±€ã€‚ å¦‚æœä»»ä½•å…¶å®ƒçš„å¸ƒå±€ã€åç§°æˆ–æŸ¥è¯¢ï¼Œç¢°å·§ä¹Ÿèƒ½å¤Ÿä½¿ç”¨ï¼Œè¿™å°±éœ€è¦ç ”ç©¶ä¸‹å®ƒä»¬çš„å®ç°ç»†èŠ‚ï¼Œä»¥å…åç»­ä¿®æ”¹å®ƒä»¬åˆä¸èƒ½ä½¿ç”¨äº†ã€‚</description>
    </item>
    
    <item>
      <title>Pod å¼€é”€</title>
      <link>https://lijun.in/concepts/configuration/pod-overhead/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/configuration/pod-overhead/</guid>
      <description>for_k8s_version=&amp;quot;v1.18&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
åœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œ Pod æ—¶ï¼ŒPod æœ¬èº«å ç”¨å¤§é‡ç³»ç»Ÿèµ„æºã€‚è¿™äº›èµ„æºæ˜¯è¿è¡Œ Pod å†…å®¹å™¨æ‰€éœ€èµ„æºçš„é™„åŠ èµ„æºã€‚ POD å¼€é”€ æ˜¯ä¸€ä¸ªç‰¹æ€§ï¼Œç”¨äºè®¡ç®— Pod åŸºç¡€è®¾æ–½åœ¨å®¹å™¨è¯·æ±‚å’Œé™åˆ¶ä¹‹ä¸Šæ¶ˆè€—çš„èµ„æºã€‚
Pod å¼€é”€ åœ¨ Kubernetes ä¸­ï¼ŒPod çš„å¼€é”€æ˜¯æ ¹æ®ä¸ Pod çš„ RuntimeClass ç›¸å…³è”çš„å¼€é”€åœ¨ å‡†å…¥ æ—¶è®¾ç½®çš„ã€‚
å½“å¯ç”¨ Pod å¼€é”€æ—¶ï¼Œåœ¨è°ƒåº¦ Pod æ—¶ï¼Œé™¤äº†è€ƒè™‘å®¹å™¨èµ„æºè¯·æ±‚çš„æ€»å’Œå¤–ï¼Œè¿˜è¦è€ƒè™‘ Pod å¼€é”€ã€‚ç±»ä¼¼åœ°ï¼ŒKubelet å°†åœ¨ç¡®å®š Pod cgroup çš„å¤§å°å’Œæ‰§è¡Œ Pod é©±é€æ’åºæ—¶åŒ…å« Pod å¼€é”€ã€‚
å¯ç”¨ Pod å¼€é”€ æ‚¨éœ€è¦ç¡®ä¿åœ¨é›†ç¾¤ä¸­å¯ç”¨äº† PodOverhead ç‰¹æ€§é—¨ï¼ˆåœ¨ 1.18 é»˜è®¤æ˜¯å¼€å¯çš„ï¼‰ï¼Œä»¥åŠä¸€ä¸ªç”¨äºå®šä¹‰ overhead å­—æ®µçš„ RuntimeClassã€‚
ä½¿ç”¨ç¤ºä¾‹ è¦ä½¿ç”¨ PodOverhead ç‰¹æ€§ï¼Œéœ€è¦ä¸€ä¸ªå®šä¹‰ overhead å­—æ®µçš„ RuntimeClass. ä½œä¸ºä¾‹å­ï¼Œå¯ä»¥åœ¨è™šæ‹Ÿæœºå’Œæ¥å®¾æ“ä½œç³»ç»Ÿä¸­é€šè¿‡ä¸€ä¸ªè™šæ‹ŸåŒ–å®¹å™¨è¿è¡Œæ—¶æ¥å®šä¹‰ RuntimeClass å¦‚ä¸‹ï¼Œå…¶ä¸­æ¯ä¸ª Pod å¤§çº¦ä½¿ç”¨ 120MiB:
--- kind: RuntimeClass apiVersion: node.k8s.io/v1beta1 metadata: name: kata-fc handler: kata-fc overhead: podFixed: memory: &amp;#34;120Mi&amp;#34; cpu: &amp;#34;250m&amp;#34; é€šè¿‡æŒ‡å®š kata-fc RuntimeClass å¤„ç†ç¨‹åºåˆ›å»ºçš„å·¥ä½œè´Ÿè½½ä¼šå°†å†…å­˜å’Œ cpu å¼€é”€è®¡å…¥èµ„æºé…é¢è®¡ç®—ã€èŠ‚ç‚¹è°ƒåº¦ä»¥åŠ Pod cgroup åˆ†çº§ã€‚</description>
    </item>
    
    <item>
      <title>Pods</title>
      <link>https://lijun.in/concepts/workloads/pods/pod/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/pods/pod/</guid>
      <description>Pod æ˜¯å¯ä»¥åœ¨ Kubernetes ä¸­åˆ›å»ºå’Œç®¡ç†çš„ã€æœ€å°çš„å¯éƒ¨ç½²çš„è®¡ç®—å•å…ƒã€‚
Pod æ˜¯ä»€ä¹ˆï¼Ÿ Pod ï¼ˆå°±åƒåœ¨é²¸é±¼èšæˆ–è€…è±Œè±†èšä¸­ï¼‰æ˜¯ä¸€ç»„ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰ glossary_tooltip text=&amp;quot;å®¹å™¨&amp;rdquo; term_id=&amp;quot;container&amp;rdquo; &amp;gt;}}ï¼ˆä¾‹å¦‚ Docker å®¹å™¨ï¼‰ï¼Œè¿™äº›å®¹å™¨å…±äº«å­˜å‚¨ã€ç½‘ç»œã€ä»¥åŠæ€æ ·è¿è¡Œè¿™äº›å®¹å™¨çš„å£°æ˜ã€‚Pod ä¸­çš„å†…å®¹æ€»æ˜¯å¹¶ç½®ï¼ˆcolocatedï¼‰çš„å¹¶ä¸”ä¸€åŒè°ƒåº¦ï¼Œåœ¨å…±äº«çš„ä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚ Pod æ‰€å»ºæ¨¡çš„æ˜¯ç‰¹å®šäºåº”ç”¨çš„â€œé€»è¾‘ä¸»æœºâ€ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªåº”ç”¨å®¹å™¨ï¼Œè¿™äº›å®¹å™¨æ˜¯ç›¸å¯¹ç´§å¯†çš„è€¦åˆåœ¨ä¸€èµ· â€” åœ¨å®¹å™¨å‡ºç°ä¹‹å‰ï¼Œåœ¨ç›¸åŒçš„ç‰©ç†æœºæˆ–è™šæ‹Ÿæœºä¸Šè¿è¡Œæ„å‘³ç€åœ¨ç›¸åŒçš„é€»è¾‘ä¸»æœºä¸Šè¿è¡Œã€‚
è™½ç„¶ Kubernetes æ”¯æŒå¤šç§å®¹å™¨è¿è¡Œæ—¶ï¼Œä½† Docker æ˜¯æœ€å¸¸è§çš„ä¸€ç§è¿è¡Œæ—¶ï¼Œå®ƒæœ‰åŠ©äºä½¿ç”¨ Docker æœ¯è¯­æ¥æè¿° Podã€‚
Pod çš„å…±äº«ä¸Šä¸‹æ–‡æ˜¯ä¸€ç»„ Linux å‘½åç©ºé—´ã€cgroupsã€ä»¥åŠå…¶ä»–æ½œåœ¨çš„èµ„æºéš”ç¦»ç›¸å…³çš„å› ç´ ï¼Œè¿™äº›ç›¸åŒçš„ä¸œè¥¿ä¹Ÿéš”ç¦»äº† Docker å®¹å™¨ã€‚åœ¨ Pod çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå•ä¸ªåº”ç”¨ç¨‹åºå¯èƒ½è¿˜ä¼šåº”ç”¨è¿›ä¸€æ­¥çš„å­éš”ç¦»ã€‚
Pod ä¸­çš„æ‰€æœ‰å®¹å™¨å…±äº«ä¸€ä¸ª IP åœ°å€å’Œç«¯å£ç©ºé—´ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ localhost äº’ç›¸å‘ç°ã€‚ä»–ä»¬ä¹Ÿèƒ½é€šè¿‡æ ‡å‡†çš„è¿›ç¨‹é—´é€šä¿¡ï¼ˆå¦‚ SystemV ä¿¡å·é‡æˆ– POSIX å…±äº«å†…å­˜ï¼‰æ–¹å¼è¿›è¡Œäº’ç›¸é€šä¿¡ã€‚ä¸åŒ Pod ä¸­çš„å®¹å™¨çš„ IP åœ°å€äº’ä¸ç›¸åŒï¼Œæ²¡æœ‰ ç‰¹æ®Šé…ç½® å°±ä¸èƒ½ä½¿ç”¨ IPC è¿›è¡Œé€šä¿¡ã€‚è¿™äº›å®¹å™¨ä¹‹é—´ç»å¸¸é€šè¿‡ Pod IP åœ°å€è¿›è¡Œé€šä¿¡ã€‚
Pod ä¸­çš„åº”ç”¨ä¹Ÿèƒ½è®¿é—®å…±äº« glossary_tooltip text=&amp;quot;å·&amp;rdquo; term_id=&amp;quot;volume&amp;rdquo; &amp;gt;}}ï¼Œå…±äº«å·æ˜¯ Pod å®šä¹‰çš„ä¸€éƒ¨åˆ†ï¼Œå¯è¢«ç”¨æ¥æŒ‚è½½åˆ°æ¯ä¸ªåº”ç”¨çš„æ–‡ä»¶ç³»ç»Ÿä¸Šã€‚
åœ¨ Docker ä½“ç³»çš„æœ¯è¯­ä¸­ï¼ŒPod è¢«å»ºæ¨¡ä¸ºä¸€ç»„å…·æœ‰å…±äº«å‘½åç©ºé—´å’Œå…±äº«æ–‡ä»¶ç³»ç»Ÿå· çš„ Docker å®¹å™¨ã€‚</description>
    </item>
    
    <item>
      <title>ReplicationController</title>
      <link>https://lijun.in/concepts/workloads/controllers/replicationcontroller/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/controllers/replicationcontroller/</guid>
      <description>ç°åœ¨æ¨èä½¿ç”¨é…ç½® ReplicaSet çš„ Deployment æ¥å»ºç«‹å‰¯æœ¬ç®¡ç†æœºåˆ¶ã€‚
ReplicationController ç¡®ä¿åœ¨ä»»ä½•æ—¶å€™éƒ½æœ‰ç‰¹å®šæ•°é‡çš„ pod å‰¯æœ¬å¤„äºè¿è¡ŒçŠ¶æ€ã€‚ æ¢å¥è¯è¯´ï¼ŒReplicationController ç¡®ä¿ä¸€ä¸ª pod æˆ–ä¸€ç»„åŒç±»çš„ pod æ€»æ˜¯å¯ç”¨çš„ã€‚
ReplicationController å¦‚ä½•å·¥ä½œ å½“ pod æ•°é‡è¿‡å¤šæ—¶ï¼ŒReplicationController ä¼šç»ˆæ­¢å¤šä½™çš„ podã€‚å½“ pod æ•°é‡å¤ªå°‘æ—¶ï¼ŒReplicationController å°†ä¼šå¯åŠ¨æ–°çš„ podã€‚ ä¸æ‰‹åŠ¨åˆ›å»ºçš„ pod ä¸åŒï¼Œç”± ReplicationController åˆ›å»ºçš„ pod åœ¨å¤±è´¥ã€è¢«åˆ é™¤æˆ–è¢«ç»ˆæ­¢æ—¶ä¼šè¢«è‡ªåŠ¨æ›¿æ¢ã€‚ ä¾‹å¦‚ï¼Œåœ¨ä¸­æ–­æ€§ç»´æŠ¤ï¼ˆå¦‚å†…æ ¸å‡çº§ï¼‰ä¹‹åï¼Œæ‚¨çš„ pod ä¼šåœ¨èŠ‚ç‚¹ä¸Šé‡æ–°åˆ›å»ºã€‚ å› æ­¤ï¼Œå³ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºåªéœ€è¦ä¸€ä¸ª podï¼Œæ‚¨ä¹Ÿåº”è¯¥ä½¿ç”¨ ReplicationController åˆ›å»º Podã€‚ ReplicationController ç±»ä¼¼äºè¿›ç¨‹ç®¡ç†å™¨ï¼Œä½†æ˜¯ ReplicationController ä¸æ˜¯ç›‘æ§å•ä¸ªèŠ‚ç‚¹ä¸Šçš„å•ä¸ªè¿›ç¨‹ï¼Œè€Œæ˜¯ç›‘æ§è·¨å¤šä¸ªèŠ‚ç‚¹çš„å¤šä¸ª podã€‚
åœ¨è®¨è®ºä¸­ï¼ŒReplicationController é€šå¸¸ç¼©å†™ä¸º &amp;ldquo;rc&amp;rdquo;ï¼Œå¹¶ä½œä¸º kubectl å‘½ä»¤çš„å¿«æ·æ–¹å¼ã€‚
ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ˜¯åˆ›å»ºä¸€ä¸ª ReplicationController å¯¹è±¡æ¥å¯é åœ°æ— é™æœŸåœ°è¿è¡Œ Pod çš„ä¸€ä¸ªå®ä¾‹ã€‚ æ›´å¤æ‚çš„ç”¨ä¾‹æ˜¯è¿è¡Œä¸€ä¸ªå¤šå‰¯æœ¬æœåŠ¡ï¼ˆå¦‚ web æœåŠ¡å™¨ï¼‰çš„è‹¥å¹²ç›¸åŒå‰¯æœ¬ã€‚
è¿è¡Œä¸€ä¸ªç¤ºä¾‹ ReplicationController è¿™ä¸ªç¤ºä¾‹ ReplicationController é…ç½®è¿è¡Œ nginx web æœåŠ¡å™¨çš„ä¸‰ä¸ªå‰¯æœ¬ã€‚
codenew file=&amp;quot;controllers/replication.yaml&amp;rdquo; &amp;gt;}}</description>
    </item>
    
    <item>
      <title>ä¸º Windows çš„ pod å’Œå®¹å™¨é…ç½® RunAsUserName</title>
      <link>https://lijun.in/tasks/configure-pod-container/configure-runasusername/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/configure-runasusername/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;v1.17&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
æœ¬é¡µå±•ç¤ºå¦‚ä½•ä¸ºè¿è¡Œåœ¨ Windows èŠ‚ç‚¹ä¸Šçš„ pod å’Œå®¹å™¨å¯ç”¨å¹¶ä½¿ç”¨ RunAsUserName åŠŸèƒ½ã€‚æ­¤åŠŸèƒ½æ—¨åœ¨æˆä¸º Windows ç‰ˆçš„ runAsUserï¼ˆLinuxï¼‰ï¼Œå…è®¸ç”¨æˆ·ä½¿ç”¨ä¸é»˜è®¤ç”¨æˆ·åä¸åŒçš„ç”¨æˆ·åè¿è¡Œå®¹å™¨ entrypointã€‚
. note &amp;gt;}}
è¯¥åŠŸèƒ½ç›®å‰å¤„äº beta çŠ¶æ€ã€‚ RunAsUserName çš„æ•´ä½“åŠŸèƒ½ä¸ä¼šå‡ºç°å˜æ›´ï¼Œä½†æ˜¯å…³äºç”¨æˆ·åéªŒè¯çš„éƒ¨åˆ†å¯èƒ½ä¼šæœ‰æ‰€æ›´æ”¹ã€‚ . /note &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} ä½ å¿…é¡»æœ‰ä¸€ä¸ª Kubernetes é›†ç¾¤ï¼Œå¹¶ä¸” kubectl å¿…é¡»èƒ½å’Œé›†ç¾¤é€šä¿¡ã€‚é›†ç¾¤åº”è¯¥è¦æœ‰ Windows å·¥ä½œèŠ‚ç‚¹ï¼Œå°†åœ¨å…¶ä¸­è°ƒåº¦è¿è¡Œ Windows å·¥ä½œè´Ÿè½½çš„ pod å’Œå®¹å™¨ã€‚
ä¸º Pod è®¾ç½® Username è¦æŒ‡å®šè¿è¡Œ Pod å®¹å™¨æ—¶æ‰€ä½¿ç”¨çš„ç”¨æˆ·åï¼Œè¯·åœ¨ Pod å£°æ˜ä¸­åŒ…å« securityContext ï¼ˆ[PodSecurityContext](/docs/reference/generated/kubernetes-api/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#podsecuritycontext-v1-core)ï¼‰å­—æ®µï¼Œå¹¶åœ¨å…¶å†…éƒ¨åŒ…å« windowsOptions ï¼ˆ[WindowsSecurityContextOptions](/docs/reference/generated/kubernetes-api/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#windowssecuritycontextoptions-v1-core)ï¼‰å­—æ®µçš„ runAsUserName å­—æ®µã€‚
æ‚¨ä¸º Pod æŒ‡å®šçš„ Windows SecurityContext é€‰é¡¹é€‚ç”¨äºè¯¥ Pod ä¸­ï¼ˆåŒ…æ‹¬ init å®¹å™¨ï¼‰çš„æ‰€æœ‰å®¹å™¨ã€‚</description>
    </item>
    
    <item>
      <title>ä¸ºå‘½åç©ºé—´é…ç½®é»˜è®¤çš„CPUè¯·æ±‚å’Œé™åˆ¶</title>
      <link>https://lijun.in/tasks/administer-cluster/manage-resources/cpu-default-namespace/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/manage-resources/cpu-default-namespace/</guid>
      <description>æœ¬ç« ä»‹ç»æ€æ ·ä¸ºå‘½åç©ºé—´é…ç½®é»˜è®¤çš„ CPU è¯·æ±‚å’Œé™åˆ¶ã€‚ ä¸€ä¸ª Kubernetes é›†ç¾¤å¯è¢«åˆ’åˆ†ä¸ºå¤šä¸ªå‘½åç©ºé—´ã€‚å¦‚æœåœ¨é…ç½®äº† CPU é™åˆ¶çš„å‘½åç©ºé—´åˆ›å»ºå®¹å™¨ï¼Œå¹¶ä¸”è¯¥å®¹å™¨æ²¡æœ‰å£°æ˜è‡ªå·±çš„ CPU é™åˆ¶ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¹å™¨ä¼šè¢«æŒ‡å®šé»˜è®¤çš„ CPU é™åˆ¶ã€‚Kubernetes åœ¨ä¸€äº›ç‰¹å®šæƒ…å†µè¿˜ä¼šæŒ‡å®š CPU è¯·æ±‚ï¼Œæœ¬æ–‡åç»­ç« èŠ‚å°†ä¼šå¯¹å…¶è¿›è¡Œè§£é‡Šã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åˆ›å»ºå‘½åç©ºé—´ åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œä»¥ä¾¿æœ¬ç»ƒä¹ ä¸­åˆ›å»ºçš„èµ„æºå’Œé›†ç¾¤çš„å…¶ä½™éƒ¨åˆ†ç›¸éš”ç¦»ã€‚
kubectl create namespace default-cpu-example åˆ›å»º LimitRange å’Œ Pod
è¿™é‡Œç»™å‡ºäº† LimitRange å¯¹è±¡çš„é…ç½®æ–‡ä»¶ã€‚è¯¥é…ç½®å£°æ˜äº†ä¸€ä¸ªé»˜è®¤çš„ CPU è¯·æ±‚å’Œä¸€ä¸ªé»˜è®¤çš„ CPU é™åˆ¶ã€‚
. codenew file=&amp;quot;admin/resource/cpu-defaults.yaml&amp;rdquo; &amp;gt;}}
åœ¨å‘½åç©ºé—´ default-cpu-example ä¸­åˆ›å»º LimitRange å¯¹è±¡ï¼š
kubectl create -f https://k8s.io/examples/admin/resource/cpu-defaults.yaml --namespace=default-cpu-example ç°åœ¨å¦‚æœåœ¨ default-cpu-example å‘½åç©ºé—´åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œè¯¥å®¹å™¨æ²¡æœ‰å£°æ˜è‡ªå·±çš„ CPU è¯·æ±‚å’Œé™åˆ¶æ—¶ï¼Œå°†ä¼šç»™å®ƒæŒ‡å®šé»˜è®¤çš„ CPU è¯·æ±‚0.5å’Œé»˜è®¤çš„ CPU é™åˆ¶å€¼1.
è¿™é‡Œç»™å‡ºäº†åŒ…å«ä¸€ä¸ªå®¹å™¨çš„ Pod çš„é…ç½®æ–‡ä»¶ã€‚è¯¥å®¹å™¨æ²¡æœ‰å£°æ˜ CPU è¯·æ±‚å’Œé™åˆ¶ã€‚</description>
    </item>
    
    <item>
      <title>ä¸ºå®¹å™¨å’Œ Pods åˆ†é… CPU èµ„æº</title>
      <link>https://lijun.in/tasks/configure-pod-container/assign-cpu-resource/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/assign-cpu-resource/</guid>
      <description>æ­¤é¡µé¢æ˜¾ç¤ºå¦‚ä½•å°† CPU request å’Œ CPU limit åˆ†é…ç»™ä¸€ä¸ªå®¹å™¨ã€‚å®¹å™¨ä½¿ç”¨çš„ CPU ä¸èƒ½è¶…è¿‡é…é¢é™åˆ¶ã€‚ å¦‚æœç³»ç»Ÿæœ‰ç©ºé—²çš„ CPU æ—¶é—´ï¼Œåˆ™å¯ä»¥ä¿è¯æ ¹æ®è¯·æ±‚ç»™å®¹å™¨åˆ†é…å°½å¯èƒ½å¤šçš„ CPU èµ„æºã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹å¿…é¡»è‡³å°‘å…·æœ‰ 1 ä¸ª CPUã€‚
æ­¤é¡µé¢ä¸Šçš„ä¸€äº›æ­¥éª¤è¦æ±‚æ‚¨åœ¨é›†ç¾¤ä¸­è¿è¡Œmetrics-server æœåŠ¡ã€‚å¦‚æœæ‚¨çš„é›†ç¾¤ä¸­å·²ç»æœ‰æ­£åœ¨è¿è¡Œçš„ metrics-server æœåŠ¡ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥è·³è¿‡è¿™äº›æ­¥éª¤ã€‚
å¦‚æœæ‚¨æ­£åœ¨è¿è¡Œ. glossary_tooltip term_id=&amp;quot;minikube&amp;rdquo; &amp;gt;}}ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯ç”¨ metrics-serverï¼š
minikube addons enable metrics-server æŸ¥çœ‹æ˜¯ metrics-serverï¼ˆæˆ–è€…å…¶ä»–èµ„æºåº¦é‡ API æœåŠ¡æä¾›è€…ï¼Œmetrics.k8s.io ï¼‰æ˜¯å¦æ­£åœ¨è¿è¡Œï¼Œè¯·é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š
kubectl get apiservices å¦‚æœèµ„æºæŒ‡æ ‡ API å¯ç”¨ï¼Œåˆ™ä¼šè¾“å‡ºå°†åŒ…å«ä¸€ä¸ªå‚è€ƒä¿¡æ¯ metrics.k8s.ioã€‚
NAME v1beta1.metrics.k8s.io åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ . glossary_tooltip term_id=&amp;quot;namespace&amp;rdquo; &amp;gt;}}ï¼Œä»¥ä¾¿åœ¨æœ¬ç»ƒä¹ ä¸­åˆ›å»ºçš„èµ„æºä¸é›†ç¾¤çš„å…¶ä½™éƒ¨åˆ†èµ„æºéš”ç¦»ã€‚
kubectl create namespace cpu-example æŒ‡å®šä¸€ä¸ª CPU è¯·æ±‚å’Œ CPU é™åˆ¶ è¦ä¸ºå®¹å™¨æŒ‡å®š CPU è¯·æ±‚ï¼Œè¯·åŒ…å« resourcesï¼šrequests å­—æ®µ åœ¨å®¹å™¨èµ„æºæ¸…å•ä¸­ã€‚è¦æŒ‡å®š CPU é™åˆ¶ï¼Œè¯·åŒ…å« resourcesï¼šlimitsã€‚</description>
    </item>
    
    <item>
      <title>ä¸ºå®¹å™¨ç®¡ç†è®¡ç®—èµ„æº</title>
      <link>https://lijun.in/concepts/configuration/manage-compute-resources-container/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/configuration/manage-compute-resources-container/</guid>
      <description>å½“æ‚¨å®šä¹‰ Pod çš„æ—¶å€™å¯ä»¥é€‰æ‹©ä¸ºæ¯ä¸ªå®¹å™¨æŒ‡å®šéœ€è¦çš„ CPU å’Œå†…å­˜ï¼ˆRAMï¼‰å¤§å°ã€‚å½“ä¸ºå®¹å™¨æŒ‡å®šäº†èµ„æºè¯·æ±‚åï¼Œè°ƒåº¦å™¨å°±èƒ½å¤Ÿæ›´å¥½çš„åˆ¤æ–­å‡ºå°†å®¹å™¨è°ƒåº¦åˆ°å“ªä¸ªèŠ‚ç‚¹ä¸Šã€‚å¦‚æœæ‚¨è¿˜ä¸ºå®¹å™¨æŒ‡å®šäº†èµ„æºé™åˆ¶ï¼ŒKubernetes å°±å¯ä»¥æŒ‰ç…§æŒ‡å®šçš„æ–¹å¼æ¥å¤„ç†èŠ‚ç‚¹ä¸Šçš„èµ„æºç«äº‰ã€‚å…³äºèµ„æºè¯·æ±‚å’Œé™åˆ¶çš„ä¸åŒç‚¹å’Œæ›´å¤šèµ„æ–™è¯·å‚è€ƒ Resource QoSã€‚
èµ„æºç±»å‹ CPU å’Œå†…å­˜éƒ½æ˜¯èµ„æºç±»å‹ã€‚èµ„æºç±»å‹å…·æœ‰åŸºæœ¬å•ä½ã€‚CPU çš„å•ä½æ˜¯æ ¸å¿ƒæ•°ï¼Œå†…å­˜çš„å•ä½æ˜¯å­—èŠ‚ã€‚
å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Kubernetes v1.14 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œåˆ™å¯ä»¥æŒ‡å®šå·¨é¡µèµ„æºã€‚å·¨é¡µæ˜¯ Linux ç‰¹æœ‰çš„åŠŸèƒ½ï¼ŒèŠ‚ç‚¹å†…æ ¸åœ¨å…¶ä¸­åˆ†é…çš„å†…å­˜å—æ¯”é»˜è®¤é¡µå¤§å°å¤§å¾—å¤šã€‚
ä¾‹å¦‚ï¼Œåœ¨é»˜è®¤é¡µé¢å¤§å°ä¸º 4KiB çš„ç³»ç»Ÿä¸Šï¼Œæ‚¨å¯ä»¥æŒ‡å®šä¸€ä¸ªé™åˆ¶ï¼Œhugepages-2Mi: 80Miã€‚å¦‚æœå®¹å™¨å°è¯•åˆ†é… 40 ä¸ª 2MiB å¤§é¡µé¢ï¼ˆæ€»å…± 80 MiB ï¼‰ï¼Œåˆ™åˆ†é…å¤±è´¥ã€‚
æ‚¨ä¸èƒ½è¿‡é‡ä½¿ç”¨hugepages- *èµ„æºã€‚ è¿™ä¸memoryå’Œcpuèµ„æºä¸åŒã€‚
CPUå’Œå†…å­˜ç»Ÿç§°ä¸ºè®¡ç®—èµ„æºï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºèµ„æºã€‚è®¡ç®—èµ„æºçš„æ•°é‡æ˜¯å¯ä»¥è¢«è¯·æ±‚ã€åˆ†é…ã€æ¶ˆè€—å’Œå¯æµ‹é‡çš„ã€‚å®ƒä»¬ä¸ API èµ„æº ä¸åŒã€‚ API èµ„æºï¼ˆå¦‚ Pod å’Œ Serviceï¼‰æ˜¯å¯é€šè¿‡ Kubernetes API server è¯»å–å’Œä¿®æ”¹çš„å¯¹è±¡ã€‚
Pod å’Œ å®¹å™¨çš„èµ„æºè¯·æ±‚å’Œé™åˆ¶ Pod ä¸­çš„æ¯ä¸ªå®¹å™¨éƒ½å¯ä»¥æŒ‡å®šä»¥ä¸‹çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªå€¼ï¼š
 spec.containers[].resources.limits.cpu spec.containers[].resources.limits.memory spec.containers[].resources.requests.cpu spec.containers[].resources.requests.memory  å°½ç®¡åªèƒ½åœ¨ä¸ªåˆ«å®¹å™¨ä¸ŠæŒ‡å®šè¯·æ±‚å’Œé™åˆ¶ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°è®¡ç®—å‡º Pod èµ„æºè¯·æ±‚å’Œé™åˆ¶ã€‚ç‰¹å®šèµ„æºç±»å‹çš„Pod èµ„æºè¯·æ±‚/é™åˆ¶æ˜¯ Pod ä¸­æ¯ä¸ªå®¹å™¨çš„è¯¥ç±»å‹çš„èµ„æºè¯·æ±‚/é™åˆ¶çš„æ€»å’Œã€‚
CPU çš„å«ä¹‰ CPU èµ„æºçš„é™åˆ¶å’Œè¯·æ±‚ä»¥ cpu ä¸ºå•ä½ã€‚
Kubernetes ä¸­çš„ä¸€ä¸ª cpu ç­‰äºï¼š</description>
    </item>
    
    <item>
      <title>äº¤äº’å¼æ•™ç¨‹ - åˆ›å»ºé›†ç¾¤</title>
      <link>https://lijun.in/tutorials/kubernetes-basics/create-cluster/cluster-interactive/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/kubernetes-basics/create-cluster/cluster-interactive/</guid>
      <description>   è¦ä¸ç»ˆç«¯äº¤äº’ï¼Œè¯·ä½¿ç”¨æ¡Œé¢/å¹³æ¿    Continue to Module 2â€º -- ç»§ç»­é˜…è¯»ç¬¬äºŒå•å…ƒâ€º       </description>
    </item>
    
    <item>
      <title>äº¤äº’å¼æ•™ç¨‹ - å‘å¸ƒæ‚¨çš„åº”ç”¨ç¨‹åº</title>
      <link>https://lijun.in/tutorials/kubernetes-basics/expose/expose-interactive/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/kubernetes-basics/expose/expose-interactive/</guid>
      <description>   è¦ä¸ç»ˆç«¯äº¤äº’ï¼Œè¯·ä½¿ç”¨å°å¼æœº/å¹³æ¿ç”µè„‘    Continue to Module 5â€º       </description>
    </item>
    
    <item>
      <title>äº¤äº’å¼æ•™ç¨‹ - æ›´æ–°åº”ç”¨</title>
      <link>https://lijun.in/tutorials/kubernetes-basics/update/update-interactive/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/kubernetes-basics/update/update-interactive/</guid>
      <description>  è¦ä¸ç»ˆç«¯äº¤äº’ï¼Œè¯·ä½¿ç”¨æ¡Œé¢/å¹³æ¿ç”µè„‘ç‰ˆæœ¬    å›åˆ° Kubernetes çš„åŸºç¡€â€º       </description>
    </item>
    
    <item>
      <title>äº¤äº’å¼æ•™ç¨‹ - éƒ¨ç½²åº”ç”¨ç¨‹åº</title>
      <link>https://lijun.in/tutorials/kubernetes-basics/deploy-app/deploy-interactive/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/kubernetes-basics/deploy-app/deploy-interactive/</guid>
      <description>   To interact with the Terminal, please use the desktop/tablet version  -- è¦ä¸ç»ˆç«¯è¿›è¡Œäº¤äº’ï¼Œè¯·ä½¿ç”¨æ¡Œé¢/å¹³æ¿ç”µè„‘ç‰ˆæœ¬    Continue to Module 3â€º -- ç»§ç»­é˜…è¯»ç¬¬3å•å…ƒâ€º      </description>
    </item>
    
    <item>
      <title>äº¤äº’å¼æ•™ç¨‹-æ¢ç´¢æ‚¨çš„åº”ç”¨ç¨‹åº</title>
      <link>https://lijun.in/tutorials/kubernetes-basics/explore/explore-interactive/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/kubernetes-basics/explore/explore-interactive/</guid>
      <description>   To interact with the Terminal, please use the desktop/tablet version  -- è¦ä¸ç»ˆç«¯äº¤äº’ï¼Œè¯·ä½¿ç”¨æ¡Œé¢/å¹³æ¿ ç‰ˆæœ¬    Continue to Module 4â€º       </description>
    </item>
    
    <item>
      <title>äº¤äº’æ•™ç¨‹ - ç¼©æ”¾ä½ çš„åº”ç”¨ç¨‹åº</title>
      <link>https://lijun.in/tutorials/kubernetes-basics/scale/scale-interactive/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/kubernetes-basics/scale/scale-interactive/</guid>
      <description>  ä¸ç»ˆç«¯äº¤äº’ï¼Œè¯·ä½¿ç”¨æ¡Œé¢/å¹³æ¿ç”µè„‘ç‰ˆæœ¬    ç»§ç»­å‚é˜…ç¬¬6å•å…ƒâ€º        </description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Cilium ä½œä¸º NetworkPolicy</title>
      <link>https://lijun.in/tasks/administer-cluster/network-policy-provider/cilium-network-policy/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/network-policy-provider/cilium-network-policy/</guid>
      <description>æœ¬é¡µå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Cilium ä½œä¸º NetworkPolicyã€‚
å…³äº Cilium çš„èƒŒæ™¯çŸ¥è¯†ï¼Œè¯·é˜…è¯» Cilium ä»‹ç»ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åœ¨ Minikube ä¸Šéƒ¨ç½² Cilium ç”¨äºåŸºæœ¬æµ‹è¯• ä¸ºäº†è½»æ¾ç†Ÿæ‚‰ Cilium æ‚¨å¯ä»¥æ ¹æ®Cilium Kubernetes å…¥é—¨æŒ‡å—åœ¨ minikube ä¸­æ‰§è¡Œä¸€ä¸ª cilium çš„åŸºæœ¬çš„ DaemonSet å®‰è£…ã€‚
åœ¨ minikube ä¸­çš„å®‰è£…é…ç½®ä½¿ç”¨ä¸€ä¸ªç®€å•çš„â€œä¸€ä½“åŒ–â€ YAML æ–‡ä»¶ï¼ŒåŒ…æ‹¬äº† Cilium çš„ DaemonSet é…ç½®ï¼Œè¿æ¥ minikube çš„ etcd å®ä¾‹ï¼Œä»¥åŠé€‚å½“çš„ RBAC è®¾ç½®ã€‚
$ kubectl create -f https://raw.githubusercontent.com/cilium/cilium/master/examples/kubernetes/cilium.yaml configmap &amp;#34;cilium-config&amp;#34; created secret &amp;#34;cilium-etcd-secrets&amp;#34; created serviceaccount &amp;#34;cilium&amp;#34; created clusterrolebinding &amp;#34;cilium&amp;#34; created daemonset &amp;#34;cilium&amp;#34; created clusterrole &amp;#34;cilium&amp;#34; created å…¥é—¨æŒ‡å—å…¶ä½™çš„éƒ¨åˆ†ç”¨ä¸€ä¸ªç¤ºä¾‹åº”ç”¨è¯´æ˜äº†å¦‚ä½•å¼ºåˆ¶æ‰§è¡ŒL3/L4ï¼ˆå³ IP åœ°å€+ç«¯å£ï¼‰çš„å®‰å…¨ç­–ç•¥ä»¥åŠL7 ï¼ˆå¦‚ HTTPï¼‰çš„å®‰å…¨ç­–ç•¥ã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Kops å®‰è£… Kubernetes</title>
      <link>https://lijun.in/setup/production-environment/tools/kops/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/tools/kops/</guid>
      <description>æœ¬ç¯‡å¿«é€Ÿå…¥é—¨ä»‹ç»äº†å¦‚ä½•åœ¨ AWS ä¸Šè½»æ¾å®‰è£… Kubernetes é›†ç¾¤ã€‚ æœ¬ç¯‡ä½¿ç”¨äº†ä¸€ä¸ªåä¸º kops çš„å·¥å…·ã€‚
kops æ˜¯ä¸€ä¸ªè‡ªç”¨çš„ä¾›åº”ç³»ç»Ÿï¼š
 å…¨è‡ªåŠ¨å®‰è£…æµç¨‹ ä½¿ç”¨ DNS è¯†åˆ«é›†ç¾¤ è‡ªæˆ‘ä¿®å¤ï¼šä¸€åˆ‡éƒ½åœ¨è‡ªåŠ¨æ‰©å±•ç»„ä¸­è¿è¡Œ æ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼ˆå¦‚ Debianã€Ubuntu 16.04ã€CentOSã€RHELã€Amazon Linux å’Œ CoreOSï¼‰ - å‚è€ƒ images.md æ”¯æŒé«˜å¯ç”¨ - å‚è€ƒ high_availability.md å¯ä»¥ç›´æ¥æä¾›æˆ–è€…ç”Ÿæˆ terraform æ¸…å• - å‚è€ƒ terraform.md  å¦‚æœæ‚¨æœ‰ä¸åŒçš„è§‚ç‚¹ï¼Œæ‚¨å¯èƒ½æ›´å–œæ¬¢ä½¿ç”¨ kubeadm ä½œä¸ºæ„å»ºå·¥å…·æ¥æ„å»ºè‡ªå·±çš„é›†ç¾¤ã€‚kops å»ºç«‹åœ¨ kubeadm å·¥ä½œçš„åŸºç¡€ä¸Šã€‚
åˆ›å»ºé›†ç¾¤ (1/5) å®‰è£… kops å‰ææ¡ä»¶ æ‚¨å¿…é¡»å®‰è£… kubectl æ‰èƒ½ä½¿ kops å·¥ä½œã€‚
å®‰è£… ä»ä¸‹è½½é¡µé¢ä¸‹è½½ kopsï¼ˆä»æºä»£ç æ„å»ºä¹Ÿå¾ˆå®¹æ˜“ï¼‰ï¼š
åœ¨ macOS ä¸Šï¼š
curl -OL https://github.com/kubernetes/kops/releases/download/1.10.0/kops-darwin-amd64 chmod +x kops-darwin-amd64 mv kops-darwin-amd64 /usr/local/bin/kops # æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ Homebrew å®‰è£… kops brew update &amp;amp;&amp;amp; brew install kops åœ¨ Linux ä¸Šï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨æ‰©å±•è¿›è¡Œå¹¶è¡Œå¤„ç†</title>
      <link>https://lijun.in/tasks/job/parallel-processing-expansion/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/job/parallel-processing-expansion/</guid>
      <description>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†è¿è¡Œä»ä¸€ä¸ªå…¬å…±æ¨¡æ¿åˆ›å»ºçš„å¤šä¸ª Kubernetes Jobã€‚æ‚¨å¯èƒ½éœ€è¦å…ˆç†Ÿæ‚‰ Jobs çš„åŸºæœ¬æ¦‚å¿µã€éå¹¶è¡Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒã€‚
åŸºæœ¬æ¨¡æ¿æ‰©å±• é¦–å…ˆï¼Œå°†ä»¥ä¸‹ä½œä¸šæ¨¡æ¿ä¸‹è½½åˆ°åä¸º job-tmpl.yaml çš„æ–‡ä»¶ä¸­ã€‚
. codenew file=&amp;quot;application/job/job-tmpl.yaml&amp;rdquo; &amp;gt;}}
ä¸ pod æ¨¡æ¿ä¸åŒï¼Œæˆ‘ä»¬çš„ job æ¨¡æ¿ä¸æ˜¯ Kubernetes API ç±»å‹ã€‚å®ƒåªæ˜¯ Job å¯¹è±¡çš„ yaml è¡¨ç¤ºï¼Œ YAML æ–‡ä»¶æœ‰ä¸€äº›å ä½ç¬¦ï¼Œåœ¨ä½¿ç”¨å®ƒä¹‹å‰éœ€è¦å¡«å……è¿™äº›å ä½ç¬¦ã€‚$ITEM è¯­æ³•å¯¹ Kubernetes æ²¡æœ‰æ„ä¹‰ã€‚
åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®¹å™¨æ‰€åšçš„å”¯ä¸€å¤„ç†æ˜¯ echo ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶ç¡çœ ä¸€æ®µæ—¶é—´ã€‚ åœ¨çœŸå®çš„ç”¨ä¾‹ä¸­ï¼Œå¤„ç†å°†æ˜¯ä¸€äº›é‡è¦çš„è®¡ç®—ï¼Œä¾‹å¦‚æ¸²æŸ“ç”µå½±çš„ä¸€å¸§ï¼Œæˆ–è€…å¤„ç†æ•°æ®åº“ä¸­çš„è‹¥å¹²è¡Œã€‚è¿™æ—¶ï¼Œ$ITEM å‚æ•°å°†æŒ‡å®šå¸§å·æˆ–è¡ŒèŒƒå›´ã€‚
è¿™ä¸ª Job åŠå…¶ Pod æ¨¡æ¿æœ‰ä¸€ä¸ªæ ‡ç­¾: jobgroup=jobexampleã€‚è¿™ä¸ªæ ‡ç­¾åœ¨ç³»ç»Ÿä¸­æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ã€‚ è¿™ä¸ªæ ‡ç­¾ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°åŒæ—¶æ“ä½œç»„ä¸­çš„æ‰€æœ‰ä½œä¸šã€‚ æˆ‘ä»¬è¿˜å°†ç›¸åŒçš„æ ‡ç­¾æ”¾åœ¨ pod æ¨¡æ¿ä¸Šï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨ä¸€ä¸ªå‘½ä»¤æ£€æŸ¥è¿™äº› Job çš„æ‰€æœ‰ podã€‚ åˆ›å»ºä½œä¸šä¹‹åï¼Œç³»ç»Ÿå°†æ·»åŠ æ›´å¤šçš„æ ‡ç­¾æ¥åŒºåˆ†ä¸€ä¸ª Job çš„ pod å’Œå¦ä¸€ä¸ª Job çš„ podã€‚ æ³¨æ„ï¼Œæ ‡ç­¾é”® jobgroup å¯¹ Kubernetes å¹¶æ— ç‰¹æ®Šå«ä¹‰ã€‚æ‚¨å¯ä»¥é€‰æ‹©è‡ªå·±çš„æ ‡ç­¾æ–¹æ¡ˆã€‚
ä¸‹ä¸€æ­¥ï¼Œå°†æ¨¡æ¿å±•å¼€åˆ°å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶å¯¹åº”è¦å¤„ç†çš„é¡¹ã€‚
# ä¸‹è½½ job-templ.yaml curl -L -s -O https://k8s.io/examples/application/job/job-tmpl.yaml # åˆ›å»ºä¸´æ—¶ç›®å½•ï¼Œå¹¶ä¸”åœ¨ç›®å½•ä¸­åˆ›å»º job yaml æ–‡ä»¶ mkdir .</description>
    </item>
    
    <item>
      <title>åˆ›å»ºå¤§å‹é›†ç¾¤</title>
      <link>https://lijun.in/setup/best-practices/cluster-large/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/best-practices/cluster-large/</guid>
      <description>æ”¯æŒ åœ¨ . param &amp;ldquo;version&amp;rdquo; &amp;gt;}} ç‰ˆæœ¬ä¸­ï¼Œ Kubernetes æ”¯æŒçš„æœ€å¤§èŠ‚ç‚¹æ•°ä¸º 5000ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œæˆ‘ä»¬æ”¯æŒæ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶çš„é…ç½®ï¼š
 èŠ‚ç‚¹æ•°ä¸è¶…è¿‡ 5000 Pod æ€»æ•°ä¸è¶…è¿‡ 150000 å®¹å™¨æ€»æ•°ä¸è¶…è¿‡ 300000 æ¯ä¸ªèŠ‚ç‚¹çš„ pod æ•°é‡ä¸è¶…è¿‡ 100  . toc &amp;gt;}}
è®¾å®š é›†ç¾¤æ˜¯ä¸€ç»„è¿è¡Œç€ Kubernetes ä»£ç†çš„èŠ‚ç‚¹ï¼ˆç‰©ç†æœºæˆ–è€…è™šæ‹Ÿæœºï¼‰ï¼Œè¿™äº›èŠ‚ç‚¹ç”±ä¸»æ§èŠ‚ç‚¹ï¼ˆé›†ç¾¤çº§æ§åˆ¶é¢ï¼‰æ§åˆ¶ã€‚
é€šå¸¸ï¼Œé›†ç¾¤ä¸­çš„èŠ‚ç‚¹æ•°ç”±ç‰¹å®šäºäº‘å¹³å°çš„é…ç½®æ–‡ä»¶ config-default.shï¼ˆå¯ä»¥å‚è€ƒ [GCE å¹³å°çš„ config-default.sh](http://releases.k8s.io/. param &amp;ldquo;githubbranch&amp;rdquo; &amp;gt;}}/cluster/gce/config-default.sh)ï¼‰ä¸­çš„ NUM_NODES å‚æ•°æ§åˆ¶ã€‚
ä½†æ˜¯ï¼Œåœ¨è®¸å¤šäº‘ä¾›åº”å•†çš„å¹³å°ä¸Šï¼Œä»…å°†è¯¥å€¼æ›´æ”¹ä¸ºéå¸¸å¤§çš„å€¼ï¼Œå¯èƒ½ä¼šå¯¼è‡´å®‰è£…è„šæœ¬è¿è¡Œå¤±è´¥ã€‚ä¾‹å¦‚ï¼Œåœ¨ GCEï¼Œç”±äºé…é¢é—®é¢˜ï¼Œé›†ç¾¤ä¼šå¯åŠ¨å¤±è´¥ã€‚
å› æ­¤ï¼Œåœ¨åˆ›å»ºå¤§å‹ Kubernetes é›†ç¾¤æ—¶ï¼Œå¿…é¡»è€ƒè™‘ä»¥ä¸‹é—®é¢˜ã€‚
é…é¢é—®é¢˜ ä¸ºäº†é¿å…é‡åˆ°äº‘ä¾›åº”å•†é…é¢é—®é¢˜ï¼Œåœ¨åˆ›å»ºå…·æœ‰å¤§è§„æ¨¡èŠ‚ç‚¹çš„é›†ç¾¤æ—¶ï¼Œè¯·è€ƒè™‘ï¼š
 å¢åŠ è¯¸å¦‚ CPUï¼ŒIP ç­‰èµ„æºçš„é…é¢ã€‚  ä¾‹å¦‚ï¼Œåœ¨ GCEï¼Œæ‚¨éœ€è¦å¢åŠ ä»¥ä¸‹èµ„æºçš„é…é¢ï¼š  CPUs VM å®ä¾‹ æ°¸ä¹…ç£ç›˜æ€»é‡ ä½¿ç”¨ä¸­çš„ IP åœ°å€ é˜²ç«å¢™è§„åˆ™ è½¬å‘è§„åˆ™ è·¯ç”± ç›®æ ‡æ±      ç”±äºæŸäº›äº‘ä¾›åº”å•†ä¼šå¯¹è™šæ‹Ÿæœºçš„åˆ›å»ºè¿›è¡Œæµæ§ï¼Œå› æ­¤éœ€è¦å¯¹è®¾ç½®è„šæœ¬è¿›è¡Œæ›´æ”¹ï¼Œä½¿å…¶ä»¥è¾ƒå°çš„æ‰¹æ¬¡å¯åŠ¨æ–°çš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”ä¹‹é—´æœ‰ç­‰å¾…æ—¶é—´ã€‚  Etcd å­˜å‚¨ ä¸ºäº†æé«˜å¤§è§„æ¨¡é›†ç¾¤çš„æ€§èƒ½ï¼Œæˆ‘ä»¬å°†äº‹ä»¶å­˜å‚¨åœ¨ä¸“ç”¨çš„ etcd å®ä¾‹ä¸­ã€‚</description>
    </item>
    
    <item>
      <title>å·å¿«ç…§</title>
      <link>https://lijun.in/concepts/storage/volume-snapshots/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/storage/volume-snapshots/</guid>
      <description>feature-state for_k8s_version=&amp;quot;1.17&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
åœ¨ Kubernetes ä¸­ï¼Œå·å¿«ç…§æ˜¯ä¸€ä¸ªå­˜å‚¨ç³»ç»Ÿä¸Šå·çš„å¿«ç…§ï¼Œæœ¬æ–‡å‡è®¾ä½ å·²ç»ç†Ÿæ‚‰äº† Kubernetes çš„ æŒä¹…å·ã€‚
ä»‹ç» ä¸ PersistentVolume å’Œ PersistentVolumeClaim ä¸¤ä¸ª API èµ„æºç”¨äºç»™ç”¨æˆ·å’Œç®¡ç†å‘˜æä¾›å·ç±»ä¼¼ï¼ŒVolumeSnapshotContent å’Œ VolumeSnapshot ä¸¤ä¸ª API èµ„æºç”¨äºç»™ç”¨æˆ·å’Œç®¡ç†å‘˜åˆ›å»ºå·å¿«ç…§ã€‚
VolumeSnapshotContent æ˜¯ä¸€ç§å¿«ç…§ï¼Œä»ç®¡ç†å‘˜å·²æä¾›çš„é›†ç¾¤ä¸­çš„å·è·å–ã€‚å°±åƒæŒä¹…å·æ˜¯é›†ç¾¤çš„èµ„æºä¸€æ ·ï¼Œå®ƒä¹Ÿæ˜¯é›†ç¾¤ä¸­çš„èµ„æºã€‚
VolumeSnapshot æ˜¯ç”¨æˆ·å¯¹äºå·çš„å¿«ç…§çš„è¯·æ±‚ã€‚å®ƒç±»ä¼¼äºæŒä¹…å·å£°æ˜ã€‚
VolumeSnapshotClass å…è®¸æŒ‡å®šå±äº VolumeSnapshot çš„ä¸åŒå±æ€§ã€‚åœ¨ä»å­˜å‚¨ç³»ç»Ÿçš„ç›¸åŒå·ä¸Šè·å–çš„å¿«ç…§ä¹‹é—´ï¼Œè¿™äº›å±æ€§å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œå› æ­¤ä¸èƒ½é€šè¿‡ä½¿ç”¨ä¸ PersistentVolumeClaim ç›¸åŒçš„ StorageClass æ¥è¡¨ç¤ºã€‚
å½“ä½¿ç”¨è¯¥åŠŸèƒ½æ—¶ï¼Œç”¨æˆ·éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š
 API å¯¹è±¡ VolumeSnapshotï¼ŒVolumeSnapshotContent å’Œ VolumeSnapshotClass æ˜¯ glossary_tooltip term_id=&amp;quot;CustomResourceDefinition&amp;rdquo; text=&amp;quot;CRDs&amp;rdquo; &amp;gt;}}ï¼Œä¸æ˜¯æ ¸å¿ƒ API çš„éƒ¨åˆ†ã€‚ VolumeSnapshot æ”¯æŒä»…å¯ç”¨äº CSI é©±åŠ¨ã€‚ ä½œä¸º beta ç‰ˆæœ¬ VolumeSnapshot éƒ¨ç½²è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ï¼ŒKubernetes å›¢é˜Ÿæä¾›äº†ä¸€ä¸ªéƒ¨ç½²äºæ§åˆ¶å¹³é¢çš„å¿«ç…§æ§åˆ¶å™¨ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ªå«åš csi-snapshotter çš„ sidecar å¸®åŠ©å®¹å™¨ï¼Œå®ƒå’Œ CSI é©±åŠ¨ç¨‹åºéƒ¨ç½²åœ¨ä¸€èµ·ã€‚å¿«ç…§æ§åˆ¶å™¨ç›‘è§† VolumeSnapshot å’Œ VolumeSnapshotContent å¯¹è±¡ï¼Œå¹¶ä¸”è´Ÿè´£åŠ¨æ€çš„åˆ›å»ºå’Œåˆ é™¤ VolumeSnapshotContent å¯¹è±¡ã€‚sidecar csi-snapshotter ç›‘è§† VolumeSnapshotContent å¯¹è±¡ï¼Œå¹¶ä¸”è§¦å‘é’ˆå¯¹ CSI ç«¯ç‚¹çš„ CreateSnapshot å’Œ DeleteSnapshot çš„æ“ä½œã€‚ CSI é©±åŠ¨å¯èƒ½å®ç°ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰å®ç°å·å¿«ç…§åŠŸèƒ½ã€‚CSI é©±åŠ¨å¯èƒ½ä¼šä½¿ç”¨ csi-snapshotter æ¥æä¾›å¯¹å·å¿«ç…§çš„æ”¯æŒã€‚è¯¦è§ CSI é©±åŠ¨ç¨‹åºæ–‡æ¡£ Kubernetes è´Ÿè´£ CRDs å’Œå¿«ç…§æ§åˆ¶å™¨çš„å®‰è£…ã€‚  å·å¿«ç…§å’Œå·å¿«ç…§å†…å®¹çš„ç”Ÿå‘½å‘¨æœŸ VolumeSnapshotContents æ˜¯é›†ç¾¤ä¸­çš„èµ„æºã€‚VolumeSnapshots æ˜¯å¯¹äºè¿™äº›èµ„æºçš„è¯·æ±‚ã€‚VolumeSnapshotContents å’Œ VolumeSnapshots ä¹‹é—´çš„äº¤äº’éµå¾ªä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸï¼š</description>
    </item>
    
    <item>
      <title>å®‰è£… Minikube</title>
      <link>https://lijun.in/tasks/tools/install-minikube/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/tools/install-minikube/</guid>
      <description>æœ¬é¡µé¢è®²è¿°å¦‚ä½•å®‰è£… Minikubeï¼Œè¯¥å·¥å…·ç”¨äºåœ¨æ‚¨ç”µè„‘ä¸­çš„è™šæ‹Ÿæœºä¸Šè¿è¡Œä¸€ä¸ªå•èŠ‚ç‚¹çš„ Kubernetes é›†ç¾¤ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . tabs name=&amp;quot;minikube_before_you_begin&amp;rdquo; &amp;gt;}} . tab name=&amp;quot;Linux&amp;rdquo; %}}
è‹¥è¦æ£€æŸ¥æ‚¨çš„ Linux æ˜¯å¦æ”¯æŒè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œè¯·è¿è¡Œä¸‹é¢çš„å‘½ä»¤å¹¶éªŒè¯è¾“å‡ºç»“æœæ˜¯å¦ä¸ä¸ºç©ºï¼š
grep -E --color &#39;vmx|svm&#39; /proc/cpuinfo . /tab %}}
. tab name=&amp;quot;macOS&amp;rdquo; %}}
è‹¥è¦æ£€æŸ¥æ‚¨çš„ macOS æ˜¯å¦æ”¯æŒè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œè¯·è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š
sysctl -a | grep -E --color &#39;machdep.cpu.features|VMX&#39; å¦‚æœä½ åœ¨è¾“å‡ºç»“æœä¸­çœ‹åˆ°äº† VMX ï¼ˆåº”è¯¥ä¼šé«˜äº®æ˜¾ç¤ºï¼‰çš„å­—çœ¼ï¼Œè¯´æ˜æ‚¨çš„ç”µè„‘å·²å¯ç”¨ VT-x ç‰¹æ€§ã€‚
. /tab %}}
. tab name=&amp;quot;Windows&amp;rdquo; %}}
è‹¥è¦æ£€æŸ¥æ‚¨çš„ Windows8 åŠä»¥ä¸Šçš„ç³»ç»Ÿæ˜¯å¦æ”¯æŒè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œè¯·ç»ˆç«¯æˆ–è€… cmd ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
systeminfo å¦‚æœæ‚¨çœ‹åˆ°ä¸‹é¢çš„è¾“å‡ºï¼Œåˆ™è¡¨ç¤ºè¯¥ Windows æ”¯æŒè™šæ‹ŸåŒ–æŠ€æœ¯ã€‚
Hyper-V Requirements: VM Monitor Mode Extensions: Yes Virtualization Enabled In Firmware: Yes Second Level Address Translation: Yes Data Execution Prevention Available: Yes å¦‚æœæ‚¨çœ‹åˆ°ä¸‹é¢çš„è¾“å‡ºï¼Œåˆ™è¡¨ç¤ºæ‚¨çš„æ“ä½œç³»ç»Ÿå·²ç»å®‰è£…äº† Hypervisorï¼Œæ‚¨å¯ä»¥è·³è¿‡å®‰è£… Hypervisor çš„æ­¥éª¤ã€‚</description>
    </item>
    
    <item>
      <title>å®¹å™¨ç¯å¢ƒ</title>
      <link>https://lijun.in/concepts/containers/container-environment/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/containers/container-environment/</guid>
      <description>æœ¬é¡µæè¿°äº†åœ¨å®¹å™¨ç¯å¢ƒé‡Œå®¹å™¨å¯ç”¨çš„èµ„æºã€‚
å®¹å™¨ç¯å¢ƒ Kubernetes çš„å®¹å™¨ç¯å¢ƒç»™å®¹å™¨æä¾›äº†å‡ ä¸ªé‡è¦çš„èµ„æºï¼š
 æ–‡ä»¶ç³»ç»Ÿï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªé•œåƒ å’Œä¸€ä¸ªæˆ–å¤šä¸ªçš„å·ã€‚ å®¹å™¨è‡ªèº«çš„ä¿¡æ¯ã€‚ é›†ç¾¤ä¸­å…¶ä»–å¯¹è±¡çš„ä¿¡æ¯ã€‚  å®¹å™¨ä¿¡æ¯ å®¹å™¨çš„ hostname æ˜¯å®ƒæ‰€è¿è¡Œåœ¨çš„ pod çš„åç§°ã€‚å®ƒå¯ä»¥é€šè¿‡ hostname å‘½ä»¤æˆ–è€…è°ƒç”¨ libc ä¸­çš„ gethostname å‡½æ•°æ¥è·å–ã€‚
Pod åç§°å’Œå‘½åç©ºé—´å¯ä»¥é€šè¿‡ downward API ä½¿ç”¨ç¯å¢ƒå˜é‡ã€‚
Pod å®šä¹‰ä¸­çš„ç”¨æˆ·æ‰€å®šä¹‰çš„ç¯å¢ƒå˜é‡ä¹Ÿå¯åœ¨å®¹å™¨ä¸­ä½¿ç”¨ï¼Œå°±åƒåœ¨ Docker é•œåƒä¸­é™æ€æŒ‡å®šçš„ä»»ä½•ç¯å¢ƒå˜é‡ä¸€æ ·ã€‚
é›†ç¾¤ä¿¡æ¯ åˆ›å»ºå®¹å™¨æ—¶æ­£åœ¨è¿è¡Œçš„æ‰€æœ‰æœåŠ¡çš„åˆ—è¡¨éƒ½å¯ç”¨ä½œè¯¥å®¹å™¨çš„ç¯å¢ƒå˜é‡ã€‚è¿™äº›ç¯å¢ƒå˜é‡ä¸ Docker é“¾æ¥çš„è¯­æ³•åŒ¹é…ã€‚
å¯¹äºåä¸º foo çš„æœåŠ¡ï¼Œå½“æ˜ å°„åˆ°åä¸º bar çš„å®¹å™¨æ—¶ï¼Œä»¥ä¸‹å˜é‡æ˜¯è¢«å®šä¹‰äº†çš„ï¼š
FOO_SERVICE_HOST=&amp;lt;the host the service is running on&amp;gt; FOO_SERVICE_PORT=&amp;lt;the port the service is running on&amp;gt; Service å…·æœ‰ä¸“ç”¨çš„ IP åœ°å€ã€‚å¦‚æœå¯ç”¨äº† [DNSæ’ä»¶](http://releases.k8s.io/&amp;lt; param &amp;ldquo;githubbranch&amp;rdquo; &amp;gt;}}/cluster/addons/dns/)ï¼Œå°±å¯ä»¥åœ¨å®¹å™¨ä¸­é€šè¿‡ DNS æ¥è®¿é—®ã€‚
  å­¦ä¹ æ›´å¤šæœ‰å…³å®¹å™¨ç”Ÿå‘½å‘¨æœŸé’©å­çš„çŸ¥è¯†ã€‚ åŠ¨æ‰‹è·å¾—ç»éªŒå°†å¤„ç†ç¨‹åºé™„åŠ åˆ°å®¹å™¨ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚  </description>
    </item>
    
    <item>
      <title>å®¹å™¨è¿è¡Œæ—¶ç±»(Runtime Class)</title>
      <link>https://lijun.in/concepts/containers/runtime-class/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/containers/runtime-class/</guid>
      <description>for_k8s_version=&amp;quot;v1.14&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
æœ¬é¡µé¢æè¿°äº† RuntimeClass èµ„æºå’Œè¿è¡Œæ—¶çš„é€‰æ‹©æœºåˆ¶ã€‚
RuntimeClass æ˜¯ä¸€ä¸ªç”¨äºé€‰æ‹©å®¹å™¨è¿è¡Œæ—¶é…ç½®çš„ç‰¹æ€§ï¼Œå®¹å™¨è¿è¡Œæ—¶é…ç½®ç”¨äºè¿è¡Œ Pod ä¸­çš„å®¹å™¨ã€‚
åŠ¨æœº æ‚¨å¯ä»¥åœ¨ä¸åŒçš„ pod ä¹‹é—´è®¾ç½®ä¸åŒçš„ RuntimeClassï¼Œä»¥æä¾›æ€§èƒ½ä¸å®‰å…¨æ€§ä¹‹é—´çš„å¹³è¡¡ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„éƒ¨åˆ†å·¥ä½œè´Ÿè½½éœ€è¦é«˜çº§åˆ«çš„ä¿¡æ¯å®‰å…¨ä¿è¯ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥é€‰æ‹©æ€§åœ°è°ƒåº¦è¿™äº› podï¼Œ ä½¿å®ƒä»¬åœ¨ä½¿ç”¨ç¡¬ä»¶è™šæ‹ŸåŒ–çš„å®¹å™¨è¿è¡Œæ—¶ä¸­è¿è¡Œã€‚ ç„¶åï¼Œæ‚¨å°†ä»å¯é€‰è¿è¡Œæ—¶çš„é¢å¤–éš”ç¦»ä¸­è·ç›Šï¼Œä»£ä»·æ˜¯ä¸€äº›é¢å¤–çš„å¼€é”€ã€‚
æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ RuntimeClass è¿è¡Œå…·æœ‰ç›¸åŒå®¹å™¨è¿è¡Œæ—¶ä½†å…·æœ‰ä¸åŒè®¾ç½®çš„podã€‚
è®¾ç½® ç¡®ä¿ RuntimeClass ç‰¹æ€§å¼€å…³å¤„äºå¼€å¯çŠ¶æ€ï¼ˆé»˜è®¤ä¸ºå¼€å¯çŠ¶æ€ï¼‰ã€‚ å…³äºç‰¹æ€§å¼€å…³çš„è¯¦ç»†ä»‹ç»ï¼Œè¯·æŸ¥é˜… Feature Gatesã€‚ RuntimeClass ç‰¹æ€§å¼€å…³å¿…é¡»åœ¨ apiserver å’Œ kubelet åŒæ—¶å¼€å¯ã€‚
 åœ¨èŠ‚ç‚¹ä¸Šé…ç½® CRI çš„å®ç°ï¼ˆå–å†³äºæ‰€é€‰ç”¨çš„è¿è¡Œæ—¶ï¼‰ åˆ›å»ºç›¸åº”çš„ RuntimeClass èµ„æº  1. åœ¨èŠ‚ç‚¹ä¸Šé…ç½® CRI å®ç° RuntimeClass çš„é…ç½®ä¾èµ–äº è¿è¡Œæ—¶æ¥å£ï¼ˆCRIï¼‰çš„å®ç°ã€‚ æ ¹æ®ä½ ä½¿ç”¨çš„ CRI å®ç°ï¼ŒæŸ¥é˜…ç›¸å…³çš„æ–‡æ¡£ï¼ˆä¸‹æ–¹ï¼‰æ¥äº†è§£å¦‚ä½•é…ç½®ã€‚
RuntimeClass å‡è®¾é›†ç¾¤ä¸­çš„èŠ‚ç‚¹é…ç½®æ˜¯åŒæ„çš„ï¼ˆæ¢è¨€ä¹‹ï¼Œæ‰€æœ‰çš„èŠ‚ç‚¹åœ¨å®¹å™¨è¿è¡Œæ—¶æ–¹é¢çš„é…ç½®æ˜¯ç›¸åŒçš„ï¼‰ã€‚ å¦‚æœéœ€è¦æ”¯æŒå¼‚æ„èŠ‚ç‚¹ï¼Œé…ç½®æ–¹æ³•è¯·å‚é˜…ä¸‹é¢çš„ è°ƒåº¦ã€‚
æ‰€æœ‰è¿™äº›é…ç½®éƒ½å…·æœ‰ç›¸åº”çš„ handler åï¼Œå¹¶è¢« RuntimeClass å¼•ç”¨ã€‚ handler å¿…é¡»ç¬¦åˆ DNS-1123 å‘½åè§„èŒƒï¼ˆå­—æ¯ã€æ•°å­—ã€æˆ– -ï¼‰ã€‚
2. åˆ›å»ºç›¸åº”çš„ RuntimeClass èµ„æº åœ¨ä¸Šé¢æ­¥éª¤ 1 ä¸­ï¼Œæ¯ä¸ªé…ç½®éƒ½éœ€è¦æœ‰ä¸€ä¸ªç”¨äºæ ‡è¯†é…ç½®çš„ handlerã€‚ é’ˆå¯¹æ¯ä¸ª handler éœ€è¦åˆ›å»ºä¸€ä¸ª RuntimeClass å¯¹è±¡ã€‚</description>
    </item>
    
    <item>
      <title>å¯¹ kubeadm è¿›è¡Œæ•…éšœæ’æŸ¥</title>
      <link>https://lijun.in/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/tools/kubeadm/troubleshooting-kubeadm/</guid>
      <description>ä¸ä»»ä½•ç¨‹åºä¸€æ ·ï¼Œæ‚¨å¯èƒ½ä¼šåœ¨å®‰è£…æˆ–è€…è¿è¡Œ kubeadm æ—¶é‡åˆ°é”™è¯¯ã€‚ æœ¬æ–‡åˆ—ä¸¾äº†ä¸€äº›å¸¸è§çš„æ•…éšœåœºæ™¯ï¼Œå¹¶æä¾›å¯å¸®åŠ©æ‚¨ç†è§£å’Œè§£å†³è¿™äº›é—®é¢˜çš„æ­¥éª¤ã€‚
å¦‚æœæ‚¨çš„é—®é¢˜æœªåœ¨ä¸‹é¢åˆ—å‡ºï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
  å¦‚æœæ‚¨è®¤ä¸ºé—®é¢˜æ˜¯ kubeadm çš„é”™è¯¯ï¼š
 è½¬åˆ° github.com/kubernetes/kubeadm å¹¶æœç´¢å­˜åœ¨çš„é—®é¢˜ã€‚ å¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œè¯· æ‰“å¼€ å¹¶éµå¾ªé—®é¢˜æ¨¡æ¿ã€‚    å¦‚æœæ‚¨å¯¹ kubeadm çš„å·¥ä½œæ–¹å¼æœ‰ç–‘é—®ï¼Œå¯ä»¥åœ¨ Slack ä¸Šçš„ #kubeadm é¢‘é“æé—®ï¼Œ æˆ–è€…åœ¨ StackOverflow ä¸Šæé—®ã€‚ è¯·åŠ å…¥ç›¸å…³æ ‡ç­¾ï¼Œä¾‹å¦‚ #kubernetes å’Œ #kubeadmï¼Œè¿™æ ·å…¶ä»–äººå¯ä»¥å¸®åŠ©æ‚¨ã€‚
  åœ¨å®‰è£…è¿‡ç¨‹ä¸­æ²¡æœ‰æ‰¾åˆ° ebtables æˆ–è€…å…¶ä»–ç±»ä¼¼çš„å¯æ‰§è¡Œæ–‡ä»¶ å¦‚æœåœ¨è¿è¡Œ kubeadm init å‘½ä»¤æ—¶ï¼Œé‡åˆ°ä»¥ä¸‹çš„è­¦å‘Š
[preflight] WARNING: ebtables not found in system path [preflight] WARNING: ethtool not found in system path é‚£ä¹ˆæˆ–è®¸åœ¨æ‚¨çš„èŠ‚ç‚¹ä¸Šç¼ºå¤± ebtablesã€ethtool æˆ–è€…ç±»ä¼¼çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…å®ƒä»¬ï¼š
 å¯¹äº Ubuntu/Debian ç”¨æˆ·ï¼Œè¿è¡Œ apt install ebtables ethtool å‘½ä»¤ã€‚ å¯¹äº CentOS/Fedora ç”¨æˆ·ï¼Œè¿è¡Œ yum install ebtables ethtool å‘½ä»¤ã€‚  åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œkubeadm ä¸€ç›´ç­‰å¾…æ§åˆ¶å¹³é¢å°±ç»ª å¦‚æœæ‚¨æ³¨æ„åˆ° kubeadm init åœ¨æ‰“å°ä»¥ä¸‹è¡ŒåæŒ‚èµ·ï¼š</description>
    </item>
    
    <item>
      <title>å¯¹è±¡åç§°å’ŒIDs</title>
      <link>https://lijun.in/concepts/overview/working-with-objects/names/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/overview/working-with-objects/names/</guid>
      <description>é›†ç¾¤ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½ä¸€ä¸ªåç§° æ¥æ ‡è¯†åœ¨åŒç±»èµ„æºä¸­çš„å”¯ä¸€æ€§ã€‚
æ¯ä¸ª Kubernetes å¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªUID æ¥æ ‡è¯†åœ¨æ•´ä¸ªé›†ç¾¤ä¸­çš„å”¯ä¸€æ€§ã€‚
æ¯”å¦‚ï¼Œåœ¨åŒä¸€ä¸ªnamespaceä¸­åªèƒ½å‘½åä¸€ä¸ªåä¸º myapp-1234 çš„ Pod, ä½†æ˜¯å¯ä»¥å‘½åä¸€ä¸ª Pod å’Œä¸€ä¸ª Deployment åŒä¸º myapp-1234.
å¯¹äºéå”¯ä¸€çš„ç”¨æˆ·æä¾›çš„å±æ€§ï¼ŒKubernetes æä¾›äº†æ ‡ç­¾å’Œæ³¨é‡Šã€‚
æœ‰å…³åç§°å’Œ UID çš„ç²¾ç¡®è¯­æ³•è§„åˆ™ï¼Œè¯·å‚è§æ ‡è¯†ç¬¦è®¾è®¡æ–‡æ¡£ã€‚
åç§° term_id=&amp;quot;name&amp;rdquo; length=&amp;quot;all&amp;rdquo; &amp;gt;}}
ä»¥ä¸‹æ˜¯æ¯”è¾ƒå¸¸è§çš„ä¸‰ç§èµ„æºå‘½åçº¦æŸã€‚
DNS å­åŸŸå æŸäº›èµ„æºç±»å‹éœ€è¦ä¸€ä¸ª name æ¥ä½œä¸ºä¸€ä¸ª DNS å­åŸŸåï¼Œè§å®šä¹‰ RFC 1123ã€‚ä¹Ÿå°±æ˜¯å‘½åå¿…é¡»æ»¡è¶³å¦‚ä¸‹è§„åˆ™ï¼š
 ä¸èƒ½è¶…è¿‡253ä¸ªå­—ç¬¦ åªèƒ½åŒ…å«å­—æ¯æ•°å­—ï¼Œä»¥åŠ&amp;rsquo;-&amp;rsquo; å’Œ &amp;lsquo;.&amp;rsquo; é¡»ä»¥å­—æ¯æ•°å­—å¼€å¤´ é¡»ä»¥å­—æ¯æ•°å­—ç»“å°¾  DNS æ ‡ç­¾åç§° æŸäº›èµ„æºç±»å‹éœ€è¦å…¶åç§°éµå¾ª DNS æ ‡ç­¾çš„æ ‡å‡†ï¼Œè§RFC 1123ã€‚ä¹Ÿå°±æ˜¯å‘½åå¿…é¡»æ»¡è¶³å¦‚ä¸‹è§„åˆ™ï¼š
 æœ€å¤š63ä¸ªå­—ç¬¦ åªèƒ½åŒ…å«å­—æ¯æ•°å­—ï¼Œä»¥åŠ&amp;rsquo;-&amp;rsquo; é¡»ä»¥å­—æ¯æ•°å­—å¼€å¤´ é¡»ä»¥å­—æ¯æ•°å­—ç»“å°¾  Path éƒ¨åˆ†åç§° ä¸€äº›ç”¨ä¸ Path éƒ¨åˆ†çš„èµ„æºç±»å‹è¦æ±‚åç§°èƒ½è¢«å®‰å…¨çš„ encodeã€‚æ¢å¥è¯è¯´ï¼Œå…¶åç§°ä¸èƒ½å«æœ‰è¿™äº›å­—ç¬¦ &amp;ldquo;.&amp;quot;ã€&amp;rdquo;..&amp;quot;ã€&amp;quot;/&amp;ldquo;æˆ–&amp;rdquo;%&amp;quot;ã€‚
ä¸‹é¢æ˜¯ä¸€ä¸ªåä¸ºnginx-demoçš„ Pod çš„é…ç½®æ¸…å•ï¼š
apiVersion: v1 kind: Pod metadata: name: nginx-demo spec: containers: - name: nginx image: nginx:1.</description>
    </item>
    
    <item>
      <title>ç¤ºä¾‹ï¼šä½¿ç”¨ Persistent Volumes éƒ¨ç½² WordPress å’Œ MySQL</title>
      <link>https://lijun.in/tutorials/stateful-application/mysql-wordpress-persistent-volume/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/stateful-application/mysql-wordpress-persistent-volume/</guid>
      <description>æœ¬ç¤ºä¾‹æè¿°äº†å¦‚ä½•é€šè¿‡ Minikube åœ¨ Kubernetes ä¸Šå®‰è£… WordPress å’Œ MySQLã€‚è¿™ä¸¤ä¸ªåº”ç”¨éƒ½ä½¿ç”¨ PersistentVolumes å’Œ PersistentVolumeClaims ä¿å­˜æ•°æ®ã€‚
PersistentVolumeï¼ˆPVï¼‰æ˜¯ä¸€å—é›†ç¾¤é‡Œç”±ç®¡ç†å‘˜æ‰‹åŠ¨æä¾›ï¼Œæˆ– kubernetes é€šè¿‡ StorageClass åŠ¨æ€åˆ›å»ºçš„å­˜å‚¨ã€‚ PersistentVolumeClaimï¼ˆPVCï¼‰æ˜¯ä¸€ä¸ªæ»¡è¶³å¯¹ PV å­˜å‚¨éœ€è¦çš„è¯·æ±‚ã€‚PersistentVolumes å’Œ PersistentVolumeClaims æ˜¯ç‹¬ç«‹äº Pod ç”Ÿå‘½å‘¨æœŸè€Œåœ¨ Pod é‡å¯ï¼Œé‡æ–°è°ƒåº¦ç”šè‡³åˆ é™¤è¿‡ç¨‹ä¸­ä¿å­˜æ•°æ®ã€‚
. warning &amp;gt;}}
deployment åœ¨ç”Ÿäº§åœºæ™¯ä¸­å¹¶ä¸é€‚åˆï¼Œå®ƒä½¿ç”¨å•å®ä¾‹ WordPress å’Œ MySQL Podsã€‚è€ƒè™‘ä½¿ç”¨ WordPress Helm Chart åœ¨ç”Ÿäº§åœºæ™¯ä¸­éƒ¨ç½² WordPressã€‚ . /warning &amp;gt;}}
. note &amp;gt;}}
æœ¬æ•™ç¨‹ä¸­æä¾›çš„æ–‡ä»¶ä½¿ç”¨ GA Deployment APIï¼Œå¹¶ä¸”ç‰¹å®šäº kubernetes 1.9 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚å¦‚æœæ‚¨å¸Œæœ›å°†æœ¬æ•™ç¨‹ä¸ Kubernetes çš„æ—©æœŸç‰ˆæœ¬ä¸€èµ·ä½¿ç”¨ï¼Œè¯·ç›¸åº”åœ°æ›´æ–° API ç‰ˆæœ¬ï¼Œæˆ–å‚è€ƒæœ¬æ•™ç¨‹çš„æ—©æœŸç‰ˆæœ¬ã€‚ . /note &amp;gt;}}
. heading &amp;ldquo;objectives&amp;rdquo; %}}  åˆ›å»º PersistentVolumeClaims å’Œ PersistentVolumes åˆ›å»º kustomization.</description>
    </item>
    
    <item>
      <title>ç¤ºä¾‹ï¼šä½¿ç”¨ Redis éƒ¨ç½² PHP ç•™è¨€æ¿åº”ç”¨ç¨‹åº</title>
      <link>https://lijun.in/tutorials/stateless-application/guestbook/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/stateless-application/guestbook/</guid>
      <description>æœ¬æ•™ç¨‹å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ Kubernetes å’Œ Docker æ„å»ºå’Œéƒ¨ç½² ä¸€ä¸ªç®€å•çš„å¤šå±‚ web åº”ç”¨ç¨‹åºã€‚æœ¬ä¾‹ç”±ä»¥ä¸‹ç»„ä»¶ç»„æˆï¼š
 å•å®ä¾‹ Redis ä¸»èŠ‚ç‚¹ä¿å­˜ç•™è¨€æ¿æ¡ç›® å¤šä¸ªä» Redis èŠ‚ç‚¹ç”¨æ¥è¯»å–æ•°æ® å¤šä¸ª web å‰ç«¯å®ä¾‹  . heading &amp;ldquo;objectives&amp;rdquo; %}}  å¯åŠ¨ Redis ä¸»èŠ‚ç‚¹ã€‚ å¯åŠ¨ Redis ä»èŠ‚ç‚¹ã€‚ å¯åŠ¨ç•™è¨€æ¿å‰ç«¯ã€‚ å…¬å¼€å¹¶æŸ¥çœ‹å‰ç«¯æœåŠ¡ã€‚ æ¸…ç†ã€‚  . heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}}
. version-check &amp;gt;}}
å¯åŠ¨ Redis ä¸»èŠ‚ç‚¹ ç•™è¨€æ¿åº”ç”¨ç¨‹åºä½¿ç”¨ Redis å­˜å‚¨æ•°æ®ã€‚å®ƒå°†æ•°æ®å†™å…¥ä¸€ä¸ª Redis ä¸»å®ä¾‹ï¼Œå¹¶ä»å¤šä¸ª Redis è¯»å–æ•°æ®ã€‚
åˆ›å»º Redis ä¸»èŠ‚ç‚¹çš„ Deployment ä¸‹é¢åŒ…å«çš„æ¸…å•æ–‡ä»¶æŒ‡å®šäº†ä¸€ä¸ª Deployment æ§åˆ¶å™¨ï¼Œè¯¥æ§åˆ¶å™¨è¿è¡Œä¸€ä¸ª Redis ä¸»èŠ‚ç‚¹ Pod å‰¯æœ¬ã€‚
. codenew file=&amp;quot;application/guestbook/redis-master-deployment.yaml&amp;rdquo; &amp;gt;}}</description>
    </item>
    
    <item>
      <title>è®¾å¤‡æ’ä»¶</title>
      <link>https://lijun.in/concepts/extend-kubernetes/compute-storage-net/device-plugins/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/extend-kubernetes/compute-storage-net/device-plugins/</guid>
      <description>for_k8s_version=&amp;quot;v1.10&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
Kubernetes æä¾›äº†ä¸€ä¸ªè®¾å¤‡æ’ä»¶æ¡†æ¶ï¼Œæ‚¨å¯ä»¥ç”¨æ¥å°†ç³»ç»Ÿç¡¬ä»¶èµ„æºå‘å¸ƒåˆ° term_id=&amp;quot;kubelet&amp;rdquo; &amp;gt;}}ã€‚
ä¾›åº”å•†å¯ä»¥å®ç°è®¾å¤‡æ’ä»¶ï¼Œç”±æ‚¨æ‰‹åŠ¨éƒ¨ç½²æˆ–ä½œä¸º term_id=&amp;quot;daemonset&amp;rdquo; &amp;gt;}} æ¥éƒ¨ç½²ï¼Œè€Œä¸å¿…å®šåˆ¶ Kubernetes æœ¬èº«çš„ä»£ç ã€‚ç›®æ ‡è®¾å¤‡åŒ…æ‹¬ GPUã€é«˜æ€§èƒ½ NICã€FPGAã€InfiniBand é€‚é…å™¨ä»¥åŠå…¶ä»–ç±»ä¼¼çš„ã€å¯èƒ½éœ€è¦ç‰¹å®šäºä¾›åº”å•†çš„åˆå§‹åŒ–å’Œè®¾ç½®çš„è®¡ç®—èµ„æºã€‚
æ³¨å†Œè®¾å¤‡æ’ä»¶ kubelet è¾“å‡ºäº†ä¸€ä¸ª Registration çš„ gRPC æœåŠ¡ï¼š
service Registration { rpc Register(RegisterRequest) returns (Empty) {} } è®¾å¤‡æ’ä»¶å¯ä»¥é€šè¿‡æ­¤ gRPC æœåŠ¡åœ¨ kubelet è¿›è¡Œæ³¨å†Œã€‚åœ¨æ³¨å†ŒæœŸé—´ï¼Œè®¾å¤‡æ’ä»¶éœ€è¦å‘é€ä¸‹é¢å‡ æ ·å†…å®¹ï¼š
 è®¾å¤‡æ’ä»¶çš„ Unix å¥—æ¥å­—ã€‚ è®¾å¤‡æ’ä»¶çš„ API ç‰ˆæœ¬ã€‚ ResourceName æ˜¯éœ€è¦å…¬å¸ƒçš„ã€‚è¿™é‡Œ ResourceName éœ€è¦éµå¾ªæ‰©å±•èµ„æºå‘½åæ–¹æ¡ˆï¼Œç±»ä¼¼äº vendor-domain/resourcetypeã€‚ï¼ˆæ¯”å¦‚ NVIDIA GPU å°±è¢«å…¬å¸ƒä¸º nvidia.com/gpuã€‚ï¼‰  æˆåŠŸæ³¨å†Œåï¼Œè®¾å¤‡æ’ä»¶å°±å‘ kubelet å‘é€ä»–æ‰€ç®¡ç†çš„è®¾å¤‡åˆ—è¡¨ï¼Œç„¶å kubelet è´Ÿè´£å°†è¿™äº›èµ„æºå‘å¸ƒåˆ° API æœåŠ¡å™¨ï¼Œä½œä¸º kubelet èŠ‚ç‚¹çŠ¶æ€æ›´æ–°çš„ä¸€éƒ¨åˆ†ã€‚
æ¯”å¦‚ï¼Œè®¾å¤‡æ’ä»¶åœ¨ kubelet ä¸­æ³¨å†Œäº† hardware-vendor.example/foo å¹¶æŠ¥å‘Šäº†èŠ‚ç‚¹ä¸Šçš„ä¸¤ä¸ªè¿è¡ŒçŠ¶å†µè‰¯å¥½çš„è®¾å¤‡åï¼ŒèŠ‚ç‚¹çŠ¶æ€å°†æ›´æ–°ä»¥é€šå‘Šè¯¥èŠ‚ç‚¹å·²å®‰è£…2ä¸ª Foo è®¾å¤‡å¹¶ä¸”æ˜¯å¯ç”¨çš„ã€‚</description>
    </item>
    
    <item>
      <title>è®¿é—®é›†ç¾¤</title>
      <link>https://lijun.in/tasks/access-application-cluster/access-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/access-cluster/</guid>
      <description>æœ¬æ–‡é˜è¿°å¤šç§ä¸é›†ç¾¤äº¤äº’çš„æ–¹æ³•ã€‚
. toc &amp;gt;}}
ä½¿ç”¨ kubectl å®Œæˆé›†ç¾¤çš„ç¬¬ä¸€æ¬¡è®¿é—® å½“æ‚¨ç¬¬ä¸€æ¬¡è®¿é—® Kubernetes API çš„æ—¶å€™ï¼Œæˆ‘ä»¬å»ºè®®æ‚¨ä½¿ç”¨ Kubernetes CLIï¼Œkubectlã€‚
è®¿é—®é›†ç¾¤æ—¶ï¼Œæ‚¨éœ€è¦çŸ¥é“é›†ç¾¤çš„åœ°å€å¹¶ä¸”æ‹¥æœ‰è®¿é—®çš„å‡­è¯ã€‚é€šå¸¸ï¼Œè¿™äº›åœ¨æ‚¨é€šè¿‡ Getting started guide å®‰è£…é›†ç¾¤æ—¶éƒ½æ˜¯è‡ªåŠ¨å®‰è£…å¥½çš„ï¼Œæˆ–è€…å…¶ä»–äººå®‰è£…æ—¶ä¹Ÿåº”è¯¥æä¾›äº†å‡­è¯å’Œé›†ç¾¤åœ°å€ã€‚
é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ kubectl æ˜¯å¦çŸ¥é“é›†ç¾¤åœ°å€åŠå‡­è¯ï¼š
$ kubectl config view æœ‰è®¸å¤š ä¾‹å­ ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ kubectlï¼Œå¯ä»¥åœ¨ kubectlæ‰‹å†Œ ä¸­æ‰¾åˆ°æ›´å®Œæ•´çš„æ–‡æ¡£ã€‚
ç›´æ¥è®¿é—® REST API Kubectl å¤„ç† apiserver çš„å®šä½å’Œèº«ä»½éªŒè¯ã€‚ å¦‚æœè¦ä½¿ç”¨ curl æˆ– wget ç­‰ http å®¢æˆ·ç«¯æˆ–æµè§ˆå™¨ç›´æ¥è®¿é—® REST APIï¼Œå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æŸ¥æ‰¾å’ŒéªŒè¯ï¼š
 ä»¥ä»£ç†æ¨¡å¼è¿è¡Œ kubectlã€‚  æ¨èæ­¤æ–¹å¼ã€‚ ä½¿ç”¨å·²å­˜å‚¨çš„ apiserver åœ°å€ã€‚ ä½¿ç”¨è‡ªç­¾åçš„è¯ä¹¦æ¥éªŒè¯ apiserver çš„èº«ä»½ã€‚æœç» MITM æ”»å‡»ã€‚ å¯¹ apiserver è¿›è¡Œèº«ä»½éªŒè¯ã€‚ æœªæ¥å¯èƒ½ä¼šå®ç°æ™ºèƒ½åŒ–çš„å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å’Œæ•…éšœæ¢å¤ã€‚   ç›´æ¥å‘ http å®¢æˆ·ç«¯æä¾›ä½ç½®å’Œå‡­æ®ã€‚  å¯é€‰çš„æ–¹æ¡ˆã€‚ é€‚ç”¨äºä»£ç†å¯èƒ½å¼•èµ·æ··æ·†çš„æŸäº›å®¢æˆ·ç«¯ç±»å‹ã€‚ éœ€è¦å¼•å…¥æ ¹è¯ä¹¦åˆ°æ‚¨çš„æµè§ˆå™¨ä»¥é˜²æ­¢ MITM æ”»å‡»ã€‚    ä½¿ç”¨ kubectl ä»£ç† ä»¥ä¸‹å‘½ä»¤ä»¥åå‘ä»£ç†çš„æ¨¡å¼è¿è¡Œkubectlã€‚å®ƒå¤„ç† apiserver çš„å®šä½å’ŒéªŒè¯ã€‚ åƒè¿™æ ·è¿è¡Œï¼š</description>
    </item>
    
    <item>
      <title>è¯ä¹¦</title>
      <link>https://lijun.in/concepts/cluster-administration/certificates/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/cluster-administration/certificates/</guid>
      <description>å½“ä½¿ç”¨å®¢æˆ·ç«¯è¯ä¹¦è¿›è¡Œè®¤è¯æ—¶ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ç°æœ‰éƒ¨ç½²è„šæœ¬ï¼Œæˆ–è€…é€šè¿‡ easyrsaã€openssl æˆ– cfssl æ‰‹åŠ¨ç”Ÿæˆè¯ä¹¦ã€‚
easyrsa ä½¿ç”¨ easyrsa èƒ½å¤Ÿæ‰‹åŠ¨åœ°ä¸ºé›†ç¾¤ç”Ÿæˆè¯ä¹¦ã€‚
  ä¸‹è½½ã€è§£å‹å¹¶åˆå§‹åŒ– easyrsa3 çš„è¡¥ä¸ç‰ˆæœ¬ã€‚
curl -LO https://storage.googleapis.com/kubernetes-release/easy-rsa/easy-rsa.tar.gz tar xzf easy-rsa.tar.gz cd easy-rsa-master/easyrsa3 ./easyrsa init-pki    ç”Ÿæˆ CAï¼ˆé€šè¿‡ --batch å‚æ•°è®¾ç½®è‡ªåŠ¨æ¨¡å¼ã€‚ é€šè¿‡ --req-cn è®¾ç½®é»˜è®¤ä½¿ç”¨çš„ CNï¼‰
./easyrsa --batch &amp;quot;--req-cn=${MASTER_IP}@`date +%s`&amp;quot; build-ca nopass    ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦å’Œå¯†é’¥ã€‚ å‚æ•° --subject-alt-name è®¾ç½®äº†è®¿é—® API æœåŠ¡å™¨æ—¶å¯èƒ½ä½¿ç”¨çš„ IP å’Œ DNS åç§°ã€‚ MASTER_CLUSTER_IP é€šå¸¸ä¸º --service-cluster-ip-range å‚æ•°ä¸­æŒ‡å®šçš„æœåŠ¡ CIDR çš„ é¦–ä¸ª IP åœ°å€ï¼Œ--service-cluster-ip-range åŒæ—¶ç”¨äº API æœåŠ¡å™¨å’Œæ§åˆ¶å™¨ç®¡ç†å™¨ç»„ä»¶ã€‚ --days å‚æ•°ç”¨äºè®¾ç½®è¯ä¹¦çš„æœ‰æ•ˆæœŸé™ã€‚ ä¸‹é¢çš„ç¤ºä¾‹è¿˜å‡è®¾ç”¨æˆ·ä½¿ç”¨ cluster.local ä½œä¸ºé»˜è®¤çš„ DNS åŸŸåã€‚</description>
    </item>
    
    <item>
      <title>JSONPath æ”¯æŒ</title>
      <link>https://lijun.in/reference/kubectl/jsonpath/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/kubectl/jsonpath/</guid>
      <description>Kubectl æ”¯æŒ JSONPath æ¨¡æ¿ã€‚
JSONPath æ¨¡æ¿ç”± {} åŒ…èµ·æ¥çš„ JSONPath è¡¨è¾¾å¼ç»„æˆã€‚Kubectl ä½¿ç”¨ JSONPath è¡¨è¾¾å¼æ¥è¿‡æ»¤ JSON å¯¹è±¡ä¸­çš„ç‰¹å®šå­—æ®µå¹¶æ ¼å¼åŒ–è¾“å‡ºã€‚é™¤äº†åŸå§‹çš„ JSONPath æ¨¡æ¿è¯­æ³•ï¼Œä»¥ä¸‹å‡½æ•°å’Œè¯­æ³•ä¹Ÿæ˜¯æœ‰æ•ˆçš„:
 ä½¿ç”¨åŒå¼•å·å°† JSONPath è¡¨è¾¾å¼å†…çš„æ–‡æœ¬å¼•èµ·æ¥ã€‚ ä½¿ç”¨ rangeï¼Œend è¿ç®—ç¬¦æ¥è¿­ä»£åˆ—è¡¨ã€‚ ä½¿ç”¨è´Ÿç‰‡ç´¢å¼•åé€€åˆ—è¡¨ã€‚è´Ÿç´¢å¼•ä¸ä¼š&amp;quot;ç¯ç»•&amp;quot;åˆ—è¡¨ï¼Œå¹¶ä¸”åªè¦ -index + listLength&amp;gt; = 0 å°±æœ‰æ•ˆã€‚  note &amp;gt;}}
  $ è¿ç®—ç¬¦æ˜¯å¯é€‰çš„ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹è¡¨è¾¾å¼æ€»æ˜¯ä»æ ¹å¯¹è±¡å¼€å§‹ã€‚
  ç»“æœå¯¹è±¡å°†ä½œä¸ºå…¶ String() å‡½æ•°è¾“å‡ºã€‚
  /note &amp;gt;}}
ç»™å®š JSON è¾“å…¥:
{ &amp;#34;kind&amp;#34;: &amp;#34;List&amp;#34;, &amp;#34;items&amp;#34;:[ { &amp;#34;kind&amp;#34;:&amp;#34;None&amp;#34;, &amp;#34;metadata&amp;#34;:{&amp;#34;name&amp;#34;:&amp;#34;127.0.0.1&amp;#34;}, &amp;#34;status&amp;#34;:{ &amp;#34;capacity&amp;#34;:{&amp;#34;cpu&amp;#34;:&amp;#34;4&amp;#34;}, &amp;#34;addresses&amp;#34;:[{&amp;#34;type&amp;#34;: &amp;#34;LegacyHostIP&amp;#34;, &amp;#34;address&amp;#34;:&amp;#34;127.0.0.1&amp;#34;}] } }, { &amp;#34;kind&amp;#34;:&amp;#34;None&amp;#34;, &amp;#34;metadata&amp;#34;:{&amp;#34;name&amp;#34;:&amp;#34;127.0.0.2&amp;#34;}, &amp;#34;status&amp;#34;:{ &amp;#34;capacity&amp;#34;:{&amp;#34;cpu&amp;#34;:&amp;#34;8&amp;#34;}, &amp;#34;addresses&amp;#34;:[ {&amp;#34;type&amp;#34;: &amp;#34;LegacyHostIP&amp;#34;, &amp;#34;address&amp;#34;:&amp;#34;127.</description>
    </item>
    
    <item>
      <title>kube-scheduler</title>
      <link>https://lijun.in/reference/command-line-tools-reference/kube-scheduler/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/command-line-tools-reference/kube-scheduler/</guid>
      <description>. heading &amp;ldquo;synopsis&amp;rdquo; %}} Kubernetes è°ƒåº¦å™¨æ˜¯ä¸€ä¸ªç­–ç•¥ä¸°å¯Œã€æ‹“æ‰‘æ„ŸçŸ¥ã€å·¥ä½œè´Ÿè½½ç‰¹å®šçš„åŠŸèƒ½ï¼Œè°ƒåº¦å™¨æ˜¾è‘—å½±å“å¯ç”¨æ€§ã€æ€§èƒ½å’Œå®¹é‡ã€‚è°ƒåº¦å™¨éœ€è¦è€ƒè™‘ä¸ªäººå’Œé›†ä½“çš„èµ„æºè¦æ±‚ã€æœåŠ¡è´¨é‡è¦æ±‚ã€ç¡¬ä»¶/è½¯ä»¶/æ”¿ç­–çº¦æŸã€äº²å’ŒåŠ›å’Œåäº²å’ŒåŠ›è§„èŒƒã€æ•°æ®å±€éƒ¨æ€§ã€è´Ÿè½½é—´å¹²æ‰°ã€å®ŒæˆæœŸé™ç­‰ã€‚å·¥ä½œè´Ÿè½½ç‰¹å®šçš„è¦æ±‚å¿…è¦æ—¶å°†é€šè¿‡ API æš´éœ²ã€‚
kube-scheduler [flags] . heading &amp;ldquo;options&amp;rdquo; %}} &amp;lt;tr&amp;gt; &amp;lt;td colspan=&amp;quot;2&amp;quot;&amp;gt;--add-dir-header&amp;lt;/td&amp;gt; &amp;lt;/tr&amp;gt; &amp;lt;tr&amp;gt; &amp;lt;td&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td style=&amp;quot;line-height: 130%; word-wrap: break-word;&amp;quot;&amp;gt; &amp;lt;!-- If true, adds the file directory to the header --&amp;gt; å¦‚æœä¸º trueï¼Œåˆ™å°†æ–‡ä»¶ç›®å½•æ·»åŠ åˆ°æ ‡é¢˜ä¸­ &amp;lt;/td&amp;gt; &amp;lt;/tr&amp;gt; &amp;lt;tr&amp;gt; &amp;lt;td colspan=&amp;quot;2&amp;quot;&amp;gt; &amp;lt;!-- --address string&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;Default: &amp;quot;0.0.0.0&amp;quot; --&amp;gt; --address string&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;é»˜è®¤: &amp;quot;0.0.0.0&amp;quot; &amp;lt;/td&amp;gt; &amp;lt;/tr&amp;gt; &amp;lt;tr&amp;gt; &amp;lt;td&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td style=&amp;quot;line-height: 130%; word-wrap: break-word;&amp;quot;&amp;gt; &amp;lt;!-- DEPRECATED: the IP address on which to listen for the --port port (set to 0.</description>
    </item>
    
    <item>
      <title>kubectl</title>
      <link>https://lijun.in/reference/kubectl/kubectl/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/kubectl/kubectl/</guid>
      <description>. heading &amp;ldquo;synopsis&amp;rdquo; %}} kubectl ç®¡ç†æ§åˆ¶ Kubernetes é›†ç¾¤ã€‚
è·å–æ›´å¤šä¿¡æ¯ï¼Œè¯·è®¿é—® kubectl æ¦‚è¿°ã€‚
kubectl [flags] . heading &amp;ldquo;options&amp;rdquo; %}} &amp;lt;tr&amp;gt; &amp;lt;td colspan=&amp;quot;2&amp;quot;&amp;gt;--add-dir-header&amp;lt;/td&amp;gt; &amp;lt;/tr&amp;gt; &amp;lt;tr&amp;gt; &amp;lt;td&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td style=&amp;quot;line-height: 130%; word-wrap: break-word;&amp;quot;&amp;gt; &amp;lt;!-- If true, adds the file directory to the header --&amp;gt; è®¾ç½®ä¸º true è¡¨ç¤ºæ·»åŠ æ–‡ä»¶ç›®å½•åˆ° header ä¸­ &amp;lt;/td&amp;gt; &amp;lt;/tr&amp;gt; &amp;lt;tr&amp;gt; &amp;lt;td colspan=&amp;quot;2&amp;quot;&amp;gt;--alsologtostderr&amp;lt;/td&amp;gt; &amp;lt;/tr&amp;gt; &amp;lt;tr&amp;gt; &amp;lt;td&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td style=&amp;quot;line-height: 130%; word-wrap: break-word;&amp;quot;&amp;gt; &amp;lt;!-- log to standard error as well as files --&amp;gt; è¡¨ç¤ºå°†æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶çš„åŒæ—¶è¾“å‡ºåˆ° stderr &amp;lt;/td&amp;gt; &amp;lt;/tr&amp;gt; &amp;lt;tr&amp;gt; &amp;lt;td colspan=&amp;quot;2&amp;quot;&amp;gt;--as string&amp;lt;/td&amp;gt; &amp;lt;/tr&amp;gt; &amp;lt;tr&amp;gt; &amp;lt;td&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td style=&amp;quot;line-height: 130%; word-wrap: break-word;&amp;quot;&amp;gt; &amp;lt;!</description>
    </item>
    
    <item>
      <title>kubelet</title>
      <link>https://lijun.in/reference/command-line-tools-reference/kubelet/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/command-line-tools-reference/kubelet/</guid>
      <description>. heading &amp;ldquo;synopsis&amp;rdquo; %}} kubelet æ˜¯åœ¨æ¯ä¸ª Node èŠ‚ç‚¹ä¸Šè¿è¡Œçš„ä¸»è¦ â€œèŠ‚ç‚¹ä»£ç†â€ã€‚å®ƒå‘ apiserver æ³¨å†ŒèŠ‚ç‚¹æ—¶å¯ä»¥ä½¿ç”¨ä¸»æœºåï¼ˆhostnameï¼‰ï¼›å¯ä»¥æä¾›ç”¨äºè¦†ç›–ä¸»æœºåçš„å‚æ•°ï¼›è¿˜å¯ä»¥æ‰§è¡Œç‰¹å®šäºæŸäº‘æœåŠ¡å•†çš„é€»è¾‘ã€‚
kubelet æ˜¯åŸºäº PodSpec æ¥å·¥ä½œçš„ã€‚æ¯ä¸ª PodSpec æ˜¯ä¸€ä¸ªæè¿° Pod çš„ YAML æˆ– JSON å¯¹è±¡ã€‚kubelet æ¥å—é€šè¿‡å„ç§æœºåˆ¶ï¼ˆä¸»è¦æ˜¯é€šè¿‡ apiserverï¼‰æä¾›çš„ä¸€ç»„ PodSpecï¼Œå¹¶ç¡®ä¿è¿™äº› PodSpec ä¸­æè¿°çš„å®¹å™¨å¤„äºè¿è¡ŒçŠ¶æ€ä¸”è¿è¡ŒçŠ¶å†µè‰¯å¥½ã€‚kubelet ä¸ç®¡ç†ä¸æ˜¯ç”± Kubernetes åˆ›å»ºçš„å®¹å™¨ã€‚
é™¤äº†æ¥è‡ª apiserver çš„ PodSpec ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼å°†å®¹å™¨æ¸…å•ï¼ˆmanifestï¼‰æä¾›ç»™ kubeletã€‚
Fileï¼ˆæ–‡ä»¶ï¼‰ï¼šåˆ©ç”¨å‘½ä»¤è¡Œå‚æ•°ç»™å®šè·¯å¾„ã€‚kubelet å‘¨æœŸæ€§åœ°ç›‘è§†æ­¤è·¯å¾„ä¸‹çš„æ–‡ä»¶æ˜¯å¦æœ‰æ›´æ–°ã€‚ç›‘è§†å‘¨æœŸé»˜è®¤ä¸º 20sï¼Œä¸”å¯é€šè¿‡å‚æ•°è¿›è¡Œé…ç½®ã€‚
HTTP endpointï¼ˆHTTP ç«¯ç‚¹ï¼‰ï¼šåˆ©ç”¨å‘½ä»¤è¡Œå‚æ•°æŒ‡å®š HTTP ç«¯ç‚¹ã€‚æ­¤ç«¯ç‚¹æ¯ 20 ç§’è¢«æ£€æŸ¥ä¸€æ¬¡ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨å‚æ•°è¿›è¡Œé…ç½®ï¼‰ã€‚
HTTP serverï¼ˆHTTP æœåŠ¡å™¨ï¼‰ï¼škubelet è¿˜å¯ä»¥ä¾¦å¬ HTTP å¹¶å“åº”ç®€å•çš„ APIï¼ˆå½“å‰æœªç»è¿‡è§„èŒƒï¼‰æ¥æäº¤æ–°çš„æ¸…å•ã€‚
kubelet [flags] . heading &amp;ldquo;options&amp;rdquo; %}} </description>
    </item>
    
    <item>
      <title>CSI å·å…‹éš†</title>
      <link>https://lijun.in/concepts/storage/volume-pvc-datasource/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/storage/volume-pvc-datasource/</guid>
      <description>æœ¬æ–‡æ¡£ä»‹ç» Kubernetes ä¸­å…‹éš†ç°æœ‰ CSI å·çš„æ¦‚å¿µã€‚é˜…è¯»å‰å»ºè®®å…ˆç†Ÿæ‚‰å·ã€‚
ä»‹ç» glossary_tooltip text=&amp;quot;CSI&amp;rdquo; term_id=&amp;quot;csi&amp;rdquo; &amp;gt;}} å·å…‹éš†åŠŸèƒ½å¢åŠ äº†é€šè¿‡åœ¨ dataSource å­—æ®µä¸­æŒ‡å®šå­˜åœ¨çš„ glossary_tooltip text=&amp;quot;PVC&amp;rdquo; term_id=&amp;quot;persistent-volume-claim&amp;rdquo; &amp;gt;}}sï¼Œæ¥è¡¨ç¤ºç”¨æˆ·æƒ³è¦å…‹éš†çš„ glossary_tooltip term_id=&amp;quot;volume&amp;rdquo; &amp;gt;}}ã€‚
å…‹éš†ï¼Œæ„æ€æ˜¯ä¸ºå·²æœ‰çš„ Kubernetes å·åˆ›å»ºå‰¯æœ¬ï¼Œå®ƒå¯ä»¥åƒä»»ä½•å…¶å®ƒæ ‡å‡†å·ä¸€æ ·è¢«ä½¿ç”¨ã€‚å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯é…ç½®åï¼Œåç«¯è®¾å¤‡å°†åˆ›å»ºæŒ‡å®šå®Œå…¨ç›¸åŒçš„å‰¯æœ¬ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªâ€œæ–°çš„â€ç©ºå·ã€‚
ä» Kubernetes API çš„è§’åº¦çœ‹ï¼Œå…‹éš†çš„å®ç°åªæ˜¯åœ¨åˆ›å»ºæ–°çš„ PVC æ—¶ï¼Œå¢åŠ äº†æŒ‡å®šä¸€ä¸ªç°æœ‰ PVC ä½œä¸ºæ•°æ®æºçš„èƒ½åŠ›ã€‚æº PVC å¿…é¡»æ˜¯ bound çŠ¶æ€ä¸”å¯ç”¨çš„ï¼ˆä¸åœ¨ä½¿ç”¨ä¸­ï¼‰ã€‚
ç”¨æˆ·åœ¨ä½¿ç”¨è¯¥åŠŸèƒ½æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹äº‹é¡¹ï¼š
 å…‹éš†æ”¯æŒï¼ˆVolumePVCDataSourceï¼‰ä»…é€‚ç”¨äº CSI é©±åŠ¨ã€‚ å…‹éš†æ”¯æŒä»…é€‚ç”¨äº åŠ¨æ€ä¾›åº”å™¨ã€‚ CSI é©±åŠ¨å¯èƒ½å®ç°ï¼Œä¹Ÿå¯èƒ½æœªå®ç°å·å…‹éš†åŠŸèƒ½ã€‚ ä»…å½“ PVC ä¸ç›®æ ‡ PVC å­˜åœ¨äºåŒä¸€å‘½åç©ºé—´ï¼ˆæºå’Œç›®æ ‡ PVC å¿…é¡»åœ¨ç›¸åŒçš„å‘½åç©ºé—´ï¼‰æ—¶ï¼Œæ‰å¯ä»¥å…‹éš† PVCã€‚ ä»…åœ¨åŒä¸€å­˜å‚¨ç±»ä¸­æ”¯æŒå…‹éš†ã€‚  ç›®æ ‡å·å¿…é¡»å’Œæºå·å…·æœ‰ç›¸åŒçš„å­˜å‚¨ç±» å¯ä»¥ä½¿ç”¨é»˜è®¤çš„å­˜å‚¨ç±»å¹¶ä¸” storageClassName å­—æ®µåœ¨è§„æ ¼ä¸­å¿½ç•¥äº†   å…‹éš†åªèƒ½åœ¨ä¸¤ä¸ªä½¿ç”¨ç›¸åŒ VolumeMode è®¾ç½®çš„å·ä¸­è¿›è¡Œï¼ˆå¦‚æœè¯·æ±‚å…‹éš†ä¸€ä¸ªå—å­˜å‚¨æ¨¡å¼çš„å·ï¼Œæºå·å¿…é¡»ä¹Ÿæ˜¯å—å­˜å‚¨æ¨¡å¼ï¼‰ã€‚  ä¾›åº” å…‹éš†å·ä¸å…¶ä»–ä»»ä½• PVC ä¸€æ ·é…ç½®ï¼Œé™¤äº†éœ€è¦å¢åŠ  dataSource æ¥å¼•ç”¨åŒä¸€å‘½åç©ºé—´ä¸­ç°æœ‰çš„ PVCã€‚</description>
    </item>
    
    <item>
      <title>Deployments</title>
      <link>https://lijun.in/concepts/workloads/controllers/deployment/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/controllers/deployment/</guid>
      <description>apiVersion: extensions/v1beta1 # æ¥å£ç‰ˆæœ¬ kind: Deployment # æ¥å£ç±»å‹ metadata: name: cango-demo # Deploymentåç§° namespace: cango-prd # å‘½åç©ºé—´ labels: app: cango-demo # æ ‡ç­¾ spec: replicas: 3 strategy: # éƒ¨ç½²ç­–ç•¥ rollingUpdate: # ç”±äºreplicasä¸º3,åˆ™æ•´ä¸ªå‡çº§,podä¸ªæ•°åœ¨2-4ä¸ªä¹‹é—´ maxSurge: 1 # æ»šåŠ¨å‡çº§æ—¶ä¼šå…ˆå¯åŠ¨1ä¸ªpod maxUnavailable: 1 # æ»šåŠ¨å‡çº§æ—¶å…è®¸çš„æœ€å¤§Unavailableçš„podä¸ªæ•° template: metadata: labels: app: cango-demo # æ¨¡æ¿åç§°å¿…å¡« sepc: # å®šä¹‰å®¹å™¨æ¨¡æ¿,è¯¥æ¨¡æ¿å¯ä»¥åŒ…å«å¤šä¸ªå®¹å™¨ containers: - name: cango-demo # é•œåƒåç§° image: swr.cn-east-2.myhuaweicloud.com/cango-prd/cango-demo:0.0.1-SNAPSHOT # é•œåƒåœ°å€ command: [ &amp;#34;/bin/sh&amp;#34;,&amp;#34;-c&amp;#34;,&amp;#34;cat /etc/config/path/to/special-key&amp;#34; ] # å¯åŠ¨å‘½ä»¤ args: # å¯åŠ¨å‚æ•° - &amp;#39;-storage.</description>
    </item>
    
    <item>
      <title>kube-proxy</title>
      <link>https://lijun.in/reference/command-line-tools-reference/kube-proxy/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/command-line-tools-reference/kube-proxy/</guid>
      <description>. heading &amp;ldquo;synopsis&amp;rdquo; %}} Kubernetes ç½‘ç»œä»£ç†åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œã€‚ç½‘ç»œä»£ç†åæ˜ äº†æ¯ä¸ªèŠ‚ç‚¹ä¸Š Kubernetes API ä¸­å®šä¹‰çš„æœåŠ¡ï¼Œå¹¶ä¸”å¯ä»¥æ‰§è¡Œç®€å•çš„ TCPã€UDP å’Œ SCTP æµè½¬å‘ï¼Œæˆ–è€…åœ¨ä¸€ç»„åç«¯è¿›è¡Œå¾ªç¯ TCPã€UDP å’Œ SCTP è½¬å‘ã€‚å½“å‰å¯é€šè¿‡ Docker-links-compatible ç¯å¢ƒå˜é‡æ‰¾åˆ°æœåŠ¡é›†ç¾¤ IP å’Œç«¯å£ï¼Œè¿™äº›ç¯å¢ƒå˜é‡æŒ‡å®šäº†æœåŠ¡ä»£ç†æ‰“å¼€çš„ç«¯å£ã€‚æœ‰ä¸€ä¸ªå¯é€‰çš„æ’ä»¶ï¼Œå¯ä»¥ä¸ºè¿™äº›é›†ç¾¤ IP æä¾›é›†ç¾¤ DNSã€‚ç”¨æˆ·å¿…é¡»ä½¿ç”¨ apiserver API åˆ›å»ºæœåŠ¡æ‰èƒ½é…ç½®ä»£ç†ã€‚
kube-proxy [flags] . heading &amp;ldquo;options&amp;rdquo; %}} </description>
    </item>
    
    <item>
      <title>kubeadm join</title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-join/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-join/</guid>
      <description>æ­¤å‘½ä»¤ç”¨æ¥åˆå§‹åŒ– Kubernetes å·¥ä½œèŠ‚ç‚¹å¹¶å°†å…¶åŠ å…¥é›†ç¾¤ã€‚
. include &amp;ldquo;generated/kubeadm_join.md&amp;rdquo; &amp;gt;}}
åŠ å…¥æµç¨‹ kubeadm join åˆå§‹åŒ– Kubernetes å·¥ä½œèŠ‚ç‚¹å¹¶å°†å…¶åŠ å…¥é›†ç¾¤ã€‚ è¯¥æ“ä½œè¿‡ç¨‹åŒ…å«ä¸‹é¢å‡ ä¸ªæ­¥éª¤ï¼š
  kubeadm ä» API æœåŠ¡å™¨ä¸‹è½½å¿…è¦çš„é›†ç¾¤ä¿¡æ¯ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä½¿ç”¨å¼•å¯¼ä»¤ç‰Œå’Œ CA å¯†é’¥å“ˆå¸Œæ¥éªŒè¯æ•°æ®çš„çœŸå®æ€§ã€‚ ä¹Ÿå¯ä»¥é€šè¿‡æ–‡ä»¶æˆ– URL ç›´æ¥å‘ç°æ ¹ CAã€‚
  å¦‚æœè°ƒç”¨ kubeadm æ—¶å¯ç”¨äº† --feature-gates=DynamicKubeletConfigï¼Œå®ƒé¦–å…ˆä»ä¸»æœºä¸Šæ£€ç´¢ kubelet åˆå§‹åŒ–é…ç½®å¹¶å°†å…¶å†™å…¥ç£ç›˜ã€‚ å½“ kubelet å¯åŠ¨æ—¶ï¼Œkubeadm æ›´æ–°èŠ‚ç‚¹çš„ Node.spec.configSource å±æ€§ã€‚ è¿›ä¸€æ­¥äº†è§£åŠ¨æ€ kubelet é…ç½® è¯·å‚è€ƒ ä½¿ç”¨é…ç½®æ–‡ä»¶è®¾ç½® Kubelet å‚æ•° å’Œ é‡æ–°é…ç½®é›†ç¾¤ä¸­èŠ‚ç‚¹çš„ Kubeletã€‚
  ä¸€æ—¦çŸ¥é“é›†ç¾¤ä¿¡æ¯ï¼Œkubelet å°±å¯ä»¥å¼€å§‹ TLS å¼•å¯¼è¿‡ç¨‹ã€‚ TLS å¼•å¯¼ç¨‹åºä½¿ç”¨å…±äº«ä»¤ç‰Œä¸ Kubernetes API æœåŠ¡å™¨è¿›è¡Œä¸´æ—¶çš„èº«ä»½éªŒè¯ï¼Œä»¥æäº¤è¯ä¹¦ç­¾åè¯·æ±‚ (CSR)ï¼› é»˜è®¤æƒ…å†µä¸‹ï¼Œæ§åˆ¶å¹³é¢è‡ªåŠ¨å¯¹è¯¥ CSR è¯·æ±‚è¿›è¡Œç­¾åã€‚
  æœ€åï¼Œkubeadm é…ç½®æœ¬åœ° kubelet ä½¿ç”¨åˆ†é…ç»™èŠ‚ç‚¹çš„ç¡®å®šæ ‡è¯†è¿æ¥åˆ° API æœåŠ¡å™¨ã€‚</description>
    </item>
    
    <item>
      <title>Kubernetes API</title>
      <link>https://lijun.in/concepts/overview/kubernetes-api/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/overview/kubernetes-api/</guid>
      <description>APIåè®®æ–‡æ¡£æè¿°äº†ä¸»ç³»ç»Ÿå’ŒAPIæ¦‚å¿µã€‚
APIå‚è€ƒæ–‡æ¡£æè¿°äº†APIæ•´ä½“è§„èŒƒã€‚
è®¿é—®æ–‡æ¡£è®¨è®ºäº†é€šè¿‡è¿œç¨‹è®¿é—®APIçš„ç›¸å…³é—®é¢˜ã€‚
Kubernetes APIæ˜¯ç³»ç»Ÿæè¿°æ€§é…ç½®çš„åŸºç¡€ã€‚ Kubectl å‘½ä»¤è¡Œå·¥å…·è¢«ç”¨äºåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ã€è·å–APIå¯¹è±¡ã€‚
Kubernetes é€šè¿‡APIèµ„æºå­˜å‚¨è‡ªå·±åºåˆ—åŒ–çŠ¶æ€(ç°åœ¨å­˜å‚¨åœ¨etcd)ã€‚
Kubernetes è¢«åˆ†æˆå¤šä¸ªç»„ä»¶ï¼Œå„éƒ¨åˆ†é€šè¿‡APIç›¸äº’äº¤äº’ã€‚
API å˜æ›´ æ ¹æ®ç»éªŒï¼Œä»»ä½•æˆåŠŸçš„ç³»ç»Ÿéƒ½éœ€è¦éšç€æ–°çš„ç”¨ä¾‹å‡ºç°æˆ–ç°æœ‰ç”¨ä¾‹å‘ç”Ÿå˜åŒ–çš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œç›¸åº”çš„è¿›åŒ–ä¸è°ƒæ•´ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›Kubernetes APIä¹Ÿå¯ä»¥ä¿æŒæŒç»­çš„è¿›åŒ–å’Œè°ƒæ•´ã€‚åŒæ—¶ï¼Œåœ¨è¾ƒé•¿ä¸€æ®µæ—¶é—´å†…ï¼Œæˆ‘ä»¬ä¹Ÿå¸Œæœ›ä¸ç°æœ‰å®¢æˆ·ç«¯ç‰ˆæœ¬ä¿æŒè‰¯å¥½çš„å‘ä¸‹å…¼å®¹æ€§ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¢åŠ æ–°çš„APIèµ„æºå’Œèµ„æºå­—æ®µä¸ä¼šå¯¼è‡´å‘ä¸‹å…¼å®¹æ€§é—®é¢˜å‘ç”Ÿï¼›ä½†å¦‚æœæ˜¯éœ€è¦åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„èµ„æºæˆ–è€…å­—æ®µï¼Œé‚£ä¹ˆå¿…é¡»é€šè¿‡APIåºŸå¼ƒæµç¨‹æ¥è¿›è¡Œã€‚
å‚è€ƒAPIå˜æ›´æ–‡æ¡£ï¼Œäº†è§£å…¼å®¹æ€§å˜æ›´çš„è¦ç´ ä»¥åŠå¦‚ä½•å˜æ›´APIçš„æµç¨‹ã€‚
OpenAPI å’Œ API Swagger å®šä¹‰ å®Œæ•´çš„ API è¯¦ç»†æ–‡æ¡£ä½¿ç”¨ OpenAPIç”Ÿæˆ.
éšç€ Kubernetes 1.10 ç‰ˆæœ¬çš„æ­£å¼å¯ç”¨ï¼ŒKubernetes API æœåŠ¡é€šè¿‡ /openapi/v2 æ¥å£æä¾› OpenAPI è§„èŒƒã€‚ é€šè¿‡è®¾ç½® HTTP æ ‡å¤´çš„è§„å®šäº†è¯·æ±‚çš„ç»“æ„ã€‚
   Header Possible Values     Accept application/json, application/com.github.proto-openapi.spec.v2@v1.0+protobuf (the default content-type is application/json for */* or not passing this header)   Accept-Encoding gzip (not passing this header is acceptable)    åœ¨1.</description>
    </item>
    
    <item>
      <title>Kubernetes ç‰ˆæœ¬åŠç‰ˆæœ¬å€¾æ–œæ”¯æŒç­–ç•¥</title>
      <link>https://lijun.in/setup/release/version-skew-policy/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/release/version-skew-policy/</guid>
      <description>æœ¬æ–‡æè¿° Kubernetes å„ç»„ä»¶ä¹‹é—´ç‰ˆæœ¬å€¾æ–œæ”¯æŒç­–ç•¥ã€‚ ç‰¹å®šçš„é›†ç¾¤éƒ¨ç½²å·¥å…·å¯èƒ½ä¼šæœ‰é¢å¤–çš„é™åˆ¶ã€‚
Supported versions Kubernetes ç‰ˆæœ¬å·æ ¼å¼ä¸º x.y.zï¼Œå…¶ä¸­ x ä¸ºå¤§ç‰ˆæœ¬å·ï¼Œy ä¸ºå°ç‰ˆæœ¬å·ï¼Œz ä¸ºè¡¥ä¸ç‰ˆæœ¬å·ã€‚ ç‰ˆæœ¬å·æ ¼å¼éµå¾ª Semantic Versioning è§„åˆ™ã€‚ æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… Kubernetes Release Versioningã€‚
Kubernetes é¡¹ç›®ä¼šç»´æŠ¤æœ€è¿‘çš„ä¸‰ä¸ªå°ç‰ˆæœ¬åˆ†æ”¯ã€‚
ä¸€äº› bug ä¿®å¤ï¼ŒåŒ…æ‹¬å®‰å…¨ä¿®å¤ï¼Œæ ¹æ®å…¶å®‰å…¨æ€§å’Œå¯ç”¨æ€§ï¼Œæœ‰å¯èƒ½ä¼šå›åˆåˆ°è¿™äº›åˆ†æ”¯ã€‚ è¡¥ä¸ç‰ˆæœ¬ä¼šå®šæœŸæˆ–æ ¹æ®éœ€è¦ä»è¿™äº›åˆ†æ”¯ä¸­å‘å¸ƒã€‚ æœ€ç»ˆæ˜¯å¦å‘å¸ƒæ˜¯ç”±patch release team æ¥å†³å®šçš„ã€‚Patch release teamåŒæ—¶ä¹Ÿæ˜¯release managers. å¦‚éœ€äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ Kubernetes Patch releases.
å°ç‰ˆæœ¬å¤§çº¦æ¯3ä¸ªæœˆå‘å¸ƒä¸€ä¸ªï¼Œæ‰€ä»¥æ¯ä¸ªå°ç‰ˆæœ¬åˆ†æ”¯ä¼šç»´æŠ¤9ä¸ªæœˆã€‚
Supported version skew kube-apiserver In highly-available (HA) clusters, the newest and oldest kube-apiserver instances must be within one minor version. åœ¨ é«˜å¯ç”¨ï¼ˆHAï¼‰é›†ç¾¤ ä¸­ï¼Œ å¤šä¸ª kube-apiserver å®ä¾‹å°ç‰ˆæœ¬å·æœ€å¤šå·®1ã€‚
ä¾‹å¦‚ï¼š
 æœ€æ–°çš„ kube-apiserver ç‰ˆæœ¬å·å¦‚æœæ˜¯ 1.</description>
    </item>
    
    <item>
      <title>Operator æ¨¡å¼</title>
      <link>https://lijun.in/concepts/extend-kubernetes/operator/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/extend-kubernetes/operator/</guid>
      <description>Operator æ˜¯ Kubernetes çš„æ‰©å±•è½¯ä»¶ï¼Œå®ƒåˆ©ç”¨è‡ªå®šä¹‰èµ„æºç®¡ç†åº”ç”¨åŠå…¶ç»„ä»¶ã€‚ Operator éµå¾ª Kubernetes çš„ç†å¿µï¼Œç‰¹åˆ«æ˜¯åœ¨æ§åˆ¶å›è·¯æ–¹é¢ã€‚
åˆè¡· Operator æ¨¡å¼æ—¨åœ¨æ•è·ï¼ˆæ­£åœ¨ç®¡ç†ä¸€ä¸ªæˆ–ä¸€ç»„æœåŠ¡çš„ï¼‰è¿ç»´äººå‘˜çš„å…³é”®ç›®æ ‡ã€‚ è´Ÿè´£ç‰¹å®šåº”ç”¨å’Œ service çš„è¿ç»´äººå‘˜ï¼Œåœ¨ç³»ç»Ÿåº”è¯¥å¦‚ä½•è¿è¡Œã€å¦‚ä½•éƒ¨ç½²ä»¥åŠå‡ºç°é—®é¢˜æ—¶å¦‚ä½•å¤„ç†ç­‰æ–¹é¢æœ‰æ·±å…¥çš„äº†è§£ã€‚
åœ¨ Kubernetes ä¸Šè¿è¡Œå·¥ä½œè´Ÿè½½çš„äººä»¬éƒ½å–œæ¬¢é€šè¿‡è‡ªåŠ¨åŒ–æ¥å¤„ç†é‡å¤çš„ä»»åŠ¡ã€‚Operator æ¨¡å¼ä¼šå°è£…æ‚¨ç¼–å†™çš„ï¼ˆKubernetes æœ¬èº«æä¾›åŠŸèƒ½ä»¥å¤–çš„ï¼‰ä»»åŠ¡è‡ªåŠ¨åŒ–ä»£ç ã€‚
Kubernetes ä¸Šçš„ Operator Kubernetes ä¸ºè‡ªåŠ¨åŒ–è€Œç”Ÿã€‚æ— éœ€ä»»ä½•ä¿®æ”¹ï¼Œæ‚¨å³å¯ä»¥ä» Kubernetes æ ¸å¿ƒä¸­è·å¾—è®¸å¤šå†…ç½®çš„è‡ªåŠ¨åŒ–åŠŸèƒ½ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ Kubernetes è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œè¿è¡Œå·¥ä½œè´Ÿè½½ï¼Œ ç”šè‡³ å¯ä»¥è‡ªåŠ¨åŒ– Kubernetes è‡ªèº«ã€‚
Kubernetes text=&amp;quot;æ§åˆ¶å™¨&amp;rdquo; term_id=&amp;quot;controller&amp;rdquo; &amp;gt;}} ä½¿æ‚¨æ— éœ€ä¿®æ”¹ Kubernetes è‡ªèº«çš„ä»£ç ï¼Œå³å¯ä»¥æ‰©å±•é›†ç¾¤çš„è¡Œä¸ºã€‚ Operator æ˜¯ Kubernetes API çš„å®¢æˆ·ç«¯ï¼Œå……å½“è‡ªå®šä¹‰èµ„æºçš„æ§åˆ¶å™¨ã€‚
Operator ç¤ºä¾‹ ä½¿ç”¨ Operator å¯ä»¥è‡ªåŠ¨åŒ–çš„äº‹æƒ…åŒ…æ‹¬ï¼š
 æŒ‰éœ€éƒ¨ç½²åº”ç”¨ è·å–/è¿˜åŸåº”ç”¨çŠ¶æ€çš„å¤‡ä»½ å¤„ç†åº”ç”¨ä»£ç çš„å‡çº§ä»¥åŠç›¸å…³æ”¹åŠ¨ã€‚ä¾‹å¦‚ï¼Œæ•°æ®åº“ schema æˆ–é¢å¤–çš„é…ç½®è®¾ç½® å‘å¸ƒä¸€ä¸ª serviceï¼Œè¦æ±‚ä¸æ”¯æŒ Kubernetes API çš„åº”ç”¨ä¹Ÿèƒ½å‘ç°å®ƒ æ¨¡æ‹Ÿæ•´ä¸ªæˆ–éƒ¨åˆ†é›†ç¾¤ä¸­çš„æ•…éšœä»¥æµ‹è¯•å…¶ç¨³å®šæ€§ åœ¨æ²¡æœ‰å†…éƒ¨æˆå‘˜é€‰ä¸¾ç¨‹åºçš„æƒ…å†µä¸‹ï¼Œä¸ºåˆ†å¸ƒå¼åº”ç”¨é€‰æ‹©é¦–é¢†è§’è‰²  æƒ³è¦æ›´è¯¦ç»†çš„äº†è§£ Operatorï¼Ÿè¿™å„¿æœ‰ä¸€ä¸ªè¯¦ç»†çš„ç¤ºä¾‹ï¼š
 æœ‰ä¸€ä¸ªåä¸º SampleDB çš„è‡ªå®šä¹‰èµ„æºï¼Œæ‚¨å¯ä»¥å°†å…¶é…ç½®åˆ°é›†ç¾¤ä¸­ã€‚ ä¸€ä¸ªåŒ…å« Operator æ§åˆ¶å™¨éƒ¨åˆ†çš„ Deploymentï¼Œç”¨æ¥ç¡®ä¿ Pod å¤„äºè¿è¡ŒçŠ¶æ€ã€‚ Operator ä»£ç çš„å®¹å™¨é•œåƒã€‚ æ§åˆ¶å™¨ä»£ç ï¼Œè´Ÿè´£æŸ¥è¯¢æ§åˆ¶å¹³é¢ä»¥æ‰¾å‡ºå·²é…ç½®çš„ SampleDB èµ„æºã€‚ Operator çš„æ ¸å¿ƒæ˜¯å‘Šè¯‰ API æœåŠ¡å™¨ï¼Œå¦‚ä½•ä½¿ç°å®ä¸ä»£ç é‡Œé…ç½®çš„èµ„æºåŒ¹é…ã€‚  å¦‚æœæ·»åŠ æ–°çš„ SampleDBï¼ŒOperator å°†è®¾ç½® PersistentVolumeClaims ä»¥æä¾›æŒä¹…åŒ–çš„æ•°æ®åº“å­˜å‚¨ï¼Œè®¾ç½® StatefulSet ä»¥è¿è¡Œ SampleDBï¼Œå¹¶è®¾ç½® Job æ¥å¤„ç†åˆå§‹é…ç½®ã€‚ å¦‚æœæ‚¨åˆ é™¤å®ƒï¼ŒOperator å°†å»ºç«‹å¿«ç…§ï¼Œç„¶åç¡®ä¿ StatefulSet å’Œ Volume å·²è¢«åˆ é™¤ã€‚   Operator ä¹Ÿå¯ä»¥ç®¡ç†å¸¸è§„æ•°æ®åº“çš„å¤‡ä»½ã€‚å¯¹äºæ¯ä¸ª SampleDB èµ„æºï¼ŒOperator ä¼šç¡®å®šä½•æ—¶åˆ›å»ºï¼ˆå¯ä»¥è¿æ¥åˆ°æ•°æ®åº“å¹¶è¿›è¡Œå¤‡ä»½çš„ï¼‰Podã€‚è¿™äº› Pod å°†ä¾èµ–äº ConfigMap å’Œ/æˆ– å…·æœ‰æ•°æ®åº“è¿æ¥è¯¦ç»†ä¿¡æ¯å’Œå‡­æ®çš„ Secretã€‚ ç”±äº Operator æ—¨åœ¨ä¸ºå…¶ç®¡ç†çš„èµ„æºæä¾›å¼ºå¤§çš„è‡ªåŠ¨åŒ–åŠŸèƒ½ï¼Œå› æ­¤å®ƒè¿˜éœ€è¦ä¸€äº›é¢å¤–çš„æ”¯æŒæ€§ä»£ç ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä»£ç å°†æ£€æŸ¥æ•°æ®åº“æ˜¯å¦æ­£è¿è¡Œåœ¨æ—§ç‰ˆæœ¬ä¸Šï¼Œå¦‚æœæ˜¯ï¼Œåˆ™åˆ›å»º Job å¯¹è±¡ä¸ºæ‚¨å‡çº§æ•°æ®åº“ã€‚  éƒ¨ç½² Operator éƒ¨ç½² Operator æœ€å¸¸è§çš„æ–¹æ³•æ˜¯å°†è‡ªå®šä¹‰èµ„æºåŠå…¶å…³è”çš„æ§åˆ¶å™¨æ·»åŠ åˆ°æ‚¨çš„é›†ç¾¤ä¸­ã€‚è·Ÿè¿è¡Œå®¹å™¨åŒ–åº”ç”¨ä¸€æ ·ï¼ŒController é€šå¸¸ä¼šè¿è¡Œåœ¨ text=&amp;quot;æ§åˆ¶å¹³é¢&amp;rdquo; term_id=&amp;quot;control-plane&amp;rdquo; &amp;gt;}} ä¹‹å¤–ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åœ¨é›†ç¾¤ä¸­å°†æ§åˆ¶å™¨ä½œä¸º Deployment è¿è¡Œã€‚</description>
    </item>
    
    <item>
      <title>Storage Classes</title>
      <link>https://lijun.in/concepts/storage/storage-classes/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/storage/storage-classes/</guid>
      <description>æœ¬æ–‡æè¿°äº† Kubernetes ä¸­ StorageClass çš„æ¦‚å¿µã€‚å»ºè®®å…ˆç†Ÿæ‚‰ å· å’Œ æŒä¹…å· çš„æ¦‚å¿µã€‚
ä»‹ç» StorageClass ä¸ºç®¡ç†å‘˜æä¾›äº†æè¿°å­˜å‚¨ &amp;ldquo;ç±»&amp;rdquo; çš„æ–¹æ³•ã€‚ ä¸åŒçš„ç±»å‹å¯èƒ½ä¼šæ˜ å°„åˆ°ä¸åŒçš„æœåŠ¡è´¨é‡ç­‰çº§æˆ–å¤‡ä»½ç­–ç•¥ï¼Œæˆ–æ˜¯ç”±é›†ç¾¤ç®¡ç†å‘˜åˆ¶å®šçš„ä»»æ„ç­–ç•¥ã€‚ Kubernetes æœ¬èº«å¹¶ä¸æ¸…æ¥šå„ç§ç±»ä»£è¡¨çš„ä»€ä¹ˆã€‚è¿™ä¸ªç±»çš„æ¦‚å¿µåœ¨å…¶ä»–å­˜å‚¨ç³»ç»Ÿä¸­æœ‰æ—¶è¢«ç§°ä¸º &amp;ldquo;é…ç½®æ–‡ä»¶&amp;rdquo;ã€‚
StorageClass èµ„æº æ¯ä¸ª StorageClass éƒ½åŒ…å« provisionerã€parameters å’Œ reclaimPolicy å­—æ®µï¼Œ è¿™äº›å­—æ®µä¼šåœ¨ StorageClass éœ€è¦åŠ¨æ€åˆ†é… PersistentVolume æ—¶ä¼šä½¿ç”¨åˆ°ã€‚
StorageClass å¯¹è±¡çš„å‘½åå¾ˆé‡è¦ï¼Œç”¨æˆ·ä½¿ç”¨è¿™ä¸ªå‘½åæ¥è¯·æ±‚ç”Ÿæˆä¸€ä¸ªç‰¹å®šçš„ç±»ã€‚ å½“åˆ›å»º StorageClass å¯¹è±¡æ—¶ï¼Œç®¡ç†å‘˜è®¾ç½® StorageClass å¯¹è±¡çš„å‘½åå’Œå…¶ä»–å‚æ•°ï¼Œä¸€æ—¦åˆ›å»ºäº†å¯¹è±¡å°±ä¸èƒ½å†å¯¹å…¶æ›´æ–°ã€‚
ç®¡ç†å‘˜å¯ä»¥ä¸ºæ²¡æœ‰ç”³è¯·ç»‘å®šåˆ°ç‰¹å®š StorageClass çš„ PVC æŒ‡å®šä¸€ä¸ªé»˜è®¤çš„å­˜å‚¨ç±» ï¼š æ›´å¤šè¯¦æƒ…è¯·å‚é˜… PersistentVolumeClaim ç« èŠ‚ã€‚
apiVersion: storage.k8s.io/v1 kind: StorageClass metadata: name: standard provisioner: kubernetes.io/aws-ebs parameters: type: gp2 reclaimPolicy: Retain allowVolumeExpansion: true mountOptions: - debug volumeBindingMode: Immediate å­˜å‚¨åˆ†é…å™¨ æ¯ä¸ª StorageClass éƒ½æœ‰ä¸€ä¸ªåˆ†é…å™¨ï¼Œç”¨æ¥å†³å®šä½¿ç”¨å“ªä¸ªå·æ’ä»¶åˆ†é… PVã€‚è¯¥å­—æ®µå¿…é¡»æŒ‡å®šã€‚</description>
    </item>
    
    <item>
      <title>äº‘æ§åˆ¶å™¨ç®¡ç†å™¨çš„åŸºç¡€æ¦‚å¿µ</title>
      <link>https://lijun.in/concepts/architecture/cloud-controller/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/architecture/cloud-controller/</guid>
      <description>äº‘æ§åˆ¶å™¨ç®¡ç†å™¨ï¼ˆcloud controller managerï¼ŒCCMï¼‰è¿™ä¸ªæ¦‚å¿µ ï¼ˆä¸è¦ä¸äºŒè¿›åˆ¶æ–‡ä»¶æ··æ·†ï¼‰åˆ›å»ºçš„åˆè¡·æ˜¯ä¸ºäº†è®©ç‰¹å®šçš„äº‘æœåŠ¡ä¾›åº”å•†ä»£ç å’Œ Kubernetes æ ¸å¿ƒç›¸äº’ç‹¬ç«‹æ¼”åŒ–ã€‚äº‘æ§åˆ¶å™¨ç®¡ç†å™¨ä¸å…¶ä»–ä¸»è¦ç»„ä»¶ï¼ˆå¦‚ Kubernetes æ§åˆ¶å™¨ç®¡ç†å™¨ï¼ŒAPI æœåŠ¡å™¨å’Œè°ƒåº¦ç¨‹åºï¼‰ä¸€èµ·è¿è¡Œã€‚å®ƒä¹Ÿå¯ä»¥ä½œä¸º Kubernetes çš„æ’ä»¶å¯åŠ¨ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä¼šè¿è¡Œåœ¨ Kubernetes ä¹‹ä¸Šã€‚
äº‘æ§åˆ¶å™¨ç®¡ç†å™¨åŸºäºæ’ä»¶æœºåˆ¶è®¾è®¡ï¼Œå…è®¸æ–°çš„äº‘æœåŠ¡ä¾›åº”å•†é€šè¿‡æ’ä»¶è½»æ¾åœ°ä¸ Kubernetes é›†æˆã€‚ç›®å‰å·²ç»æœ‰åœ¨ Kubernetes ä¸ŠåŠ å…¥æ–°çš„äº‘æœåŠ¡ä¾›åº”å•†è®¡åˆ’ï¼Œå¹¶ä¸ºäº‘æœåŠ¡ä¾›åº”å•†æä¾›ä»åŸå…ˆçš„æ—§æ¨¡å¼è¿ç§»åˆ°æ–° CCM æ¨¡å¼çš„æ–¹æ¡ˆã€‚
æœ¬æ–‡è®¨è®ºäº†äº‘æ§åˆ¶å™¨ç®¡ç†å™¨èƒŒåçš„æ¦‚å¿µï¼Œå¹¶æä¾›äº†ç›¸å…³åŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯ã€‚
è¿™æ˜¯æ²¡æœ‰äº‘æ§åˆ¶å™¨ç®¡ç†å™¨çš„ Kubernetes é›†ç¾¤çš„æ¶æ„ï¼š
è®¾è®¡ åœ¨ä¸Šå›¾ä¸­ï¼ŒKubernetes å’Œäº‘æœåŠ¡ä¾›åº”å•†é€šè¿‡å‡ ä¸ªä¸åŒçš„ç»„ä»¶è¿›è¡Œäº†é›†æˆï¼Œåˆ†åˆ«æ˜¯ï¼š
 Kubelet Kubernetes æ§åˆ¶ç®¡ç†å™¨ Kubernetes API æœåŠ¡å™¨  CCM æ•´åˆäº†å‰ä¸‰ä¸ªç»„ä»¶ä¸­çš„æ‰€æœ‰ä¾èµ–äºäº‘çš„é€»è¾‘ï¼Œä»¥åˆ›å»ºä¸äº‘çš„å•ä¸€é›†æˆç‚¹ã€‚CCM çš„æ–°æ¶æ„å¦‚ä¸‹æ‰€ç¤ºï¼š
CCM çš„ç»„æˆéƒ¨åˆ† CCM æ‰“ç ´äº† Kubernetes æ§åˆ¶å™¨ç®¡ç†å™¨ï¼ˆKCMï¼‰çš„ä¸€äº›åŠŸèƒ½ï¼Œå¹¶å°†å…¶ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹è¿è¡Œã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒæ‰“ç ´äº† KCM ä¸­ä¾èµ–äºäº‘çš„æ§åˆ¶å™¨ã€‚KCM å…·æœ‰ä»¥ä¸‹ä¾èµ–äºäº‘çš„æ§åˆ¶å™¨ï¼š
 èŠ‚ç‚¹æ§åˆ¶å™¨ å·æ§åˆ¶å™¨ è·¯ç”±æ§åˆ¶å™¨ æœåŠ¡æ§åˆ¶å™¨  åœ¨ 1.9 ç‰ˆæœ¬ä¸­ï¼ŒCCM è¿è¡Œå‰è¿°åˆ—è¡¨ä¸­çš„ä»¥ä¸‹æ§åˆ¶å™¨ï¼š
 èŠ‚ç‚¹æ§åˆ¶å™¨ è·¯ç”±æ§åˆ¶å™¨ æœåŠ¡æ§åˆ¶å™¨  æ³¨æ„å·æ§åˆ¶å™¨ä¸å±äº CCMï¼Œç”±äºå…¶ä¸­æ¶‰åŠåˆ°çš„å¤æ‚æ€§å’Œå¯¹ç°æœ‰ä¾›åº”å•†ç‰¹å®šå·çš„é€»è¾‘æŠ½è±¡ï¼Œå› æ­¤å†³å®šäº†å·æ§åˆ¶å™¨ä¸ä¼šè¢«ç§»åŠ¨åˆ° CCM ä¹‹ä¸­ã€‚
ä½¿ç”¨ CCM æ”¯æŒ volume çš„æœ€åˆè®¡åˆ’æ˜¯ä½¿ç”¨ Flex volume æ¥æ”¯æŒå¯æ’æ‹”å·ï¼Œä½†æ˜¯ç°åœ¨æ­£åœ¨è®¡åˆ’ä¸€é¡¹åä¸º CSI çš„é¡¹ç›®ä»¥å–ä»£ Flexã€‚</description>
    </item>
    
    <item>
      <title>äº‘é©±åŠ¨</title>
      <link>https://lijun.in/concepts/cluster-administration/cloud-providers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/cluster-administration/cloud-providers/</guid>
      <description>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ç®¡ç†è¿è¡Œåœ¨ç‰¹å®šäº‘é©±åŠ¨ä¸Šçš„ Kubernetes é›†ç¾¤ã€‚
kubeadm kubeadm æ˜¯åˆ›å»º kubernetes é›†ç¾¤çš„ä¸€ç§æµè¡Œé€‰æ‹©ã€‚ kubeadm é€šè¿‡æä¾›é…ç½®é€‰é¡¹æ¥æŒ‡å®šäº‘é©±åŠ¨çš„é…ç½®ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå…¸å‹çš„é€‚ç”¨äºâ€œæ ‘å†…â€äº‘é©±åŠ¨çš„ kubeadm é…ç½®å¦‚ä¸‹ï¼š
apiVersion: kubeadm.k8s.io/v1beta2 kind: InitConfiguration nodeRegistration: kubeletExtraArgs: cloud-provider: &amp;#34;openstack&amp;#34; cloud-config: &amp;#34;/etc/kubernetes/cloud.conf&amp;#34; --- apiVersion: kubeadm.k8s.io/v1beta2 kind: ClusterConfiguration kubernetesVersion: v1.13.0 apiServer: extraArgs: cloud-provider: &amp;#34;openstack&amp;#34; cloud-config: &amp;#34;/etc/kubernetes/cloud.conf&amp;#34; extraVolumes: - name: cloud hostPath: &amp;#34;/etc/kubernetes/cloud.conf&amp;#34; mountPath: &amp;#34;/etc/kubernetes/cloud.conf&amp;#34; controllerManager: extraArgs: cloud-provider: &amp;#34;openstack&amp;#34; cloud-config: &amp;#34;/etc/kubernetes/cloud.conf&amp;#34; extraVolumes: - name: cloud hostPath: &amp;#34;/etc/kubernetes/cloud.conf&amp;#34; mountPath: &amp;#34;/etc/kubernetes/cloud.conf&amp;#34; â€œæ ‘å†…â€çš„äº‘é©±åŠ¨é€šå¸¸éœ€è¦åœ¨å‘½ä»¤è¡Œä¸­ä¸º kube-apiserverã€kube-controller-manager å’Œ kubelet æŒ‡å®š --cloud-provider å’Œ --cloud-configã€‚åœ¨ --cloud-config ä¸­ä¸ºæ¯ä¸ªä¾›åº”å•†æŒ‡å®šçš„æ–‡ä»¶çš„å†…å®¹ä¹ŸåŒæ ·éœ€è¦å†™åœ¨ä¸‹é¢ã€‚ å¯¹äºæ‰€æœ‰å¤–éƒ¨äº‘é©±åŠ¨ï¼Œè¯·éµå¾ªç‹¬ç«‹äº‘å­˜å‚¨åº“çš„è¯´æ˜ï¼Œæˆ–æµè§ˆæ‰€æœ‰ç‰ˆæœ¬åº“æ¸…å•
AWS æœ¬èŠ‚ä»‹ç»åœ¨ Amazon Web Services ä¸Šè¿è¡Œ Kubernetes æ—¶å¯ä»¥ä½¿ç”¨çš„æ‰€æœ‰é…ç½®ã€‚ å¦‚æœå¸Œæœ›ä½¿ç”¨æ­¤å¤–éƒ¨äº‘é©±åŠ¨ï¼Œå…¶ä»£ç åº“ä½äº kubernetes/cloud-provider-aws</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Kube-router ä½œä¸º NetworkPolicy</title>
      <link>https://lijun.in/tasks/administer-cluster/network-policy-provider/kube-router-network-policy/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/network-policy-provider/kube-router-network-policy/</guid>
      <description>æœ¬é¡µå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Kube-router ä½œä¸º NetworkPolicyã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} æ‚¨éœ€è¦æ‹¥æœ‰ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Kubernetes é›†ç¾¤ã€‚å¦‚æœæ‚¨è¿˜æ²¡æœ‰é›†ç¾¤ï¼Œå¯ä»¥ä½¿ç”¨ä»»æ„çš„é›†ç¾¤å®‰è£…å™¨å¦‚ Kopsï¼ŒBootkubeï¼ŒKubeadm ç­‰åˆ›å»ºä¸€ä¸ªã€‚
å®‰è£… Kube-router æ’ä»¶ Kube-router æ’ä»¶è‡ªå¸¦ä¸€ä¸ªNetwork Policy æ§åˆ¶å™¨ï¼Œç›‘è§†æ¥è‡ªäºKubernetes API server çš„ NetworkPolicy å’Œ pods çš„å˜åŒ–ï¼Œæ ¹æ®ç­–ç•¥æŒ‡ç¤ºé…ç½® iptables è§„åˆ™å’Œ ipsets æ¥å…è®¸æˆ–é˜»æ­¢æµé‡ã€‚è¯·æ ¹æ® å°è¯•é€šè¿‡é›†ç¾¤å®‰è£…å™¨ä½¿ç”¨ Kube-router æŒ‡å—å®‰è£… Kube-router æ’ä»¶ã€‚
. heading &amp;ldquo;whatsnext&amp;rdquo; %}} åœ¨æ‚¨å®‰è£… Kube-router æ’ä»¶åï¼Œå¯ä»¥æ ¹æ® å£°æ˜ Network Policy å»å°è¯•ä½¿ç”¨ Kubernetes NetworkPolicyã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨å‡†å…¥æ§åˆ¶å™¨</title>
      <link>https://lijun.in/reference/access-authn-authz/admission-controllers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/access-authn-authz/admission-controllers/</guid>
      <description>æ­¤é¡µé¢æ¦‚è¿°äº†å‡†å…¥æ§åˆ¶å™¨ã€‚
ä»€ä¹ˆæ˜¯å‡†å…¥æ§åˆ¶æ’ä»¶ï¼Ÿ å‡†å…¥æ§åˆ¶å™¨æ˜¯ä¸€æ®µä»£ç ï¼Œå®ƒä¼šåœ¨è¯·æ±‚é€šè¿‡è®¤è¯å’Œæˆæƒä¹‹åã€å¯¹è±¡è¢«æŒä¹…åŒ–ä¹‹å‰æ‹¦æˆªåˆ°è¾¾ API æœåŠ¡å™¨çš„è¯·æ±‚ã€‚æ§åˆ¶å™¨ç”±ä¸‹é¢çš„åˆ—è¡¨ç»„æˆï¼Œå¹¶ç¼–è¯‘è¿› kube-apiserver äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¹¶ä¸”åªèƒ½ç”±é›†ç¾¤ç®¡ç†å‘˜é…ç½®ã€‚åœ¨è¯¥åˆ—è¡¨ä¸­ï¼Œæœ‰ä¸¤ä¸ªç‰¹æ®Šçš„æ§åˆ¶å™¨ï¼šMutatingAdmissionWebhook å’Œ ValidatingAdmissionWebhookã€‚å®ƒä»¬æ ¹æ® API ä¸­çš„é…ç½®ï¼Œåˆ†åˆ«æ‰§è¡Œå˜æ›´å’ŒéªŒè¯å‡†å…¥æ§åˆ¶ webhookã€‚
å‡†å…¥æ§åˆ¶å™¨å¯ä»¥æ‰§è¡Œ â€œéªŒè¯â€ å’Œ/æˆ– â€œå˜æ›´â€ æ“ä½œã€‚å˜æ›´ï¼ˆmutatingï¼‰æ§åˆ¶å™¨å¯ä»¥ä¿®æ”¹è¢«å…¶æ¥å—çš„å¯¹è±¡ï¼›éªŒè¯ï¼ˆvalidatingï¼‰æ§åˆ¶å™¨åˆ™ä¸è¡Œã€‚
å‡†å…¥æ§åˆ¶è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µã€‚ç¬¬ä¸€é˜¶æ®µï¼Œè¿è¡Œå˜æ›´å‡†å…¥æ§åˆ¶å™¨ã€‚ç¬¬äºŒé˜¶æ®µï¼Œè¿è¡ŒéªŒè¯å‡†å…¥æ§åˆ¶å™¨ã€‚ å†æ¬¡æé†’ï¼ŒæŸäº›æ§åˆ¶å™¨æ—¢æ˜¯å˜æ›´å‡†å…¥æ§åˆ¶å™¨åˆæ˜¯éªŒè¯å‡†å…¥æ§åˆ¶å™¨ã€‚
å¦‚æœä»»ä½•ä¸€ä¸ªé˜¶æ®µçš„ä»»ä½•æ§åˆ¶å™¨æ‹’ç»äº†è¯¥è¯·æ±‚ï¼Œåˆ™æ•´ä¸ªè¯·æ±‚å°†ç«‹å³è¢«æ‹’ç»ï¼Œå¹¶å‘ç»ˆç«¯ç”¨æˆ·è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚
æœ€åï¼Œé™¤äº†å¯¹å¯¹è±¡è¿›è¡Œå˜æ›´å¤–ï¼Œå‡†å…¥æ§åˆ¶å™¨è¿˜å¯ä»¥æœ‰å…¶å®ƒä½œç”¨ï¼šå°†ç›¸å…³èµ„æºä½œä¸ºè¯·æ±‚å¤„ç†çš„ä¸€éƒ¨åˆ†è¿›è¡Œå˜æ›´ã€‚ å¢åŠ ä½¿ç”¨é…é¢å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ç¤ºä¾‹ï¼Œè¯´æ˜äº†è¿™æ ·åšçš„å¿…è¦æ€§ã€‚ æ­¤ç±»ç”¨æ³•éƒ½éœ€è¦ç›¸åº”çš„å›æ”¶æˆ–å›è°ƒè¿‡ç¨‹ï¼Œå› ä¸ºä»»ä¸€å‡†å…¥æ§åˆ¶å™¨éƒ½æ— æ³•ç¡®å®šæŸä¸ªè¯·èƒ½å¦é€šè¿‡æ‰€æœ‰å…¶å®ƒå‡†å…¥æ§åˆ¶å™¨ã€‚
ä¸ºä»€ä¹ˆéœ€è¦å‡†å…¥æ§åˆ¶å™¨ï¼Ÿ Kubernetes çš„è®¸å¤šé«˜çº§åŠŸèƒ½éƒ½è¦æ±‚å¯ç”¨ä¸€ä¸ªå‡†å…¥æ§åˆ¶å™¨ï¼Œä»¥ä¾¿æ­£ç¡®åœ°æ”¯æŒè¯¥ç‰¹æ€§ã€‚å› æ­¤ï¼Œæ²¡æœ‰æ­£ç¡®é…ç½®å‡†å…¥æ§åˆ¶å™¨çš„ Kubernetes API æœåŠ¡å™¨æ˜¯ä¸å®Œæ•´çš„ï¼Œå®ƒæ— æ³•æ”¯æŒæ‚¨æœŸæœ›çš„æ‰€æœ‰ç‰¹æ€§ã€‚
å¦‚ä½•å¯ç”¨ä¸€ä¸ªå‡†å…¥æ§åˆ¶å™¨ï¼Ÿ Kubernetes API æœåŠ¡å™¨çš„ enable-admission-plugins æ ‡å¿—ï¼Œå®ƒæŒ‡å®šäº†ä¸€ä¸ªç”¨äºåœ¨é›†ç¾¤ä¿®æ”¹å¯¹è±¡ä¹‹å‰è°ƒç”¨çš„ï¼ˆä»¥é€—å·åˆ†éš”çš„ï¼‰å‡†å…¥æ§åˆ¶æ’ä»¶é¡ºåºåˆ—è¡¨ã€‚
ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‘½ä»¤å°±å¯ç”¨äº† NamespaceLifecycle å’Œ LimitRanger å‡†å…¥æ§åˆ¶æ’ä»¶ï¼š
kube-apiserver --enable-admission-plugins=NamespaceLifecycle,LimitRanger ... . note &amp;gt;}}
æ ¹æ®æ‚¨ Kubernetes é›†ç¾¤çš„éƒ¨ç½²æ–¹å¼ä»¥åŠ API æœåŠ¡å™¨çš„å¯åŠ¨æ–¹å¼çš„ä¸åŒï¼Œæ‚¨å¯èƒ½éœ€è¦ä»¥ä¸åŒçš„æ–¹å¼åº”ç”¨è®¾ç½®ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœå°† API æœåŠ¡å™¨éƒ¨ç½²ä¸º systemd æœåŠ¡ï¼Œä½ å¯èƒ½éœ€è¦ä¿®æ”¹ systemd å•å…ƒæ–‡ä»¶ï¼› å¦‚æœä»¥è‡ªæ‰˜ç®¡æ–¹å¼éƒ¨ç½² Kubernetesï¼Œä½ å¯èƒ½éœ€è¦ä¿®æ”¹ API æœåŠ¡å™¨çš„æ¸…å•æ–‡ä»¶ã€‚ . /note &amp;gt;}}
æ€ä¹ˆå…³é—­å‡†å…¥æ§åˆ¶å™¨ï¼Ÿ Kubernetes API æœåŠ¡å™¨çš„ disable-admission-plugins æ ‡å¿—ï¼Œä¼šå°†ä¼ å…¥çš„ï¼ˆä»¥é€—å·åˆ†éš”çš„ï¼‰å‡†å…¥æ§åˆ¶æ’ä»¶åˆ—è¡¨ç¦ç”¨ï¼Œå³ä½¿æ˜¯é»˜è®¤å¯ç”¨çš„æ’ä»¶ä¹Ÿä¼šè¢«ç¦ç”¨ã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨å·¥ä½œé˜Ÿåˆ—è¿›è¡Œç²—ç²’åº¦å¹¶è¡Œå¤„ç†</title>
      <link>https://lijun.in/tasks/job/coarse-parallel-processing-work-queue/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/job/coarse-parallel-processing-work-queue/</guid>
      <description>æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¼šè¿è¡ŒåŒ…å«å¤šä¸ªå¹¶è¡Œå·¥ä½œè¿›ç¨‹çš„ Kubernetes Jobã€‚
æœ¬ä¾‹ä¸­ï¼Œæ¯ä¸ª Pod ä¸€æ—¦è¢«åˆ›å»ºï¼Œä¼šç«‹å³ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–èµ°ä¸€ä¸ªå·¥ä½œå•å…ƒå¹¶å®Œæˆå®ƒï¼Œç„¶åå°†å·¥ä½œå•å…ƒä»é˜Ÿåˆ—ä¸­åˆ é™¤åå†é€€å‡ºã€‚
ä¸‹é¢æ˜¯æœ¬æ¬¡ç¤ºä¾‹çš„ä¸»è¦æ­¥éª¤ï¼š
  å¯åŠ¨ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ RabbitMQï¼Œä½ ä¹Ÿå¯ä»¥ç”¨å…¶ä»–çš„æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ã€‚åœ¨å®é™…å·¥ä½œç¯å¢ƒä¸­ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€æ¬¡æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ç„¶ååœ¨å¤šä¸ªä»»åŠ¡ä¸­é‡å¤ä½¿ç”¨ã€‚
  åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ”¾ä¸Šæ¶ˆæ¯æ•°æ® æ¯ä¸ªæ¶ˆæ¯è¡¨ç¤ºä¸€ä¸ªè¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚æœ¬ä¾‹ä¸­ï¼Œæ¯ä¸ªæ¶ˆæ¯æ˜¯ä¸€ä¸ªæ•´æ•°å€¼ã€‚æˆ‘ä»¬å°†åŸºäºè¿™ä¸ªæ•´æ•°å€¼æ‰§è¡Œå¾ˆé•¿çš„è®¡ç®—æ“ä½œã€‚
  å¯åŠ¨ä¸€ä¸ªåœ¨é˜Ÿåˆ—ä¸­æ‰§è¡Œè¿™äº›ä»»åŠ¡çš„ Jobã€‚è¯¥ Job å¯åŠ¨å¤šä¸ª Podã€‚æ¯ä¸ª Pod ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–èµ°ä¸€ä¸ªä»»åŠ¡ï¼Œå¤„ç†å®ƒï¼Œç„¶åé‡å¤æ‰§è¡Œï¼Œç›´åˆ°é˜Ÿåˆ—çš„é˜Ÿå°¾ã€‚
  . heading &amp;ldquo;prerequisites&amp;rdquo; %}} è¦ç†Ÿæ‚‰ Job åŸºæœ¬ç”¨æ³•ï¼ˆéå¹¶è¡Œçš„ï¼‰ï¼Œè¯·å‚è€ƒ Jobã€‚
. include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å¯åŠ¨æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ æœ¬ä¾‹ä½¿ç”¨äº† RabbitMQï¼Œä½¿ç”¨å…¶ä»– AMQP ç±»å‹çš„æ¶ˆæ¯æœåŠ¡åº”è¯¥æ¯”è¾ƒå®¹æ˜“ã€‚
åœ¨å®é™…å·¥ä½œä¸­ï¼Œåœ¨é›†ç¾¤ä¸­ä¸€æ¬¡æ€§éƒ¨ç½²æŸä¸ªæ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡ï¼Œä¹‹ååœ¨å¾ˆå¤š Job ä¸­å¤ç”¨ï¼ŒåŒ…æ‹¬éœ€è¦é•¿æœŸè¿è¡Œçš„æœåŠ¡ã€‚
æŒ‰ä¸‹é¢çš„æ–¹æ³•å¯åŠ¨ RabbitMQï¼š
$ kubectl create -f https://raw.githubusercontent.com/kubernetes/kubernetes/release-1.3/examples/celery-rabbitmq/rabbitmq-service.yaml service &amp;#34;rabbitmq-service&amp;#34; created $ kubectl create -f https://raw.githubusercontent.com/kubernetes/kubernetes/release-1.3/examples/celery-rabbitmq/rabbitmq-controller.yaml replicationcontroller &amp;#34;rabbitmq-controller&amp;#34; created æˆ‘ä»¬ä»…ç”¨åˆ° celery-rabbitmq ç¤ºä¾‹ ä¸­æè¿°çš„éƒ¨åˆ†åŠŸèƒ½ã€‚</description>
    </item>
    
    <item>
      <title>å·å¿«ç…§ç±»</title>
      <link>https://lijun.in/concepts/storage/volume-snapshot-classes/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/storage/volume-snapshot-classes/</guid>
      <description>æœ¬æ–‡æ¡£æè¿°äº† Kubernetes ä¸­ VolumeSnapshotClass çš„æ¦‚å¿µã€‚ å»ºè®®ç†Ÿæ‚‰å·å¿«ç…§ï¼ˆVolume Snapshotsï¼‰å’Œå­˜å‚¨ç±»ï¼ˆStorage Classï¼‰ã€‚
ä»‹ç» å°±åƒ StorageClass ä¸ºç®¡ç†å‘˜æä¾›äº†ä¸€ç§åœ¨é…ç½®å·æ—¶æè¿°å­˜å‚¨â€œç±»â€çš„æ–¹æ³•ï¼ŒVolumeSnapshotClass æä¾›äº†ä¸€ç§åœ¨é…ç½®å·å¿«ç…§æ—¶æè¿°å­˜å‚¨â€œç±»â€çš„æ–¹æ³•ã€‚
VolumeSnapshotClass èµ„æº æ¯ä¸ª VolumeSnapshotClass éƒ½åŒ…å« driver ã€deletionPolicy å’Œ parameters å­—æ®µï¼Œå½“éœ€è¦åŠ¨æ€é…ç½®å±äºè¯¥ç±»çš„ VolumeSnapshot æ—¶ä½¿ç”¨ã€‚
VolumeSnapshotClass å¯¹è±¡çš„åç§°å¾ˆé‡è¦ï¼Œæ˜¯ç”¨æˆ·å¯ä»¥è¯·æ±‚ç‰¹å®šç±»çš„æ–¹å¼ã€‚ ç®¡ç†å‘˜åœ¨é¦–æ¬¡åˆ›å»º VolumeSnapshotClass å¯¹è±¡æ—¶è®¾ç½®ç±»çš„åç§°å’Œå…¶ä»–å‚æ•°ï¼Œå¯¹è±¡ä¸€æ—¦åˆ›å»ºå°±æ— æ³•æ›´æ–°ã€‚
ç®¡ç†å‘˜å¯ä»¥ä¸ºä¸è¯·æ±‚ä»»ä½•ç‰¹å®šç±»ç»‘å®šçš„ VolumeSnapshots æŒ‡å®šé»˜è®¤çš„ VolumeSnapshotClassã€‚
apiVersion: snapshot.storage.k8s.io/v1beta1 kind: VolumeSnapshotClass metadata: name: csi-hostpath-snapclass driver: hostpath.csi.k8s.io deletionPolicy: Delete parameters: é©±åŠ¨ç¨‹åº å·å¿«ç…§ç±»æœ‰ä¸€ä¸ªé©±åŠ¨ç¨‹åºï¼Œç”¨äºç¡®å®šé…ç½® VolumeSnapshot çš„ CSI å·æ’ä»¶ã€‚ å¿…é¡»æŒ‡å®šæ­¤å­—æ®µã€‚
åˆ é™¤ç­–ç•¥ å·å¿«ç…§ç±»å…·æœ‰ deletionPolicy å±æ€§ã€‚ç”¨æˆ·å¯ä»¥é…ç½®å½“æ‰€ç»‘å®šçš„ VolumeSnapshot å¯¹è±¡å°†è¢«åˆ é™¤æ—¶ï¼Œå¦‚ä½•å¤„ç† VolumeSnapshotContent å¯¹è±¡ã€‚å·å¿«ç…§çš„è¿™ä¸ªç­–ç•¥å¯ä»¥æ˜¯ Retain æˆ–è€… Deleteã€‚è¿™ä¸ªç­–ç•¥å­—æ®µå¿…é¡»æŒ‡å®šã€‚
å¦‚æœåˆ é™¤ç­–ç•¥æ˜¯ Deleteï¼Œé‚£ä¹ˆåº•å±‚çš„å­˜å‚¨å¿«ç…§ä¼šå’Œ VolumeSnapshotContent å¯¹è±¡ä¸€èµ·åˆ é™¤ã€‚å¦‚æœåˆ é™¤ç­–ç•¥æ˜¯ Retainï¼Œé‚£ä¹ˆåº•å±‚å¿«ç…§å’Œ VolumeSnapshotContent å¯¹è±¡éƒ½ä¼šè¢«ä¿ç•™ã€‚</description>
    </item>
    
    <item>
      <title>å‘½åç©ºé—´</title>
      <link>https://lijun.in/concepts/overview/working-with-objects/namespaces/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/overview/working-with-objects/namespaces/</guid>
      <description>Kubernetes æ”¯æŒå¤šä¸ªè™šæ‹Ÿé›†ç¾¤ï¼Œå®ƒä»¬åº•å±‚ä¾èµ–äºåŒä¸€ä¸ªç‰©ç†é›†ç¾¤ã€‚ è¿™äº›è™šæ‹Ÿé›†ç¾¤è¢«ç§°ä¸ºå‘½åç©ºé—´ã€‚
ä½•æ—¶ä½¿ç”¨å¤šä¸ªå‘½åç©ºé—´ å‘½åç©ºé—´é€‚ç”¨äºå­˜åœ¨å¾ˆå¤šè·¨å¤šä¸ªå›¢é˜Ÿæˆ–é¡¹ç›®çš„ç”¨æˆ·çš„åœºæ™¯ã€‚å¯¹äºåªæœ‰å‡ åˆ°å‡ åä¸ªç”¨æˆ·çš„é›†ç¾¤ï¼Œæ ¹æœ¬ä¸éœ€è¦åˆ›å»ºæˆ–è€ƒè™‘å‘½åç©ºé—´ã€‚å½“éœ€è¦åç§°ç©ºé—´æä¾›çš„åŠŸèƒ½æ—¶ï¼Œè¯·å¼€å§‹ä½¿ç”¨å®ƒä»¬ã€‚
å‘½åç©ºé—´ä¸ºåç§°æä¾›äº†ä¸€ä¸ªèŒƒå›´ã€‚èµ„æºçš„åç§°éœ€è¦åœ¨å‘½åç©ºé—´å†…æ˜¯å”¯ä¸€çš„ï¼Œä½†ä¸èƒ½è·¨å‘½åç©ºé—´ã€‚å‘½åç©ºé—´ä¸èƒ½ç›¸äº’åµŒå¥—ï¼Œæ¯ä¸ª Kubernetes èµ„æºåªèƒ½åœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸­ã€‚
å‘½åç©ºé—´æ˜¯åœ¨å¤šä¸ªç”¨æˆ·ä¹‹é—´åˆ’åˆ†é›†ç¾¤èµ„æºçš„ä¸€ç§æ–¹æ³•ï¼ˆé€šè¿‡èµ„æºé…é¢ï¼‰ã€‚
åœ¨ Kubernetes æœªæ¥ç‰ˆæœ¬ä¸­ï¼Œç›¸åŒå‘½åç©ºé—´ä¸­çš„å¯¹è±¡é»˜è®¤å°†å…·æœ‰ç›¸åŒçš„è®¿é—®æ§åˆ¶ç­–ç•¥ã€‚
ä¸éœ€è¦ä½¿ç”¨å¤šä¸ªå‘½åç©ºé—´æ¥åˆ†éš”è½»å¾®ä¸åŒçš„èµ„æºï¼Œä¾‹å¦‚åŒä¸€è½¯ä»¶çš„ä¸åŒç‰ˆæœ¬ï¼šä½¿ç”¨ labels æ¥åŒºåˆ†åŒä¸€å‘½åç©ºé—´ä¸­çš„ä¸åŒèµ„æºã€‚
ä½¿ç”¨å‘½åç©ºé—´ å‘½åç©ºé—´çš„åˆ›å»ºå’Œåˆ é™¤å·²åœ¨å‘½åç©ºé—´çš„ç®¡ç†æŒ‡å—æ–‡æ¡£ä¸­è¿›è¡Œäº†æè¿°ã€‚
æŸ¥çœ‹å‘½åç©ºé—´ æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ—å‡ºé›†ç¾¤ä¸­ç°å­˜çš„å‘½åç©ºé—´ï¼š
kubectl get namespace NAME STATUS AGE default Active 1d kube-system Active 1d kube-public Active 1d Kubernetes ä¼šåˆ›å»ºä¸‰ä¸ªåˆå§‹å‘½åç©ºé—´ï¼š
 default æ²¡æœ‰æŒ‡æ˜ä½¿ç”¨å…¶å®ƒå‘½åç©ºé—´çš„å¯¹è±¡æ‰€ä½¿ç”¨çš„é»˜è®¤å‘½åç©ºé—´  kube-system The namespace for objects created by the Kubernetes system &amp;ndash;&amp;gt; kube-system Kubernetes ç³»ç»Ÿåˆ›å»ºå¯¹è±¡æ‰€ä½¿ç”¨çš„å‘½åç©ºé—´  kube-public This namespace is created automatically and is readable by all users (including those not authenticated).</description>
    </item>
    
    <item>
      <title>å®¢æˆ·ç«¯åº“</title>
      <link>https://lijun.in/reference/using-api/client-libraries/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/using-api/client-libraries/</guid>
      <description>æœ¬é¡µé¢åŒ…å«åŸºäºå„ç§ç¼–ç¨‹è¯­è¨€ä½¿ç”¨ Kubernetes API çš„å®¢æˆ·ç«¯åº“æ¦‚è¿°ã€‚
åœ¨ä½¿ç”¨ Kubernetes REST API ç¼–å†™åº”ç”¨ç¨‹åºæ—¶ï¼Œ æ‚¨å¹¶ä¸éœ€è¦è‡ªå·±å®ç° API è°ƒç”¨å’Œ â€œè¯·æ±‚/å“åº”â€ ç±»å‹ã€‚ æ‚¨å¯ä»¥æ ¹æ®è‡ªå·±çš„ç¼–ç¨‹è¯­è¨€éœ€è¦é€‰æ‹©ä½¿ç”¨åˆé€‚çš„å®¢æˆ·ç«¯åº“ã€‚
å®¢æˆ·ç«¯åº“é€šå¸¸ä¸ºæ‚¨å¤„ç†è¯¸å¦‚èº«ä»½éªŒè¯ä¹‹ç±»çš„å¸¸è§ä»»åŠ¡ã€‚ å¦‚æœ API å®¢æˆ·ç«¯åœ¨ Kubernetes é›†ç¾¤ä¸­è¿è¡Œï¼Œå¤§å¤šæ•°å®¢æˆ·ç«¯åº“å¯ä»¥å‘ç°å¹¶ä½¿ç”¨ Kubernetes æœåŠ¡å¸æˆ·è¿›è¡Œèº«ä»½éªŒè¯ï¼Œ æˆ–è€…èƒ½å¤Ÿç†è§£ kubeconfig æ–‡ä»¶ æ ¼å¼æ¥è¯»å–å‡­æ®å’Œ API æœåŠ¡å™¨åœ°å€ã€‚
å®˜æ–¹æ”¯æŒçš„ Kubernetes å®¢æˆ·ç«¯åº“ ä»¥ä¸‹å®¢æˆ·ç«¯åº“ç”± Kubernetes SIG API Machinery æ­£å¼ç»´æŠ¤ã€‚
   è¯­è¨€ å®¢æˆ·ç«¯åº“ æ ·ä¾‹ç¨‹åº     Go github.com/kubernetes/client-go/ æµè§ˆ   Python github.com/kubernetes-client/python/ æµè§ˆ   Java github.com/kubernetes-client/java æµè§ˆ   dotnet github.com/kubernetes-client/csharp æµè§ˆ   JavaScript github.com/kubernetes-client/javascript æµè§ˆ   Haskell github.</description>
    </item>
    
    <item>
      <title>å®¹å™¨ç”Ÿå‘½å‘¨æœŸé’©å­</title>
      <link>https://lijun.in/concepts/containers/container-lifecycle-hooks/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/containers/container-lifecycle-hooks/</guid>
      <description>è¿™ä¸ªé¡µé¢æè¿°äº† kubelet ç®¡ç†çš„å®¹å™¨å¦‚ä½•ä½¿ç”¨å®¹å™¨ç”Ÿå‘½å‘¨æœŸé’©å­æ¡†æ¶æ¥è¿è¡Œåœ¨å…¶ç®¡ç†ç”Ÿå‘½å‘¨æœŸä¸­ç”±äº‹ä»¶è§¦å‘çš„ä»£ç ã€‚
æ¦‚è¿° ç±»ä¼¼äºè®¸å¤šå…·æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­ç»„ä»¶çš„ç¼–ç¨‹è¯­è¨€æ¡†æ¶ï¼Œä¾‹å¦‚ Angularã€Kubernetes ä¸ºå®¹å™¨æä¾›äº†ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚ é’©å­ä½¿å®¹å™¨èƒ½å¤Ÿäº†è§£å…¶ç®¡ç†ç”Ÿå‘½å‘¨æœŸä¸­çš„äº‹ä»¶ï¼Œå¹¶åœ¨æ‰§è¡Œç›¸åº”çš„ç”Ÿå‘½å‘¨æœŸé’©å­æ—¶è¿è¡Œåœ¨å¤„ç†ç¨‹åºä¸­å®ç°çš„ä»£ç ã€‚
å®¹å™¨é’©å­ æœ‰ä¸¤ä¸ªé’©å­æš´éœ²åœ¨å®¹å™¨ä¸­:
PostStart
è¿™ä¸ªé’©å­åœ¨åˆ›å»ºå®¹å™¨ä¹‹åç«‹å³æ‰§è¡Œã€‚ ä½†æ˜¯ï¼Œä¸èƒ½ä¿è¯é’©å­ä¼šåœ¨å®¹å™¨å…¥å£ç‚¹ä¹‹å‰æ‰§è¡Œã€‚ æ²¡æœ‰å‚æ•°ä¼ é€’ç»™å¤„ç†ç¨‹åºã€‚
PreStop
åœ¨å®¹å™¨ç»ˆæ­¢ä¹‹å‰æ˜¯å¦ç«‹å³è°ƒç”¨æ­¤é’©å­ï¼Œå–å†³äº API çš„è¯·æ±‚æˆ–è€…ç®¡ç†äº‹ä»¶ï¼Œç±»ä¼¼æ´»åŠ¨æ¢é’ˆæ•…éšœã€èµ„æºæŠ¢å ã€èµ„æºç«äº‰ç­‰ç­‰ã€‚ å¦‚æœå®¹å™¨å·²ç»å®Œå…¨å¤„äºç»ˆæ­¢æˆ–è€…å®ŒæˆçŠ¶æ€ï¼Œåˆ™å¯¹ preStop é’©å­çš„è°ƒç”¨å°†å¤±è´¥ã€‚ å®ƒæ˜¯é˜»å¡çš„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯åŒæ­¥çš„ï¼Œå› æ­¤å®ƒå¿…é¡»åœ¨åˆ é™¤å®¹å™¨çš„è°ƒç”¨ä¹‹å‰å®Œæˆã€‚ æ²¡æœ‰å‚æ•°ä¼ é€’ç»™å¤„ç†ç¨‹åºã€‚
æœ‰å…³ç»ˆæ­¢è¡Œä¸ºçš„æ›´è¯¦ç»†æè¿°ï¼Œè¯·å‚è§ç»ˆæ­¢ Podã€‚
é’©å­å¤„ç†ç¨‹åºçš„å®ç° å®¹å™¨å¯ä»¥é€šè¿‡å®ç°å’Œæ³¨å†Œè¯¥é’©å­çš„å¤„ç†ç¨‹åºæ¥è®¿é—®è¯¥é’©å­ã€‚ é’ˆå¯¹å®¹å™¨ï¼Œæœ‰ä¸¤ç§ç±»å‹çš„é’©å­å¤„ç†ç¨‹åºå¯ä¾›å®ç°ï¼š
 Exec - æ‰§è¡Œä¸€ä¸ªç‰¹å®šçš„å‘½ä»¤ï¼Œä¾‹å¦‚ pre-stop.shï¼Œåœ¨å®¹å™¨çš„ cgroups å’Œåç§°ç©ºé—´ä¸­ã€‚ å‘½ä»¤æ‰€æ¶ˆè€—çš„èµ„æºæ ¹æ®å®¹å™¨è¿›è¡Œè®¡ç®—ã€‚ HTTP - å¯¹å®¹å™¨ä¸Šçš„ç‰¹å®šç«¯ç‚¹æ‰§è¡Œ HTTP è¯·æ±‚ã€‚  é’©å­å¤„ç†ç¨‹åºæ‰§è¡Œ å½“è°ƒç”¨å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†é’©å­æ—¶ï¼ŒKubernetes ç®¡ç†ç³»ç»Ÿåœ¨ä¸ºè¯¥é’©å­æ³¨å†Œçš„å®¹å™¨ä¸­æ‰§è¡Œå¤„ç†ç¨‹åºã€‚
é’©å­å¤„ç†ç¨‹åºè°ƒç”¨åœ¨åŒ…å«å®¹å™¨çš„ Pod ä¸Šä¸‹æ–‡ä¸­æ˜¯åŒæ­¥çš„ã€‚ è¿™æ„å‘³ç€å¯¹äº PostStart é’©å­ï¼Œå®¹å™¨å…¥å£ç‚¹å’Œé’©å­å¼‚æ­¥è§¦å‘ã€‚ ä½†æ˜¯ï¼Œå¦‚æœé’©å­è¿è¡Œæˆ–æŒ‚èµ·çš„æ—¶é—´å¤ªé•¿ï¼Œåˆ™å®¹å™¨æ— æ³•è¾¾åˆ° running çŠ¶æ€ã€‚
è¡Œä¸ºä¸ PreStop é’©å­çš„è¡Œä¸ºç±»ä¼¼ã€‚ å¦‚æœé’©å­åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æŒ‚èµ·ï¼ŒPod é˜¶æ®µå°†ä¿æŒåœ¨ Terminating çŠ¶æ€ï¼Œå¹¶åœ¨ Pod ç»“æŸçš„ terminationGracePeriodSeconds ä¹‹åè¢«æ€æ­»ã€‚ å¦‚æœ PostStart æˆ– PreStop é’©å­å¤±è´¥ï¼Œå®ƒä¼šæ€æ­»å®¹å™¨ã€‚</description>
    </item>
    
    <item>
      <title>åº”ç”¨è¿æ¥åˆ° Service</title>
      <link>https://lijun.in/concepts/services-networking/connect-applications-service/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/services-networking/connect-applications-service/</guid>
      <description>Kubernetes è¿æ¥å®¹å™¨æ¨¡å‹ æ—¢ç„¶æœ‰äº†ä¸€ä¸ªæŒç»­è¿è¡Œã€å¯å¤åˆ¶çš„åº”ç”¨ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿå°†å®ƒæš´éœ²åˆ°ç½‘ç»œä¸Šã€‚ åœ¨è®¨è®º Kubernetes ç½‘ç»œè¿æ¥çš„æ–¹å¼ä¹‹å‰ï¼Œéå¸¸å€¼å¾—ä¸ Docker ä¸­ â€œæ­£å¸¸â€ æ–¹å¼çš„ç½‘ç»œè¿›è¡Œå¯¹æ¯”ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocker ä½¿ç”¨ç§æœ‰ä¸»æœºç½‘ç»œè¿æ¥ï¼Œåªèƒ½ä¸åŒåœ¨ä¸€å°æœºå™¨ä¸Šçš„å®¹å™¨è¿›è¡Œé€šä¿¡ã€‚ ä¸ºäº†å®ç°å®¹å™¨çš„è·¨èŠ‚ç‚¹é€šä¿¡ï¼Œå¿…é¡»åœ¨æœºå™¨è‡ªå·±çš„ IP ä¸Šä¸ºè¿™äº›å®¹å™¨åˆ†é…ç«¯å£ï¼Œä¸ºå®¹å™¨è¿›è¡Œç«¯å£è½¬å‘æˆ–è€…ä»£ç†ã€‚
å¤šä¸ªå¼€å‘äººå‘˜ä¹‹é—´åè°ƒç«¯å£çš„ä½¿ç”¨å¾ˆéš¾åšåˆ°è§„æ¨¡åŒ–ï¼Œé‚£äº›éš¾ä»¥æ§åˆ¶çš„é›†ç¾¤çº§åˆ«çš„é—®é¢˜ï¼Œéƒ½ä¼šäº¤ç”±ç”¨æˆ·è‡ªå·±å»å¤„ç†ã€‚ Kubernetes å‡è®¾ Pod å¯ä¸å…¶å®ƒ Pod é€šä¿¡ï¼Œä¸ç®¡å®ƒä»¬åœ¨å“ªä¸ªä¸»æœºä¸Šã€‚ æˆ‘ä»¬ç»™ Pod åˆ†é…å±äºè‡ªå·±çš„é›†ç¾¤ç§æœ‰ IP åœ°å€ï¼Œæ‰€ä»¥æ²¡å¿…è¦åœ¨ Pod æˆ–æ˜ å°„åˆ°çš„å®¹å™¨çš„ç«¯å£å’Œä¸»æœºç«¯å£ä¹‹é—´æ˜¾å¼åœ°åˆ›å»ºè¿æ¥ã€‚ è¿™è¡¨æ˜äº†åœ¨ Pod å†…çš„å®¹å™¨éƒ½èƒ½å¤Ÿè¿æ¥åˆ°æœ¬åœ°çš„æ¯ä¸ªç«¯å£ï¼Œé›†ç¾¤ä¸­çš„æ‰€æœ‰ Pod ä¸éœ€è¦é€šè¿‡ NAT è½¬æ¢å°±èƒ½å¤Ÿäº’ç›¸çœ‹åˆ°ã€‚ æ–‡æ¡£çš„å‰©ä½™éƒ¨åˆ†å°†è¯¦è¿°å¦‚ä½•åœ¨ä¸€ä¸ªç½‘ç»œæ¨¡å‹ä¹‹ä¸Šè¿è¡Œå¯é çš„æœåŠ¡ã€‚
è¯¥æŒ‡å—ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ Nginx server æ¥æ¼”ç¤ºå¹¶è¯æ˜è°ˆåˆ°çš„æ¦‚å¿µã€‚åŒæ ·çš„åŸåˆ™ä¹Ÿä½“ç°åœ¨ä¸€ä¸ªæ›´åŠ å®Œæ•´çš„ Jenkins CI åº”ç”¨ ä¸­ã€‚
åœ¨é›†ç¾¤ä¸­æš´éœ² Pod æˆ‘ä»¬åœ¨ä¹‹å‰çš„ç¤ºä¾‹ä¸­å·²ç»åšè¿‡ï¼Œç„¶è€Œå†è®©æˆ‘é‡è¯•ä¸€æ¬¡ï¼Œè¿™æ¬¡èšç„¦åœ¨ç½‘ç»œè¿æ¥çš„è§†è§’ã€‚ åˆ›å»ºä¸€ä¸ª Nginx Podï¼ŒæŒ‡ç¤ºå®ƒå…·æœ‰ä¸€ä¸ªå®¹å™¨ç«¯å£çš„è¯´æ˜ï¼š
codenew file=&amp;quot;service/networking/run-my-nginx.yaml&amp;rdquo; &amp;gt;}}
è¿™ä½¿å¾—å¯ä»¥ä»é›†ç¾¤ä¸­ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹æ¥è®¿é—®å®ƒã€‚æ£€æŸ¥èŠ‚ç‚¹ï¼Œè¯¥ Pod æ­£åœ¨è¿è¡Œï¼š
kubectl apply -f ./run-my-nginx.yaml kubectl get pods -l run=my-nginx -o wide NAME READY STATUS RESTARTS AGE IP NODE my-nginx-3800858182-jr4a2 1/1 Running 0 13s 10.</description>
    </item>
    
    <item>
      <title>æ§åˆ¶å™¨</title>
      <link>https://lijun.in/concepts/architecture/controller/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/architecture/controller/</guid>
      <description>åœ¨æœºå™¨äººæŠ€æœ¯å’Œè‡ªåŠ¨åŒ–ä¸­ï¼Œæ§åˆ¶ç¯æ˜¯ä¸€ä¸ªæ§åˆ¶ç³»ç»ŸçŠ¶æ€çš„ä¸ç»ˆæ­¢çš„å¾ªç¯ã€‚
è¿™æ˜¯ä¸€ä¸ªæ§åˆ¶ç¯çš„ä¾‹å­ï¼šæˆ¿é—´é‡Œçš„æ¸©åº¦è‡ªåŠ¨è°ƒèŠ‚å™¨ã€‚
å½“ä½ è®¾ç½®äº†æ¸©åº¦ï¼Œå‘Šè¯‰äº†æ¸©åº¦è‡ªåŠ¨è°ƒèŠ‚å™¨ä½ çš„æœŸæœ›çŠ¶æ€ã€‚æˆ¿é—´çš„å®é™…æ¸©åº¦æ˜¯å½“å‰çŠ¶æ€ã€‚é€šè¿‡å¯¹è®¾å¤‡çš„å¼€å…³æ§åˆ¶ï¼Œæ¸©åº¦è‡ªåŠ¨è°ƒèŠ‚å™¨è®©å…¶å½“å‰çŠ¶æ€æ¥è¿‘æœŸæœ›çŠ¶æ€ã€‚
æ§åˆ¶å™¨æ¨¡å¼ ä¸€ä¸ªæ§åˆ¶å™¨è‡³å°‘è¿½è¸ªä¸€ç§ç±»å‹çš„ Kubernetes èµ„æºã€‚è¿™äº›å¯¹è±¡æœ‰ä¸€ä¸ªä»£è¡¨æœŸæœ›çŠ¶æ€çš„æŒ‡å®šå­—æ®µã€‚æ§åˆ¶å™¨è´Ÿè´£ç¡®ä¿å…¶è¿½è¸ªçš„èµ„æºå¯¹è±¡çš„å½“å‰çŠ¶æ€æ¥è¿‘æœŸæœ›çŠ¶æ€ã€‚
æ§åˆ¶å™¨å¯èƒ½ä¼šè‡ªè¡Œæ‰§è¡Œæ“ä½œï¼›åœ¨ Kubernetes ä¸­æ›´å¸¸è§çš„æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ä¼šå‘é€ä¿¡æ¯ç»™ API æœåŠ¡å™¨ï¼Œè¿™ä¼šæœ‰å‰¯ä½œç”¨ã€‚çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚
ä¸€äº›å†…ç½®çš„æ§åˆ¶å™¨ï¼Œæ¯”å¦‚å‘½åç©ºé—´æ§åˆ¶å™¨ï¼Œé’ˆå¯¹æ²¡æœ‰æŒ‡å®šå‘½åç©ºé—´çš„å¯¹è±¡ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œè¿™ç¯‡æ–‡ç« æ²¡æœ‰è¯¦ç»†ä»‹ç»è¿™äº›ç»†èŠ‚ã€‚
é€šè¿‡ API æœåŠ¡å™¨æ¥æ§åˆ¶ æ§åˆ¶å™¨æ˜¯ä¸€ä¸ª Kubernetes å†…ç½®æ§åˆ¶å™¨çš„ä¾‹å­ã€‚å†…ç½®æ§åˆ¶å™¨é€šè¿‡å’Œé›†ç¾¤ API æœåŠ¡å™¨äº¤äº’æ¥ç®¡ç†çŠ¶æ€ã€‚
Job æ˜¯ä¸€ç§ Kubernetes èµ„æºï¼Œå®ƒè¿è¡Œä¸€ä¸ª ï¼Œæˆ–è€…å¯èƒ½æ˜¯å¤šä¸ª Podï¼Œæ¥æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ç„¶ååœæ­¢ã€‚
ï¼ˆä¸€æ—¦è¢«è°ƒåº¦äº†ï¼‰ï¼Œå¯¹ kubelet æ¥è¯´ Pod å¯¹è±¡å°±ä¼šå˜æˆäº†æœŸæœ›çŠ¶æ€çš„ä¸€éƒ¨åˆ†ã€‚
åœ¨é›†ç¾¤ä¸­ï¼Œå½“ Job æ§åˆ¶å™¨æ‹¿åˆ°æ–°ä»»åŠ¡æ—¶ï¼Œå®ƒä¼šä¿è¯ä¸€ç»„ Node èŠ‚ç‚¹ä¸Šçš„ kubelet å¯ä»¥è¿è¡Œæ­£ç¡®æ•°é‡çš„ Pod æ¥å®Œæˆå·¥ä½œã€‚ Job æ§åˆ¶å™¨ä¸ä¼šè‡ªå·±è¿è¡Œä»»ä½•çš„ Pod æˆ–è€…å®¹å™¨ã€‚Job æ§åˆ¶å™¨æ˜¯é€šçŸ¥ API æœåŠ¡å™¨æ¥åˆ›å»ºæˆ–è€…ç§»é™¤ Podã€‚ control-planeä¸­çš„å…¶å®ƒç»„ä»¶æ ¹æ®æ–°çš„æ¶ˆæ¯è€Œååº”ï¼ˆè°ƒåº¦æ–°çš„ Pod å¹¶ä¸”è¿è¡Œå®ƒï¼‰å¹¶ä¸”æœ€ç»ˆå®Œæˆå·¥ä½œã€‚
åˆ›å»ºæ–° Job åï¼Œæ‰€æœŸæœ›çš„çŠ¶æ€å°±æ˜¯å®Œæˆè¿™ä¸ª Jobã€‚Job æ§åˆ¶å™¨ä¼šè®© Job çš„å½“å‰çŠ¶æ€ä¸æ–­æ¥è¿‘æœŸæœ›çŠ¶æ€ï¼šåˆ›å»ºä¸º Job è¦å®Œæˆå·¥ä½œæ‰€éœ€è¦çš„ Podï¼Œä½¿ Job çš„çŠ¶æ€æ¥è¿‘å®Œæˆã€‚
æ§åˆ¶å™¨ä¹Ÿä¼šæ›´æ–°é…ç½®å¯¹è±¡ã€‚ä¾‹å¦‚ï¼šä¸€æ—¦ Job çš„å·¥ä½œå®Œæˆäº†ï¼ŒJob æ§åˆ¶å™¨ä¼šæ›´æ–° Job å¯¹è±¡çš„çŠ¶æ€ä¸º Finishedã€‚</description>
    </item>
    
    <item>
      <title>æ ¡éªŒèŠ‚ç‚¹è®¾ç½®</title>
      <link>https://lijun.in/setup/best-practices/node-conformance/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/best-practices/node-conformance/</guid>
      <description>. toc &amp;gt;}}
èŠ‚ç‚¹ä¸€è‡´æ€§æµ‹è¯• èŠ‚ç‚¹ä¸€è‡´æ€§æµ‹è¯• æ˜¯ä¸€ä¸ªå®¹å™¨åŒ–çš„æµ‹è¯•æ¡†æ¶ï¼Œæä¾›äº†é’ˆå¯¹èŠ‚ç‚¹çš„ç³»ç»ŸéªŒè¯å’ŒåŠŸèƒ½æµ‹è¯•ã€‚
è¯¥æµ‹è¯•ä¸»è¦æ£€æµ‹èŠ‚ç‚¹æ˜¯å¦æ»¡è¶³ Kubernetes çš„æœ€ä½è¦æ±‚ï¼Œé€šè¿‡æ£€æµ‹çš„èŠ‚ç‚¹æœ‰èµ„æ ¼åŠ å…¥ Kubernetes é›†ç¾¤ã€‚
é™åˆ¶ åœ¨ Kubernetes 1.5 ç‰ˆä¸­ï¼ŒèŠ‚ç‚¹ä¸€è‡´æ€§æµ‹è¯•å…·æœ‰ä»¥ä¸‹é™åˆ¶ï¼š
 èŠ‚ç‚¹ä¸€è‡´æ€§æµ‹è¯•åªæ”¯æŒ Docker ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶ç¯å¢ƒã€‚  èŠ‚ç‚¹çš„å‰ææ¡ä»¶ è¦è¿è¡ŒèŠ‚ç‚¹ä¸€è‡´æ€§æµ‹è¯•ï¼ŒèŠ‚ç‚¹å¿…é¡»æ»¡è¶³ä¸æ ‡å‡† Kubernetes èŠ‚ç‚¹ç›¸åŒçš„å‰ææ¡ä»¶ã€‚èŠ‚ç‚¹è‡³å°‘åº”å®‰è£…ä»¥ä¸‹å®ˆæŠ¤ç¨‹åºï¼š
 å®¹å™¨è¿è¡Œæ—¶ (Docker) Kubelet  è¿è¡ŒèŠ‚ç‚¹ä¸€è‡´æ€§æµ‹è¯• è¦è¿è¡ŒèŠ‚ç‚¹ä¸€è‡´æ€§æµ‹è¯•ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
 å› ä¸ºæµ‹è¯•æ¡†æ¶ä¼šå¯åŠ¨ä¸€ä¸ªæœ¬åœ°çš„ master æ¥æµ‹è¯• Kubeletï¼Œæ‰€ä»¥å°† Kubelet æŒ‡å‘æœ¬æœº `&amp;ndash;api-servers=&amp;quot;http://localhost:8080&amp;rdquo;ã€‚ è¿˜æœ‰ä¸€äº›å…¶ä»– Kubelet å‚æ•°å¯èƒ½éœ€è¦æ³¨æ„ï¼š   --pod-cidrï¼š å¦‚æœä½¿ç”¨ kubenetï¼Œ éœ€è¦ä¸º Kubelet ä»»æ„æŒ‡å®šä¸€ä¸ª CIDRï¼Œ ä¾‹å¦‚ --pod-cidr=10.180.0.0/24ã€‚ --cloud-providerï¼š å¦‚æœä½¿ç”¨ --cloud-provider=gceï¼Œéœ€è¦ç§»é™¤è¿™ä¸ªå‚æ•°æ¥è¿è¡Œæµ‹è¯•ã€‚  ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡ŒèŠ‚ç‚¹ä¸€è‡´æ€§æµ‹è¯•ï¼š  # $CONFIG_DIR is the pod manifest path of your Kubelet. # $LOG_DIR is the test output path.</description>
    </item>
    
    <item>
      <title>ç”¨æˆ·è‡ªå®šä¹‰èµ„æºç‰ˆæœ¬</title>
      <link>https://lijun.in/tasks/access-kubernetes-api/custom-resources/custom-resource-definition-versioning/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-kubernetes-api/custom-resources/custom-resource-definition-versioning/</guid>
      <description>æœ¬é¡µä»‹ç»äº†å¦‚ä½•æ·»åŠ ç‰ˆæœ¬ä¿¡æ¯åˆ° [CustomResourceDefinitions](/docs/reference/generated/kubernetes-api/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#customresourcedefinition-v1beta1-apiextensions)ï¼Œå¦‚ä½•è¡¨ç¤º CustomResourceDefinitions çš„ç¨³å®šæ°´å¹³æˆ–è€…ç”¨ API ä¹‹é—´çš„è¡¨å¾çš„è½¬æ¢æé«˜æ‚¨çš„ API åˆ°ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ã€‚å®ƒè¿˜æè¿°äº†å¦‚ä½•å°†å¯¹è±¡ä»ä¸€ä¸ªç‰ˆæœ¬å‡çº§åˆ°å¦ä¸€ä¸ªç‰ˆæœ¬ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
 ç¡®ä¿æ‚¨çš„ Kubernetes é›†ç¾¤çš„ä¸»ç‰ˆæœ¬ä¸ºapiextensions.k8s.io/v1çš„1.16.0æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œapiextensions.k8s.io/v1beta1çš„1.11.0æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚   é˜…è¯» custom resourcesã€‚  æ¦‚è§ˆ . feature-state state=&amp;quot;stable&amp;rdquo; for_kubernetes_version=&amp;quot;1.16&amp;rdquo; &amp;gt;}}
CustomResourceDefinition API æä¾›äº†ç”¨äºå¼•å…¥å’Œå‡çº§çš„å·¥ä½œæµç¨‹åˆ° CustomResourceDefinition çš„æ–°ç‰ˆæœ¬ã€‚
åˆ›å»º CustomResourceDefinition æ—¶ï¼Œä¼šåœ¨ CustomResourceDefinition spec.versions åˆ—è¡¨è®¾ç½®é€‚å½“çš„ç¨³å®šçº§å’Œç‰ˆæœ¬å·ã€‚ä¾‹å¦‚v1beta1è¡¨ç¤ºç¬¬ä¸€ä¸ªç‰ˆæœ¬å°šæœªç¨³å®šã€‚æ‰€æœ‰è‡ªå®šä¹‰èµ„æºå¯¹è±¡å°†é¦–å…ˆå­˜å‚¨åœ¨è¿™ä¸ªç‰ˆæœ¬
åˆ›å»º CustomResourceDefinition åï¼Œå®¢æˆ·ç«¯å¯ä»¥å¼€å§‹ä½¿ç”¨ v1beta1 APIã€‚
ç¨åå¯èƒ½éœ€è¦æ·»åŠ æ–°ç‰ˆæœ¬ï¼Œä¾‹å¦‚ v1ã€‚
å¢åŠ ä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼š
 é€‰æ‹©ä¸€ç§è½¬åŒ–ç­–ç•¥ã€‚ç”±äºè‡ªå®šä¹‰èµ„æºå¯¹è±¡éœ€è¦èƒ½å¤Ÿä¸¤ç§ç‰ˆæœ¬éƒ½å¯ç”¨ï¼Œè¿™æ„å‘³ç€å®ƒä»¬æœ‰æ—¶ä¼šä»¥ä¸å­˜å‚¨ç‰ˆæœ¬ä¸åŒçš„ç‰ˆæœ¬ã€‚ä¸ºäº†èƒ½å¤Ÿåšåˆ°è¿™ä¸€ç‚¹ï¼Œ æœ‰æ—¶å¿…é¡»åœ¨å®ƒä»¬å­˜å‚¨çš„ç‰ˆæœ¬å’Œæä¾›çš„ç‰ˆæœ¬ã€‚å¦‚æœè½¬æ¢æ¶‰åŠç»“æ„å˜æ›´ï¼Œå¹¶ä¸”éœ€è¦è‡ªå®šä¹‰é€»è¾‘ï¼Œè½¬æ¢åº”è¯¥ä½¿ç”¨ webhookã€‚å¦‚æœæ²¡æœ‰ç»“æ„å˜æ›´ï¼Œ åˆ™ä½¿ç”¨ None é»˜è®¤è½¬æ¢ç­–ç•¥ï¼Œä¸åŒç‰ˆæœ¬æ—¶åªæœ‰apiVersionå­—æ®µæœ‰å˜æ›´ã€‚ å¦‚æœä½¿ç”¨è½¬æ¢ Webhookï¼Œè¯·åˆ›å»ºå¹¶éƒ¨ç½²è½¬æ¢ Webhookã€‚å¸Œæœ›çœ‹åˆ°æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§ Webhook conversionã€‚ æ›´æ–° CustomResourceDefinitionï¼Œæ¥å°†æ–°ç‰ˆæœ¬åŒ…å«åœ¨å…·æœ‰servedï¼štrueçš„ spec.</description>
    </item>
    
    <item>
      <title>è¿è¡Œä¸€ä¸ªæœ‰çŠ¶æ€çš„åº”ç”¨ç¨‹åº</title>
      <link>https://lijun.in/tasks/run-application/run-replicated-stateful-application/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/run-application/run-replicated-stateful-application/</guid>
      <description>è¯¥é¡µé¢æ˜¾ç¤ºå¦‚ä½•ä½¿ç”¨StatefulSet æ§åˆ¶å™¨å»è¿è¡Œä¸€ä¸ªæœ‰çŠ¶æ€çš„åº”ç”¨ç¨‹åºã€‚æ­¤ä¾‹æ˜¯ä¸€ä¸»å¤šä»çš„ MySQL é›†ç¾¤ã€‚
è¯·æ³¨æ„ è¿™ä¸æ˜¯ç”Ÿäº§é…ç½®ã€‚ é‡ç‚¹æ˜¯ï¼Œ MySQL è®¾ç½®ä¿ç•™åœ¨ä¸å®‰å…¨çš„é»˜è®¤å€¼ä¸Šï¼Œä½¿é‡ç‚¹æ”¾åœ¨ Kubernetes ä¸­è¿è¡Œæœ‰çŠ¶æ€åº”ç”¨ç¨‹åºçš„å¸¸è§„æ¨¡å¼ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}} . include &amp;ldquo;default-storage-class-prereqs.md&amp;rdquo; &amp;gt;}} æœ¬æ•™ç¨‹å‡å®šæ‚¨ç†Ÿæ‚‰ PersistentVolumes ä¸ StatefulSets, ä»¥åŠå…¶ä»–æ ¸å¿ƒæ¦‚å¿µï¼Œä¾‹å¦‚Pods, Services, ä¸ ConfigMaps. ç†Ÿæ‚‰ MySQL ä¼šæœ‰æ‰€å¸®åŠ©ï¼Œä½†æ˜¯æœ¬æ•™ç¨‹æ—¨åœ¨ä»‹ç»å¯¹å…¶ä»–ç³»ç»Ÿåº”è¯¥æœ‰ç”¨çš„å¸¸è§„æ¨¡å¼ã€‚  . heading &amp;ldquo;objectives&amp;rdquo; %}}  ä½¿ç”¨ StatefulSet æ§åˆ¶å™¨éƒ¨ç½²å¤åˆ¶çš„ MySQL æ‹“æ‰‘ã€‚ å‘é€ MySQL å®¢æˆ·ç«¯æµé‡ã€‚ è§‚å¯Ÿå¯¹å®•æœºçš„æŠµæŠ—åŠ›ã€‚ ç¼©æ”¾ StatefulSet çš„å¤§å°ã€‚  éƒ¨ç½² MySQL éƒ¨ç½² MySQL ç¤ºä¾‹ï¼ŒåŒ…å«ä¸€ä¸ª ConfigMapï¼Œä¸¤ä¸ª Servicesï¼Œä¸ä¸€ä¸ª StatefulSetã€‚
ConfigMap ä»ä»¥ä¸‹çš„ YAML é…ç½®æ–‡ä»¶åˆ›å»º ConfigMap ï¼š</description>
    </item>
    
    <item>
      <title>é…ç½® Pod çš„æœåŠ¡è´¨é‡</title>
      <link>https://lijun.in/tasks/configure-pod-container/quality-service-pod/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/quality-service-pod/</guid>
      <description>æœ¬æ–‡ä»‹ç»æ€æ ·é…ç½® Pod è®©å…¶è·å¾—ç‰¹å®šçš„æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰ç±»ã€‚Kubernetes ä½¿ç”¨ QoS ç±»æ¥å†³å®š Pod çš„è°ƒåº¦å’Œé©±é€ç­–ç•¥ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
QoS ç±» Kubernetes åˆ›å»º Pod æ—¶å°±ç»™å®ƒæŒ‡å®šäº†ä¸‹åˆ—ä¸€ç§ QoS ç±»ï¼š
 Guaranteed Burstable BestEffort  åˆ›å»ºå‘½åç©ºé—´ åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œä»¥ä¾¿å°†æœ¬ç»ƒä¹ æ‰€åˆ›å»ºçš„èµ„æºä¸é›†ç¾¤çš„å…¶ä½™èµ„æºç›¸éš”ç¦»ã€‚
kubectl create namespace qos-example åˆ›å»ºä¸€ä¸ª QoS ç±»ä¸º Guaranteed çš„ Pod å¯¹äº QoS ç±»ä¸º Guaranteed çš„ Podï¼š
 Pod ä¸­çš„æ¯ä¸ªå®¹å™¨å¿…é¡»æŒ‡å®šå†…å­˜è¯·æ±‚å’Œå†…å­˜é™åˆ¶ï¼Œå¹¶ä¸”ä¸¤è€…è¦ç›¸ç­‰ã€‚ Pod ä¸­çš„æ¯ä¸ªå®¹å™¨å¿…é¡»æŒ‡å®š CPU è¯·æ±‚å’Œ CPU é™åˆ¶ï¼Œå¹¶ä¸”ä¸¤è€…è¦ç›¸ç­‰ã€‚  ä¸‹é¢æ˜¯åŒ…å«ä¸€ä¸ªå®¹å™¨çš„ Pod é…ç½®æ–‡ä»¶ã€‚ å®¹å™¨è®¾ç½®äº†å†…å­˜è¯·æ±‚å’Œå†…å­˜é™åˆ¶ï¼Œå€¼éƒ½æ˜¯ 200 MiBã€‚ å®¹å™¨è®¾ç½®äº† CPU è¯·æ±‚å’Œ CPU é™åˆ¶ï¼Œå€¼éƒ½æ˜¯ 700 milliCPUï¼š</description>
    </item>
    
    <item>
      <title>é…ç½®å‘½åç©ºé—´çš„æœ€å°å’Œæœ€å¤§å†…å­˜çº¦æŸ</title>
      <link>https://lijun.in/tasks/administer-cluster/manage-resources/memory-constraint-namespace/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/manage-resources/memory-constraint-namespace/</guid>
      <description>æ­¤é¡µé¢ä»‹ç»å¦‚ä½•è®¾ç½®åœ¨å‘½åç©ºé—´ä¸­è¿è¡Œçš„å®¹å™¨ä½¿ç”¨çš„å†…å­˜çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚ æ‚¨å¯ä»¥åœ¨ [LimitRange](/docs/reference/generated/kubernetes-api/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#limitrange-v1-core)å¯¹è±¡ä¸­æŒ‡å®šæœ€å°å’Œæœ€å¤§å†…å­˜å€¼ã€‚ å¦‚æœ Pod ä¸æ»¡è¶³ LimitRange æ–½åŠ çš„çº¦æŸï¼Œåˆ™æ— æ³•åœ¨å‘½åç©ºé—´ä¸­åˆ›å»ºå®ƒã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹å¿…é¡»è‡³å°‘è¦æœ‰1 GiB çš„å†…å­˜ã€‚
åˆ›å»ºå‘½åç©ºé—´ åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œä»¥ä¾¿åœ¨æ­¤ç»ƒä¹ ä¸­åˆ›å»ºçš„èµ„æºä¸ç¾¤é›†çš„å…¶ä½™èµ„æºéš”ç¦»ã€‚
kubectl create namespace constraints-mem-example åˆ›å»º LimitRange å’Œ Pod ä¸‹é¢æ˜¯ LimitRange çš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;admin/resource/memory-constraints.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»º LimitRange:
kubectl create -f https://k8s.io/examples/admin/resource/memory-constraints.yaml --namespace=constraints-mem-example æŸ¥çœ‹ LimitRange çš„è¯¦æƒ…ï¼š
kubectl get limitrange mem-min-max-demo-lr --namespace=constraints-mem-example --output=yaml è¾“å‡ºæ˜¾ç¤ºé¢„æœŸçš„æœ€å°å’Œæœ€å¤§å†…å­˜çº¦æŸã€‚ ä½†è¯·æ³¨æ„ï¼Œå³ä½¿æ‚¨æ²¡æœ‰åœ¨ LimitRange çš„é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šé»˜è®¤å€¼ï¼Œä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºå®ƒä»¬ã€‚
 limits: - default: memory: 1Gi defaultRequest: memory: 1Gi max: memory: 1Gi min: memory: 500Mi type: Container ç°åœ¨ï¼Œåªè¦åœ¨ constraints-mem-example å‘½åç©ºé—´ä¸­åˆ›å»ºå®¹å™¨ï¼ŒKubernetes å°±ä¼šæ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ï¼š</description>
    </item>
    
    <item>
      <title>ğŸ’– - ä½¿ç”¨ kubeadm åˆ›å»ºä¸€ä¸ªå•ä¸»é›†ç¾¤</title>
      <link>https://lijun.in/setup/independent/create-cluster-kubeadm/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/independent/create-cluster-kubeadm/</guid>
      <description>kubeadm èƒ½å¸®åŠ©æ‚¨å»ºç«‹ä¸€ä¸ªå°å‹çš„ç¬¦åˆæœ€ä½³å®è·µçš„ Kubernetes é›†ç¾¤ã€‚é€šè¿‡ä½¿ç”¨ kubeadm, æ‚¨çš„é›†ç¾¤ä¼šç¬¦åˆ Kubernetes åˆè§„æ€§æµ‹è¯•çš„è¦æ±‚. Kubeadm ä¹Ÿæ”¯æŒå…¶ä»–çš„é›†ç¾¤ç”Ÿå‘½å‘¨æœŸæ“ä½œï¼Œæ¯”å¦‚å‡çº§ã€é™çº§å’Œç®¡ç†å¯åŠ¨å¼•å¯¼ä»¤ç‰Œã€‚
å› ä¸ºæ‚¨å¯ä»¥åœ¨ä¸åŒç±»å‹çš„æœºå™¨ï¼ˆæ¯”å¦‚ç¬”è®°æœ¬ã€æœåŠ¡å™¨å’Œæ ‘è“æ´¾ç­‰ï¼‰ä¸Šå®‰è£… kubeadmï¼Œå› æ­¤å®ƒéå¸¸é€‚åˆä¸ Terraform æˆ– Ansible è¿™ç±»è‡ªåŠ¨åŒ–ç®¡ç†ç³»ç»Ÿé›†æˆã€‚
kubeadm çš„ç®€å•ä¾¿æ·ä¸ºå¤§å®¶å¸¦æ¥äº†å¹¿æ³›çš„ç”¨æˆ·æ¡ˆä¾‹ï¼š
 æ–°ç”¨æˆ·å¯ä»¥ä» kubeadm å¼€å§‹æ¥è¯•ç”¨ Kubernetesã€‚ ç†Ÿæ‚‰ Kubernetes çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨ kubeadm å¿«é€Ÿæ­å»ºé›†ç¾¤å¹¶æµ‹è¯•ä»–ä»¬çš„åº”ç”¨ã€‚ å¤§å‹çš„é¡¹ç›®å¯ä»¥å°† kubeadm å’Œå…¶ä»–çš„å®‰è£…å·¥å…·ä¸€èµ·å½¢æˆä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„ç³»ç»Ÿã€‚  kubeadm çš„è®¾è®¡åˆè¡·æ˜¯ä¸ºæ–°ç”¨æˆ·æä¾›ä¸€ç§ä¾¿æ·çš„æ–¹å¼æ¥é¦–æ¬¡è¯•ç”¨ Kubernetesï¼Œ åŒæ—¶ä¹Ÿæ–¹ä¾¿è€ç”¨æˆ·æ­å»ºé›†ç¾¤æµ‹è¯•ä»–ä»¬çš„åº”ç”¨ã€‚ æ­¤å¤– kubeadm ä¹Ÿå¯ä»¥è·Ÿå…¶å®ƒç”Ÿæ€ç³»ç»Ÿä¸/æˆ–å®‰è£…å·¥å…·é›†æˆåˆ°ä¸€èµ·ï¼Œæä¾›æ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚
æ‚¨å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åœ¨æ”¯æŒ rpm æˆ– deb è½¯ä»¶åŒ…çš„æ“ä½œç³»ç»Ÿä¸Šå®‰è£… kubeadmã€‚å¯¹åº” kubeadm çš„ SIGï¼Œ SIG Cluster Lifecycleï¼Œ æä¾›äº†é¢„ç¼–è¯‘çš„è¿™ç±»å®‰è£…åŒ…ï¼Œå½“ç„¶æ‚¨ä¹Ÿå¯ä»¥è‡ªå·±åŸºäºæºç ä¸ºå…¶å®ƒæ“ä½œç³»ç»Ÿæ¥æ„é€ å®‰è£…åŒ…ã€‚
kubeadm æˆç†Ÿç¨‹åº¦    åŠŸèƒ½ æˆç†Ÿç¨‹åº¦     å‘½ä»¤è¡Œç”¨æˆ·ä½“éªŒ beta   åŠŸèƒ½å®ç° beta   é…ç½®æ–‡ä»¶ API alpha   è‡ªæ‰˜ç®¡ alpha   kubeadm alpha å­å‘½ä»¤ alpha   CoreDNS GA   åŠ¨æ€ Kubelet é…ç½® alpha    kubeadm çš„æ•´ä½“åŠŸèƒ½ç›®å‰è¿˜æ˜¯ Beta çŠ¶æ€ï¼Œç„¶è€Œå¾ˆå¿«åœ¨ 2018 å¹´å°±ä¼šè½¬æ¢æˆæ­£å¼å‘å¸ƒ (GA) çŠ¶æ€ã€‚ ä¸€äº›å­åŠŸèƒ½ï¼Œæ¯”å¦‚è‡ªæ‰˜ç®¡æˆ–è€…é…ç½®æ–‡ä»¶ API è¿˜åœ¨å¼€å‘è¿‡ç¨‹å½“ä¸­ã€‚ éšç€å·¥å…·çš„å‘å±•ï¼Œåˆ›å»ºé›†ç¾¤çš„æ–¹æ³•å¯èƒ½ä¼šæœ‰æ‰€å˜åŒ–ï¼Œä½†æ˜¯æ•´ä½“éƒ¨ç½²æ–¹æ¡ˆè¿˜æ˜¯æ¯”è¾ƒç¨³å®šçš„ã€‚ åœ¨ kubeadm alpha ä¸‹é¢çš„ä»»ä½•å‘½ä»¤éƒ½åªæ˜¯ alpha çŠ¶æ€ï¼Œç›®å‰åªæä¾›åˆæœŸé˜¶æ®µçš„æœåŠ¡ã€‚</description>
    </item>
    
    <item>
      <title>Ingress</title>
      <link>https://lijun.in/concepts/services-networking/ingress/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/services-networking/ingress/</guid>
      <description>feature-state for_k8s_version=&amp;quot;v1.1&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}} glossary_definition term_id=&amp;quot;ingress&amp;rdquo; length=&amp;quot;all&amp;rdquo; &amp;gt;}}
 èŠ‚ç‚¹ï¼ˆNodeï¼‰: Kubernetes é›†ç¾¤ä¸­å…¶ä¸­ä¸€å°å·¥ä½œæœºå™¨ï¼Œæ˜¯é›†ç¾¤çš„ä¸€éƒ¨åˆ†ã€‚ é›†ç¾¤ï¼ˆClusterï¼‰: ä¸€ç»„è¿è¡Œç¨‹åºï¼ˆè¿™äº›ç¨‹åºæ˜¯å®¹å™¨åŒ–çš„ï¼Œè¢« Kubernetes ç®¡ç†çš„ï¼‰çš„èŠ‚ç‚¹ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå’Œåœ¨å¤§å¤šæ•°å¸¸è§çš„Kuberneteséƒ¨ç½²æ–¹æ¡ˆï¼Œé›†ç¾¤ä¸­çš„èŠ‚ç‚¹éƒ½ä¸ä¼šæ˜¯å…¬å…±ç½‘ç»œã€‚ è¾¹ç¼˜è·¯ç”±å™¨ï¼ˆEdge routerï¼‰: åœ¨é›†ç¾¤ä¸­å¼ºåˆ¶æ€§æ‰§è¡Œé˜²ç«å¢™ç­–ç•¥çš„è·¯ç”±å™¨ï¼ˆrouterï¼‰ã€‚å¯ä»¥æ˜¯ç”±äº‘æä¾›å•†ç®¡ç†çš„ç½‘å…³ï¼Œä¹Ÿå¯ä»¥æ˜¯ç‰©ç†ç¡¬ä»¶ã€‚ é›†ç¾¤ç½‘ç»œï¼ˆCluster networkï¼‰: ä¸€ç»„é€»è¾‘æˆ–ç‰©ç†çš„é“¾æ¥ï¼Œæ ¹æ® Kubernetes ç½‘ç»œæ¨¡å‹ åœ¨é›†ç¾¤å†…å®ç°é€šä¿¡ã€‚ æœåŠ¡ï¼ˆServiceï¼‰ï¼šKubernetes Serviceæ ‡ç­¾é€‰æ‹©å™¨ï¼ˆselectorsï¼‰æ ‡è¯†çš„ä¸€ç»„ Podã€‚é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™å‡å®šæœåŠ¡åªå…·æœ‰åœ¨é›†ç¾¤ç½‘ç»œä¸­å¯è·¯ç”±çš„è™šæ‹Ÿ IPã€‚  å¯ä»¥å°† Ingress é…ç½®ä¸ºæä¾›æœåŠ¡å¤–éƒ¨å¯è®¿é—®çš„ URLã€è´Ÿè½½å‡è¡¡æµé‡ã€ç»ˆæ­¢ SSL / TLSï¼Œä»¥åŠæä¾›åŸºäºåç§°çš„è™šæ‹Ÿä¸»æœºã€‚Ingress æ§åˆ¶å™¨ é€šå¸¸è´Ÿè´£é€šè¿‡è´Ÿè½½å‡è¡¡å™¨æ¥å®ç° Ingressï¼Œå°½ç®¡å®ƒä¹Ÿå¯ä»¥é…ç½®è¾¹ç¼˜è·¯ç”±å™¨æˆ–å…¶ä»–å‰ç«¯æ¥å¸®åŠ©å¤„ç†æµé‡ã€‚
Ingress ä¸ä¼šå…¬å¼€ä»»æ„ç«¯å£æˆ–åè®®ã€‚ å°† HTTP å’Œ HTTPS ä»¥å¤–çš„æœåŠ¡å…¬å¼€åˆ° Internet æ—¶ï¼Œé€šå¸¸ä½¿ç”¨ Service.Type=NodePort æˆ–è€… Service.Type=LoadBalancer ç±»å‹çš„æœåŠ¡ã€‚
ç¯å¢ƒå‡†å¤‡ æ‚¨å¿…é¡»å…·æœ‰ ingress æ§åˆ¶å™¨ æ‰èƒ½æ»¡è¶³ Ingress çš„è¦æ±‚ã€‚ä»…åˆ›å»º Ingress èµ„æºæ— æ•ˆã€‚
æ‚¨å¯èƒ½éœ€è¦éƒ¨ç½² Ingress æ§åˆ¶å™¨ï¼Œä¾‹å¦‚ ingress-nginxã€‚æ‚¨å¯ä»¥ä»è®¸å¤šIngress æ§åˆ¶å™¨ ä¸­è¿›è¡Œé€‰æ‹©ã€‚
ç†æƒ³æƒ…å†µä¸‹ï¼Œæ‰€æœ‰ Ingress æ§åˆ¶å™¨éƒ½åº”ç¬¦åˆå‚è€ƒè§„èŒƒã€‚ä½†å®é™…ä¸Šï¼Œä¸åŒçš„ Ingress æ§åˆ¶å™¨æ“ä½œç•¥æœ‰ä¸åŒã€‚</description>
    </item>
    
    <item>
      <title>Ingress æ§åˆ¶å™¨</title>
      <link>https://lijun.in/concepts/services-networking/ingress-controllers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/services-networking/ingress-controllers/</guid>
      <description>ä¸ºäº†è®© Ingress èµ„æºå·¥ä½œï¼Œé›†ç¾¤å¿…é¡»æœ‰ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Ingress æ§åˆ¶å™¨ã€‚
ä¸ä½œä¸º kube-controller-manager å¯æ‰§è¡Œæ–‡ä»¶çš„ä¸€éƒ¨åˆ†è¿è¡Œçš„å…¶ä»–ç±»å‹çš„æ§åˆ¶å™¨ä¸åŒï¼ŒIngress æ§åˆ¶å™¨ä¸æ˜¯éšé›†ç¾¤è‡ªåŠ¨å¯åŠ¨çš„ã€‚ åŸºäºæ­¤é¡µé¢ï¼Œæ‚¨å¯é€‰æ‹©æœ€é€‚åˆæ‚¨çš„é›†ç¾¤çš„ ingress æ§åˆ¶å™¨å®ç°ã€‚
Kubernetes ä½œä¸ºä¸€ä¸ªé¡¹ç›®ï¼Œç›®å‰æ”¯æŒå’Œç»´æŠ¤ GCE å’Œ nginx æ§åˆ¶å™¨ã€‚
å…¶ä»–æ§åˆ¶å™¨  [AKS åº”ç”¨ç¨‹åºç½‘å…³ Ingress æ§åˆ¶å™¨]ä½¿ç”¨ Azure åº”ç”¨ç¨‹åºç½‘å…³å¯ç”¨AKS é›†ç¾¤ ingressã€‚ Ambassador API ç½‘å…³ï¼Œ ä¸€ä¸ªåŸºäº Envoy çš„ ingress æ§åˆ¶å™¨ï¼Œæœ‰ç€æ¥è‡ªç¤¾åŒº çš„æ”¯æŒå’Œæ¥è‡ª Datawire çš„å•†ä¸š æ”¯æŒã€‚ AppsCode Inc. ä¸ºæœ€å¹¿æ³›ä½¿ç”¨çš„åŸºäº HAProxy çš„ ingress æ§åˆ¶å™¨ Voyager æä¾›æ”¯æŒå’Œç»´æŠ¤ã€‚ AWS ALB Ingress æ§åˆ¶å™¨é€šè¿‡ AWS åº”ç”¨ Load Balancer å¯ç”¨ ingressã€‚ Contour æ˜¯ä¸€ä¸ªåŸºäº Envoy çš„ ingress æ§åˆ¶å™¨ï¼Œå®ƒç”± VMware æä¾›å’Œæ”¯æŒã€‚ Citrix ä¸ºå…¶ç¡¬ä»¶ï¼ˆMPXï¼‰ï¼Œè™šæ‹ŸåŒ–ï¼ˆVPXï¼‰å’Œ å…è´¹å®¹å™¨åŒ– (CPX) ADC æä¾›äº†ä¸€ä¸ª Ingress æ§åˆ¶å™¨ï¼Œç”¨äºè£¸é‡‘å±å’Œäº‘éƒ¨ç½²ã€‚ F5 Networks ä¸º ç”¨äº Kubernetes çš„ F5 BIG-IP æ§åˆ¶å™¨æä¾›æ”¯æŒå’Œç»´æŠ¤ã€‚ Gloo æ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäº Envoy çš„ ingress æ§åˆ¶å™¨ï¼Œå®ƒæä¾›äº† API ç½‘å…³åŠŸèƒ½ï¼Œæœ‰ç€æ¥è‡ª solo.</description>
    </item>
    
    <item>
      <title>kubeadm upgrade</title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-upgrade/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-upgrade/</guid>
      <description>kubeadm upgrade æ˜¯ä¸€ä¸ªå¯¹ç”¨æˆ·å‹å¥½çš„å‘½ä»¤ï¼Œå®ƒå°†å¤æ‚çš„å‡çº§é€»è¾‘åŒ…è£…åœ¨ä¸€ä¸ªå‘½ä»¤åé¢ï¼Œæ”¯æŒå‡çº§çš„è§„åˆ’å’Œå®é™…æ‰§è¡Œã€‚
kubeadm å‡çº§æŒ‡å— æœ¬æ–‡æ¡£æ¦‚è¿°äº†ä½¿ç”¨ kubeadm æ‰§è¡Œå‡çº§çš„æ­¥éª¤ã€‚ æœ‰å…³ kubeadm æ—§ç‰ˆæœ¬ï¼Œè¯·å‚é˜… Kubernetes ç½‘ç«™çš„æ—§ç‰ˆæ–‡æ¡£ã€‚
æ‚¨å¯ä»¥ä½¿ç”¨ kubeadm upgrade diff æ¥æŸ¥çœ‹å°†åº”ç”¨äºé™æ€ pod æ¸…å•çš„æ›´æ”¹ã€‚
è¦åœ¨ Kubernetes v1.13.0 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ä½¿ç”¨ kube-dns è¿›è¡Œå‡çº§ï¼Œè¯·éµå¾ªæœ¬æŒ‡å—ã€‚
åœ¨ Kubernetes v1.15.0 å’Œæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œkubeadm upgrade apply å’Œ kubeadm upgrade node ä¹Ÿå°†è‡ªåŠ¨ç»­è®¢è¯¥èŠ‚ç‚¹ä¸Šçš„ kubeadm æ‰˜ç®¡è¯ä¹¦ï¼ŒåŒ…æ‹¬å­˜å‚¨åœ¨ kubeconfig æ–‡ä»¶ä¸­çš„è¯ä¹¦ã€‚ è¦é€‰æ‹©é€€å‡ºï¼Œå¯ä»¥ä¼ é€’å‚æ•° --certificate-renewal=falseã€‚æœ‰å…³è¯ä¹¦ç»­è®¢çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·å‚è§è¯ä¹¦ç®¡ç†æ–‡æ¡£ã€‚
kubeadm upgrade plan . include &amp;ldquo;generated/kubeadm_upgrade_plan.md&amp;rdquo; &amp;gt;}}
kubeadm upgrade apply  . include &amp;ldquo;generated/kubeadm_upgrade_apply.md&amp;rdquo; &amp;gt;}}
kubeadm upgrade diff . include &amp;ldquo;generated/kubeadm_upgrade_diff.md&amp;rdquo; &amp;gt;}}
kubeadm upgrade node . include &amp;ldquo;generated/kubeadm_upgrade_node.</description>
    </item>
    
    <item>
      <title>PKI è¯ä¹¦å’Œè¦æ±‚</title>
      <link>https://lijun.in/setup/best-practices/certificates/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/best-practices/certificates/</guid>
      <description>Kubernetes éœ€è¦ PKI è¯ä¹¦æ‰èƒ½è¿›è¡ŒåŸºäº TLS çš„èº«ä»½éªŒè¯ã€‚å¦‚æœæ‚¨æ˜¯ä½¿ç”¨ kubeadm å®‰è£…çš„ Kubernetesï¼Œåˆ™ä¼šè‡ªåŠ¨ç”Ÿæˆé›†ç¾¤æ‰€éœ€çš„è¯ä¹¦ã€‚æ‚¨è¿˜å¯ä»¥ç”Ÿæˆè‡ªå·±çš„è¯ä¹¦ã€‚ä¾‹å¦‚ï¼Œä¸å°†ç§é’¥å­˜å‚¨åœ¨ API æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥è®©ç§é’¥æ›´åŠ å®‰å…¨ã€‚æ­¤é¡µé¢è¯´æ˜äº†é›†ç¾¤å¿…éœ€çš„è¯ä¹¦ã€‚
é›†ç¾¤æ˜¯å¦‚ä½•ä½¿ç”¨è¯ä¹¦çš„ Kubernetes éœ€è¦ PKI æ‰èƒ½æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
 Kubelet çš„å®¢æˆ·ç«¯è¯ä¹¦ï¼Œç”¨äº API æœåŠ¡å™¨èº«ä»½éªŒè¯ API æœåŠ¡å™¨ç«¯ç‚¹çš„è¯ä¹¦ é›†ç¾¤ç®¡ç†å‘˜çš„å®¢æˆ·ç«¯è¯ä¹¦ï¼Œç”¨äº API æœåŠ¡å™¨èº«ä»½è®¤è¯ API æœåŠ¡å™¨çš„å®¢æˆ·ç«¯è¯ä¹¦ï¼Œç”¨äºå’Œ Kubelet çš„ä¼šè¯ API æœåŠ¡å™¨çš„å®¢æˆ·ç«¯è¯ä¹¦ï¼Œç”¨äºå’Œ etcd çš„ä¼šè¯ æ§åˆ¶å™¨ç®¡ç†å™¨çš„å®¢æˆ·ç«¯è¯ä¹¦/kubeconfigï¼Œç”¨äºå’Œ API server çš„ä¼šè¯ è°ƒåº¦å™¨çš„å®¢æˆ·ç«¯è¯ä¹¦/kubeconfigï¼Œç”¨äºå’Œ API server çš„ä¼šè¯ å‰ç«¯ä»£ç† çš„å®¢æˆ·ç«¯åŠæœåŠ¡ç«¯è¯ä¹¦  . note &amp;gt;}}
åªæœ‰å½“æ‚¨è¿è¡Œ kube-proxy å¹¶è¦æ”¯æŒæ‰©å±• API æœåŠ¡å™¨æ—¶ï¼Œæ‰éœ€è¦ front-proxy è¯ä¹¦ . /note &amp;gt;}}
etcd è¿˜å®ç°äº†åŒå‘ TLS æ¥å¯¹å®¢æˆ·ç«¯å’Œå¯¹å…¶ä»–å¯¹ç­‰èŠ‚ç‚¹è¿›è¡Œèº«ä»½éªŒè¯ã€‚
è¯ä¹¦å­˜æ”¾çš„ä½ç½® å¦‚æœä½ æ˜¯é€šè¿‡ kubeadm å®‰è£…çš„ Kubernetesï¼Œæ‰€æœ‰è¯ä¹¦éƒ½å­˜æ”¾åœ¨ /etc/kubernetes/pki ç›®å½•ä¸‹ã€‚æœ¬æ–‡æ‰€æœ‰ç›¸å…³çš„è·¯å¾„éƒ½æ˜¯åŸºäºè¯¥è·¯å¾„çš„ç›¸å¯¹è·¯å¾„ã€‚
æ‰‹åŠ¨é…ç½®è¯ä¹¦ å¦‚æœä½ ä¸æƒ³é€šè¿‡ kubeadm ç”Ÿæˆè¿™äº›å¿…éœ€çš„è¯ä¹¦ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼ä¹‹ä¸€æ¥æ‰‹åŠ¨åˆ›å»ºä»–ä»¬ã€‚</description>
    </item>
    
    <item>
      <title>StatefulSets</title>
      <link>https://lijun.in/concepts/workloads/controllers/statefulset/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/controllers/statefulset/</guid>
      <description>StatefulSet æ˜¯ç”¨æ¥ç®¡ç†æœ‰çŠ¶æ€åº”ç”¨çš„å·¥ä½œè´Ÿè½½ API å¯¹è±¡ã€‚
glossary_definition term_id=&amp;quot;statefulset&amp;rdquo; length=&amp;quot;all&amp;rdquo; &amp;gt;}}
ä½¿ç”¨ StatefulSets StatefulSets å¯¹äºéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸€ä¸ªæˆ–å¤šä¸ªéœ€æ±‚çš„åº”ç”¨ç¨‹åºå¾ˆæœ‰ä»·å€¼ï¼š
 ç¨³å®šçš„ã€å”¯ä¸€çš„ç½‘ç»œæ ‡è¯†ç¬¦ã€‚ ç¨³å®šçš„ã€æŒä¹…çš„å­˜å‚¨ã€‚ æœ‰åºçš„ã€ä¼˜é›…çš„éƒ¨ç½²å’Œç¼©æ”¾ã€‚ æœ‰åºçš„ã€è‡ªåŠ¨çš„æ»šåŠ¨æ›´æ–°ã€‚  åœ¨ä¸Šé¢ï¼Œç¨³å®šæ„å‘³ç€ Pod è°ƒåº¦æˆ–é‡è°ƒåº¦çš„æ•´ä¸ªè¿‡ç¨‹æ˜¯æœ‰æŒä¹…æ€§çš„ã€‚å¦‚æœåº”ç”¨ç¨‹åºä¸éœ€è¦ä»»ä½•ç¨³å®šçš„æ ‡è¯†ç¬¦æˆ–æœ‰åºçš„éƒ¨ç½²ã€åˆ é™¤æˆ–ä¼¸ç¼©ï¼Œåˆ™åº”è¯¥ä½¿ç”¨ç”±ä¸€ç»„æ— çŠ¶æ€çš„å‰¯æœ¬æ§åˆ¶å™¨æä¾›çš„å·¥ä½œè´Ÿè½½æ¥éƒ¨ç½²åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚ Deployment æˆ–è€… ReplicaSet å¯èƒ½æ›´é€‚ç”¨äºæ‚¨çš„æ— çŠ¶æ€åº”ç”¨éƒ¨ç½²éœ€è¦ã€‚
é™åˆ¶  ç»™å®š Pod çš„å­˜å‚¨å¿…é¡»ç”± [PersistentVolume é©±åŠ¨](https://github.com/kubernetes/examples/tree/&amp;lt; param &amp;ldquo;githubbranch&amp;rdquo; &amp;gt;}}/staging/persistent-volume-provisioning/README.md) åŸºäºæ‰€è¯·æ±‚çš„ storage class æ¥æä¾›ï¼Œæˆ–è€…ç”±ç®¡ç†å‘˜é¢„å…ˆæä¾›ã€‚ åˆ é™¤æˆ–è€…æ”¶ç¼© StatefulSet å¹¶ä¸ä¼šåˆ é™¤å®ƒå…³è”çš„å­˜å‚¨å·ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†ä¿è¯æ•°æ®å®‰å…¨ï¼Œå®ƒé€šå¸¸æ¯”è‡ªåŠ¨æ¸…é™¤ StatefulSet æ‰€æœ‰ç›¸å…³çš„èµ„æºæ›´æœ‰ä»·å€¼ã€‚ StatefulSet å½“å‰éœ€è¦ headless æœåŠ¡ æ¥è´Ÿè´£ Pod çš„ç½‘ç»œæ ‡è¯†ã€‚æ‚¨éœ€è¦è´Ÿè´£åˆ›å»ºæ­¤æœåŠ¡ã€‚ å½“åˆ é™¤ StatefulSets æ—¶ï¼ŒStatefulSet ä¸æä¾›ä»»ä½•ç»ˆæ­¢ Pod çš„ä¿è¯ã€‚ä¸ºäº†å®ç° StatefulSet ä¸­çš„ Pod å¯ä»¥æœ‰åºå’Œä¼˜é›…çš„ç»ˆæ­¢ï¼Œå¯ä»¥åœ¨åˆ é™¤ä¹‹å‰å°† StatefulSet ç¼©æ”¾ä¸º 0ã€‚ åœ¨é»˜è®¤ Pod ç®¡ç†ç­–ç•¥(OrderedReady) æ—¶ä½¿ç”¨ æ»šåŠ¨æ›´æ–°ï¼Œå¯èƒ½è¿›å…¥éœ€è¦ äººå·¥å¹²é¢„ æ‰èƒ½ä¿®å¤çš„æŸåçŠ¶æ€ã€‚  ç»„ä»¶ ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºäº† StatefulSet çš„ç»„ä»¶ã€‚</description>
    </item>
    
    <item>
      <title>Taint å’Œ Toleration</title>
      <link>https://lijun.in/concepts/configuration/taint-and-toleration/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/configuration/taint-and-toleration/</guid>
      <description>èŠ‚ç‚¹äº²å’Œæ€§ï¼ˆè¯¦è§è¿™é‡Œï¼‰ï¼Œæ˜¯ pod çš„ä¸€ç§å±æ€§ï¼ˆåå¥½æˆ–ç¡¬æ€§è¦æ±‚ï¼‰ï¼Œå®ƒä½¿ pod è¢«å¸å¼•åˆ°ä¸€ç±»ç‰¹å®šçš„èŠ‚ç‚¹ã€‚Taint åˆ™ç›¸åï¼Œå®ƒä½¿ èŠ‚ç‚¹ èƒ½å¤Ÿ æ’æ–¥ ä¸€ç±»ç‰¹å®šçš„ podã€‚
Taint å’Œ toleration ç›¸äº’é…åˆï¼Œå¯ä»¥ç”¨æ¥é¿å… pod è¢«åˆ†é…åˆ°ä¸åˆé€‚çš„èŠ‚ç‚¹ä¸Šã€‚æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½å¯ä»¥åº”ç”¨ä¸€ä¸ªæˆ–å¤šä¸ª taint ï¼Œè¿™è¡¨ç¤ºå¯¹äºé‚£äº›ä¸èƒ½å®¹å¿è¿™äº› taint çš„ podï¼Œæ˜¯ä¸ä¼šè¢«è¯¥èŠ‚ç‚¹æ¥å—çš„ã€‚å¦‚æœå°† toleration åº”ç”¨äº pod ä¸Šï¼Œåˆ™è¡¨ç¤ºè¿™äº› pod å¯ä»¥ï¼ˆä½†ä¸è¦æ±‚ï¼‰è¢«è°ƒåº¦åˆ°å…·æœ‰åŒ¹é… taint çš„èŠ‚ç‚¹ä¸Šã€‚
æ¦‚å¿µ æ‚¨å¯ä»¥ä½¿ç”¨å‘½ä»¤ kubectl taint ç»™èŠ‚ç‚¹å¢åŠ ä¸€ä¸ª taintã€‚æ¯”å¦‚ï¼Œ
kubectl taint nodes node1 key=value:NoSchedule ç»™èŠ‚ç‚¹ node1 å¢åŠ ä¸€ä¸ª taintï¼Œå®ƒçš„ key æ˜¯ keyï¼Œvalue æ˜¯ valueï¼Œeffect æ˜¯ NoScheduleã€‚è¿™è¡¨ç¤ºåªæœ‰æ‹¥æœ‰å’Œè¿™ä¸ª taint ç›¸åŒ¹é…çš„ toleration çš„ pod æ‰èƒ½å¤Ÿè¢«åˆ†é…åˆ° node1 è¿™ä¸ªèŠ‚ç‚¹ã€‚æ‚¨å¯ä»¥åœ¨ PodSpec ä¸­å®šä¹‰ pod çš„ tolerationã€‚ä¸‹é¢ä¸¤ä¸ª toleration å‡ä¸ä¸Šé¢ä¾‹å­ä¸­ä½¿ç”¨ kubectl taint å‘½ä»¤åˆ›å»ºçš„ taint ç›¸åŒ¹é…ï¼Œå› æ­¤å¦‚æœä¸€ä¸ª pod æ‹¥æœ‰å…¶ä¸­çš„ä»»ä½•ä¸€ä¸ª toleration éƒ½èƒ½å¤Ÿè¢«åˆ†é…åˆ° node1 ï¼š</description>
    </item>
    
    <item>
      <title>ä¸ºå‘½åç©ºé—´é…ç½®CPUæœ€å°å’Œæœ€å¤§é™åˆ¶</title>
      <link>https://lijun.in/tasks/administer-cluster/manage-resources/cpu-constraint-namespace/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/manage-resources/cpu-constraint-namespace/</guid>
      <description>æœ¬ç« ä»‹ç»å‘½åç©ºé—´ä¸­å¯ä»¥è¢«å®¹å™¨å’ŒPodä½¿ç”¨çš„CPUèµ„æºçš„æœ€å°å’Œæœ€å¤§å€¼ã€‚ä½ å¯ä»¥é€šè¿‡ [LimitRange](/docs/reference/generated/kubernetes-api/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#limitrange-v1-core) å¯¹è±¡å£°æ˜ CPU çš„æœ€å°å’Œæœ€å¤§å€¼. å¦‚æœ Pod ä¸èƒ½æ»¡è¶³ LimitRange çš„é™åˆ¶ï¼Œå®ƒå°±ä¸èƒ½åœ¨å‘½åç©ºé—´ä¸­åˆ›å»ºã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ä½ çš„é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹è‡³å°‘è¦æœ‰1ä¸ªCPUã€‚
åˆ›å»ºå‘½åç©ºé—´ åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œä»¥ä¾¿æœ¬ç»ƒä¹ ä¸­åˆ›å»ºçš„èµ„æºå’Œé›†ç¾¤çš„å…¶ä½™èµ„æºç›¸éš”ç¦»ã€‚
kubectl create namespace constraints-cpu-example åˆ›å»º LimitRange å’Œ Pod è¿™é‡Œç»™å‡ºäº† LimitRange çš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;admin/resource/cpu-constraints.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»º LimitRange:
kubectl create -f https://k8s.io/examples/admin/resource/cpu-constraints.yaml --namespace=constraints-cpu-example æŸ¥çœ‹ LimitRange è¯¦æƒ…ï¼š
kubectl get limitrange cpu-min-max-demo-lr --output=yaml --namespace=constraints-cpu-example è¾“å‡ºç»“æœæ˜¾ç¤º CPU çš„æœ€å°å’Œæœ€å¤§é™åˆ¶ç¬¦åˆé¢„æœŸã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡ä½ åœ¨ LimitRange çš„é…ç½®æ–‡ä»¶ä¸­ä½ æ²¡æœ‰å£°æ˜é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼ä¹Ÿä¼šè¢«è‡ªåŠ¨åˆ›å»ºã€‚
limits: - default: cpu: 800m defaultRequest: cpu: 800m max: cpu: 800m min: cpu: 200m type: Container ç°åœ¨ä¸ç®¡ä»€ä¹ˆæ—¶å€™åœ¨ constraints-cpu-example å‘½åç©ºé—´ä¸­åˆ›å»ºå®¹å™¨ï¼ŒKubernetes éƒ½ä¼šæ‰§è¡Œä¸‹é¢è¿™äº›æ­¥éª¤ï¼š</description>
    </item>
    
    <item>
      <title>ä¸ºå®¹å™¨åˆ†æ´¾æ‰©å±•èµ„æº</title>
      <link>https://lijun.in/tasks/configure-pod-container/extended-resource/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/extended-resource/</guid>
      <description>. feature-state state=&amp;quot;stable&amp;rdquo; &amp;gt;}}
æœ¬æ–‡ä»‹ç»å¦‚ä½•ä¸ºå®¹å™¨æŒ‡å®šæ‰©å±•èµ„æºã€‚
. feature-state state=&amp;quot;stable&amp;rdquo; &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åœ¨æ‚¨å¼€å§‹æ­¤ç»ƒä¹ å‰ï¼Œè¯·å…ˆç»ƒä¹ ä¸ºèŠ‚ç‚¹å¹¿æ’­æ‰©å±•èµ„æºã€‚ åœ¨é‚£ä¸ªç»ƒä¹ ä¸­å°†é…ç½®æ‚¨çš„ä¸€ä¸ªèŠ‚ç‚¹æ¥å¹¿æ’­ dongle èµ„æºã€‚
ç»™ Pod åˆ†æ´¾æ‰©å±•èµ„æº è¦è¯·æ±‚æ‰©å±•èµ„æºï¼Œéœ€è¦åœ¨æ‚¨çš„å®¹å™¨æ¸…å•ä¸­åŒ…æ‹¬ resources:requests å­—æ®µã€‚ æ‰©å±•èµ„æºå¯ä»¥ä½¿ç”¨ä»»ä½•å®Œå…¨é™å®šåç§°ï¼Œåªæ˜¯ä¸èƒ½ä½¿ç”¨ *.kubernetes.io/ã€‚ æœ‰æ•ˆçš„æ‰©å±•èµ„æºåçš„æ ¼å¼ä¸º example.com/fooï¼Œå…¶ä¸­ example.com åº”è¢«æ›¿æ¢ä¸ºæ‚¨çš„ç»„ç»‡çš„åŸŸåï¼Œè€Œ foo åˆ™æ˜¯æè¿°æ€§çš„èµ„æºåç§°ã€‚
ä¸‹é¢æ˜¯åŒ…å«ä¸€ä¸ªå®¹å™¨çš„ Pod é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;pods/resource/extended-resource-pod.yaml&amp;rdquo; &amp;gt;}}
åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å®¹å™¨è¯·æ±‚äº† 3 ä¸ª donglesã€‚
åˆ›å»º Podï¼š
kubectl apply -f https://k8s.io/examples/pods/resource/extended-resource-pod.yaml æ£€æŸ¥ Pod æ˜¯å¦è¿è¡Œæ­£å¸¸ï¼š
kubectl get pod extended-resource-demo æè¿° Pod:
kubectl describe pod extended-resource-demo è¾“å‡ºç»“æœæ˜¾ç¤º dongle è¯·æ±‚å¦‚ä¸‹ï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ HTTP ä»£ç†è®¿é—® Kubernetes API</title>
      <link>https://lijun.in/tasks/access-kubernetes-api/http-proxy-access-api/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-kubernetes-api/http-proxy-access-api/</guid>
      <description>æœ¬æ–‡è¯´æ˜å¦‚ä½•ä½¿ç”¨ HTTP ä»£ç†è®¿é—® Kubernetes APIã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}   å¦‚æœæ‚¨çš„é›†ç¾¤ä¸­è¿˜æ²¡æœ‰ä»»ä½•åº”ç”¨ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯åŠ¨ä¸€ä¸ª Hello World åº”ç”¨ï¼š  kubectl run node-hello --image=gcr.io/google-samples/node-hello:1.0 --port=8080 ä½¿ç”¨ kubectl å¯åŠ¨ä»£ç†æœåŠ¡å™¨ ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯åŠ¨ Kubernetes API æœåŠ¡å™¨çš„ä»£ç†ï¼š
kubectl proxy --port=8080  æ¢ç©¶ Kubernetes API å½“ä»£ç†æœåŠ¡å™¨åœ¨è¿è¡Œæ—¶ï¼Œä½ å¯ä»¥é€šè¿‡ curlã€wget æˆ–è€…æµè§ˆå™¨è®¿é—® APIã€‚
è·å– API ç‰ˆæœ¬ï¼š
curl http://localhost:8080/api/ { &amp;quot;kind&amp;quot;: &amp;quot;APIVersions&amp;quot;, &amp;quot;versions&amp;quot;: [ &amp;quot;v1&amp;quot; ], &amp;quot;serverAddressByClientCIDRs&amp;quot;: [ { &amp;quot;clientCIDR&amp;quot;: &amp;quot;0.0.0.0/0&amp;quot;, &amp;quot;serverAddress&amp;quot;: &amp;quot;10.0.2.15:8443&amp;quot; } ] }  è·å– Pod åˆ—è¡¨ï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ kubeadm å®šåˆ¶æ§åˆ¶å¹³é¢é…ç½®</title>
      <link>https://lijun.in/setup/production-environment/tools/kubeadm/control-plane-flags/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/tools/kubeadm/control-plane-flags/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;1.12&amp;rdquo; state=&amp;quot;stable&amp;rdquo; &amp;gt;}}
kubeadm ClusterConfiguration å¯¹è±¡å…¬å¼€äº† extraArgs å­—æ®µï¼Œå®ƒå¯ä»¥è¦†ç›–ä¼ é€’ç»™æ§åˆ¶å¹³é¢ç»„ä»¶ï¼ˆå¦‚ APIServerã€ControllerManager å’Œ Schedulerï¼‰çš„é»˜è®¤å‚æ•°ã€‚å„ç»„ä»¶é…ç½®ä½¿ç”¨å¦‚ä¸‹å­—æ®µå®šä¹‰ï¼š
 apiServer controllerManager scheduler  extraArgs å­—æ®µç”± key: value å¯¹ç»„æˆã€‚ è¦è¦†ç›–æ§åˆ¶å¹³é¢ç»„ä»¶çš„å‚æ•°:
 å°†é€‚å½“çš„å­—æ®µæ·»åŠ åˆ°é…ç½®ä¸­ã€‚ å‘å­—æ®µæ·»åŠ è¦è¦†ç›–çš„å‚æ•°å€¼ã€‚ ç”¨ --config &amp;lt;YOUR CONFIG YAML&amp;gt; è¿è¡Œ kubeadm initã€‚  æœ‰å…³é…ç½®ä¸­çš„æ¯ä¸ªå­—æ®µçš„è¯¦ç»†ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥å¯¼èˆªåˆ°æˆ‘ä»¬çš„ API å‚è€ƒé¡µé¢ã€‚
. note &amp;gt;}}
æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ kubeadm config print init-defaults å¹¶å°†è¾“å‡ºä¿å­˜åˆ°æ‚¨é€‰æ‹©çš„æ–‡ä»¶ä¸­ï¼Œä»¥é»˜è®¤å€¼å½¢å¼ç”Ÿæˆ ClusterConfiguration å¯¹è±¡ã€‚ . /note &amp;gt;}}
APIServer å‚æ•° æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… kube-apiserver å‚è€ƒæ–‡æ¡£ã€‚
ä½¿ç”¨ç¤ºä¾‹ï¼š
apiVersion: kubeadm.k8s.io/v1beta2 kind: ClusterConfiguration kubernetesVersion: v1.16.0 apiServer: extraArgs: advertise-address: 192.168.0.103 anonymous-auth: &amp;#34;false&amp;#34; enable-admission-plugins: AlwaysPullImages,DefaultStorageClass audit-log-path: /home/johndoe/audit.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ kubectl patch æ›´æ–° API å¯¹è±¡</title>
      <link>https://lijun.in/tasks/run-application/update-api-object-kubectl-patch/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/run-application/update-api-object-kubectl-patch/</guid>
      <description>è¿™ä¸ªä»»åŠ¡å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ kubectl patch å°±åœ°æ›´æ–° API å¯¹è±¡ã€‚è¿™ä¸ªä»»åŠ¡ä¸­çš„ç»ƒä¹ æ¼”ç¤ºäº†ä¸€ä¸ªç­–ç•¥æ€§åˆå¹¶ patch å’Œä¸€ä¸ª JSON åˆå¹¶ patchã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ä½¿ç”¨ç­–ç•¥åˆå¹¶ patch æ›´æ–° Deployment ä¸‹é¢æ˜¯å…·æœ‰ä¸¤ä¸ªå‰¯æœ¬çš„ Deployment çš„é…ç½®æ–‡ä»¶ã€‚æ¯ä¸ªå‰¯æœ¬æ˜¯ä¸€ä¸ª Podï¼Œæœ‰ä¸€ä¸ªå®¹å™¨ï¼š
. codenew file=&amp;quot;application/deployment-patch.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»º Deploymentï¼š
kubectl create -f https://k8s.io/examples/application/deployment-patch.yaml æŸ¥çœ‹ä¸ Deployment ç›¸å…³çš„ Podï¼š
kubectl get pods è¾“å‡ºæ˜¾ç¤º Deployment æœ‰ä¸¤ä¸ª Podã€‚1/1 è¡¨ç¤ºæ¯ä¸ª Pod æœ‰ä¸€ä¸ªå®¹å™¨:
NAME READY STATUS RESTARTS AGE patch-demo-28633765-670qr 1/1 Running 0 23s patch-demo-28633765-j5qs3 1/1 Running 0 23s æŠŠè¿è¡Œçš„ Pod çš„åå­—è®°ä¸‹æ¥ã€‚ç¨åï¼Œæ‚¨å°†çœ‹åˆ°è¿™äº› Pod è¢«ç»ˆæ­¢å¹¶è¢«æ–°çš„ Pod æ›¿æ¢ã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Romana ä½œä¸º NetworkPolicy</title>
      <link>https://lijun.in/tasks/administer-cluster/network-policy-provider/romana-network-policy/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/network-policy-provider/romana-network-policy/</guid>
      <description>æœ¬é¡µå±•ç¤ºå¦‚ä½•ä½¿ç”¨ Romana ä½œä¸º NetworkPolicyã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} å®Œæˆkubeadm å…¥é—¨æŒ‡å—ä¸­çš„1ã€2ã€3æ­¥ã€‚
ä½¿ç”¨ kubeadm å®‰è£… Romana æŒ‰ç…§å®¹å™¨åŒ–å®‰è£…æŒ‡å—è·å– kubeadmã€‚
è¿ç”¨ç½‘ç»œç­–ç•¥ ä½¿ç”¨ä»¥ä¸‹çš„ä¸€ç§æ–¹å¼å»è¿ç”¨ç½‘ç»œç­–ç•¥ï¼š
 Romana ç½‘ç»œç­–ç•¥  Romana ç½‘ç»œç­–ç•¥ä¾‹å­   NetworkPolicy API  . heading &amp;ldquo;whatsnext&amp;rdquo; %}} Romana å®‰è£…å®Œæˆåï¼Œæ‚¨å¯ä»¥æŒ‰ç…§å£°æ˜ Network Policyå»å°è¯•ä½¿ç”¨ Kubernetes NetworkPolicyã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨å·¥ä½œé˜Ÿåˆ—è¿›è¡Œç²¾ç»†çš„å¹¶è¡Œå¤„ç†</title>
      <link>https://lijun.in/tasks/job/fine-parallel-processing-work-queue/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/job/fine-parallel-processing-work-queue/</guid>
      <description>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¼šè¿è¡Œä¸€ä¸ªKubernetes Jobï¼Œå…¶ä¸­çš„ Pod ä¼šè¿è¡Œå¤šä¸ªå¹¶è¡Œå·¥ä½œè¿›ç¨‹ã€‚
åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“æ¯ä¸ªpodè¢«åˆ›å»ºæ—¶ï¼Œå®ƒä¼šä»ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­è·å–ä¸€ä¸ªå·¥ä½œå•å…ƒï¼Œå¤„ç†å®ƒï¼Œç„¶åé‡å¤ï¼Œç›´åˆ°åˆ°è¾¾é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚
ä¸‹é¢æ˜¯è¿™ä¸ªç¤ºä¾‹çš„æ­¥éª¤æ¦‚è¿°
 å¯åŠ¨å­˜å‚¨æœåŠ¡ç”¨äºä¿å­˜å·¥ä½œé˜Ÿåˆ—ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ Redis æ¥å­˜å‚¨å·¥ä½œé¡¹ã€‚åœ¨ä¸Šä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† RabbitMQã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äº AMQP ä¸èƒ½ä¸ºå®¢æˆ·ç«¯æä¾›ä¸€ä¸ªè‰¯å¥½çš„æ–¹æ³•æ¥æ£€æµ‹ä¸€ä¸ªæœ‰é™é•¿åº¦çš„å·¥ä½œé˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Redis å’Œä¸€ä¸ªè‡ªå®šä¹‰çš„å·¥ä½œé˜Ÿåˆ—å®¢æˆ·ç«¯åº“ã€‚åœ¨å®è·µä¸­ï¼Œæ‚¨å¯èƒ½ä¼šè®¾ç½®ä¸€ä¸ªç±»ä¼¼äº Redis çš„å­˜å‚¨åº“ï¼Œå¹¶å°†å…¶åŒæ—¶ç”¨äºå¤šé¡¹ä»»åŠ¡æˆ–å…¶ä»–äº‹åŠ¡çš„å·¥ä½œé˜Ÿåˆ—ã€‚  åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œç„¶åå‘å…¶ä¸­å¡«å……æ¶ˆæ¯ã€‚ æ¯ä¸ªæ¶ˆæ¯è¡¨ç¤ºä¸€ä¸ªå°†è¦è¢«å¤„ç†çš„å·¥ä½œä»»åŠ¡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¶ˆæ¯åªæ˜¯ä¸€ä¸ªæˆ‘ä»¬å°†ç”¨äºè¿›è¡Œé•¿åº¦è®¡ç®—çš„æ•´æ•°ã€‚  å¯åŠ¨ä¸€ä¸ª Job å¯¹é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡è¿›è¡Œå¤„ç†ã€‚è¿™ä¸ª Job å¯åŠ¨äº†è‹¥å¹²ä¸ª Pod ã€‚æ¯ä¸ª Pod ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªå·¥ä½œä»»åŠ¡ï¼Œå¤„ç†å®ƒï¼Œç„¶åé‡å¤ï¼Œç›´åˆ°åˆ°è¾¾é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚  . toc &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ç†Ÿç§‹åŸºç¡€çŸ¥è¯†ï¼Œéå¹¶è¡Œæ–¹å¼è¿è¡Œ Jobã€‚
å¯åŠ¨ Redis å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†å¯åŠ¨ä¸€ä¸ªå•å®ä¾‹çš„ Redisã€‚ äº†è§£å¦‚ä½•éƒ¨ç½²ä¸€ä¸ªå¯ä¼¸ç¼©ã€é«˜å¯ç”¨çš„ Redis ä¾‹å­ï¼Œè¯·æŸ¥çœ‹ Redis æ ·ä¾‹
å¦‚æœæ‚¨åœ¨ä½¿ç”¨æœ¬æ–‡æ¡£åº“çš„æºä»£ç ç›®å½•ï¼Œæ‚¨å¯ä»¥è¿›å…¥å¦‚ä¸‹ç›®å½•ï¼Œç„¶åå¯åŠ¨ä¸€ä¸ªä¸´æ—¶çš„ Pod ç”¨äºè¿è¡Œ Redis å’Œ ä¸€ä¸ªä¸´æ—¶çš„ service ä»¥ä¾¿æˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°è¿™ä¸ª Pod
$ cd content/en/examples/application/job/redis $ kubectl create -f .</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ç«¯å£è½¬å‘æ¥è®¿é—®é›†ç¾¤ä¸­çš„åº”ç”¨</title>
      <link>https://lijun.in/tasks/access-application-cluster/port-forward-access-application-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/port-forward-access-application-cluster/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•ä½¿ç”¨ kubectl port-forward è¿æ¥åˆ°åœ¨ Kubernetes é›†ç¾¤ä¸­è¿è¡Œçš„ Redis æœåŠ¡ã€‚è¿™ç§ç±»å‹çš„è¿æ¥å¯¹æ•°æ®åº“è°ƒè¯•å¾ˆæœ‰ç”¨ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}   å®‰è£… redis-cliã€‚  åˆ›å»º Redis deployment å’ŒæœåŠ¡   åˆ›å»ºä¸€ä¸ª Redis deploymentï¼š
 kubectl apply -f https://k8s.io/examples/application/guestbook/redis-master-deployment.yaml    æŸ¥çœ‹è¾“å‡ºæ˜¯å¦æˆåŠŸï¼Œä»¥éªŒè¯æ˜¯å¦æˆåŠŸåˆ›å»º deploymentï¼š deployment.apps/redis-master created  æŸ¥çœ‹ pod çŠ¶æ€ï¼Œæ£€æŸ¥å…¶æ˜¯å¦å‡†å¤‡å°±ç»ªï¼š kubectl get pods  è¾“å‡ºæ˜¾ç¤ºåˆ›å»ºçš„ podï¼š NAME READY STATUS RESTARTS AGE redis-master-765d459796-258hz 1/1 Running 0 50s  æŸ¥çœ‹ deployment çŠ¶æ€ï¼š kubectl get deployment  è¾“å‡ºæ˜¾ç¤ºåˆ›å»ºçš„ deploymentï¼š NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE redis-master 1 1 1 1 55s  æŸ¥çœ‹ replicaset çŠ¶æ€ï¼š kubectl get rs  è¾“å‡ºæ˜¾ç¤ºåˆ›å»ºçš„ replicasetï¼š NAME DESIRED CURRENT READY AGE redis-master-765d459796 1 1 1 1m   åˆ›å»ºä¸€ä¸ª Redis æœåŠ¡ï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨é…ç½®æ–‡ä»¶å¯¹ Kubernetes å¯¹è±¡è¿›è¡Œå‘½ä»¤å¼ç®¡ç†</title>
      <link>https://lijun.in/tasks/manage-kubernetes-objects/imperative-config/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/manage-kubernetes-objects/imperative-config/</guid>
      <description>å¯ä»¥ä½¿ç”¨ kubectl å‘½ä»¤è¡Œå·¥å…·ä»¥åŠç”¨ YAML æˆ– JSON ç¼–å†™çš„å¯¹è±¡é…ç½®æ–‡ä»¶æ¥åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤ Kubernetes å¯¹è±¡ã€‚ æœ¬æ–‡æ¡£è¯´æ˜äº†å¦‚ä½•ä½¿ç”¨é…ç½®æ–‡ä»¶å®šä¹‰å’Œç®¡ç†å¯¹è±¡ã€‚
heading &amp;ldquo;prerequisites&amp;rdquo; %}} å®‰è£… kubectl ã€‚
include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
æƒè¡¡ kubectl å·¥å…·æ”¯æŒä¸‰ç§å¯¹è±¡ç®¡ç†ï¼š
 å‘½ä»¤å¼å‘½ä»¤ å‘½ä»¤å¼å¯¹è±¡é…ç½® å£°æ˜å¼å¯¹è±¡é…ç½®  å‚çœ‹ Kubernetes å¯¹è±¡ç®¡ç† è®¨è®ºæ¯ç§å¯¹è±¡ç®¡ç†çš„ä¼˜ç¼ºç‚¹ã€‚
å¦‚ä½•åˆ›å»ºå¯¹è±¡ æ‚¨å¯ä»¥ä½¿ç”¨ kubectl create -f ä»é…ç½®æ–‡ä»¶åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚ è¯·å‚è€ƒ [kubernetes API å‚è€ƒ](/docs/reference/generated/kubernetes-api/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/) æœ‰å…³è¯¦ç»†ä¿¡æ¯ã€‚
 kubectl create -f &amp;lt;filename|url&amp;gt;  å¦‚ä½•æ›´æ–°å¯¹è±¡ . warning &amp;gt;}}
ä½¿ç”¨ replace å‘½ä»¤æ›´æ–°å¯¹è±¡ä¼šåˆ é™¤æ‰€æœ‰æœªåœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„è§„èŒƒçš„æŸäº›éƒ¨åˆ†ã€‚ ä¸åº”å°†å…¶è§„èŒƒç”±é›†ç¾¤éƒ¨åˆ†ç®¡ç†çš„å¯¹è±¡ä½¿ç”¨ï¼Œæ¯”å¦‚ç±»å‹ä¸º LoadBalancer çš„æœåŠ¡ï¼Œå…¶ä¸­ externalIPs å­—æ®µç‹¬ç«‹äºé…ç½®æ–‡ä»¶è¿›è¡Œç®¡ç†ã€‚ å¿…é¡»å°†ç‹¬ç«‹ç®¡ç†çš„å­—æ®µå¤åˆ¶åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œä»¥é˜²æ­¢ replace åˆ é™¤å®ƒä»¬ã€‚ . /warning &amp;gt;}}</description>
    </item>
    
    <item>
      <title>åŠ¨æ€å‡†å…¥æ§åˆ¶</title>
      <link>https://lijun.in/reference/access-authn-authz/extensible-admission-controllers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/access-authn-authz/extensible-admission-controllers/</guid>
      <description>é™¤äº†å†…ç½®çš„ admission æ’ä»¶ï¼Œadmission æ’ä»¶å¯ä»¥ä½œä¸ºæ‰©å±•ç‹¬ç«‹å¼€å‘ï¼Œå¹¶ä»¥è¿è¡Œæ—¶æ‰€é…ç½®çš„ webhook çš„å½¢å¼è¿è¡Œã€‚ æ­¤é¡µé¢æè¿°äº†å¦‚ä½•æ„å»ºã€é…ç½®ã€ä½¿ç”¨å’Œç›‘è§† admission webhookã€‚
ä»€ä¹ˆæ˜¯ admission webhookï¼Ÿ Admission webhook æ˜¯ä¸€ç§ç”¨äºæ¥æ”¶å‡†å…¥è¯·æ±‚å¹¶å¯¹å…¶è¿›è¡Œå¤„ç†çš„ HTTP å›è°ƒæœºåˆ¶ã€‚ å¯ä»¥å®šä¹‰ä¸¤ç§ç±»å‹çš„ admission webhookï¼Œå³ validating admission webhook å’Œ mutating admission webhookã€‚ Mutating admission webhook ä¼šå…ˆè¢«è°ƒç”¨ã€‚å®ƒä»¬å¯ä»¥æ›´æ”¹å‘é€åˆ° API æœåŠ¡å™¨çš„å¯¹è±¡ä»¥æ‰§è¡Œè‡ªå®šä¹‰çš„è®¾ç½®é»˜è®¤å€¼æ“ä½œã€‚
åœ¨å®Œæˆäº†æ‰€æœ‰å¯¹è±¡ä¿®æ”¹å¹¶ä¸” API æœåŠ¡å™¨ä¹ŸéªŒè¯äº†æ‰€ä¼ å…¥çš„å¯¹è±¡ä¹‹åï¼Œvalidating admission webhook ä¼šè¢«è°ƒç”¨ï¼Œå¹¶é€šè¿‡æ‹’ç»è¯·æ±‚çš„æ–¹å¼æ¥å¼ºåˆ¶å®æ–½è‡ªå®šä¹‰çš„ç­–ç•¥ã€‚
. note &amp;gt;}} å¦‚æœ admission webhook éœ€è¦ä¿è¯å®ƒä»¬æ‰€çœ‹åˆ°çš„æ˜¯å¯¹è±¡çš„æœ€ç»ˆçŠ¶æ€ä»¥å®æ–½æŸç§ç­–ç•¥ã€‚åˆ™åº”ä½¿ç”¨ validating admission webhookï¼Œå› ä¸ºå¯¹è±¡è¢« mutating webhook çœ‹åˆ°ä¹‹åä»ç„¶å¯èƒ½è¢«ä¿®æ”¹ã€‚ . /note &amp;gt;}}
å°è¯• admission webhook admission webhook æœ¬è´¨ä¸Šæ˜¯é›†ç¾¤æ§åˆ¶å¹³é¢çš„ä¸€éƒ¨åˆ†ã€‚æ‚¨åº”è¯¥éå¸¸è°¨æ…åœ°ç¼–å†™å’Œéƒ¨ç½²å®ƒä»¬ã€‚ å¦‚æœæ‚¨æ‰“ç®—ç¼–å†™æˆ–è€…éƒ¨ç½²ç”Ÿäº§çº§ admission webhookï¼Œè¯·é˜…è¯»ç”¨æˆ·æŒ‡å—ä»¥è·å–ç›¸å…³è¯´æ˜ã€‚ åœ¨ä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•å¿«é€Ÿè¯•éªŒ admission webhookã€‚
å…ˆå†³æ¡ä»¶   ç¡®ä¿ Kubernetes é›†ç¾¤ç‰ˆæœ¬è‡³å°‘ä¸º v1.</description>
    </item>
    
    <item>
      <title>åŠ¨æ€å·ä¾›åº”</title>
      <link>https://lijun.in/concepts/storage/dynamic-provisioning/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/storage/dynamic-provisioning/</guid>
      <description>åŠ¨æ€å·ä¾›åº”å…è®¸æŒ‰éœ€åˆ›å»ºå­˜å‚¨å·ã€‚ å¦‚æœæ²¡æœ‰åŠ¨æ€ä¾›åº”ï¼Œé›†ç¾¤ç®¡ç†å‘˜å¿…é¡»æ‰‹åŠ¨åœ°è”ç³»ä»–ä»¬çš„äº‘æˆ–å­˜å‚¨æä¾›å•†æ¥åˆ›å»ºæ–°çš„å­˜å‚¨å·ï¼Œ ç„¶ååœ¨ Kubernetes é›†ç¾¤åˆ›å»º PersistentVolume å¯¹è±¡æ¥è¡¨ç¤ºè¿™äº›å·ã€‚ åŠ¨æ€ä¾›åº”åŠŸèƒ½æ¶ˆé™¤äº†é›†ç¾¤ç®¡ç†å‘˜é¢„å…ˆé…ç½®å­˜å‚¨çš„éœ€è¦ã€‚ ç›¸åï¼Œå®ƒåœ¨ç”¨æˆ·è¯·æ±‚æ—¶è‡ªåŠ¨ä¾›åº”å­˜å‚¨ã€‚
èƒŒæ™¯ åŠ¨æ€å·ä¾›åº”çš„å®ç°åŸºäº storage.k8s.io API ç»„ä¸­çš„ StorageClass API å¯¹è±¡ã€‚ é›†ç¾¤ç®¡ç†å‘˜å¯ä»¥æ ¹æ®éœ€è¦å®šä¹‰å¤šä¸ª StorageClass å¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡æŒ‡å®šä¸€ä¸ªå·æ’ä»¶ï¼ˆåˆå provisionerï¼‰ï¼Œ å·æ’ä»¶å‘å·ä¾›åº”å•†æä¾›åœ¨åˆ›å»ºå·æ—¶éœ€è¦çš„æ•°æ®å·ä¿¡æ¯åŠç›¸å…³å‚æ•°ã€‚
é›†ç¾¤ç®¡ç†å‘˜å¯ä»¥åœ¨é›†ç¾¤ä¸­å®šä¹‰å’Œå…¬å¼€å¤šç§å­˜å‚¨ï¼ˆæ¥è‡ªç›¸åŒæˆ–ä¸åŒçš„å­˜å‚¨ç³»ç»Ÿï¼‰ï¼Œæ¯ç§éƒ½å…·æœ‰è‡ªå®šä¹‰å‚æ•°é›†ã€‚ è¯¥è®¾è®¡ä¹Ÿç¡®ä¿ç»ˆç«¯ç”¨æˆ·ä¸å¿…æ‹…å¿ƒå­˜å‚¨ä¾›åº”çš„å¤æ‚æ€§å’Œç»†å¾®å·®åˆ«ï¼Œä½†ä»ç„¶èƒ½å¤Ÿä»å¤šä¸ªå­˜å‚¨é€‰é¡¹ä¸­è¿›è¡Œé€‰æ‹©ã€‚
ç‚¹å‡»è¿™é‡ŒæŸ¥é˜…æœ‰å…³å­˜å‚¨ç±»çš„æ›´å¤šä¿¡æ¯ã€‚
å¯ç”¨åŠ¨æ€å·ä¾›åº” è¦å¯ç”¨åŠ¨æ€ä¾›åº”åŠŸèƒ½ï¼Œé›†ç¾¤ç®¡ç†å‘˜éœ€è¦ä¸ºç”¨æˆ·é¢„å…ˆåˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ª StorageClass å¯¹è±¡ã€‚ StorageClass å¯¹è±¡å®šä¹‰å½“åŠ¨æ€ä¾›åº”è¢«è°ƒç”¨æ—¶ï¼Œå“ªä¸€ä¸ªé©±åŠ¨å°†è¢«ä½¿ç”¨å’Œå“ªäº›å‚æ•°å°†è¢«ä¼ é€’ç»™é©±åŠ¨ã€‚ ä»¥ä¸‹æ¸…å•åˆ›å»ºäº†ä¸€ä¸ª StorageClass å­˜å‚¨ç±» &amp;ldquo;slow&amp;rdquo;ï¼Œå®ƒæä¾›ç±»ä¼¼æ ‡å‡†ç£ç›˜çš„æ°¸ä¹…ç£ç›˜ã€‚
apiVersion: storage.k8s.io/v1 kind: StorageClass metadata: name: slow provisioner: kubernetes.io/gce-pd parameters: type: pd-standard ä»¥ä¸‹æ¸…å•åˆ›å»ºäº†ä¸€ä¸ª &amp;ldquo;fast&amp;rdquo; å­˜å‚¨ç±»ï¼Œå®ƒæä¾›ç±»ä¼¼ SSD çš„æ°¸ä¹…ç£ç›˜ã€‚
apiVersion: storage.k8s.io/v1 kind: StorageClass metadata: name: fast provisioner: kubernetes.io/gce-pd parameters: type: pd-ssd ä½¿ç”¨åŠ¨æ€å·ä¾›åº” ç”¨æˆ·é€šè¿‡åœ¨ PersistentVolumeClaim ä¸­åŒ…å«å­˜å‚¨ç±»æ¥è¯·æ±‚åŠ¨æ€ä¾›åº”çš„å­˜å‚¨ã€‚ åœ¨ Kubernetes v1.</description>
    </item>
    
    <item>
      <title>æœåŠ¡ç›®å½•</title>
      <link>https://lijun.in/concepts/extend-kubernetes/service-catalog/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/extend-kubernetes/service-catalog/</guid>
      <description>term_id=&amp;quot;service-catalog&amp;rdquo; length=&amp;quot;all&amp;rdquo; prepend=&amp;rdquo;&amp;rdquo; &amp;gt;}}
æœåŠ¡ä»£ç†æ˜¯ç”±å¼€æ”¾æœåŠ¡ä»£ç† API è§„èŒƒå®šä¹‰çš„ä¸€ç»„æ‰˜ç®¡æœåŠ¡çš„ç»ˆç»“ç‚¹ï¼Œç”±ç¬¬ä¸‰æ–¹æä¾›å¹¶ç»´æŠ¤ï¼Œå…¶ä¸­çš„ç¬¬ä¸‰æ–¹å¯ä»¥æ˜¯ AWSï¼ŒGCP æˆ– Azure ç­‰äº‘æœåŠ¡æä¾›å•†ã€‚ æ‰˜ç®¡æœåŠ¡çš„ä¸€äº›ç¤ºä¾‹æ˜¯ Microsoft Azure Cloud Queueï¼ŒAmazon Simple Queue Service å’Œ Google Cloud Pub/Subï¼Œä½†å®ƒä»¬æ˜¯å¯ä»¥ä½¿ç”¨åº”ç”¨ç¨‹åºçš„ä»»ä½•è½¯ä»¶äº§å“ã€‚
ä½¿ç”¨æœåŠ¡ç›®å½•ï¼Œé›†ç¾¤æ“ä½œè€…å¯ä»¥æµè§ˆå…¶æä¾›çš„æ‰˜ç®¡æœåŠ¡åˆ—è¡¨ï¼Œæä¾›æ‰˜ç®¡æœåŠ¡å®ä¾‹å¹¶ä¸ä¹‹ç»‘å®šï¼Œä»¥ä½¿å…¶å¯ä»¥è¢« Kubernetes é›†ç¾¤ä¸­çš„åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚
ç¤ºä¾‹ç”¨ä¾‹ åº”ç”¨å¼€å‘è€…å¸Œæœ›ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ä½œä¸ºå…¶åœ¨ Kubernetes é›†ç¾¤ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºçš„ä¸€éƒ¨åˆ†ã€‚ ä½†æ˜¯ï¼Œå®ƒä»¬ä¸æƒ³æ‰¿å—å»ºç«‹è¿™ç§æœåŠ¡çš„å¼€é”€ï¼Œä¹Ÿä¸æƒ³è‡ªè¡Œç®¡ç†ã€‚å¹¸è¿çš„æ˜¯ï¼Œæœ‰ä¸€å®¶äº‘æœåŠ¡æä¾›å•†é€šè¿‡å®ƒä»¬çš„æœåŠ¡ä»£ç†å°†æ¶ˆæ¯é˜Ÿåˆ—ä½œä¸ºæ‰˜ç®¡æœåŠ¡æä¾›ã€‚
é›†ç¾¤è¿ç»´äººå‘˜å¯ä»¥è®¾ç½®æœåŠ¡ç›®å½•å¹¶ä½¿ç”¨å®ƒä¸äº‘æœåŠ¡æä¾›å•†çš„æœåŠ¡ä»£ç† é€šä¿¡ï¼Œä»¥æ­¤æä¾›æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡çš„å®ä¾‹å¹¶ä½¿å…¶å¯¹ Kubernetes ä¸­çš„åº”ç”¨ç¨‹åºå¯ç”¨ã€‚ å› æ­¤ï¼Œåº”ç”¨å¼€å‘è€…å¯ä»¥ä¸ç”¨å…³å¿ƒæ¶ˆæ¯é˜Ÿåˆ—çš„å®ç°ç»†èŠ‚ï¼Œä¹Ÿä¸ç”¨å¯¹å…¶è¿›è¡Œç®¡ç†ã€‚å®ƒä»¬çš„åº”ç”¨ç¨‹åºå¯ä»¥ç®€å•çš„å°†å…¶ä½œä¸ºæœåŠ¡ä½¿ç”¨ã€‚
æ¶æ„ æœåŠ¡ç›®å½•ä½¿ç”¨å¼€æ”¾æœåŠ¡ä»£ç† API ä¸æœåŠ¡ä»£ç†è¿›è¡Œé€šä¿¡ï¼Œå¹¶ä½œä¸º Kubernetes API Server çš„ä¸­ä»‹ï¼Œä»¥ä¾¿åå•†é¦–è¦è§„å®šå¹¶è·å–åº”ç”¨ç¨‹åºä½¿ç”¨æ‰˜ç®¡æœåŠ¡çš„å¿…è¦å‡­æ®ã€‚
å®ƒè¢«å®ç°ä¸ºä¸€ä¸ªæ‰©å±• API æœåŠ¡å’Œä¸€ä¸ªæ§åˆ¶å™¨ç®¡ç†å™¨ï¼Œä½¿ç”¨ Etcd ä½œä¸ºå­˜å‚¨ã€‚å®ƒè¿˜ä½¿ç”¨äº† Kubernetes 1.7+ ç‰ˆæœ¬ä¸­æä¾›çš„ aggregation layer æ¥å‘ˆç°å…¶ APIã€‚
API èµ„æº æœåŠ¡ç›®å½•å®‰è£… servicecatalog.k8s.io API å¹¶æä¾›ä»¥ä¸‹ Kubernetes èµ„æºï¼š
 ClusterServiceBrokerï¼šæœåŠ¡ç›®å½•çš„é›†ç¾¤å†…ä»£è¡¨ï¼Œå°è£…äº†å®ƒçš„æœåŠ¡è¿æ¥ç»†èŠ‚ã€‚é›†ç¾¤è¿ç»´äººå‘˜åˆ›å»ºå’Œç®¡ç†è¿™äº›èµ„æºï¼Œå¹¶å¸Œæœ›ä½¿ç”¨è¯¥ä»£ç†æœåŠ¡åœ¨é›†ç¾¤ä¸­æä¾›æ–°ç±»å‹çš„æ‰˜ç®¡æœåŠ¡ã€‚ ClusterServiceClassï¼šç”±ç‰¹å®šæœåŠ¡ä»£ç†æä¾›çš„æ‰˜ç®¡æœåŠ¡ã€‚å½“æ–°çš„ ClusterServiceBroker èµ„æºè¢«æ·»åŠ åˆ°é›†ç¾¤æ—¶ï¼ŒæœåŠ¡ç›®å½•æ§åˆ¶å™¨å°†è¿æ¥åˆ°æœåŠ¡ä»£ç†ä»¥è·å–å¯ç”¨çš„æ‰˜ç®¡æœåŠ¡åˆ—è¡¨ã€‚ç„¶åä¸ºæ¯ä¸ªæ‰˜ç®¡æœåŠ¡åˆ›å»ºå¯¹åº”çš„æ–° ClusterServiceClass èµ„æºã€‚ ClusterServicePlanï¼šæ‰˜ç®¡æœåŠ¡çš„ç‰¹å®šäº§å“ã€‚ä¾‹å¦‚æ‰˜ç®¡æœåŠ¡å¯èƒ½æœ‰ä¸åŒçš„è®¡åˆ’å¯ç”¨ï¼Œå¦‚å…è´¹ç‰ˆæœ¬å’Œä»˜è´¹ç‰ˆæœ¬ï¼Œæˆ–è€…å¯èƒ½æœ‰ä¸åŒçš„é…ç½®é€‰é¡¹ï¼Œä¾‹å¦‚ä½¿ç”¨ SSD å­˜å‚¨æˆ–æ‹¥æœ‰æ›´å¤šèµ„æºã€‚ä¸ ClusterServiceClass ç±»ä¼¼ï¼Œå½“ä¸€ä¸ªæ–°çš„ ClusterServiceBroker è¢«æ·»åŠ åˆ°é›†ç¾¤æ—¶ï¼ŒæœåŠ¡ç›®å½•ä¼šä¸ºæ¯ä¸ªæ‰˜ç®¡æœåŠ¡çš„æ¯ä¸ªå¯ç”¨æœåŠ¡è®¡åˆ’åˆ›å»ºå¯¹åº”çš„æ–° ClusterServicePlan èµ„æºã€‚ ServiceInstanceï¼šClusterServiceClass æä¾›çš„ç¤ºä¾‹ã€‚ç”±é›†ç¾¤è¿ç»´äººå‘˜åˆ›å»ºï¼Œä»¥ä½¿æ‰˜ç®¡æœåŠ¡çš„ç‰¹å®šå®ä¾‹å¯ä¾›ä¸€ä¸ªæˆ–å¤šä¸ªé›†ç¾¤å†…åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚å½“åˆ›å»ºä¸€ä¸ªæ–°çš„ ServiceInstance èµ„æºæ—¶ï¼ŒæœåŠ¡ç›®å½•æ§åˆ¶å™¨å°†è¿æ¥åˆ°ç›¸åº”çš„æœåŠ¡ä»£ç†å¹¶æŒ‡ç¤ºå®ƒè°ƒé…æœåŠ¡å®ä¾‹ã€‚ ServiceBindingï¼šServiceInstance çš„è®¿é—®å‡­æ®ã€‚ç”±å¸Œæœ›å…¶åº”ç”¨ç¨‹åºä½¿ç”¨æœåŠ¡ ServiceInstance çš„é›†ç¾¤è¿ç»´äººå‘˜åˆ›å»ºã€‚åˆ›å»ºä¹‹åï¼ŒæœåŠ¡ç›®å½•æ§åˆ¶å™¨å°†åˆ›å»ºä¸€ä¸ª Kubernetes Secretï¼Œå…¶ä¸­åŒ…å«æœåŠ¡å®ä¾‹çš„è¿æ¥ç»†èŠ‚å’Œå‡­æ®ï¼Œå¯ä»¥æŒ‚è½½åˆ° Pod ä¸­ã€‚  è®¤è¯ æœåŠ¡ç›®å½•æ”¯æŒè¿™äº›è®¤è¯æ–¹æ³•ï¼š</description>
    </item>
    
    <item>
      <title>æ ‡ç­¾å’Œé€‰æ‹©å™¨</title>
      <link>https://lijun.in/concepts/overview/working-with-objects/labels/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/overview/working-with-objects/labels/</guid>
      <description>æ ‡ç­¾ æ˜¯é™„åŠ åˆ° Kubernetes å¯¹è±¡ï¼ˆæ¯”å¦‚ Podsï¼‰ä¸Šçš„é”®å€¼å¯¹ã€‚ æ ‡ç­¾æ—¨åœ¨ç”¨äºæŒ‡å®šå¯¹ç”¨æˆ·æœ‰æ„ä¹‰ä¸”ç›¸å…³çš„å¯¹è±¡çš„æ ‡è¯†å±æ€§ï¼Œä½†ä¸ç›´æ¥å¯¹æ ¸å¿ƒç³»ç»Ÿæœ‰è¯­ä¹‰å«ä¹‰ã€‚ æ ‡ç­¾å¯ä»¥ç”¨äºç»„ç»‡å’Œé€‰æ‹©å¯¹è±¡çš„å­é›†ã€‚æ ‡ç­¾å¯ä»¥åœ¨åˆ›å»ºæ—¶é™„åŠ åˆ°å¯¹è±¡ï¼Œéšåå¯ä»¥éšæ—¶æ·»åŠ å’Œä¿®æ”¹ã€‚ æ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥å®šä¹‰ä¸€ç»„é”®/å€¼æ ‡ç­¾ã€‚æ¯ä¸ªé”®å¯¹äºç»™å®šå¯¹è±¡å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚
&amp;#34;metadata&amp;#34;: { &amp;#34;labels&amp;#34;: { &amp;#34;key1&amp;#34; : &amp;#34;value1&amp;#34;, &amp;#34;key2&amp;#34; : &amp;#34;value2&amp;#34; } } æˆ‘ä»¬æœ€ç»ˆå°†æ ‡ç­¾ç´¢å¼•å’Œåå‘ç´¢å¼•ï¼Œç”¨äºé«˜æ•ˆæŸ¥è¯¢å’Œç›‘è§†ï¼Œä½¿ç”¨å®ƒä»¬åœ¨ UI å’Œ CLI ä¸­è¿›è¡Œæ’åºå’Œåˆ†ç»„ç­‰ã€‚æˆ‘ä»¬ä¸å¸Œæœ›å°†éæ ‡è¯†æ€§çš„ã€å°¤å…¶æ˜¯å¤§å‹æˆ–ç»“æ„åŒ–æ•°æ®ç”¨ä½œæ ‡ç­¾ï¼Œç»™åè€…å¸¦æ¥æ±¡æŸ“ã€‚åº”ä½¿ç”¨ æ³¨è§£ è®°å½•éè¯†åˆ«ä¿¡æ¯
åŠ¨æœº æ ‡ç­¾ä½¿ç”¨æˆ·èƒ½å¤Ÿä»¥æ¾æ•£è€¦åˆçš„æ–¹å¼å°†ä»–ä»¬è‡ªå·±çš„ç»„ç»‡ç»“æ„æ˜ å°„åˆ°ç³»ç»Ÿå¯¹è±¡ï¼Œè€Œæ— éœ€å®¢æˆ·ç«¯å­˜å‚¨è¿™äº›æ˜ å°„ã€‚
æœåŠ¡éƒ¨ç½²å’Œæ‰¹å¤„ç†æµæ°´çº¿é€šå¸¸æ˜¯å¤šç»´å®ä½“ï¼ˆä¾‹å¦‚ï¼Œå¤šä¸ªåˆ†åŒºæˆ–éƒ¨ç½²ã€å¤šä¸ªå‘è¡Œåºåˆ—ã€å¤šä¸ªå±‚ï¼Œæ¯å±‚å¤šä¸ªå¾®æœåŠ¡ï¼‰ã€‚ç®¡ç†é€šå¸¸éœ€è¦äº¤å‰æ“ä½œï¼Œè¿™æ‰“ç ´äº†ä¸¥æ ¼çš„å±‚æ¬¡è¡¨ç¤ºçš„å°è£…ï¼Œç‰¹åˆ«æ˜¯ç”±åŸºç¡€è®¾æ–½è€Œä¸æ˜¯ç”¨æˆ·ç¡®å®šçš„ä¸¥æ ¼çš„å±‚æ¬¡ç»“æ„ã€‚
ç¤ºä¾‹æ ‡ç­¾ï¼š
 &amp;quot;release&amp;quot; : &amp;quot;stable&amp;quot;, &amp;quot;release&amp;quot; : &amp;quot;canary&amp;quot; &amp;quot;environment&amp;quot; : &amp;quot;dev&amp;quot;, &amp;quot;environment&amp;quot; : &amp;quot;qa&amp;quot;, &amp;quot;environment&amp;quot; : &amp;quot;production&amp;quot; &amp;quot;tier&amp;quot; : &amp;quot;frontend&amp;quot;, &amp;quot;tier&amp;quot; : &amp;quot;backend&amp;quot;, &amp;quot;tier&amp;quot; : &amp;quot;cache&amp;quot; &amp;quot;partition&amp;quot; : &amp;quot;customerA&amp;quot;, &amp;quot;partition&amp;quot; : &amp;quot;customerB&amp;quot; &amp;quot;track&amp;quot; : &amp;quot;daily&amp;quot;, &amp;quot;track&amp;quot; : &amp;quot;weekly&amp;quot;  è¿™äº›åªæ˜¯å¸¸ç”¨æ ‡ç­¾çš„ä¾‹å­; æ‚¨å¯ä»¥ä»»æ„åˆ¶å®šè‡ªå·±çš„çº¦å®šã€‚è¯·è®°ä½ï¼Œå¯¹äºç»™å®šå¯¹è±¡æ ‡ç­¾çš„é”®å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚</description>
    </item>
    
    <item>
      <title>ç®¡ç†èµ„æº</title>
      <link>https://lijun.in/concepts/cluster-administration/manage-deployment/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/cluster-administration/manage-deployment/</guid>
      <description>æ‚¨å·²ç»éƒ¨ç½²äº†åº”ç”¨å¹¶é€šè¿‡æœåŠ¡æš´éœ²å®ƒã€‚ç„¶åå‘¢ï¼ŸKubernetes æä¾›äº†ä¸€äº›å·¥å…·æ¥å¸®åŠ©ç®¡ç†æ‚¨çš„åº”ç”¨éƒ¨ç½²ï¼ŒåŒ…æ‹¬ç¼©æ‰©å®¹å’Œæ›´æ–°ã€‚æˆ‘ä»¬å°†æ›´æ·±å…¥è®¨è®ºçš„ç‰¹æ€§åŒ…æ‹¬é…ç½®æ–‡ä»¶å’Œæ ‡ç­¾ã€‚
ç»„ç»‡èµ„æºé…ç½® è®¸å¤šåº”ç”¨éœ€è¦åˆ›å»ºå¤šä¸ªèµ„æºï¼Œä¾‹å¦‚ Deployment å’Œ Serviceã€‚å¯ä»¥é€šè¿‡å°†å¤šä¸ªèµ„æºç»„åˆåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼ˆåœ¨ YAML ä¸­ä»¥ --- åˆ†éš”ï¼‰æ¥ç®€åŒ–å¯¹å®ƒä»¬çš„ç®¡ç†ã€‚ä¾‹å¦‚ï¼š
file=&amp;quot;application/nginx-app.yaml&amp;rdquo; &amp;gt;}}
å¯ä»¥ç”¨åˆ›å»ºå•ä¸ªèµ„æºç›¸åŒçš„æ–¹å¼æ¥åˆ›å»ºå¤šä¸ªèµ„æºï¼š
kubectl apply -f https://k8s.io/examples/application/nginx-app.yaml service/my-nginx-svc created deployment.apps/my-nginx created èµ„æºå°†æŒ‰ç…§å®ƒä»¬åœ¨æ–‡ä»¶ä¸­çš„é¡ºåºåˆ›å»ºã€‚å› æ­¤ï¼Œæœ€å¥½å…ˆæŒ‡å®šæœåŠ¡ï¼Œè¿™æ ·åœ¨æ§åˆ¶å™¨ï¼ˆä¾‹å¦‚ Deploymentï¼‰åˆ›å»º Pod æ—¶èƒ½å¤Ÿç¡®ä¿è°ƒåº¦å™¨å¯ä»¥å°†ä¸æœåŠ¡å…³è”çš„å¤šä¸ª Pod åˆ†æ•£åˆ°ä¸åŒèŠ‚ç‚¹ã€‚
kubectl create ä¹Ÿæ¥å—å¤šä¸ª -f å‚æ•°:
kubectl apply -f https://k8s.io/examples/application/nginx/nginx-svc.yaml -f https://k8s.io/examples/application/nginx/nginx-deployment.yaml è¿˜å¯ä»¥æŒ‡å®šç›®å½•è·¯å¾„ï¼Œè€Œä¸ç”¨æ·»åŠ å¤šä¸ªå•ç‹¬çš„æ–‡ä»¶ï¼š
kubectl apply -f https://k8s.io/examples/application/nginx/ kubectl å°†è¯»å–ä»»ä½•åç¼€ä¸º .yamlï¼Œ.yml æˆ–è€… .json çš„æ–‡ä»¶ã€‚
å»ºè®®çš„åšæ³•æ˜¯ï¼Œå°†åŒä¸€ä¸ªå¾®æœåŠ¡æˆ–åŒä¸€åº”ç”¨å±‚ç›¸å…³çš„èµ„æºæ”¾åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå°†åŒä¸€ä¸ªåº”ç”¨ç›¸å…³çš„æ‰€æœ‰æ–‡ä»¶æŒ‰ç»„å­˜æ”¾åˆ°åŒä¸€ä¸ªç›®å½•ä¸­ã€‚å¦‚æœåº”ç”¨çš„å„å±‚ä½¿ç”¨ DNS ç›¸äº’ç»‘å®šï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ç®€å•åœ°å°†å †æ ˆçš„æ‰€æœ‰ç»„ä»¶ä¸€èµ·éƒ¨ç½²ã€‚
è¿˜å¯ä»¥ä½¿ç”¨ URL ä½œä¸ºé…ç½®æºï¼Œä¾¿äºç›´æ¥ä½¿ç”¨å·²ç»æäº¤åˆ° Github ä¸Šçš„é…ç½®æ–‡ä»¶è¿›è¡Œéƒ¨ç½²ï¼š
kubectl apply -f https://raw.githubusercontent.com/kubernetes/website/master/content/zh/examples/application/nginx/nginx-deployment.yaml deployment.apps/my-nginx created kubectl ä¸­çš„æ‰¹é‡æ“ä½œ èµ„æºåˆ›å»ºå¹¶ä¸æ˜¯ kubectl å¯ä»¥æ‰¹é‡æ‰§è¡Œçš„å”¯ä¸€æ“ä½œã€‚kubectl è¿˜å¯ä»¥ä»é…ç½®æ–‡ä»¶ä¸­æå–èµ„æºåï¼Œä»¥ä¾¿æ‰§è¡Œå…¶ä»–æ“ä½œï¼Œç‰¹åˆ«æ˜¯åˆ é™¤æ‚¨ä¹‹å‰åˆ›å»ºçš„èµ„æºï¼š</description>
    </item>
    
    <item>
      <title>DaemonSet</title>
      <link>https://lijun.in/concepts/workloads/controllers/daemonset/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/controllers/daemonset/</guid>
      <description>DaemonSet ç¡®ä¿å…¨éƒ¨ï¼ˆæˆ–è€…æŸäº›ï¼‰èŠ‚ç‚¹ä¸Šè¿è¡Œä¸€ä¸ª Pod çš„å‰¯æœ¬ã€‚å½“æœ‰èŠ‚ç‚¹åŠ å…¥é›†ç¾¤æ—¶ï¼Œ ä¹Ÿä¼šä¸ºä»–ä»¬æ–°å¢ä¸€ä¸ª Pod ã€‚å½“æœ‰èŠ‚ç‚¹ä»é›†ç¾¤ç§»é™¤æ—¶ï¼Œè¿™äº› Pod ä¹Ÿä¼šè¢«å›æ”¶ã€‚åˆ é™¤ DaemonSet å°†ä¼šåˆ é™¤å®ƒåˆ›å»ºçš„æ‰€æœ‰ Podã€‚
DaemonSet çš„ä¸€äº›å…¸å‹ç”¨æ³•ï¼š
 åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œé›†ç¾¤å­˜å‚¨ DaemonSetï¼Œä¾‹å¦‚ glusterdã€cephã€‚ åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œæ—¥å¿—æ”¶é›† DaemonSetï¼Œä¾‹å¦‚ fluentdã€logstashã€‚ åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œç›‘æ§ DaemonSetï¼Œä¾‹å¦‚ Prometheus Node Exporterã€Flowmillã€Sysdig ä»£ç†ã€collectdã€Dynatrace OneAgentã€AppDynamics ä»£ç†ã€Datadog ä»£ç†ã€New Relic ä»£ç†ã€Ganglia gmond æˆ–è€… Instana ä»£ç†ã€‚  ä¸€ä¸ªç®€å•çš„ç”¨æ³•æ˜¯åœ¨æ‰€æœ‰çš„èŠ‚ç‚¹ä¸Šéƒ½å¯åŠ¨ä¸€ä¸ª DaemonSetï¼Œå°†è¢«ä½œä¸ºæ¯ç§ç±»å‹çš„ daemon ä½¿ç”¨ã€‚
ä¸€ä¸ªç¨å¾®å¤æ‚çš„ç”¨æ³•æ˜¯å•ç‹¬å¯¹æ¯ç§ daemon ç±»å‹ä½¿ç”¨å¤šä¸ª DaemonSetï¼Œä½†å…·æœ‰ä¸åŒçš„æ ‡å¿—ï¼Œ å¹¶ä¸”å¯¹ä¸åŒç¡¬ä»¶ç±»å‹å…·æœ‰ä¸åŒçš„å†…å­˜ã€CPU è¦æ±‚ã€‚
ç¼–å†™ DaemonSet Spec åˆ›å»º DaemonSet æ‚¨å¯ä»¥åœ¨ YAML æ–‡ä»¶ä¸­æè¿° DaemonSetã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ daemonset.yaml æ–‡ä»¶æè¿°äº†ä¸€ä¸ªè¿è¡Œ fluentd-elasticsearch Docker é•œåƒçš„ DaemonSetï¼š
odenew file=&amp;quot;controllers/daemonset.yaml&amp;rdquo; &amp;gt;}}
 åŸºäº YAML æ–‡ä»¶åˆ›å»º DaemonSet:  kubectl apply -f https://k8s.</description>
    </item>
    
    <item>
      <title>kubeadm config</title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-config/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-config/</guid>
      <description>ä» v1.8.0 å¼€å§‹ï¼Œkubeadm å°†é›†ç¾¤çš„é…ç½®ä¸Šä¼ åˆ°åä¸º kube-system çš„ ConfigMap å¯¹è±¡ä¸­ï¼Œå¯¹è±¡ä½äº kube-system å‘½åç©ºé—´å†…ã€‚å¹¶åœ¨ä»¥åçš„å‡çº§ä¸­è¯»å–è¿™ä¸ª ConfigMap é…ç½®å¯¹è±¡ã€‚ è¿™æ ·å¯ä»¥ä¿è¯ç³»ç»Ÿç»„ä»¶çš„æ­£ç¡®é…ç½®ï¼Œæä¾›æ— ç¼çš„ç”¨æˆ·ä½“éªŒã€‚
æ‚¨å¯ä»¥æ‰§è¡Œ kubeadm config view æ¥æŸ¥çœ‹ ConfigMapã€‚å¦‚æœä½¿ç”¨ kubeadm v1.7.x æˆ–æ›´ä½ç‰ˆæœ¬æ¥åˆå§‹åŒ–ç¾¤é›†ï¼Œå¿…é¡»å…ˆä½¿ç”¨ kubeadm config upload åˆ›å»º ConfigMapï¼Œç„¶åæ‰èƒ½ä½¿ç”¨ kubeadm upgradeã€‚
åœ¨ Kubernetes v1.11.0 ä¸­ï¼Œæ·»åŠ äº†ä¸€äº›æ–°å‘½ä»¤ã€‚ä½ å¯ä»¥ä½¿ç”¨ kubeadm config print-default æ‰“å°é»˜è®¤é…ç½®ï¼Œå¯ä»¥ç”¨ kubeadm config migrate æ¥å°†æ—§çš„é…ç½®æ–‡ä»¶è½¬æ¢åˆ°è¾ƒæ–°çš„ç‰ˆæœ¬ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ kubeadm config images list å’Œ kubeadm config images pull åˆ—å‡ºå¹¶æ‹‰å– kubeadm æ‰€éœ€çš„é•œåƒã€‚
kubeadm config upload from-file kubeadm config view . include &amp;ldquo;generated/kubeadm_config_view.md&amp;rdquo; &amp;gt;}}
kubeadm config print init-defaults . include &amp;ldquo;generated/kubeadm_config_print_init-defaults.</description>
    </item>
    
    <item>
      <title>Kubernetes è°ƒåº¦å™¨</title>
      <link>https://lijun.in/concepts/scheduling-eviction/kube-scheduler/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/scheduling-eviction/kube-scheduler/</guid>
      <description>åœ¨ Kubernetes ä¸­ï¼Œè°ƒåº¦ æ˜¯æŒ‡å°† text=&amp;quot;Pod&amp;rdquo; term_id=&amp;quot;pod&amp;rdquo; &amp;gt;}} æ”¾ç½®åˆ°åˆé€‚çš„ text=&amp;quot;Node&amp;rdquo; term_id=&amp;quot;node&amp;rdquo; &amp;gt;}} ä¸Šï¼Œç„¶åå¯¹åº” Node ä¸Šçš„glossary_tooltip term_id=&amp;quot;kubelet&amp;rdquo; &amp;gt;}} æ‰èƒ½å¤Ÿè¿è¡Œè¿™äº› podã€‚
è°ƒåº¦æ¦‚è§ˆ è°ƒåº¦å™¨é€šè¿‡ kubernetes çš„ watch æœºåˆ¶æ¥å‘ç°é›†ç¾¤ä¸­æ–°åˆ›å»ºä¸”å°šæœªè¢«è°ƒåº¦åˆ° Node ä¸Šçš„ Podã€‚è°ƒåº¦å™¨ä¼šå°†å‘ç°çš„æ¯ä¸€ä¸ªæœªè°ƒåº¦çš„ Pod è°ƒåº¦åˆ°ä¸€ä¸ªåˆé€‚çš„ Node ä¸Šæ¥è¿è¡Œã€‚è°ƒåº¦å™¨ä¼šä¾æ®ä¸‹æ–‡çš„è°ƒåº¦åŸåˆ™æ¥åšå‡ºè°ƒåº¦é€‰æ‹©ã€‚
å¦‚æœä½ æƒ³è¦ç†è§£ Pod ä¸ºä»€ä¹ˆä¼šè¢«è°ƒåº¦åˆ°ç‰¹å®šçš„ Node ä¸Šï¼Œæˆ–è€…ä½ æƒ³è¦å°è¯•å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„è°ƒåº¦å™¨ï¼Œè¿™ç¯‡æ–‡ç« å°†å¸®åŠ©ä½ äº†è§£è°ƒåº¦ã€‚
kube-scheduler kube-scheduler æ˜¯ Kubernetes é›†ç¾¤çš„é»˜è®¤è°ƒåº¦å™¨ï¼Œå¹¶ä¸”æ˜¯é›†ç¾¤ text=&amp;quot;æ§åˆ¶é¢&amp;rdquo; term_id=&amp;quot;control-plane&amp;rdquo; &amp;gt;}} çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœä½ çœŸçš„å¸Œæœ›æˆ–è€…æœ‰è¿™æ–¹é¢çš„éœ€æ±‚ï¼Œkube-scheduler åœ¨è®¾è®¡ä¸Šæ˜¯å…è®¸ä½ è‡ªå·±å†™ä¸€ä¸ªè°ƒåº¦ç»„ä»¶å¹¶æ›¿æ¢åŸæœ‰çš„ kube-schedulerã€‚
å¯¹æ¯ä¸€ä¸ªæ–°åˆ›å»ºçš„ Pod æˆ–è€…æ˜¯æœªè¢«è°ƒåº¦çš„ Podï¼Œkube-scheduler ä¼šé€‰æ‹©ä¸€ä¸ªæœ€ä¼˜çš„ Node å»è¿è¡Œè¿™ä¸ª Podã€‚ç„¶è€Œï¼ŒPod å†…çš„æ¯ä¸€ä¸ªå®¹å™¨å¯¹èµ„æºéƒ½æœ‰ä¸åŒçš„éœ€æ±‚ï¼Œè€Œä¸” Pod æœ¬èº«ä¹Ÿæœ‰ä¸åŒçš„èµ„æºéœ€æ±‚ã€‚å› æ­¤ï¼ŒPod åœ¨è¢«è°ƒåº¦åˆ° Node ä¸Šä¹‹å‰ï¼Œæ ¹æ®è¿™äº›ç‰¹å®šçš„èµ„æºè°ƒåº¦éœ€æ±‚ï¼Œéœ€è¦å¯¹é›†ç¾¤ä¸­çš„ Node è¿›è¡Œä¸€æ¬¡è¿‡æ»¤ã€‚
åœ¨ä¸€ä¸ªé›†ç¾¤ä¸­ï¼Œæ»¡è¶³ä¸€ä¸ª Pod è°ƒåº¦è¯·æ±‚çš„æ‰€æœ‰ Node ç§°ä¹‹ä¸º å¯è°ƒåº¦èŠ‚ç‚¹ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ä¸ª Node èƒ½æ»¡è¶³ Pod çš„èµ„æºè¯·æ±‚ï¼Œé‚£ä¹ˆè¿™ä¸ª Pod å°†ä¸€ç›´åœç•™åœ¨æœªè°ƒåº¦çŠ¶æ€ç›´åˆ°è°ƒåº¦å™¨èƒ½å¤Ÿæ‰¾åˆ°åˆé€‚çš„ Nodeã€‚</description>
    </item>
    
    <item>
      <title>Pod Preset</title>
      <link>https://lijun.in/concepts/workloads/pods/podpreset/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/pods/podpreset/</guid>
      <description>æœ¬æ–‡æä¾›äº† PodPreset çš„æ¦‚è¿°ã€‚ åœ¨ Pod åˆ›å»ºæ—¶ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ PodPreset å¯¹è±¡å°†ç‰¹å®šä¿¡æ¯æ³¨å…¥ Pod ä¸­ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥åŒ…æ‹¬ secretã€ å·ã€å·æŒ‚è½½å’Œç¯å¢ƒå˜é‡ã€‚
ç†è§£ Pod Preset Pod Preset æ˜¯ä¸€ç§ API èµ„æºï¼Œåœ¨ Pod åˆ›å»ºæ—¶ï¼Œç”¨æˆ·å¯ä»¥ç”¨å®ƒå°†é¢å¤–çš„è¿è¡Œæ—¶éœ€æ±‚ä¿¡æ¯æ³¨å…¥ Podã€‚ ä½¿ç”¨æ ‡ç­¾é€‰æ‹©å™¨ï¼ˆlabel selectorï¼‰æ¥æŒ‡å®š Pod Preset æ‰€é€‚ç”¨çš„ Podã€‚
ä½¿ç”¨ Pod Preset ä½¿å¾— Pod æ¨¡æ¿ç¼–å†™è€…ä¸å¿…æ˜¾å¼åœ°ä¸ºæ¯ä¸ª Pod è®¾ç½®ä¿¡æ¯ã€‚ è¿™æ ·ï¼Œä½¿ç”¨ç‰¹å®šæœåŠ¡çš„ Pod æ¨¡æ¿ç¼–å†™è€…ä¸éœ€è¦äº†è§£è¯¥æœåŠ¡çš„æ‰€æœ‰ç»†èŠ‚ã€‚
äº†è§£æ›´å¤šçš„ç›¸å…³èƒŒæ™¯ä¿¡æ¯ï¼Œè¯·å‚è€ƒ PodPreset è®¾è®¡ææ¡ˆã€‚
PodPreset å¦‚ä½•å·¥ä½œ Kubernetes æä¾›äº†å‡†å…¥æ§åˆ¶å™¨ (PodPreset)ï¼Œè¯¥æ§åˆ¶å™¨è¢«å¯ç”¨æ—¶ï¼Œä¼šå°† Pod Preset åº”ç”¨äºæ¥æ”¶åˆ°çš„ Pod åˆ›å»ºè¯·æ±‚ä¸­ã€‚ å½“å‡ºç° Pod åˆ›å»ºè¯·æ±‚æ—¶ï¼Œç³»ç»Ÿä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
 æ£€ç´¢æ‰€æœ‰å¯ç”¨ PodPresets ã€‚ æ£€æŸ¥ PodPreset çš„æ ‡ç­¾é€‰æ‹©å™¨ä¸è¦åˆ›å»ºçš„ Pod çš„æ ‡ç­¾æ˜¯å¦åŒ¹é…ã€‚ å°è¯•åˆå¹¶ PodPreset ä¸­å®šä¹‰çš„å„ç§èµ„æºï¼Œå¹¶æ³¨å…¥è¦åˆ›å»ºçš„ Podã€‚ å‘ç”Ÿé”™è¯¯æ—¶æŠ›å‡ºäº‹ä»¶ï¼Œè¯¥äº‹ä»¶è®°å½•äº† pod ä¿¡æ¯åˆå¹¶é”™è¯¯ï¼ŒåŒæ—¶åœ¨ ä¸æ³¨å…¥ PodPreset ä¿¡æ¯çš„æƒ…å†µä¸‹åˆ›å»º Podã€‚ ä¸ºæ”¹åŠ¨çš„ Pod spec æ·»åŠ æ³¨è§£ï¼Œæ¥è¡¨æ˜å®ƒè¢« PodPreset æ‰€ä¿®æ”¹ã€‚ æ³¨è§£å½¢å¦‚ï¼š podpreset.</description>
    </item>
    
    <item>
      <title>Pod æ‹“æ‰‘æ‰©å±•çº¦æŸ</title>
      <link>https://lijun.in/concepts/workloads/pods/pod-topology-spread-constraints/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/pods/pod-topology-spread-constraints/</guid>
      <description>feature-state for_k8s_version=&amp;quot;v1.16&amp;rdquo; state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
å¯ä»¥ä½¿ç”¨æ‹“æ‰‘æ‰©å±•çº¦æŸæ¥æ§åˆ¶glossary_tooltip text=&amp;quot;Pods&amp;rdquo; term_id=&amp;quot;Pod&amp;rdquo; &amp;gt;}} åœ¨é›†ç¾¤å†…æ•…éšœåŸŸï¼ˆä¾‹å¦‚åœ°åŒºï¼ŒåŒºåŸŸï¼ŒèŠ‚ç‚¹å’Œå…¶ä»–ç”¨æˆ·è‡ªå®šä¹‰æ‹“æ‰‘åŸŸï¼‰ä¹‹é—´çš„åˆ†å¸ƒã€‚è¿™å¯ä»¥å¸®åŠ©å®ç°é«˜å¯ç”¨ä»¥åŠæå‡èµ„æºåˆ©ç”¨ç‡ã€‚
å…ˆå†³æ¡ä»¶ å¯ç”¨åŠŸèƒ½ ç¡®ä¿ EvenPodsSpread åŠŸèƒ½å·²å¼€å¯ï¼ˆåœ¨ 1.16 ç‰ˆæœ¬ä¸­è¯¥åŠŸèƒ½é»˜è®¤å…³é—­ï¼‰ã€‚é˜…è¯»åŠŸèƒ½é€‰é¡¹äº†è§£å¦‚ä½•å¼€å¯è¯¥åŠŸèƒ½ã€‚EvenPodsSpread å¿…é¡»åœ¨ glossary_tooltip text=&amp;quot;API Server&amp;rdquo; term_id=&amp;quot;kube-apiserver&amp;rdquo; &amp;gt;}} å’Œ glossary_tooltip text=&amp;quot;scheduler&amp;rdquo; term_id=&amp;quot;kube-scheduler&amp;rdquo; &amp;gt;}} ä¸­éƒ½è¦å¼€å¯ã€‚
èŠ‚ç‚¹æ ‡ç­¾ æ‹“æ‰‘æ‰©å±•çº¦æŸä¾èµ–äºèŠ‚ç‚¹æ ‡ç­¾æ¥æ ‡è¯†æ¯ä¸ªèŠ‚ç‚¹æ‰€åœ¨çš„æ‹“æ‰‘åŸŸã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªèŠ‚ç‚¹å¯èƒ½å…·æœ‰æ ‡ç­¾ï¼šnode=node1,zone=us-east-1a,region=us-east-1
å‡è®¾ä½ æ‹¥æœ‰ä¸€ä¸ªå…·æœ‰ä»¥ä¸‹æ ‡ç­¾çš„ 4 èŠ‚ç‚¹é›†ç¾¤ï¼š
NAME STATUS ROLES AGE VERSION LABELS node1 Ready &amp;lt;none&amp;gt; 4m26s v1.16.0 node=node1,zone=zoneA node2 Ready &amp;lt;none&amp;gt; 3m58s v1.16.0 node=node2,zone=zoneA node3 Ready &amp;lt;none&amp;gt; 3m17s v1.16.0 node=node3,zone=zoneB node4 Ready &amp;lt;none&amp;gt; 2m43s v1.16.0 node=node4,zone=zoneB ç„¶åä»é€»è¾‘ä¸Šçœ‹é›†ç¾¤å¦‚ä¸‹ï¼š
+---------------+---------------+ | zoneA | zoneB | +-------+-------+-------+-------+ | node1 | node2 | node3 | node4 | +-------+-------+-------+-------+ å¯ä»¥å¤ç”¨åœ¨å¤§å¤šæ•°é›†ç¾¤ä¸Šè‡ªåŠ¨åˆ›å»ºå’Œå¡«å……çš„çŸ¥åæ ‡ç­¾ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨æ·»åŠ æ ‡ç­¾ã€‚</description>
    </item>
    
    <item>
      <title>Secret</title>
      <link>https://lijun.in/concepts/configuration/secret/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/configuration/secret/</guid>
      <description>Secret å¯¹è±¡ç±»å‹ç”¨æ¥ä¿å­˜æ•æ„Ÿä¿¡æ¯ï¼Œä¾‹å¦‚å¯†ç ã€OAuth ä»¤ç‰Œå’Œ ssh keyã€‚ å°†è¿™äº›ä¿¡æ¯æ”¾åœ¨ secret ä¸­æ¯”æ”¾åœ¨ term_id=&amp;quot;pod&amp;rdquo; &amp;gt;}} çš„å®šä¹‰æˆ–è€… text=&amp;quot;å®¹å™¨é•œåƒ&amp;rdquo; term_id=&amp;quot;image&amp;rdquo; &amp;gt;}} ä¸­æ¥è¯´æ›´åŠ å®‰å…¨å’Œçµæ´»ã€‚ å‚é˜… Secret è®¾è®¡æ–‡æ¡£ è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚
Secret æ¦‚è§ˆ Secret æ˜¯ä¸€ç§åŒ…å«å°‘é‡æ•æ„Ÿä¿¡æ¯ä¾‹å¦‚å¯†ç ã€token æˆ– key çš„å¯¹è±¡ã€‚è¿™æ ·çš„ä¿¡æ¯å¯èƒ½ä¼šè¢«æ”¾åœ¨ Pod spec ä¸­æˆ–è€…é•œåƒä¸­ï¼›å°†å…¶æ”¾åœ¨ä¸€ä¸ª secret å¯¹è±¡ä¸­å¯ä»¥æ›´å¥½åœ°æ§åˆ¶å®ƒçš„ç”¨é€”ï¼Œå¹¶é™ä½æ„å¤–æš´éœ²çš„é£é™©ã€‚
ç”¨æˆ·å¯ä»¥åˆ›å»º secretï¼ŒåŒæ—¶ç³»ç»Ÿä¹Ÿåˆ›å»ºäº†ä¸€äº› secretã€‚
è¦ä½¿ç”¨ secretï¼Œpod éœ€è¦å¼•ç”¨ secretã€‚Pod å¯ä»¥ç”¨ä¸¤ç§æ–¹å¼ä½¿ç”¨ secretï¼šä½œä¸º text=&amp;quot;volume&amp;rdquo; term_id=&amp;quot;volume&amp;rdquo; &amp;gt;}} ä¸­çš„æ–‡ä»¶è¢«æŒ‚è½½åˆ° pod ä¸­çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨é‡Œï¼Œæˆ–è€…å½“ kubelet ä¸º pod æ‹‰å–é•œåƒæ—¶ä½¿ç”¨ã€‚
å†…ç½® secret Service Account ä½¿ç”¨ API å‡­è¯è‡ªåŠ¨åˆ›å»ºå’Œé™„åŠ  secret Kubernetes è‡ªåŠ¨åˆ›å»ºåŒ…å«è®¿é—® API å‡­æ®çš„ secretï¼Œå¹¶è‡ªåŠ¨ä¿®æ”¹æ‚¨çš„ pod ä»¥ä½¿ç”¨æ­¤ç±»å‹çš„ secretã€‚
å¦‚æœéœ€è¦ï¼Œå¯ä»¥ç¦ç”¨æˆ–è¦†ç›–è‡ªåŠ¨åˆ›å»ºå’Œä½¿ç”¨ API å‡­æ®ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨éœ€è¦çš„åªæ˜¯å®‰å…¨åœ°è®¿é—® apiserverï¼Œæˆ‘ä»¬æ¨èè¿™æ ·çš„å·¥ä½œæµç¨‹ã€‚</description>
    </item>
    
    <item>
      <title>v1.17</title>
      <link>https://lijun.in/reference/kubernetes-api/api-index/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/kubernetes-api/api-index/</guid>
      <description>Kubernetes API v1.17</description>
    </item>
    
    <item>
      <title>ä¸ºå‘½åç©ºé—´é…ç½®å†…å­˜å’Œ CPU é…é¢</title>
      <link>https://lijun.in/tasks/administer-cluster/manage-resources/quota-memory-cpu-namespace/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/manage-resources/quota-memory-cpu-namespace/</guid>
      <description>æœ¬æ–‡ä»‹ç»æ€æ ·ä¸ºå‘½åç©ºé—´è®¾ç½®å®¹å™¨å¯ç”¨çš„å†…å­˜å’Œ CPU æ€»é‡ã€‚ä½ å¯ä»¥é€šè¿‡ [ResourceQuota](/docs/reference/generated/kubernetes-api/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#resourcequota-v1-core) å¯¹è±¡è®¾ç½®é…é¢.
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹è‡³å°‘æœ‰1 GiBçš„å†…å­˜ã€‚
åˆ›å»ºå‘½åç©ºé—´ åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œä»¥ä¾¿æœ¬ç»ƒä¹ ä¸­åˆ›å»ºçš„èµ„æºå’Œé›†ç¾¤çš„å…¶ä½™éƒ¨åˆ†ç›¸éš”ç¦»ã€‚
kubectl create namespace quota-mem-cpu-example åˆ›å»º ResourceQuota è¿™é‡Œç»™å‡ºä¸€ä¸ª ResourceQuota å¯¹è±¡çš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;admin/resource/quota-mem-cpu.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»º ResourceQuota
kubectl create -f https://k8s.io/examples/admin/resource/quota-mem-cpu.yaml --namespace=quota-mem-cpu-example æŸ¥çœ‹ ResourceQuota è¯¦æƒ…ï¼š
kubectl get resourcequota mem-cpu-demo --namespace=quota-mem-cpu-example --output=yaml ResourceQuota åœ¨ quota-mem-cpu-example å‘½åç©ºé—´ä¸­è®¾ç½®äº†å¦‚ä¸‹è¦æ±‚ï¼š
 æ¯ä¸ªå®¹å™¨å¿…é¡»æœ‰å†…å­˜è¯·æ±‚å’Œé™åˆ¶ï¼Œä»¥åŠ CPU è¯·æ±‚å’Œé™åˆ¶ã€‚ æ‰€æœ‰å®¹å™¨çš„å†…å­˜è¯·æ±‚æ€»å’Œä¸èƒ½è¶…è¿‡1 GiBã€‚ æ‰€æœ‰å®¹å™¨çš„å†…å­˜é™åˆ¶æ€»å’Œä¸èƒ½è¶…è¿‡2 GiBã€‚ æ‰€æœ‰å®¹å™¨çš„ CPU è¯·æ±‚æ€»å’Œä¸èƒ½è¶…è¿‡1 cpuã€‚ æ‰€æœ‰å®¹å™¨çš„ CPU é™åˆ¶æ€»å’Œä¸èƒ½è¶…è¿‡2 cpuã€‚  åˆ›å»º Pod è¿™é‡Œç»™å‡º Pod çš„é…ç½®æ–‡ä»¶ï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Weave Net ä½œä¸º NetworkPolicy</title>
      <link>https://lijun.in/tasks/administer-cluster/network-policy-provider/weave-network-policy/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/network-policy-provider/weave-network-policy/</guid>
      <description>æœ¬é¡µå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ä½¿ç”¨ Weave Net ä½œä¸º NetworkPolicyã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} æ‚¨éœ€è¦æ‹¥æœ‰ä¸€ä¸ª Kubernetes é›†ç¾¤ã€‚æŒ‰ç…§kubeadm å…¥é—¨æŒ‡å—æ¥å¼•å¯¼ä¸€ä¸ªã€‚
å®‰è£… Weave Net æ’ä»¶ æŒ‰ç…§é€šè¿‡æ’ä»¶é›†æˆKubernetesæŒ‡å—ã€‚
Kubernetes çš„ Weave Net æ’ä»¶å¸¦æœ‰ç½‘ç»œç­–ç•¥æ§åˆ¶å™¨ï¼Œå¯è‡ªåŠ¨ç›‘æ§ Kubernetes æ‰€æœ‰åç§°ç©ºé—´ä¸­çš„ä»»ä½• NetworkPolicy æ³¨é‡Šã€‚ é…ç½®iptablesè§„åˆ™ä»¥å…è®¸æˆ–é˜»æ­¢ç­–ç•¥æŒ‡ç¤ºçš„æµé‡ã€‚
æµ‹è¯•å®‰è£… éªŒè¯ weave æ˜¯å¦æœ‰æ•ˆã€‚
è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š
kubectl get po -n kube-system -o wide è¾“å‡ºç±»ä¼¼è¿™æ ·ï¼š
NAME READY STATUS RESTARTS AGE IP NODE weave-net-1t1qg 2/2 Running 0 9d 192.168.2.10 worknode3 weave-net-231d7 2/2 Running 1 7d 10.2.0.17 worknodegpu weave-net-7nmwt 2/2 Running 3 9d 192.168.2.131 masternode weave-net-pmw8w 2/2 Running 0 9d 192.</description>
    </item>
    
    <item>
      <title>å°† Pod åˆ†é…ç»™èŠ‚ç‚¹</title>
      <link>https://lijun.in/concepts/configuration/assign-pod-node/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/configuration/assign-pod-node/</guid>
      <description>ä½ å¯ä»¥çº¦æŸä¸€ä¸ª text=&amp;quot;Pod&amp;rdquo; term_id=&amp;quot;pod&amp;rdquo; &amp;gt;}} åªèƒ½åœ¨ç‰¹å®šçš„ text=&amp;quot;Node(s)&amp;rdquo; term_id=&amp;quot;node&amp;rdquo; &amp;gt;}} ä¸Šè¿è¡Œï¼Œæˆ–è€…ä¼˜å…ˆè¿è¡Œåœ¨ç‰¹å®šçš„èŠ‚ç‚¹ä¸Šã€‚æœ‰å‡ ç§æ–¹æ³•å¯ä»¥å®ç°è¿™ç‚¹ï¼Œæ¨èçš„æ–¹æ³•éƒ½æ˜¯ç”¨æ ‡ç­¾é€‰æ‹©å™¨æ¥è¿›è¡Œé€‰æ‹©ã€‚é€šå¸¸è¿™æ ·çš„çº¦æŸä¸æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºè°ƒåº¦å™¨å°†è‡ªåŠ¨è¿›è¡Œåˆç†çš„æ”¾ç½®ï¼ˆæ¯”å¦‚ï¼Œå°† pod åˆ†æ•£åˆ°èŠ‚ç‚¹ä¸Šï¼Œè€Œä¸æ˜¯å°† pod æ”¾ç½®åœ¨å¯ç”¨èµ„æºä¸è¶³çš„èŠ‚ç‚¹ä¸Šç­‰ç­‰ï¼‰ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥éœ€è¦æ›´å¤šæ§åˆ¶ pod åœé çš„èŠ‚ç‚¹ï¼Œä¾‹å¦‚ï¼Œç¡®ä¿ pod æœ€ç»ˆè½åœ¨è¿æ¥äº† SSD çš„æœºå™¨ä¸Šï¼Œæˆ–è€…å°†æ¥è‡ªä¸¤ä¸ªä¸åŒçš„æœåŠ¡ä¸”æœ‰å¤§é‡é€šä¿¡çš„ pod æ”¾ç½®åœ¨åŒä¸€ä¸ªå¯ç”¨åŒºã€‚
nodeSelector nodeSelector æ˜¯èŠ‚ç‚¹é€‰æ‹©çº¦æŸçš„æœ€ç®€å•æ¨èå½¢å¼ã€‚nodeSelector æ˜¯ PodSpec çš„ä¸€ä¸ªå­—æ®µã€‚å®ƒæŒ‡å®šé”®å€¼å¯¹çš„æ˜ å°„ã€‚ä¸ºäº†ä½¿ pod å¯ä»¥åœ¨èŠ‚ç‚¹ä¸Šè¿è¡Œï¼ŒèŠ‚ç‚¹å¿…é¡»å…·æœ‰æ¯ä¸ªæŒ‡å®šçš„é”®å€¼å¯¹ä½œä¸ºæ ‡ç­¾ï¼ˆå®ƒä¹Ÿå¯ä»¥å…·æœ‰å…¶ä»–æ ‡ç­¾ï¼‰ã€‚æœ€å¸¸ç”¨çš„æ˜¯ä¸€å¯¹é”®å€¼å¯¹ã€‚
è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä½¿ç”¨ nodeSelector çš„ä¾‹å­ã€‚
æ­¥éª¤é›¶ï¼šå…ˆå†³æ¡ä»¶ æœ¬ç¤ºä¾‹å‡è®¾ä½ å·²åŸºæœ¬äº†è§£ Kubernetes çš„ pod å¹¶ä¸”å·²ç»å»ºç«‹ä¸€ä¸ª Kubernetes é›†ç¾¤ã€‚
æ­¥éª¤ä¸€ï¼šæ·»åŠ æ ‡ç­¾åˆ°èŠ‚ç‚¹ æ‰§è¡Œ kubectl get nodes å‘½ä»¤è·å–é›†ç¾¤çš„èŠ‚ç‚¹åç§°ã€‚é€‰æ‹©ä¸€ä¸ªä½ è¦å¢åŠ æ ‡ç­¾çš„èŠ‚ç‚¹ï¼Œç„¶åæ‰§è¡Œ kubectl label nodes &amp;lt;node-name&amp;gt; &amp;lt;label-key&amp;gt;=&amp;lt;label-value&amp;gt; å‘½ä»¤å°†æ ‡ç­¾æ·»åŠ åˆ°ä½ æ‰€é€‰æ‹©çš„èŠ‚ç‚¹ä¸Šã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„èŠ‚ç‚¹åç§°ä¸º &amp;lsquo;kubernetes-foo-node-1.c.a-robinson.internal&amp;rsquo; å¹¶ä¸”æƒ³è¦çš„æ ‡ç­¾æ˜¯ &amp;lsquo;disktype=ssd&amp;rsquo;ï¼Œåˆ™å¯ä»¥æ‰§è¡Œ kubectl label nodes kubernetes-foo-node-1.c.a-robinson.internal disktype=ssd å‘½ä»¤ã€‚
ä½ å¯ä»¥é€šè¿‡é‡æ–°è¿è¡Œ kubectl get nodes --show-labels å¹¶ä¸”æŸ¥çœ‹èŠ‚ç‚¹å½“å‰å…·æœ‰äº†ä¸€ä¸ªæ ‡ç­¾æ¥éªŒè¯å®ƒæ˜¯å¦æœ‰æ•ˆã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ kubectl describe node &amp;quot;nodename&amp;quot; å‘½ä»¤æŸ¥çœ‹æŒ‡å®šèŠ‚ç‚¹çš„æ ‡ç­¾å®Œæ•´åˆ—è¡¨ã€‚</description>
    </item>
    
    <item>
      <title>æ³¨è§£</title>
      <link>https://lijun.in/concepts/overview/working-with-objects/annotations/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/overview/working-with-objects/annotations/</guid>
      <description>ä½ å¯ä»¥ä½¿ç”¨ Kubernetes æ³¨è§£ä¸ºå¯¹è±¡é™„åŠ ä»»æ„çš„éæ ‡è¯†çš„å…ƒæ•°æ®ã€‚å®¢æˆ·ç«¯ç¨‹åºï¼ˆä¾‹å¦‚å·¥å…·å’Œåº“ï¼‰èƒ½å¤Ÿè·å–è¿™äº›å…ƒæ•°æ®ä¿¡æ¯ã€‚
ä¸ºå¯¹è±¡é™„åŠ å…ƒæ•°æ® æ‚¨å¯ä»¥ä½¿ç”¨æ ‡ç­¾æˆ–æ³¨è§£å°†å…ƒæ•°æ®é™„åŠ åˆ° Kubernetes å¯¹è±¡ã€‚ æ ‡ç­¾å¯ä»¥ç”¨æ¥é€‰æ‹©å¯¹è±¡å’ŒæŸ¥æ‰¾æ»¡è¶³æŸäº›æ¡ä»¶çš„å¯¹è±¡é›†åˆã€‚ ç›¸åï¼Œæ³¨è§£ä¸ç”¨äºæ ‡è¯†å’Œé€‰æ‹©å¯¹è±¡ã€‚ æ³¨è§£ä¸­çš„å…ƒæ•°æ®ï¼Œå¯ä»¥å¾ˆå°ï¼Œä¹Ÿå¯ä»¥å¾ˆå¤§ï¼Œå¯ä»¥æ˜¯ç»“æ„åŒ–çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯éç»“æ„åŒ–çš„ï¼Œèƒ½å¤ŸåŒ…å«æ ‡ç­¾ä¸å…è®¸çš„å­—ç¬¦ã€‚
æ³¨è§£å’Œæ ‡ç­¾ä¸€æ ·ï¼Œæ˜¯é”®/å€¼å¯¹:
&amp;#34;metadata&amp;#34;: { &amp;#34;annotations&amp;#34;: { &amp;#34;key1&amp;#34; : &amp;#34;value1&amp;#34;, &amp;#34;key2&amp;#34; : &amp;#34;value2&amp;#34; } } ä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­ï¼Œç”¨æ¥è¯´æ˜å“ªäº›ä¿¡æ¯å¯ä»¥ä½¿ç”¨æ³¨è§£æ¥è®°å½•:
 ç”±å£°æ˜æ€§é…ç½®æ‰€ç®¡ç†çš„å­—æ®µã€‚ å°†è¿™äº›å­—æ®µé™„åŠ ä¸ºæ³¨è§£ï¼Œèƒ½å¤Ÿå°†å®ƒä»¬ä¸å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯è®¾ç½®çš„é»˜è®¤å€¼ã€è‡ªåŠ¨ç”Ÿæˆçš„å­—æ®µä»¥åŠé€šè¿‡è‡ªåŠ¨è°ƒæ•´å¤§å°æˆ–è‡ªåŠ¨ä¼¸ç¼©ç³»ç»Ÿè®¾ç½®çš„å­—æ®µåŒºåˆ†å¼€æ¥ã€‚   æ„å»ºã€å‘å¸ƒæˆ–é•œåƒä¿¡æ¯ï¼ˆå¦‚æ—¶é—´æˆ³ã€å‘å¸ƒ IDã€Git åˆ†æ”¯ã€PR æ•°é‡ã€é•œåƒå“ˆå¸Œã€ä»“åº“åœ°å€ï¼‰ã€‚   æŒ‡å‘æ—¥å¿—è®°å½•ã€ç›‘æ§ã€åˆ†ææˆ–å®¡è®¡ä»“åº“çš„æŒ‡é’ˆã€‚   å¯ç”¨äºè°ƒè¯•ç›®çš„çš„å®¢æˆ·ç«¯åº“æˆ–å·¥å…·ä¿¡æ¯ï¼šä¾‹å¦‚ï¼Œåç§°ã€ç‰ˆæœ¬å’Œæ„å»ºä¿¡æ¯ã€‚   ç”¨æˆ·æˆ–è€…å·¥å…·/ç³»ç»Ÿçš„æ¥æºä¿¡æ¯ï¼Œä¾‹å¦‚æ¥è‡ªå…¶ä»–ç”Ÿæ€ç³»ç»Ÿç»„ä»¶çš„ç›¸å…³å¯¹è±¡çš„ URLã€‚   æ¨å‡ºçš„è½»é‡çº§å·¥å…·çš„å…ƒæ•°æ®ä¿¡æ¯ï¼šä¾‹å¦‚ï¼Œé…ç½®æˆ–æ£€æŸ¥ç‚¹ã€‚   è´Ÿè´£äººå‘˜çš„ç”µè¯æˆ–å‘¼æœºå·ç ï¼Œæˆ–æŒ‡å®šåœ¨ä½•å¤„å¯ä»¥æ‰¾åˆ°è¯¥ä¿¡æ¯çš„ç›®å½•æ¡ç›®ï¼Œå¦‚å›¢é˜Ÿç½‘ç«™ã€‚  ä»ç”¨æˆ·åˆ°æœ€ç»ˆè¿è¡Œçš„æŒ‡ä»¤ï¼Œä»¥ä¿®æ”¹è¡Œä¸ºæˆ–ä½¿ç”¨éæ ‡å‡†åŠŸèƒ½ã€‚
æ‚¨å¯ä»¥å°†è¿™ç±»ä¿¡æ¯å­˜å‚¨åœ¨å¤–éƒ¨æ•°æ®åº“æˆ–ç›®å½•ä¸­è€Œä¸ä½¿ç”¨æ³¨è§£ï¼Œä½†è¿™æ ·åšå°±ä½¿å¾—å¼€å‘äººå‘˜å¾ˆéš¾ç”Ÿæˆç”¨äºéƒ¨ç½²ã€ç®¡ç†ã€è‡ªæ£€çš„å®¢æˆ·ç«¯å…±äº«åº“å’Œå·¥å…·ã€‚
è¯­æ³•å’Œå­—ç¬¦é›† æ³¨è§£ å­˜å‚¨çš„å½¢å¼æ˜¯é”®/å€¼å¯¹ã€‚æœ‰æ•ˆçš„æ³¨è§£é”®åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šå¯é€‰çš„å‰ç¼€å’Œåç§°ï¼Œä»¥æ–œæ ï¼ˆ/ï¼‰åˆ†éš”ã€‚ åç§°æ®µæ˜¯å¿…éœ€é¡¹ï¼Œå¹¶ä¸”å¿…é¡»åœ¨63ä¸ªå­—ç¬¦ä»¥å†…ï¼Œä»¥å­—æ¯æ•°å­—å­—ç¬¦ï¼ˆ[a-z0-9A-Z]ï¼‰å¼€å¤´å’Œç»“å°¾ï¼Œå¹¶å…è®¸ä½¿ç”¨ç ´æŠ˜å·ï¼ˆ-ï¼‰ï¼Œä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ï¼Œç‚¹ï¼ˆ.ï¼‰å’Œå­—æ¯æ•°å­—ã€‚ å‰ç¼€æ˜¯å¯é€‰çš„ã€‚ å¦‚æœæŒ‡å®šï¼Œåˆ™å‰ç¼€å¿…é¡»æ˜¯DNSå­åŸŸï¼šä¸€ç³»åˆ—ç”±ç‚¹ï¼ˆ.ï¼‰åˆ†éš”çš„DNSæ ‡ç­¾ï¼Œæ€»è®¡ä¸è¶…è¿‡253ä¸ªå­—ç¬¦ï¼Œåè·Ÿæ–œæ ï¼ˆ/ï¼‰ã€‚ å¦‚æœçœç•¥å‰ç¼€ï¼Œåˆ™å‡å®šæ³¨é‡Šé”®å¯¹ç”¨æˆ·æ˜¯ç§æœ‰çš„ã€‚ ç”±ç³»ç»Ÿç»„ä»¶æ·»åŠ çš„æ³¨é‡Šï¼ˆä¾‹å¦‚ï¼Œkube-schedulerï¼Œkube-controller-managerï¼Œkube-apiserverï¼Œkubectl æˆ–å…¶ä»–ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼‰ï¼Œå¿…é¡»ä¸ºç»ˆç«¯ç”¨æˆ·æ·»åŠ æ³¨é‡Šå‰ç¼€ã€‚
kubernetes.io / å’Œ k8s.io / å‰ç¼€æ˜¯ä¸ºKubernetesæ ¸å¿ƒç»„ä»¶ä¿ç•™çš„ã€‚
ä¾‹å¦‚ï¼Œè¿™æ˜¯Podçš„é…ç½®æ–‡ä»¶ï¼Œå…¶æ³¨é‡Šä¸º imageregistryï¼šhttpsï¼š// hub.docker.com / ï¼š</description>
    </item>
    
    <item>
      <title>ç½‘ç»œç­–ç•¥</title>
      <link>https://lijun.in/concepts/services-networking/network-policies/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/services-networking/network-policies/</guid>
      <description>ç½‘ç»œç­–ç•¥ï¼ˆNetworkPolicyï¼‰æ˜¯ä¸€ç§å…³äº text=&amp;quot;Pod&amp;rdquo; term_id=&amp;quot;pod&amp;quot;&amp;gt;}} é—´åŠä¸å…¶ä»–ç½‘ç»œç«¯ç‚¹é—´æ‰€å…è®¸çš„é€šä¿¡è§„åˆ™çš„è§„èŒƒã€‚
NetworkPolicy èµ„æºä½¿ç”¨ text=&amp;quot;æ ‡ç­¾&amp;rdquo; term_id=&amp;quot;label&amp;quot;&amp;gt;}} é€‰æ‹© Podï¼Œå¹¶å®šä¹‰é€‰å®š Pod æ‰€å…è®¸çš„é€šä¿¡è§„åˆ™ã€‚
å‰æ ç½‘ç»œç­–ç•¥é€šè¿‡ç½‘ç»œæ’ä»¶æ¥å®ç°ã€‚è¦ä½¿ç”¨ç½‘ç»œç­–ç•¥ï¼Œç”¨æˆ·å¿…é¡»ä½¿ç”¨æ”¯æŒ NetworkPolicy çš„ç½‘ç»œè§£å†³æ–¹æ¡ˆã€‚åˆ›å»ºä¸€ä¸ªèµ„æºå¯¹è±¡ï¼Œè€Œæ²¡æœ‰æ§åˆ¶å™¨æ¥ä½¿å®ƒç”Ÿæ•ˆçš„è¯ï¼Œæ˜¯æ²¡æœ‰ä»»ä½•ä½œç”¨çš„ã€‚
éš”ç¦»å’Œééš”ç¦»çš„ Pod é»˜è®¤æƒ…å†µä¸‹ï¼ŒPod æ˜¯ééš”ç¦»çš„ï¼Œå®ƒä»¬æ¥å—ä»»ä½•æ¥æºçš„æµé‡ã€‚
Pod å¯ä»¥é€šè¿‡ç›¸å…³çš„ç½‘ç»œç­–ç•¥è¿›è¡Œéš”ç¦»ã€‚ä¸€æ—¦å‘½åç©ºé—´ä¸­æœ‰ç½‘ç»œç­–ç•¥é€‰æ‹©äº†ç‰¹å®šçš„ Podï¼Œè¯¥ Pod ä¼šæ‹’ç»ç½‘ç»œç­–ç•¥æ‰€ä¸å…è®¸çš„è¿æ¥ã€‚ (å‘½åç©ºé—´ä¸‹å…¶ä»–æœªè¢«ç½‘ç»œç­–ç•¥æ‰€é€‰æ‹©çš„ Pod ä¼šç»§ç»­æ¥æ”¶æ‰€æœ‰çš„æµé‡)
ç½‘ç»œç­–ç•¥ä¸ä¼šå†²çªï¼Œå®ƒä»¬æ˜¯é™„åŠ çš„ã€‚å¦‚æœä»»ä½•ä¸€ä¸ªæˆ–å¤šä¸ªç­–ç•¥é€‰æ‹©äº†ä¸€ä¸ª Pod, åˆ™è¯¥ Pod å—é™äºè¿™äº›ç­–ç•¥çš„ ingress/egress è§„åˆ™çš„å¹¶é›†ã€‚å› æ­¤è¯„ä¼°çš„é¡ºåºå¹¶ä¸ä¼šå½±å“ç­–ç•¥çš„ç»“æœã€‚
NetworkPolicy èµ„æº æŸ¥çœ‹ [ç½‘ç»œç­–ç•¥](/docs/reference/generated/kubernetes-api/ param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#networkpolicy-v1-networking-k8s-io) æ¥äº†è§£å®Œæ•´çš„èµ„æºå®šä¹‰ã€‚
ä¸‹é¢æ˜¯ä¸€ä¸ª NetworkPolicy çš„ç¤ºä¾‹:
apiVersion: networking.k8s.io/v1 kind: NetworkPolicy metadata: name: test-network-policy namespace: default spec: podSelector: matchLabels: role: db policyTypes: - Ingress - Egress ingress: - from: - ipBlock: cidr: 172.</description>
    </item>
    
    <item>
      <title>é…ç½® Pod ä»¥ä½¿ç”¨å·è¿›è¡Œå­˜å‚¨</title>
      <link>https://lijun.in/tasks/configure-pod-container/configure-volume-storage/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/configure-volume-storage/</guid>
      <description>æ­¤é¡µé¢å±•ç¤ºäº†å¦‚ä½•é…ç½® Pod ä»¥ä½¿ç”¨å·è¿›è¡Œå­˜å‚¨ã€‚
åªè¦å®¹å™¨å­˜åœ¨ï¼Œå®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿå°±ä¼šå­˜åœ¨ï¼Œå› æ­¤å½“ä¸€ä¸ªå®¹å™¨ç»ˆæ­¢å¹¶é‡æ–°å¯åŠ¨ï¼Œå¯¹è¯¥å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿæ”¹åŠ¨å°†ä¸¢å¤±ã€‚å¯¹äºç‹¬ç«‹äºå®¹å™¨çš„æŒä¹…åŒ–å­˜å‚¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å·ã€‚è¿™å¯¹äºæœ‰çŠ¶æ€åº”ç”¨ç¨‹åºå°¤ä¸ºé‡è¦ï¼Œä¾‹å¦‚é”®å€¼å­˜å‚¨ï¼ˆå¦‚ Redisï¼‰å’Œæ•°æ®åº“ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ä¸º Pod é…ç½®å· åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œæ‚¨å°†åˆ›å»ºä¸€ä¸ªè¿è¡Œ Podï¼Œè¯¥ Pod ä»…è¿è¡Œä¸€ä¸ªå®¹å™¨å¹¶æ‹¥æœ‰ä¸€ä¸ªç±»å‹ä¸º emptyDir çš„å·ï¼Œåœ¨æ•´ä¸ª Pod ç”Ÿå‘½å‘¨æœŸä¸­ä¸€ç›´å­˜åœ¨ï¼Œå³ä½¿ Pod ä¸­çš„å®¹å™¨è¢«ç»ˆæ­¢å’Œé‡å¯ã€‚ä»¥ä¸‹æ˜¯ Pod çš„é…ç½®ï¼š
. codenew file=&amp;quot;pods/storage/redis.yaml&amp;rdquo; &amp;gt;}}
 åˆ›å»º Pod:  ```shell kubectl apply -f https://k8s.io/examples/pods/storage/redis.yaml ```   éªŒè¯ Pod ä¸­çš„å®¹å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œï¼Œç„¶åç•™æ„ Pod çš„æ›´æ”¹ï¼š  ```shell kubectl get pod redis --watch ``` è¾“å‡ºå¦‚ä¸‹ï¼š ```shell NAME READY STATUS RESTARTS AGE redis 1/1 Running 0 13s ```   åœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼Œç”¨ shell è¿æ¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼š  ```shell kubectl exec -it redis -- /bin/bash ```   åœ¨æ‚¨çš„ shell ç»ˆç«¯ä¸­ï¼Œåˆ‡æ¢åˆ° /data/redis ç›®å½•ä¸‹ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼š  ```shell root@redis:/data# cd /data/redis/ root@redis:/data/redis# echo Hello &amp;gt; test-file ```   åœ¨æ‚¨çš„ shell ç»ˆç«¯ä¸­ï¼Œåˆ—å‡ºæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼š  ```shell root@redis:/data/redis# apt-get update root@redis:/data/redis# apt-get install procps root@redis:/data/redis# ps aux ``` è¾“å‡ºç±»ä¼¼äºï¼š ```shell USER PID %CPU %MEM VSZ RSS TTY STAT START TIME COMMAND redis 1 0.</description>
    </item>
    
    <item>
      <title>é›†ç¾¤ç½‘ç»œç³»ç»Ÿ</title>
      <link>https://lijun.in/concepts/cluster-administration/networking/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/cluster-administration/networking/</guid>
      <description>é›†ç¾¤ç½‘ç»œç³»ç»Ÿæ˜¯ Kubernetes çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œä½†æ˜¯æƒ³è¦å‡†ç¡®äº†è§£å®ƒçš„å·¥ä½œåŸç†å¯æ˜¯ä¸ªä¸å°çš„æŒ‘æˆ˜ã€‚ä¸‹é¢åˆ—å‡ºçš„æ˜¯ç½‘ç»œç³»ç»Ÿçš„çš„å››ä¸ªä¸»è¦é—®é¢˜ï¼š
 é«˜åº¦è€¦åˆçš„å®¹å™¨é—´é€šä¿¡ï¼šè¿™ä¸ªå·²ç»è¢« pods å’Œ localhost é€šä¿¡è§£å†³äº†ã€‚ Pod é—´é€šä¿¡ï¼šè¿™ä¸ªæ˜¯æœ¬æ–‡æ¡£çš„é‡ç‚¹è¦è®²è¿°çš„ã€‚ Pod å’Œ Service é—´é€šä¿¡ï¼šè¿™ä¸ªå·²ç»åœ¨ services é‡Œè®²è¿°è¿‡äº†ã€‚ å¤–éƒ¨å’Œ Service é—´é€šä¿¡ï¼šè¿™ä¸ªä¹Ÿå·²ç»åœ¨ services è®²è¿°è¿‡äº†ã€‚  Kubernetes çš„å®—æ—¨å°±æ˜¯åœ¨åº”ç”¨ä¹‹é—´å…±äº«æœºå™¨ã€‚é€šå¸¸æ¥è¯´ï¼Œå…±äº«æœºå™¨éœ€è¦ä¸¤ä¸ªåº”ç”¨ä¹‹é—´ä¸èƒ½ä½¿ç”¨ç›¸åŒçš„ç«¯å£ï¼Œä½†æ˜¯åœ¨å¤šä¸ªåº”ç”¨å¼€å‘è€…ä¹‹é—´å»å¤§è§„æ¨¡åœ°åè°ƒç«¯å£æ˜¯ä»¶å¾ˆå›°éš¾çš„äº‹æƒ…ï¼Œå°¤å…¶æ˜¯è¿˜è¦è®©ç”¨æˆ·æš´éœ²åœ¨ä»–ä»¬æ§åˆ¶èŒƒå›´ä¹‹å¤–çš„é›†ç¾¤çº§åˆ«çš„é—®é¢˜ä¸Šã€‚
åŠ¨æ€åˆ†é…ç«¯å£ä¹Ÿä¼šç»™ç³»ç»Ÿå¸¦æ¥å¾ˆå¤šå¤æ‚åº¦ - æ¯ä¸ªåº”ç”¨éƒ½éœ€è¦è®¾ç½®ä¸€ä¸ªç«¯å£çš„å‚æ•°ï¼Œè€Œ API æœåŠ¡å™¨è¿˜éœ€è¦çŸ¥é“å¦‚ä½•å°†åŠ¨æ€ç«¯å£æ•°å€¼æ’å…¥åˆ°é…ç½®æ¨¡å—ä¸­ï¼ŒæœåŠ¡ä¹Ÿéœ€è¦çŸ¥é“å¦‚ä½•æ‰¾åˆ°å¯¹æ–¹ç­‰ç­‰ã€‚ä¸å…¶å»è§£å†³è¿™äº›é—®é¢˜ï¼ŒKubernetes é€‰æ‹©äº†å…¶ä»–ä¸åŒçš„æ–¹æ³•ã€‚
Kubernetes ç½‘ç»œæ¨¡å‹ æ¯ä¸€ä¸ª Pod éƒ½æœ‰å®ƒè‡ªå·±çš„IPåœ°å€ï¼Œè¿™å°±æ„å‘³ç€ä½ ä¸éœ€è¦æ˜¾å¼åœ°åœ¨æ¯ä¸ª Pod ä¹‹é—´åˆ›å»ºé“¾æ¥ï¼Œä½ å‡ ä¹ä¸éœ€è¦å¤„ç†å®¹å™¨ç«¯å£åˆ°ä¸»æœºç«¯å£ä¹‹é—´çš„æ˜ å°„ã€‚è¿™å°†åˆ›å»ºä¸€ä¸ªå¹²å‡€çš„ã€å‘åå…¼å®¹çš„æ¨¡å‹ï¼Œåœ¨è¿™ä¸ªæ¨¡å‹é‡Œï¼Œä»ç«¯å£åˆ†é…ã€å‘½åã€æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€åº”ç”¨é…ç½®å’Œè¿ç§»çš„è§’åº¦æ¥çœ‹ï¼ŒPod å¯ä»¥è¢«è§†ä½œè™šæ‹Ÿæœºæˆ–è€…ç‰©ç†ä¸»æœºã€‚
Kubernetes å¯¹æ‰€æœ‰ç½‘ç»œè®¾æ–½çš„å®æ–½ï¼Œéƒ½éœ€è¦æ»¡è¶³ä»¥ä¸‹çš„åŸºæœ¬è¦æ±‚ï¼ˆé™¤éæœ‰è®¾ç½®ä¸€äº›ç‰¹å®šçš„ç½‘ç»œåˆ†æ®µç­–ç•¥ï¼‰ï¼š
 èŠ‚ç‚¹ä¸Šçš„ pods å¯ä»¥ä¸é€šè¿‡ NAT å’Œå…¶ä»–ä»»ä½•èŠ‚ç‚¹ä¸Šçš„ pods é€šä¿¡ èŠ‚ç‚¹ä¸Šçš„ä»£ç†ï¼ˆæ¯”å¦‚ï¼šç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹ã€kubeletï¼‰ å¯ä»¥å’ŒèŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰podsé€šä¿¡  å¤‡æ³¨ï¼šä»…é’ˆå¯¹é‚£äº›æ”¯æŒ Pods åœ¨ä¸»æœºç½‘ç»œä¸­è¿è¡Œçš„å¹³å°(æ¯”å¦‚ï¼šLinux) ï¼š
 é‚£äº›è¿è¡Œåœ¨èŠ‚ç‚¹çš„ä¸»æœºç½‘ç»œé‡Œçš„ pods å¯ä»¥ä¸é€šè¿‡ NAT å’Œæ‰€æœ‰èŠ‚ç‚¹ä¸Šçš„ pods é€šä¿¡  è¿™ä¸ªæ¨¡å‹ä¸ä»…ä¸å¤æ‚ï¼Œè€Œä¸”è¿˜å’Œ Kubernetes çš„å®ç°å»‰ä»·çš„ä»è™šæ‹Ÿæœºå‘å®¹å™¨è¿ç§»çš„åˆè¡·ç›¸å…¼å®¹ï¼Œå¦‚æœä½ çš„å·¥ä½œå¼€å§‹æ˜¯åœ¨è™šæ‹Ÿæœºä¸­è¿è¡Œçš„ï¼Œä½ çš„è™šæ‹Ÿæœºæœ‰ä¸€ä¸ª IP ï¼Œè¿™æ ·å°±å¯ä»¥å’Œå…¶ä»–çš„è™šæ‹Ÿæœºè¿›è¡Œé€šä¿¡ï¼Œè¿™æ˜¯åŸºæœ¬ç›¸åŒçš„æ¨¡å‹ã€‚</description>
    </item>
    
    <item>
      <title>é«˜å¯ç”¨æ‹“æ‰‘é€‰é¡¹</title>
      <link>https://lijun.in/setup/production-environment/tools/kubeadm/ha-topology/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/tools/kubeadm/ha-topology/</guid>
      <description>æœ¬é¡µé¢ä»‹ç»äº†é…ç½®é«˜å¯ç”¨ï¼ˆHAï¼‰ Kubernetes é›†ç¾¤æ‹“æ‰‘çš„ä¸¤ä¸ªé€‰é¡¹ã€‚
æ‚¨å¯ä»¥è®¾ç½® HA é›†ç¾¤ï¼š
 ä½¿ç”¨å †å ï¼ˆstackedï¼‰æ§åˆ¶å¹³é¢èŠ‚ç‚¹ï¼Œå…¶ä¸­ etcd èŠ‚ç‚¹ä¸æ§åˆ¶å¹³é¢èŠ‚ç‚¹å…±å­˜ ä½¿ç”¨å¤–éƒ¨ etcd èŠ‚ç‚¹ï¼Œå…¶ä¸­ etcd åœ¨ä¸æ§åˆ¶å¹³é¢ä¸åŒçš„èŠ‚ç‚¹ä¸Šè¿è¡Œ  åœ¨è®¾ç½® HA é›†ç¾¤ä¹‹å‰ï¼Œæ‚¨åº”è¯¥ä»”ç»†è€ƒè™‘æ¯ç§æ‹“æ‰‘çš„ä¼˜ç¼ºç‚¹ã€‚
. note &amp;gt;}} kubeadm é™æ€å¼•å¯¼ etcd é›†ç¾¤ã€‚ é˜…è¯» etcd é›†ç¾¤æŒ‡å—ä»¥è·å¾—æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚ . /note &amp;gt;}}
å †å ï¼ˆStackedï¼‰ etcd æ‹“æ‰‘ å †å ï¼ˆStackedï¼‰ HA é›†ç¾¤æ˜¯ä¸€ç§è¿™æ ·çš„æ‹“æ‰‘ï¼Œå…¶ä¸­ etcd åˆ†å¸ƒå¼æ•°æ®å­˜å‚¨é›†ç¾¤å †å åœ¨ kubeadm ç®¡ç†çš„æ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¸Šï¼Œä½œä¸ºæ§åˆ¶å¹³é¢çš„ä¸€ä¸ªç»„ä»¶è¿è¡Œã€‚
æ¯ä¸ªæ§åˆ¶å¹³é¢èŠ‚ç‚¹è¿è¡Œ kube-apiserverï¼Œkube-scheduler å’Œ kube-controller-manager å®ä¾‹ã€‚
kube-apiserver ä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨æš´éœ²ç»™å·¥ä½œèŠ‚ç‚¹ã€‚
æ¯ä¸ªæ§åˆ¶å¹³é¢èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªæœ¬åœ° etcd æˆå‘˜ï¼ˆmemberï¼‰ï¼Œè¿™ä¸ª etcd æˆå‘˜åªä¸è¯¥èŠ‚ç‚¹çš„ kube-apiserver é€šä¿¡ã€‚è¿™åŒæ ·é€‚ç”¨äºæœ¬åœ° kube-controller-manager å’Œ kube-scheduler å®ä¾‹ã€‚
è¿™ç§æ‹“æ‰‘å°†æ§åˆ¶å¹³é¢å’Œ etcd æˆå‘˜è€¦åˆåœ¨åŒä¸€èŠ‚ç‚¹ä¸Šã€‚ç›¸å¯¹ä½¿ç”¨å¤–éƒ¨ etcd é›†ç¾¤ï¼Œè®¾ç½®èµ·æ¥æ›´ç®€å•ï¼Œè€Œä¸”æ›´æ˜“äºå‰¯æœ¬ç®¡ç†ã€‚
ç„¶è€Œï¼Œå †å é›†ç¾¤å­˜åœ¨è€¦åˆå¤±è´¥çš„é£é™©ã€‚å¦‚æœä¸€ä¸ªèŠ‚ç‚¹å‘ç”Ÿæ•…éšœï¼Œåˆ™ etcd æˆå‘˜å’Œæ§åˆ¶å¹³é¢å®ä¾‹éƒ½å°†ä¸¢å¤±ï¼Œå¹¶ä¸”å†—ä½™ä¼šå—åˆ°å½±å“ã€‚æ‚¨å¯ä»¥é€šè¿‡æ·»åŠ æ›´å¤šæ§åˆ¶å¹³é¢èŠ‚ç‚¹æ¥é™ä½æ­¤é£é™©ã€‚
å› æ­¤ï¼Œæ‚¨åº”è¯¥ä¸º HA é›†ç¾¤è¿è¡Œè‡³å°‘ä¸‰ä¸ªå †å çš„æ§åˆ¶å¹³é¢èŠ‚ç‚¹ã€‚</description>
    </item>
    
    <item>
      <title>kubeadm reset</title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-reset/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-reset/</guid>
      <description>è¯¥å‘½ä»¤å°½åŠ›è¿˜åŸç”± kubeadm init æˆ– kubeadm join æ‰€åšçš„æ›´æ”¹ã€‚
. include &amp;ldquo;generated/kubeadm_reset.md&amp;rdquo; &amp;gt;}}
Reset å·¥ä½œæµç¨‹ kubeadm reset è´Ÿè´£ä»ä½¿ç”¨ kubeadm init æˆ– kubeadm join å‘½ä»¤åˆ›å»ºçš„æ–‡ä»¶ä¸­æ¸…é™¤èŠ‚ç‚¹æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚å¯¹äºæ§åˆ¶å¹³é¢èŠ‚ç‚¹ï¼Œreset è¿˜ä» etcd é›†ç¾¤ä¸­åˆ é™¤è¯¥èŠ‚ç‚¹çš„æœ¬åœ° etcd å †æˆå‘˜ï¼Œè¿˜ä» kubeadm ClusterStatus å¯¹è±¡ä¸­åˆ é™¤è¯¥èŠ‚ç‚¹çš„ä¿¡æ¯ã€‚ ClusterStatus æ˜¯ä¸€ä¸ª kubeadm ç®¡ç†çš„ Kubernetes API å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å« kube-apiserver ç«¯ç‚¹åˆ—è¡¨ã€‚
kubeadm reset phase å¯ç”¨äºæ‰§è¡Œä¸Šè¿°å·¥ä½œæµç¨‹çš„å„ä¸ªé˜¶æ®µã€‚ è¦è·³è¿‡é˜¶æ®µåˆ—è¡¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ --skip-phases å‚æ•°ï¼Œè¯¥å‚æ•°çš„å·¥ä½œæ–¹å¼ç±»ä¼¼äº kubeadm join å’Œ kubeadm init é˜¶æ®µè¿è¡Œå™¨ã€‚
å¤–éƒ¨ etcd æ¸…ç† å¦‚æœä½¿ç”¨äº†å¤–éƒ¨ etcdï¼Œkubeadm reset å°†ä¸ä¼šåˆ é™¤ä»»ä½• etcd ä¸­çš„æ•°æ®ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœå†æ¬¡ä½¿ç”¨ç›¸åŒçš„ etcd ç«¯ç‚¹è¿è¡Œ kubeadm initï¼Œæ‚¨å°†çœ‹åˆ°å…ˆå‰é›†ç¾¤çš„çŠ¶æ€ã€‚
è¦æ¸…ç† etcd ä¸­çš„æ•°æ®ï¼Œå»ºè®®æ‚¨ä½¿ç”¨ etcdctl è¿™æ ·çš„å®¢æˆ·ç«¯ï¼Œä¾‹å¦‚ï¼š</description>
    </item>
    
    <item>
      <title>Kubernetes æ§åˆ¶é¢çš„æŒ‡æ ‡</title>
      <link>https://lijun.in/concepts/cluster-administration/monitoring/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/cluster-administration/monitoring/</guid>
      <description>ç³»ç»Ÿç»„ä»¶çš„æŒ‡æ ‡å¯ä»¥è®©æˆ‘ä»¬æ›´å¥½çš„çœ‹æ¸…ç³»ç»Ÿå†…éƒ¨ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Œå°¤å…¶å¯¹äºæ„å»ºä»ªè¡¨ç›˜å’Œå‘Šè­¦éƒ½éå¸¸æœ‰ç”¨ã€‚
Kubernetes æ§åˆ¶é¢æ¿ä¸­çš„æŒ‡æ ‡æ˜¯ä»¥ prometheus æ ¼å¼å‘å‡ºçš„ï¼Œè€Œä¸”æ˜¯æ˜“äºé˜…è¯»çš„ã€‚
Kubernetes çš„æŒ‡æ ‡ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒæŒ‡æ ‡åœ¨ HTTP æœåŠ¡å™¨çš„ /metrics ç«¯ç‚¹ä½¿ç”¨ï¼Œå¯¹äºé»˜è®¤æƒ…å†µä¸‹ä¸æš´éœ²ç«¯ç‚¹çš„ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ --bind-address å‚æ•°å¯ç”¨ã€‚
ä¸¾ä¾‹ä¸‹é¢è¿™äº›ç»„ä»¶ï¼š
 term_id=&amp;quot;kube-controller-manager&amp;rdquo; text=&amp;quot;kube-controller-manager&amp;rdquo; &amp;gt;}} term_id=&amp;quot;kube-proxy&amp;rdquo; text=&amp;quot;kube-proxy&amp;rdquo; &amp;gt;}} term_id=&amp;quot;kube-apiserver&amp;rdquo; text=&amp;quot;kube-apiserver&amp;rdquo; &amp;gt;}} term_id=&amp;quot;kube-scheduler&amp;rdquo; text=&amp;quot;kube-scheduler&amp;rdquo; &amp;gt;}} term_id=&amp;quot;kubelet&amp;rdquo; text=&amp;quot;kubelet&amp;rdquo; &amp;gt;}}  åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä½ å¯èƒ½éœ€è¦é…ç½® Prometheus Server æˆ–å…¶ä»–æŒ‡æ ‡æ”¶é›†å™¨æ¥å®šæœŸæ”¶é›†è¿™äº›æŒ‡æ ‡ï¼Œå¹¶ä½¿å®ƒä»¬åœ¨æŸç§æ—¶é—´åºåˆ—æ•°æ®åº“ä¸­å¯ç”¨ã€‚
è¯·æ³¨æ„ term_id=&amp;quot;kubelet&amp;rdquo; text=&amp;quot;kubelet&amp;rdquo; &amp;gt;}} åŒæ ·åœ¨ /metrics/cadvisorã€/metrics/resource å’Œ /metrics/probes ç­‰ç«¯ç‚¹æä¾›æ€§èƒ½æŒ‡æ ‡ã€‚è¿™äº›æŒ‡æ ‡çš„ç”Ÿå‘½å‘¨æœŸå¹¶ä¸ç›¸åŒã€‚
å¦‚æœä½ çš„é›†ç¾¤è¿˜ä½¿ç”¨äº† term_id=&amp;quot;rbac&amp;rdquo; text=&amp;quot;RBAC&amp;rdquo; &amp;gt;}} ï¼Œé‚£è¯»å–æŒ‡æ ‡æ•°æ®çš„æ—¶å€™ï¼Œè¿˜éœ€è¦é€šè¿‡å…·æœ‰ ClusterRole çš„ç”¨æˆ·ã€ç»„æˆ–è€… ServiceAccount æ¥è¿›è¡Œæˆæƒï¼Œæ‰æœ‰æƒé™è®¿é—® /metrics ã€‚
ä¸¾ä¾‹ï¼š
apiVersion: rbac.authorization.k8s.io/v1	kind: ClusterRole	metadata:	name: prometheus	rules:	- nonResourceURLs:	- &amp;quot;/metrics&amp;quot;	verbs:	- get æŒ‡æ ‡çš„ç”Ÿå‘½å‘¨æœŸ å†…æµ‹ç‰ˆæŒ‡æ ‡ â†’ ç¨³å®šç‰ˆæŒ‡æ ‡ â†’ å¼ƒç”¨æŒ‡æ ‡ â†’ éšè—æŒ‡æ ‡ â†’ åˆ é™¤</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ HostAliases å‘ Pod /etc/hosts æ–‡ä»¶æ·»åŠ æ¡ç›®</title>
      <link>https://lijun.in/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/services-networking/add-entries-to-pod-etc-hosts-with-host-aliases/</guid>
      <description>å½“ DNS é…ç½®ä»¥åŠå…¶å®ƒé€‰é¡¹ä¸åˆç†çš„æ—¶å€™ï¼Œé€šè¿‡å‘ Pod çš„ /etc/hosts æ–‡ä»¶ä¸­æ·»åŠ æ¡ç›®ï¼Œå¯ä»¥åœ¨ Pod çº§åˆ«è¦†ç›–å¯¹ä¸»æœºåçš„è§£æã€‚åœ¨ 1.7 ç‰ˆæœ¬ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ PodSpec çš„ HostAliases å­—æ®µæ¥æ·»åŠ è¿™äº›è‡ªå®šä¹‰çš„æ¡ç›®ã€‚
å»ºè®®é€šè¿‡ä½¿ç”¨ HostAliases æ¥è¿›è¡Œä¿®æ”¹ï¼Œå› ä¸ºè¯¥æ–‡ä»¶ç”± Kubelet ç®¡ç†ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ Pod åˆ›å»º/é‡å¯è¿‡ç¨‹ä¸­è¢«é‡å†™ã€‚
é»˜è®¤ hosts æ–‡ä»¶å†…å®¹ è®©æˆ‘ä»¬ä»ä¸€ä¸ª Nginx Pod å¼€å§‹ï¼Œç»™è¯¥ Pod åˆ†é…ä¸€ä¸ª IPï¼š
kubectl run nginx --image nginx --generator=run-pod/v1 pod/nginx created æ£€æŸ¥Pod IPï¼š
kubectl get pods --output=wide NAME READY STATUS RESTARTS AGE IP NODE nginx 1/1 Running 0 13s 10.200.0.4 worker0 ä¸»æœºæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š
kubectl exec nginx -- cat /etc/hosts # Kubernetes-managed hosts file.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ kubeconfig æ–‡ä»¶ç»„ç»‡é›†ç¾¤è®¿é—®</title>
      <link>https://lijun.in/concepts/configuration/organize-cluster-access-kubeconfig/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/configuration/organize-cluster-access-kubeconfig/</guid>
      <description>ä½¿ç”¨ kubeconfig æ–‡ä»¶æ¥ç»„ç»‡æœ‰å…³é›†ç¾¤ã€ç”¨æˆ·ã€å‘½åç©ºé—´å’Œèº«ä»½è®¤è¯æœºåˆ¶çš„ä¿¡æ¯ã€‚kubectl å‘½ä»¤è¡Œå·¥å…·ä½¿ç”¨ kubeconfig æ–‡ä»¶æ¥æŸ¥æ‰¾é€‰æ‹©é›†ç¾¤æ‰€éœ€çš„ä¿¡æ¯ï¼Œå¹¶ä¸é›†ç¾¤çš„ API æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚
ç”¨äºé…ç½®é›†ç¾¤è®¿é—®çš„æ–‡ä»¶ç§°ä¸º kubeconfig æ–‡ä»¶ã€‚è¿™æ˜¯å¼•ç”¨é…ç½®æ–‡ä»¶çš„é€šç”¨æ–¹æ³•ã€‚è¿™å¹¶ä¸æ„å‘³ç€æœ‰ä¸€ä¸ªåä¸º kubeconfig çš„æ–‡ä»¶
é»˜è®¤æƒ…å†µä¸‹ï¼Œkubectl åœ¨ $HOME/.kube ç›®å½•ä¸‹æŸ¥æ‰¾åä¸º config çš„æ–‡ä»¶ã€‚æ‚¨å¯ä»¥é€šè¿‡è®¾ç½® KUBECONFIG ç¯å¢ƒå˜é‡æˆ–è€…è®¾ç½®--kubeconfigå‚æ•°æ¥æŒ‡å®šå…¶ä»– kubeconfig æ–‡ä»¶ã€‚
æœ‰å…³åˆ›å»ºå’ŒæŒ‡å®š kubeconfig æ–‡ä»¶çš„åˆ†æ­¥è¯´æ˜ï¼Œè¯·å‚é˜…é…ç½®å¯¹å¤šé›†ç¾¤çš„è®¿é—®ã€‚
æ”¯æŒå¤šé›†ç¾¤ã€ç”¨æˆ·å’Œèº«ä»½è®¤è¯æœºåˆ¶ å‡è®¾æ‚¨æœ‰å¤šä¸ªé›†ç¾¤ï¼Œå¹¶ä¸”æ‚¨çš„ç”¨æˆ·å’Œç»„ä»¶ä»¥å¤šç§æ–¹å¼è¿›è¡Œèº«ä»½è®¤è¯ã€‚æ¯”å¦‚ï¼š
 æ­£åœ¨è¿è¡Œçš„ kubelet å¯èƒ½ä½¿ç”¨è¯ä¹¦åœ¨è¿›è¡Œè®¤è¯ã€‚ ç”¨æˆ·å¯èƒ½é€šè¿‡ä»¤ç‰Œè¿›è¡Œè®¤è¯ã€‚ ç®¡ç†å‘˜å¯èƒ½æ‹¥æœ‰å¤šä¸ªè¯ä¹¦é›†åˆæä¾›ç»™å„ç”¨æˆ·ã€‚  ä½¿ç”¨ kubeconfig æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥ç»„ç»‡é›†ç¾¤ã€ç”¨æˆ·å’Œå‘½åç©ºé—´ã€‚æ‚¨è¿˜å¯ä»¥å®šä¹‰ä¸Šä¸‹æ–‡ï¼Œä»¥ä¾¿åœ¨é›†ç¾¤å’Œå‘½åç©ºé—´ä¹‹é—´å¿«é€Ÿè½»æ¾åœ°åˆ‡æ¢ã€‚
ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ é€šè¿‡ kubeconfig æ–‡ä»¶ä¸­çš„ context å…ƒç´ ï¼Œä½¿ç”¨ç®€ä¾¿çš„åç§°æ¥å¯¹è®¿é—®å‚æ•°è¿›è¡Œåˆ†ç»„ã€‚æ¯ä¸ªä¸Šä¸‹æ–‡éƒ½æœ‰ä¸‰ä¸ªå‚æ•°ï¼šclusterã€namespace å’Œ userã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œkubectl å‘½ä»¤è¡Œå·¥å…·ä½¿ç”¨ å½“å‰ä¸Šä¸‹æ–‡ ä¸­çš„å‚æ•°ä¸é›†ç¾¤è¿›è¡Œé€šä¿¡ã€‚
é€‰æ‹©å½“å‰ä¸Šä¸‹æ–‡
kubectl config use-context KUBECONFIG ç¯å¢ƒå˜é‡ KUBECONFIG ç¯å¢ƒå˜é‡åŒ…å«ä¸€ä¸ª kubeconfig æ–‡ä»¶åˆ—è¡¨ã€‚å¯¹äº Linux å’Œ Macï¼Œåˆ—è¡¨ä»¥å†’å·åˆ†éš”ã€‚å¯¹äº Windowsï¼Œåˆ—è¡¨ä»¥åˆ†å·åˆ†éš”ã€‚KUBECONFIG ç¯å¢ƒå˜é‡ä¸æ˜¯å¿…è¦çš„ã€‚å¦‚æœ KUBECONFIG ç¯å¢ƒå˜é‡ä¸å­˜åœ¨ï¼Œkubectl ä½¿ç”¨é»˜è®¤çš„ kubeconfig æ–‡ä»¶ï¼Œ$HOME/.kube/configã€‚
å¦‚æœ KUBECONFIG ç¯å¢ƒå˜é‡å­˜åœ¨ï¼Œkubectl ä½¿ç”¨ KUBECONFIG ç¯å¢ƒå˜é‡ä¸­åˆ—ä¸¾çš„æ–‡ä»¶åˆå¹¶åçš„æœ‰æ•ˆé…ç½®ã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨æœåŠ¡æ¥è®¿é—®é›†ç¾¤ä¸­çš„åº”ç”¨</title>
      <link>https://lijun.in/tasks/access-application-cluster/service-access-application-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/service-access-application-cluster/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ª Kubernetes æœåŠ¡å¯¹è±¡ï¼Œèƒ½è®©å¤–éƒ¨å®¢æˆ·ç«¯è®¿é—®åœ¨é›†ç¾¤ä¸­è¿è¡Œçš„åº”ç”¨ã€‚è¯¥æœåŠ¡ä¸ºä¸€ä¸ªåº”ç”¨çš„ä¸¤ä¸ªè¿è¡Œå®ä¾‹æä¾›è´Ÿè½½å‡è¡¡ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
. heading &amp;ldquo;objectives&amp;rdquo; %}}  è¿è¡Œ Hello World åº”ç”¨çš„ä¸¤ä¸ªå®ä¾‹ã€‚ åˆ›å»ºä¸€ä¸ªæœåŠ¡å¯¹è±¡æ¥æš´éœ² node portã€‚ ä½¿ç”¨æœåŠ¡å¯¹è±¡æ¥è®¿é—®æ­£åœ¨è¿è¡Œçš„åº”ç”¨ã€‚  ä¸ºè¿è¡Œåœ¨ä¸¤ä¸ª pod ä¸­çš„åº”ç”¨åˆ›å»ºä¸€ä¸ªæœåŠ¡ è¿™æ˜¯åº”ç”¨ç¨‹åºéƒ¨ç½²çš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;service/access/hello-application.yaml&amp;rdquo; &amp;gt;}}
 åœ¨æ‚¨çš„é›†ç¾¤ä¸­è¿è¡Œä¸€ä¸ª Hello World åº”ç”¨ï¼š ä½¿ç”¨ä¸Šé¢çš„æ–‡ä»¶åˆ›å»ºåº”ç”¨ç¨‹åº Deploymentï¼š kubectl apply -f https://k8s.io/examples/service/access/hello-application.yaml ä¸Šé¢çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ª Deployment å¯¹è±¡å’Œä¸€ä¸ªå…³è”çš„ ReplicaSet å¯¹è±¡ã€‚è¿™ä¸ª ReplicaSet æœ‰ä¸¤ä¸ª Podï¼Œæ¯ä¸ª Pod éƒ½è¿è¡Œç€ Hello World åº”ç”¨ã€‚
   å±•ç¤º Deployment çš„ä¿¡æ¯ï¼š kubectl get deployments hello-world kubectl describe deployments hello-world    å±•ç¤ºæ‚¨çš„ ReplicaSet å¯¹è±¡ä¿¡æ¯ï¼š kubectl get replicasets kubectl describe replicasets    åˆ›å»ºä¸€ä¸ªæœåŠ¡å¯¹è±¡æ¥æš´éœ² deploymentï¼š kubectl expose deployment hello-world --type=NodePort --name=example-service    å±•ç¤ºæœåŠ¡ä¿¡æ¯ï¼š kubectl describe services example-service   è¾“å‡ºç±»ä¼¼äºï¼š</description>
    </item>
    
    <item>
      <title>åˆ é™¤ StatefulSet</title>
      <link>https://lijun.in/tasks/run-application/delete-stateful-set/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/run-application/delete-stateful-set/</guid>
      <description>æœ¬æ–‡ä»‹ç»å¦‚ä½•åˆ é™¤ StatefulSetã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  æœ¬æ–‡å‡è®¾åœ¨æ‚¨çš„é›†ç¾¤ä¸Šå·²ç»è¿è¡Œäº†ç”± StatefulSet åˆ›å»ºçš„åº”ç”¨ã€‚  åˆ é™¤ StatefulSet æ‚¨å¯ä»¥åƒåˆ é™¤ Kubernetes ä¸­çš„å…¶ä»–èµ„æºä¸€æ ·åˆ é™¤ StatefulSetï¼šä½¿ç”¨ kubectl delete å‘½ä»¤ï¼Œå¹¶æŒ‰æ–‡ä»¶æˆ–è€…åå­—æŒ‡å®š StatefulSetã€‚
kubectl delete -f &amp;lt;file.yaml&amp;gt; kubectl delete statefulsets &amp;lt;statefulset-name&amp;gt; åˆ é™¤ StatefulSet ä¹‹åï¼Œæ‚¨å¯èƒ½éœ€è¦å•ç‹¬åˆ é™¤å…³è”çš„æ— å¤´æœåŠ¡ã€‚
kubectl delete service &amp;lt;service-name&amp;gt; é€šè¿‡ kubectl åˆ é™¤ StatefulSet ä¼šå°†å…¶ç¼©å®¹ä¸º0ï¼Œå› æ­¤åˆ é™¤å±äºå®ƒçš„æ‰€æœ‰podsã€‚ å¦‚æœæ‚¨åªæƒ³åˆ é™¤ StatefulSet è€Œä¸åˆ é™¤ podsï¼Œä½¿ç”¨ --cascade=falseã€‚
kubectl delete -f &amp;lt;file.yaml&amp;gt; --cascade=false é€šè¿‡å°† --cascade=false ä¼ é€’ç»™ kubectl deleteï¼Œåœ¨åˆ é™¤ StatefulSet å¯¹è±¡ä¹‹åï¼ŒStatefulSet ç®¡ç†çš„ pods ä¼šè¢«ä¿ç•™ä¸‹æ¥ã€‚å¦‚æœ pods æœ‰ä¸€ä¸ªæ ‡ç­¾ app=myappï¼Œåˆ™å¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼åˆ é™¤å®ƒä»¬ï¼š
kubectl delete pods -l app=myapp Persistent Volumes åˆ é™¤ StatefulSet ç®¡ç†çš„ pods å¹¶ä¸ä¼šåˆ é™¤å…³è”çš„å·ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿æ‚¨æœ‰æœºä¼šåœ¨åˆ é™¤å·ä¹‹å‰ä»å·ä¸­å¤åˆ¶æ•°æ®ã€‚åœ¨podsç¦»å¼€ç»ˆæ­¢çŠ¶æ€ååˆ é™¤ PVC å¯èƒ½ä¼šè§¦å‘åˆ é™¤æ”¯æŒçš„ Persistent Volumesï¼Œå…·ä½“å–å†³äºå­˜å‚¨ç±»å’Œå›æ”¶ç­–ç•¥ã€‚å£°æ˜åˆ é™¤åï¼Œæ‚¨æ°¸è¿œä¸åº”è¯¥å‡è®¾èƒ½å¤Ÿè®¿é—®å·ã€‚</description>
    </item>
    
    <item>
      <title>åˆ©ç”¨ kubeadm åˆ›å»ºé«˜å¯ç”¨é›†ç¾¤</title>
      <link>https://lijun.in/setup/production-environment/tools/kubeadm/high-availability/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/tools/kubeadm/high-availability/</guid>
      <description>æœ¬æ–‡è®²è¿°äº†ä½¿ç”¨ kubeadm è®¾ç½®ä¸€ä¸ªé«˜å¯ç”¨çš„ Kubernetes é›†ç¾¤çš„ä¸¤ç§ä¸åŒæ–¹å¼ï¼š
 ä½¿ç”¨å †æ§åˆ¶å¹³é¢èŠ‚ç‚¹ã€‚è¿™ç§æ–¹æ³•æ‰€éœ€åŸºç¡€è®¾æ–½è¾ƒå°‘ã€‚etcd æˆå‘˜å’Œæ§åˆ¶å¹³é¢èŠ‚ç‚¹ä½äºåŒä¸€ä½ç½®ã€‚ ä½¿ç”¨å¤–éƒ¨é›†ç¾¤ã€‚è¿™ç§æ–¹æ³•æ‰€éœ€åŸºç¡€è®¾æ–½è¾ƒå¤šã€‚æ§åˆ¶å¹³é¢çš„èŠ‚ç‚¹å’Œ etcd æˆå‘˜æ˜¯åˆ†å¼€çš„ã€‚  åœ¨ä¸‹ä¸€æ­¥ä¹‹å‰ï¼Œæ‚¨åº”è¯¥ä»”ç»†è€ƒè™‘å“ªç§æ–¹æ³•æ›´å¥½çš„æ»¡è¶³æ‚¨çš„åº”ç”¨ç¨‹åºå’Œç¯å¢ƒçš„éœ€æ±‚ã€‚ è¿™æ˜¯å¯¹æ¯”æ–‡æ¡£ è®²è¿°äº†æ¯ç§æ–¹æ³•çš„ä¼˜ç¼ºç‚¹ã€‚
å¦‚æœæ‚¨åœ¨å®‰è£… HA é›†ç¾¤æ—¶é‡åˆ°é—®é¢˜ï¼Œè¯·åœ¨ kubeadm é—®é¢˜è·Ÿè¸ªé‡Œå‘æˆ‘ä»¬æä¾›åé¦ˆã€‚
æ‚¨ä¹Ÿå¯ä»¥é˜…è¯» å‡çº§æ–‡ä»¶ã€‚
. caution &amp;gt;}} è¿™ç¯‡æ–‡æ¡£æ²¡æœ‰è®²è¿°åœ¨äº‘æä¾›å•†ä¸Šè¿è¡Œé›†ç¾¤çš„é—®é¢˜ã€‚åœ¨äº‘ç¯å¢ƒä¸­ï¼Œæ­¤å¤„è®°å½•çš„æ–¹æ³•ä¸é€‚ç”¨äºç±»å‹ä¸º LoadBalancer çš„æœåŠ¡å¯¹è±¡ï¼Œæˆ–è€…å…·æœ‰åŠ¨æ€çš„ PersistentVolumesã€‚ . /caution &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} å¯¹äºè¿™ä¸¤ç§æ–¹æ³•ï¼Œæ‚¨éƒ½éœ€è¦ä»¥ä¸‹åŸºç¡€è®¾æ–½ï¼š
 é…ç½®ä¸‰å°æœºå™¨kubeadm çš„æœ€ä½è¦æ±‚ç»™ä¸»èŠ‚ç‚¹ é…ç½®ä¸‰å°æœºå™¨ kubeadm çš„æœ€ä½è¦æ±‚ ç»™å·¥ä½œèŠ‚ç‚¹ åœ¨é›†ç¾¤ä¸­ï¼Œæ‰€æœ‰è®¡ç®—æœºä¹‹é—´çš„å®Œå…¨ç½‘ç»œè¿æ¥ï¼ˆå…¬ç½‘æˆ–ç§ç½‘ï¼‰ æ‰€æœ‰æœºå™¨ä¸Šçš„ sudo æƒé™ æ¯å°è®¾å¤‡å¯¹ç³»ç»Ÿä¸­æ‰€æœ‰èŠ‚ç‚¹çš„ SSH è®¿é—® åœ¨æ‰€æœ‰æœºå™¨ä¸Šå®‰è£… kubeadm å’Œ kubeletï¼Œkubectl æ˜¯å¯é€‰çš„ã€‚  ä»…å¯¹äºå¤–éƒ¨ etcd é›†ç¾¤æ¥è¯´ï¼Œæ‚¨è¿˜éœ€è¦ï¼š
 ç»™ etcd æˆå‘˜ä½¿ç”¨çš„å¦å¤–ä¸‰å°æœºå™¨  è¿™ä¸¤ç§æ–¹æ³•çš„ç¬¬ä¸€æ­¥ ä¸º kube-apiserver åˆ›å»ºè´Ÿè½½å‡è¡¡å™¨ . note &amp;gt;}} ä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨éœ€è¦è®¸å¤šé…ç½®ã€‚æ‚¨çš„é›†ç¾¤æ­å»ºå¯èƒ½éœ€è¦ä¸åŒçš„é…ç½®ã€‚ä¸‹é¢çš„ä¾‹å­åªæ˜¯å…¶ä¸­çš„ä¸€æ–¹é¢é…ç½®ã€‚ .</description>
    </item>
    
    <item>
      <title>åƒåœ¾æ”¶é›†</title>
      <link>https://lijun.in/concepts/workloads/controllers/garbage-collection/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/controllers/garbage-collection/</guid>
      <description>Kubernetes åƒåœ¾æ”¶é›†å™¨çš„ä½œç”¨æ˜¯åˆ é™¤æŸäº›æ›¾ç»æ‹¥æœ‰æ‰€æœ‰è€…ï¼ˆownerï¼‰ä½†ç°åœ¨ä¸å†æ‹¥æœ‰æ‰€æœ‰è€…çš„å¯¹è±¡ã€‚
æ‰€æœ‰è€…å’Œé™„å± æŸäº› Kubernetes å¯¹è±¡æ˜¯å…¶å®ƒä¸€äº›å¯¹è±¡çš„æ‰€æœ‰è€…ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª ReplicaSet æ˜¯ä¸€ç»„ Pod çš„æ‰€æœ‰è€…ã€‚ å…·æœ‰æ‰€æœ‰è€…çš„å¯¹è±¡è¢«ç§°ä¸ºæ˜¯æ‰€æœ‰è€…çš„ é™„å± ã€‚ æ¯ä¸ªé™„å±å¯¹è±¡å…·æœ‰ä¸€ä¸ªæŒ‡å‘å…¶æ‰€å±å¯¹è±¡çš„ metadata.ownerReferences å­—æ®µã€‚
æœ‰æ—¶ï¼ŒKubernetes ä¼šè‡ªåŠ¨è®¾ç½® ownerReference çš„å€¼ã€‚ ä¾‹å¦‚ï¼Œå½“åˆ›å»ºä¸€ä¸ª ReplicaSet æ—¶ï¼ŒKubernetes è‡ªåŠ¨è®¾ç½® ReplicaSet ä¸­æ¯ä¸ª Pod çš„ ownerReference å­—æ®µå€¼ã€‚ åœ¨ Kubernetes 1.8 ç‰ˆæœ¬ï¼ŒKubernetes ä¼šè‡ªåŠ¨ä¸ºæŸäº›å¯¹è±¡è®¾ç½® ownerReference çš„å€¼ï¼Œè¿™äº›å¯¹è±¡æ˜¯ç”± ReplicationControllerã€ReplicaSetã€StatefulSetã€DaemonSetã€Deploymentã€Job å’Œ CronJob æ‰€åˆ›å»ºæˆ–ç®¡ç†ã€‚ ä¹Ÿå¯ä»¥é€šè¿‡æ‰‹åŠ¨è®¾ç½® ownerReference çš„å€¼ï¼Œæ¥æŒ‡å®šæ‰€æœ‰è€…å’Œé™„å±ä¹‹é—´çš„å…³ç³»ã€‚
è¿™é‡Œæœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œè¡¨ç¤ºä¸€ä¸ªå…·æœ‰ 3 ä¸ª Pod çš„ ReplicaSetï¼š
codenew file=&amp;quot;controllers/replicaset.yaml&amp;rdquo; &amp;gt;}}
å¦‚æœåˆ›å»ºè¯¥ ReplicaSetï¼Œç„¶åæŸ¥çœ‹ Pod çš„ metadata å­—æ®µï¼Œèƒ½å¤Ÿçœ‹åˆ° OwnerReferences å­—æ®µï¼š
kubectl apply -f https://k8s.io/examples/controllers/replicaset.yaml kubectl get pods --output=yaml è¾“å‡ºæ˜¾ç¤ºäº† Pod çš„æ‰€æœ‰è€…æ˜¯åä¸º my-repset çš„ ReplicaSetï¼š</description>
    </item>
    
    <item>
      <title>å­—æ®µé€‰æ‹©å™¨</title>
      <link>https://lijun.in/concepts/overview/working-with-objects/field-selectors/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/overview/working-with-objects/field-selectors/</guid>
      <description>å­—æ®µé€‰æ‹©å™¨ï¼ˆField selectorsï¼‰å…è®¸æ‚¨æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºå­—æ®µçš„å€¼ç­›é€‰ Kubernetes èµ„æºã€‚ ä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨å­—æ®µé€‰æ‹©å™¨æŸ¥è¯¢çš„ä¾‹å­ï¼š
 metadata.name=my-service metadata.namespace!=default status.phase=Pending  ä¸‹é¢è¿™ä¸ª kubectl å‘½ä»¤å°†ç­›é€‰å‡º status.phase å­—æ®µå€¼ä¸º Running çš„æ‰€æœ‰ Podï¼š
kubectl get pods --field-selector status.phase=Running å­—æ®µé€‰æ‹©å™¨æœ¬è´¨ä¸Šæ˜¯èµ„æºè¿‡æ»¤å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå­—æ®µé€‰æ‹©å™¨/è¿‡æ»¤å™¨æ˜¯æœªè¢«åº”ç”¨çš„ï¼Œè¿™æ„å‘³ç€æŒ‡å®šç±»å‹çš„æ‰€æœ‰èµ„æºéƒ½ä¼šè¢«ç­›é€‰å‡ºæ¥ã€‚ è¿™ä½¿å¾—ä»¥ä¸‹çš„ä¸¤ä¸ª kubectl æŸ¥è¯¢æ˜¯ç­‰ä»·çš„ï¼š
kubectl get pods kubectl get pods --field-selector &amp;#34;&amp;#34; æ”¯æŒçš„å­—æ®µ ä¸åŒçš„ Kubernetes èµ„æºç±»å‹æ”¯æŒä¸åŒçš„å­—æ®µé€‰æ‹©å™¨ã€‚æ‰€æœ‰èµ„æºç±»å‹éƒ½æ”¯æŒ metadata.name å’Œ metadata.namespace å­—æ®µã€‚ä½¿ç”¨ä¸è¢«æ”¯æŒçš„å­—æ®µé€‰æ‹©å™¨ä¼šäº§ç”Ÿé”™è¯¯ï¼Œä¾‹å¦‚ï¼š
kubectl get ingress --field-selector foo.bar=baz Error from server (BadRequest): Unable to find &amp;quot;ingresses&amp;quot; that match label selector &amp;quot;&amp;quot;, field selector &amp;quot;foo.bar=baz&amp;quot;: &amp;quot;foo.bar&amp;quot; is not a known field selector: only &amp;quot;metadata.</description>
    </item>
    
    <item>
      <title>å¹²æ‰°</title>
      <link>https://lijun.in/concepts/workloads/pods/disruptions/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/pods/disruptions/</guid>
      <description>æœ¬æŒ‡å—é’ˆå¯¹çš„æ˜¯å¸Œæœ›æ„å»ºé«˜å¯ç”¨æ€§åº”ç”¨ç¨‹åºçš„åº”ç”¨æ‰€æœ‰è€…ï¼Œä»–ä»¬æœ‰å¿…è¦äº†è§£å¯èƒ½å‘ç”Ÿåœ¨ pod ä¸Šçš„å¹²æ‰°ç±»å‹ã€‚
æ–‡æ¡£åŒæ ·é€‚ç”¨äºæƒ³è¦æ‰§è¡Œè‡ªåŠ¨åŒ–é›†ç¾¤æ“ä½œï¼ˆä¾‹å¦‚å‡çº§å’Œè‡ªåŠ¨æ‰©å±•é›†ç¾¤ï¼‰çš„é›†ç¾¤ç®¡ç†å‘˜ã€‚
è‡ªæ„¿å¹²æ‰°å’Œéè‡ªæ„¿å¹²æ‰° Pod ä¸ä¼šæ¶ˆå¤±ï¼Œé™¤éæœ‰äººï¼ˆç”¨æˆ·æˆ–æ§åˆ¶å™¨ï¼‰å°†å…¶é”€æ¯ï¼Œæˆ–è€…å‡ºç°äº†ä¸å¯é¿å…çš„ç¡¬ä»¶æˆ–è½¯ä»¶ç³»ç»Ÿé”™è¯¯ã€‚
æˆ‘ä»¬æŠŠè¿™äº›ä¸å¯é¿å…çš„æƒ…å†µç§°ä¸ºåº”ç”¨çš„éè‡ªæ„¿å¹²æ‰°ã€‚ä¾‹å¦‚ï¼š
 èŠ‚ç‚¹ä¸‹å±‚ç‰©ç†æœºçš„ç¡¬ä»¶æ•…éšœ é›†ç¾¤ç®¡ç†å‘˜é”™è¯¯åœ°åˆ é™¤è™šæ‹Ÿæœºï¼ˆå®ä¾‹ï¼‰ äº‘æä¾›å•†æˆ–è™šæ‹Ÿæœºç®¡ç†ç¨‹åºä¸­çš„æ•…éšœå¯¼è‡´çš„è™šæ‹Ÿæœºæ¶ˆå¤± å†…æ ¸é”™è¯¯ èŠ‚ç‚¹ç”±äºé›†ç¾¤ç½‘ç»œéš”ç¦»ä»é›†ç¾¤ä¸­æ¶ˆå¤± ç”±äºèŠ‚ç‚¹èµ„æºä¸è¶³å¯¼è‡´ pod è¢«é©±é€ã€‚  é™¤äº†èµ„æºä¸è¶³çš„æƒ…å†µï¼Œå¤§å¤šæ•°ç”¨æˆ·åº”è¯¥éƒ½ç†Ÿæ‚‰è¿™äº›æƒ…å†µï¼›å®ƒä»¬ä¸æ˜¯ç‰¹å®šäº Kubernetes çš„ã€‚
æˆ‘ä»¬ç§°å…¶ä»–æƒ…å†µä¸ºè‡ªæ„¿å¹²æ‰°ã€‚åŒ…æ‹¬ç”±åº”ç”¨ç¨‹åºæ‰€æœ‰è€…å‘èµ·çš„æ“ä½œå’Œç”±é›†ç¾¤ç®¡ç†å‘˜å‘èµ·çš„æ“ä½œã€‚å…¸å‹çš„åº”ç”¨ç¨‹åºæ‰€æœ‰è€…çš„ ä½œåŒ…æ‹¬ï¼š
 åˆ é™¤ deployment æˆ–å…¶ä»–ç®¡ç† pod çš„æ§åˆ¶å™¨ æ›´æ–°äº† deployment çš„ pod æ¨¡æ¿å¯¼è‡´ pod é‡å¯ ç›´æ¥åˆ é™¤ podï¼ˆä¾‹å¦‚ï¼Œå› ä¸ºè¯¯æ“ä½œï¼‰  é›†ç¾¤ç®¡ç†å‘˜æ“ä½œåŒ…æ‹¬ï¼š
 æ’ç©ºï¼ˆdrainï¼‰èŠ‚ç‚¹è¿›è¡Œä¿®å¤æˆ–å‡çº§ã€‚ ä»é›†ç¾¤ä¸­æ’ç©ºèŠ‚ç‚¹ä»¥ç¼©å°é›†ç¾¤ï¼ˆäº†è§£é›†ç¾¤è‡ªåŠ¨æ‰©ç¼©ï¼‰ã€‚ ä»èŠ‚ç‚¹ä¸­ç§»é™¤ä¸€ä¸ª podï¼Œä»¥å…è®¸å…¶ä»– pod ä½¿ç”¨è¯¥èŠ‚ç‚¹ã€‚  è¿™äº›æ“ä½œå¯èƒ½ç”±é›†ç¾¤ç®¡ç†å‘˜ç›´æ¥æ‰§è¡Œï¼Œä¹Ÿå¯èƒ½ç”±é›†ç¾¤ç®¡ç†å‘˜æ‰€ä½¿ç”¨çš„è‡ªåŠ¨åŒ–å·¥å…·æ‰§è¡Œï¼Œæˆ–è€…ç”±é›†ç¾¤æ‰˜ç®¡æä¾›å•†è‡ªåŠ¨æ‰§è¡Œã€‚
å’¨è¯¢é›†ç¾¤ç®¡ç†å‘˜æˆ–è”ç³»äº‘æä¾›å•†ï¼Œæˆ–è€…æŸ¥è¯¢å‘å¸ƒæ–‡æ¡£ï¼Œä»¥ç¡®å®šæ˜¯å¦ä¸ºé›†ç¾¤å¯ç”¨äº†ä»»ä½•èµ„æºå¹²æ‰°æºã€‚å¦‚æœæ²¡æœ‰å¯ç”¨ï¼Œå¯ä»¥ä¸ç”¨åˆ›å»º Pod Disruption Budgetsï¼ˆPod å¹²æ‰°é¢„ç®—ï¼‰
å¹¶éæ‰€æœ‰çš„è‡ªæ„¿å¹²æ‰°éƒ½ä¼šå—åˆ° pod å¹²æ‰°é¢„ç®—çš„é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œåˆ é™¤ deployment æˆ– pod çš„åˆ é™¤æ“ä½œå°±ä¼šè·³è¿‡ pod å¹²æ‰°é¢„ç®—æ£€æŸ¥ã€‚
å¤„ç†å¹²æ‰° ä»¥ä¸‹æ˜¯å‡è½»éè‡ªæ„¿å¹²æ‰°çš„ä¸€äº›æ–¹æ³•ï¼š
 ç¡®ä¿ podè¯·æ±‚æ‰€éœ€èµ„æºã€‚ å¦‚æœéœ€è¦æ›´é«˜çš„å¯ç”¨æ€§ï¼Œè¯·å¤åˆ¶åº”ç”¨ç¨‹åºã€‚ï¼ˆäº†è§£æœ‰å…³è¿è¡Œå¤šå‰¯æœ¬çš„æ— çŠ¶æ€å’Œæœ‰çŠ¶æ€åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ã€‚ï¼‰ ä¸ºäº†åœ¨è¿è¡Œå¤åˆ¶åº”ç”¨ç¨‹åºæ—¶è·å¾—æ›´é«˜çš„å¯ç”¨æ€§ï¼Œè¯·è·¨æœºæ¶ï¼ˆä½¿ç”¨åäº²å’Œæ€§ï¼‰æˆ–è·¨åŒºåŸŸï¼ˆå¦‚æœä½¿ç”¨å¤šåŒºåŸŸé›†ç¾¤ï¼‰æ‰©å±•åº”ç”¨ç¨‹åºã€‚  è‡ªæ„¿å¹²æ‰°çš„é¢‘ç‡å„ä¸ç›¸åŒã€‚åœ¨ä¸€ä¸ªåŸºæœ¬çš„ Kubernetes é›†ç¾¤ä¸­ï¼Œæ ¹æœ¬æ²¡æœ‰è‡ªæ„¿å¹²æ‰°ã€‚ç„¶è€Œï¼Œé›†ç¾¤ç®¡ç† æˆ–æ‰˜ç®¡æä¾›å•†å¯èƒ½è¿è¡Œä¸€äº›å¯èƒ½å¯¼è‡´è‡ªæ„¿å¹²æ‰°çš„é¢å¤–æœåŠ¡ã€‚ä¾‹å¦‚ï¼ŒèŠ‚ç‚¹è½¯ æ›´æ–°å¯èƒ½å¯¼è‡´è‡ªæ„¿å¹²æ‰°ã€‚å¦å¤–ï¼Œé›†ç¾¤ï¼ˆèŠ‚ç‚¹ï¼‰è‡ªåŠ¨ç¼©æ”¾çš„æŸäº› ç°å¯èƒ½å¯¼è‡´ç¢ç‰‡æ•´ç†å’Œç´§ç¼©èŠ‚ç‚¹çš„è‡ªæ„¿å¹²æ‰°ã€‚é›†ç¾¤ ç†å‘˜æˆ–æ‰˜ç®¡æä¾›å•†åº”è¯¥å·²ç»è®°å½•äº†å„çº§åˆ«çš„è‡ªæ„¿å¹²æ‰°ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚</description>
    </item>
    
    <item>
      <title>æˆæƒæ¦‚è¿°</title>
      <link>https://lijun.in/reference/access-authn-authz/authorization/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/access-authn-authz/authorization/</guid>
      <description>äº†è§£æœ‰å…³ Kubernetes æˆæƒçš„æ›´å¤šä¿¡æ¯ï¼ŒåŒ…æ‹¬ä½¿ç”¨æ”¯æŒçš„æˆæƒæ¨¡å—åˆ›å»ºç­–ç•¥çš„è¯¦ç»†ä¿¡æ¯ã€‚
åœ¨ Kubernetes ä¸­ï¼Œæ‚¨å¿…é¡»åœ¨æˆæƒï¼ˆæˆäºˆè®¿é—®æƒé™ï¼‰ä¹‹å‰è¿›è¡Œèº«ä»½éªŒè¯ï¼ˆç™»å½•ï¼‰ï¼Œæœ‰å…³èº«ä»½éªŒè¯çš„ä¿¡æ¯ï¼Œ è¯·å‚é˜… è®¿é—®æ§åˆ¶æ¦‚è¿°.
Kubernetes æœŸæœ› REST API è¯·æ±‚ä¸­å¸¸è§çš„å±æ€§ã€‚ è¿™æ„å‘³ç€ Kubernetes æˆæƒé€‚ç”¨äºç°æœ‰çš„ç»„ç»‡èŒƒå›´æˆ–äº‘æä¾›å•†èŒƒå›´çš„è®¿é—®æ§åˆ¶ç³»ç»Ÿï¼Œ é™¤äº† Kubernetes API ä¹‹å¤–ï¼Œå®ƒè¿˜å¯ä»¥å¤„ç†å…¶ä»– APIã€‚
ç¡®å®šæ˜¯å…è®¸è¿˜æ˜¯æ‹’ç»è¯·æ±‚ Kubernetes ä½¿ç”¨ API â€‹â€‹æœåŠ¡å™¨æˆæƒ API è¯·æ±‚ã€‚å®ƒæ ¹æ®æ‰€æœ‰ç­–ç•¥è¯„ä¼°æ‰€æœ‰è¯·æ±‚å±æ€§æ¥å†³å®šå…è®¸æˆ–æ‹’ç»è¯·æ±‚ã€‚ ä¸€ä¸ª API è¯·æ±‚çš„æ‰€æœ‰éƒ¨åˆ†å¿…é¡»è¢«æŸäº›ç­–ç•¥å…è®¸æ‰èƒ½ç»§ç»­ã€‚è¿™æ„å‘³ç€é»˜è®¤æƒ…å†µä¸‹æ‹’ç»æƒé™ã€‚
ï¼ˆå°½ç®¡ Kubernetes ä½¿ç”¨ API â€‹â€‹æœåŠ¡å™¨ï¼Œä½†æ˜¯ä¾èµ–äºç‰¹å®šç§ç±»å¯¹è±¡çš„ç‰¹å®šå­—æ®µçš„è®¿é—®æ§åˆ¶å’Œç­–ç•¥ç”±å‡†å…¥æ§åˆ¶å™¨å¤„ç†ã€‚ï¼‰
é…ç½®å¤šä¸ªæˆæƒæ¨¡å—æ—¶ï¼Œå°†æŒ‰é¡ºåºæ£€æŸ¥æ¯ä¸ªæ¨¡å—ã€‚ å¦‚æœä»»ä½•æˆæƒæ¨¡å—æ‰¹å‡†æˆ–æ‹’ç»è¯·æ±‚ï¼Œåˆ™ç«‹å³è¿”å›è¯¥å†³å®šï¼Œå¹¶ä¸”ä¸ä¼šä¸å…¶ä»–æˆæƒæ¨¡å—åå•†ã€‚ å¦‚æœæ‰€æœ‰æ¨¡å—å¯¹è¯·æ±‚æ²¡æœ‰æ„è§ï¼Œåˆ™æ‹’ç»è¯¥è¯·æ±‚ã€‚ä¸€ä¸ªæ‹’ç»å“åº”è¿”å› HTTP çŠ¶æ€ä»£ç  403 ã€‚
å®¡æŸ¥æ‚¨çš„è¯·æ±‚å±æ€§ Kubernetes ä»…å®¡æŸ¥ä»¥ä¸‹ API è¯·æ±‚å±æ€§ï¼š
 user - èº«ä»½éªŒè¯æœŸé—´æä¾›çš„ user å­—ç¬¦ä¸²ã€‚ group - ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·æ‰€å±çš„ç»„ååˆ—è¡¨ã€‚ extra - ç”±èº«ä»½éªŒè¯å±‚æä¾›çš„ä»»æ„å­—ç¬¦ä¸²é”®åˆ°å­—ç¬¦ä¸²å€¼çš„æ˜ å°„ã€‚ API - æŒ‡ç¤ºè¯·æ±‚æ˜¯å¦é’ˆå¯¹ API èµ„æºã€‚ Request path - å„ç§éèµ„æºç«¯ç‚¹çš„è·¯å¾„ï¼Œå¦‚ /api æˆ– /healthzã€‚ API request verb - API åŠ¨è¯ getï¼Œlistï¼Œcreateï¼Œupdateï¼Œpatchï¼Œwatchï¼Œproxyï¼Œredirectï¼Œdelete å’Œ deletecollection ç”¨äºèµ„æºè¯·æ±‚ã€‚è¦ç¡®å®šèµ„æº API ç«¯ç‚¹çš„è¯·æ±‚åŠ¨è¯ï¼Œè¯·å‚é˜…ç¡®å®šè¯·æ±‚åŠ¨è¯ã€‚ HTTP request verb - HTTP åŠ¨è¯ getï¼Œpostï¼Œput å’Œ delete ç”¨äºéèµ„æºè¯·æ±‚ã€‚ Resource - æ­£åœ¨è®¿é—®çš„èµ„æºçš„ ID æˆ–åç§°ï¼ˆä»…é™èµ„æºè¯·æ±‚ï¼‰ - å¯¹äºä½¿ç”¨ getï¼Œupdateï¼Œpatch å’Œ delete åŠ¨è¯çš„èµ„æºè¯·æ±‚ï¼Œæ‚¨å¿…é¡»æä¾›èµ„æºåç§°ã€‚ Subresource - æ­£åœ¨è®¿é—®çš„å­èµ„æºï¼ˆä»…é™èµ„æºè¯·æ±‚ï¼‰ã€‚ Namespace - æ­£åœ¨è®¿é—®çš„å¯¹è±¡çš„åç§°ç©ºé—´ï¼ˆä»…é€‚ç”¨äºå‘½åç©ºé—´èµ„æºè¯·æ±‚ï¼‰ã€‚ API group - æ­£åœ¨è®¿é—®çš„ API ç»„ï¼ˆä»…é™èµ„æºè¯·æ±‚ï¼‰ã€‚ç©ºå­—ç¬¦ä¸²è¡¨ç¤ºæ ¸å¿ƒ API ç»„ã€‚  ç¡®å®šè¯·æ±‚åŠ¨è¯ è¦ç¡®å®šèµ„æº API ç«¯ç‚¹çš„è¯·æ±‚è°“è¯ï¼Œè¯·æ£€æŸ¥æ‰€ä½¿ç”¨çš„ HTTP åŠ¨è¯ä»¥åŠè¯·æ±‚æ˜¯å¦å¯¹å•ä¸ªèµ„æºæˆ–èµ„æºé›†åˆèµ·ä½œç”¨ï¼š</description>
    </item>
    
    <item>
      <title>æ—¥å¿—æ¶æ„</title>
      <link>https://lijun.in/concepts/cluster-administration/logging/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/cluster-administration/logging/</guid>
      <description>åº”ç”¨å’Œç³»ç»Ÿæ—¥å¿—å¯ä»¥è®©æ‚¨äº†è§£é›†ç¾¤å†…éƒ¨çš„è¿è¡ŒçŠ¶å†µã€‚æ—¥å¿—å¯¹è°ƒè¯•é—®é¢˜å’Œç›‘æ§é›†ç¾¤æ´»åŠ¨éå¸¸æœ‰ç”¨ã€‚å¤§éƒ¨åˆ†ç°ä»£åŒ–åº”ç”¨éƒ½æœ‰æŸç§æ—¥å¿—è®°å½•æœºåˆ¶ï¼›åŒæ ·åœ°ï¼Œå¤§å¤šæ•°å®¹å™¨å¼•æ“ä¹Ÿè¢«è®¾è®¡æˆæ”¯æŒæŸç§æ—¥å¿—è®°å½•æœºåˆ¶ã€‚é’ˆå¯¹å®¹å™¨åŒ–åº”ç”¨ï¼Œæœ€ç®€å•ä¸”å—æ¬¢è¿çš„æ—¥å¿—è®°å½•æ–¹å¼å°±æ˜¯å†™å…¥æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯æµã€‚
ä½†æ˜¯ï¼Œç”±å®¹å™¨å¼•æ“æˆ– runtime æä¾›çš„åŸç”ŸåŠŸèƒ½é€šå¸¸ä¸è¶³ä»¥æ»¡è¶³å®Œæ•´çš„æ—¥å¿—è®°å½•æ–¹æ¡ˆã€‚ä¾‹å¦‚ï¼Œå¦‚æœå‘ç”Ÿå®¹å™¨å´©æºƒã€pod è¢«é€å‡ºæˆ–èŠ‚ç‚¹å®•æœºç­‰æƒ…å†µï¼Œæ‚¨ä»ç„¶æƒ³è®¿é—®åˆ°åº”ç”¨æ—¥å¿—ã€‚å› æ­¤ï¼Œæ—¥å¿—åº”è¯¥å…·æœ‰ç‹¬ç«‹çš„å­˜å‚¨å’Œç”Ÿå‘½å‘¨æœŸï¼Œä¸èŠ‚ç‚¹ã€pod æˆ–å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸç›¸ç‹¬ç«‹ã€‚è¿™ä¸ªæ¦‚å¿µå« é›†ç¾¤çº§çš„æ—¥å¿— ã€‚é›†ç¾¤çº§æ—¥å¿—æ–¹æ¡ˆéœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„åå°æ¥å­˜å‚¨ã€åˆ†æå’ŒæŸ¥è¯¢æ—¥å¿—ã€‚Kubernetes æ²¡æœ‰ä¸ºæ—¥å¿—æ•°æ®æä¾›åŸç”Ÿå­˜å‚¨æ–¹æ¡ˆï¼Œä½†æ˜¯æ‚¨å¯ä»¥é›†æˆè®¸å¤šç°æœ‰çš„æ—¥å¿—è§£å†³æ–¹æ¡ˆåˆ° Kubernetes é›†ç¾¤ä¸­ã€‚
é›†ç¾¤çº§æ—¥å¿—æ¶æ„å‡å®šåœ¨é›†ç¾¤å†…éƒ¨æˆ–è€…å¤–éƒ¨æœ‰ä¸€ä¸ªæ—¥å¿—åå°ã€‚å¦‚æœæ‚¨å¯¹é›†ç¾¤çº§æ—¥å¿—ä¸æ„Ÿå…´è¶£ï¼Œæ‚¨ä»ä¼šå‘ç°å…³äºå¦‚ä½•åœ¨èŠ‚ç‚¹ä¸Šå­˜å‚¨å’Œå¤„ç†æ—¥å¿—çš„æè¿°å¯¹æ‚¨æ˜¯æœ‰ç”¨çš„ã€‚
Kubernetes ä¸­çš„åŸºæœ¬æ—¥å¿—è®°å½• æœ¬èŠ‚ï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸€ä¸ªkubernetes ä¸­ç”ŸæˆåŸºæœ¬æ—¥å¿—çš„ä¾‹å­ï¼Œè¯¥ä¾‹å­ä¸­æ•°æ®è¢«å†™å…¥åˆ°æ ‡å‡†è¾“å‡ºã€‚ è¿™é‡Œé€šè¿‡ä¸€ä¸ªç‰¹å®šçš„ pod è§„çº¦ æ¼”ç¤ºåˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œå¹¶ä»¤è¯¥å®¹å™¨æ¯ç§’é’Ÿå‘æ ‡å‡†è¾“å‡ºå†™å…¥æ•°æ®ã€‚
ç”¨ä¸‹é¢çš„å‘½ä»¤è¿è¡Œ podï¼š
kubectl apply -f https://k8s.io/examples/debug/counter-pod.yaml è¾“å‡ºç»“æœä¸ºï¼š
pod/counter created ä½¿ç”¨ kubectl logs å‘½ä»¤è·å–æ—¥å¿—:
kubectl logs counter è¾“å‡ºç»“æœä¸ºï¼š
0: Mon Jan 1 00:00:00 UTC 2001 1: Mon Jan 1 00:00:01 UTC 2001 2: Mon Jan 1 00:00:02 UTC 2001 ... ä¸€æ—¦å‘ç”Ÿå®¹å™¨å´©æºƒï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å‘½ä»¤ kubectl logs å’Œå‚æ•° --previous æ£€ç´¢ä¹‹å‰çš„å®¹å™¨æ—¥å¿—ã€‚ å¦‚æœ pod ä¸­æœ‰å¤šä¸ªå®¹å™¨ï¼Œæ‚¨åº”è¯¥å‘è¯¥å‘½ä»¤é™„åŠ ä¸€ä¸ªå®¹å™¨åä»¥è®¿é—®å¯¹åº”å®¹å™¨çš„æ—¥å¿—ã€‚ è¯¦è§ kubectl logs æ–‡æ¡£ã€‚</description>
    </item>
    
    <item>
      <title>çŸ¥åæ ‡ç­¾ï¼ˆLabelï¼‰ã€æ³¨è§£ï¼ˆAnnotationï¼‰å’Œ Taints</title>
      <link>https://lijun.in/reference/kubernetes-api/labels-annotations-taints/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/kubernetes-api/labels-annotations-taints/</guid>
      <description>Kubernetes ä¿ç•™äº† kubernetes.io å‘½åç©ºé—´ä¸‹çš„æ‰€æœ‰æ ‡ç­¾å’Œæ³¨è§£ã€‚
æœ¬æ–‡æ—¢ä½œä¸ºè¿™äº›æ ‡ç­¾å’Œæ³¨è§£çš„å‚è€ƒï¼Œä¹Ÿå°±è¿™äº›æ ‡ç­¾å’Œæ³¨è§£çš„èµ‹å€¼è¿›è¡Œäº†è¯´æ˜ã€‚
kubernetes.io/arch ç¤ºä¾‹ï¼škubernetes.io/arch=amd64
ç”¨äºï¼šNode
Kubelet ç”¨ Go ä¸­å®šä¹‰çš„ runtime.GOARCH å€¼æ¥å¡«å……è¯¥æ ‡ç­¾ã€‚è¿™åœ¨è¯¸å¦‚æ··ç”¨ arm å’Œ x86 èŠ‚ç‚¹çš„æƒ…å†µä¸‹å¾ˆæœ‰ç”¨ã€‚
kubernetes.io/os ç¤ºä¾‹ï¼škubernetes.io/os=linux
ç”¨äºï¼šNode
Kubelet ç”¨è¯¥ Go ä¸­å®šä¹‰çš„ runtime.GOOS å€¼æ¥å¡«å……è¯¥æ ‡ç­¾ã€‚è¿™åœ¨é›†ç¾¤ä¸­å­˜åœ¨ä¸åŒæ“ä½œç³»ç»Ÿçš„èŠ‚ç‚¹æ—¶å¾ˆæœ‰ç”¨ï¼ˆä¾‹å¦‚ï¼šæ··åˆ Linux å’Œ Windows æ“ä½œç³»ç»Ÿçš„èŠ‚ç‚¹ï¼‰ã€‚
beta.kubernetes.io/arch (å·²å¼ƒç”¨) è¯¥æ ‡ç­¾å·²è¢«å¼ƒç”¨ã€‚è¯·ä½¿ç”¨ kubernetes.io/archã€‚
beta.kubernetes.io/os (å·²å¼ƒç”¨) è¯¥æ ‡ç­¾å·²è¢«å¼ƒç”¨ã€‚è¯·ä½¿ç”¨ kubernetes.io/archã€‚
kubernetes.io/hostname ç¤ºä¾‹ï¼škubernetes.io/hostname=ip-172-20-114-199.ec2.internal
ç”¨äºï¼šNode
Kubelet ç”¨ hostname å€¼æ¥å¡«å……è¯¥æ ‡ç­¾ã€‚æ³¨æ„ï¼šå¯ä»¥é€šè¿‡å‘ kubelet ä¼ å…¥ --hostname-override å‚æ•°å¯¹ â€œçœŸæ­£çš„â€ hostname è¿›è¡Œä¿®æ”¹ã€‚
beta.kubernetes.io/instance-type (å·²å¼ƒç”¨) . note &amp;gt;}}
ä» kubernetes 1.17 ç‰ˆæœ¬å¼€å§‹ï¼Œä¸æ¨èä½¿ç”¨æ­¤æ ‡ç­¾ï¼Œè€Œæ¨èä½¿ç”¨node.kubernetes.io/instance-typeã€‚ . /note &amp;gt;}}
node.kubernetes.io/instance-type ç¤ºä¾‹ï¼šnode.kubernetes.io/instance-type=m3.medium
ç”¨äºï¼šNode
Kubelet ç”¨ cloudprovider ä¸­å®šä¹‰çš„å®ä¾‹ç±»å‹æ¥å¡«å……è¯¥æ ‡ç­¾ã€‚æœªä½¿ç”¨ cloudprovider æ—¶ä¸ä¼šè®¾ç½®è¯¥æ ‡ç­¾ã€‚è¯¥æ ‡ç­¾åœ¨æƒ³è¦å°†æŸäº›è´Ÿè½½å®šå‘åˆ°ç‰¹å®šå®ä¾‹ç±»å‹çš„èŠ‚ç‚¹ä¸Šæ—¶ä¼šå¾ˆæœ‰ç”¨ï¼Œä½†é€šå¸¸ç”¨æˆ·æ›´å¸Œæœ›ä¾èµ– Kubernetes è°ƒåº¦å™¨æ¥æ‰§è¡ŒåŸºäºèµ„æºçš„è°ƒåº¦ï¼Œæ‰€ä»¥ç”¨æˆ·åº”è¯¥è‡´åŠ›äºåŸºäºå±æ€§è€Œä¸æ˜¯å®ä¾‹ç±»å‹æ¥è¿›è¡Œè°ƒåº¦(ä¾‹å¦‚ï¼šéœ€è¦ä¸€ä¸ª GPUï¼Œè€Œä¸æ˜¯ g2.</description>
    </item>
    
    <item>
      <title>è°ƒåº¦æ¡†æ¶</title>
      <link>https://lijun.in/concepts/scheduling-eviction/scheduling-framework/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/scheduling-eviction/scheduling-framework/</guid>
      <description>feature-state for_k8s_version=&amp;quot;1.15&amp;rdquo; state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
è°ƒåº¦æ¡†æ¶æ˜¯ Kubernetes Scheduler çš„ä¸€ç§å¯æ’å…¥æ¶æ„ï¼Œå¯ä»¥ç®€åŒ–è°ƒåº¦å™¨çš„è‡ªå®šä¹‰ã€‚å®ƒå‘ç°æœ‰çš„è°ƒåº¦å™¨å¢åŠ äº†ä¸€ç»„æ–°çš„â€œæ’ä»¶â€ APIã€‚æ’ä»¶è¢«ç¼–è¯‘åˆ°è°ƒåº¦å™¨ç¨‹åºä¸­ã€‚è¿™äº› API å…è®¸å¤§å¤šæ•°è°ƒåº¦åŠŸèƒ½ä»¥æ’ä»¶çš„å½¢å¼å®ç°ï¼ŒåŒæ—¶ä½¿è°ƒåº¦â€œæ ¸å¿ƒâ€ä¿æŒç®€å•ä¸”å¯ç»´æŠ¤ã€‚è¯·å‚è€ƒè°ƒåº¦æ¡†æ¶çš„è®¾è®¡ææ¡ˆè·å–æ¡†æ¶è®¾è®¡çš„æ›´å¤šæŠ€æœ¯ä¿¡æ¯ã€‚
æ¡†æ¶å·¥ä½œæµç¨‹ è°ƒåº¦æ¡†æ¶å®šä¹‰äº†ä¸€äº›æ‰©å±•ç‚¹ã€‚è°ƒåº¦å™¨æ’ä»¶æ³¨å†Œååœ¨ä¸€ä¸ªæˆ–å¤šä¸ªæ‰©å±•ç‚¹å¤„è¢«è°ƒç”¨ã€‚è¿™äº›æ’ä»¶ä¸­çš„ä¸€äº›å¯ä»¥æ”¹å˜è°ƒåº¦å†³ç­–ï¼Œè€Œå¦ä¸€äº›ä»…ç”¨äºæä¾›ä¿¡æ¯ã€‚
æ¯æ¬¡è°ƒåº¦ä¸€ä¸ª Pod çš„å°è¯•éƒ½åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œå³ è°ƒåº¦å‘¨æœŸ å’Œ ç»‘å®šå‘¨æœŸã€‚
è°ƒåº¦å‘¨æœŸå’Œç»‘å®šå‘¨æœŸ è°ƒåº¦å‘¨æœŸä¸º Pod é€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç»‘å®šå‘¨æœŸå°†è¯¥å†³ç­–åº”ç”¨äºé›†ç¾¤ã€‚è°ƒåº¦å‘¨æœŸå’Œç»‘å®šå‘¨æœŸä¸€èµ·è¢«ç§°ä¸ºâ€œè°ƒåº¦ä¸Šä¸‹æ–‡â€ã€‚
è°ƒåº¦å‘¨æœŸæ˜¯ä¸²è¡Œè¿è¡Œçš„ï¼Œè€Œç»‘å®šå‘¨æœŸå¯èƒ½æ˜¯åŒæ—¶è¿è¡Œçš„ã€‚
å¦‚æœç¡®å®š Pod ä¸å¯è°ƒåº¦æˆ–è€…å­˜åœ¨å†…éƒ¨é”™è¯¯ï¼Œåˆ™å¯ä»¥ç»ˆæ­¢è°ƒåº¦å‘¨æœŸæˆ–ç»‘å®šå‘¨æœŸã€‚Pod å°†è¿”å›é˜Ÿåˆ—å¹¶é‡è¯•ã€‚
æ‰©å±•ç‚¹ ä¸‹å›¾æ˜¾ç¤ºäº†ä¸€ä¸ª Pod çš„è°ƒåº¦ä¸Šä¸‹æ–‡ä»¥åŠè°ƒåº¦æ¡†æ¶å…¬å¼€çš„æ‰©å±•ç‚¹ã€‚åœ¨æ­¤å›¾ç‰‡ä¸­ï¼Œâ€œè¿‡æ»¤å™¨â€ç­‰åŒäºâ€œæ–­è¨€â€ï¼Œâ€œè¯„åˆ†â€ç›¸å½“äºâ€œä¼˜å…ˆçº§å‡½æ•°â€ã€‚
ä¸€ä¸ªæ’ä»¶å¯ä»¥åœ¨å¤šä¸ªæ‰©å±•ç‚¹å¤„æ³¨å†Œï¼Œä»¥æ‰§è¡Œæ›´å¤æ‚æˆ–æœ‰çŠ¶æ€çš„ä»»åŠ¡ã€‚
figure src=&amp;rdquo;/images/docs/scheduling-framework-extensions.png&amp;rdquo; title=&amp;quot;è°ƒåº¦æ¡†æ¶æ‰©å±•ç‚¹&amp;rdquo; &amp;gt;}}
é˜Ÿåˆ—æ’åº é˜Ÿåˆ—æ’åºæ’ä»¶ç”¨äºå¯¹è°ƒåº¦é˜Ÿåˆ—ä¸­çš„ Pod è¿›è¡Œæ’åºã€‚é˜Ÿåˆ—æ’åºæ’ä»¶æœ¬è´¨ä¸Šæä¾› &amp;ldquo;less(Pod1, Pod2)&amp;rdquo; å‡½æ•°ã€‚ä¸€æ¬¡åªèƒ½å¯åŠ¨ä¸€ä¸ªé˜Ÿåˆ—æ’ä»¶ã€‚
å‰ç½®è¿‡æ»¤ å‰ç½®è¿‡æ»¤æ’ä»¶ç”¨äºé¢„å¤„ç† Pod çš„ç›¸å…³ä¿¡æ¯ï¼Œæˆ–è€…æ£€æŸ¥é›†ç¾¤æˆ– Pod å¿…é¡»æ»¡è¶³çš„æŸäº›æ¡ä»¶ã€‚å¦‚æœ PreFilter æ’ä»¶è¿”å›é”™è¯¯ï¼Œåˆ™è°ƒåº¦å‘¨æœŸå°†ç»ˆæ­¢ã€‚
è¿‡æ»¤ è¿‡æ»¤æ’ä»¶ç”¨äºè¿‡æ»¤å‡ºä¸èƒ½è¿è¡Œè¯¥ Pod çš„èŠ‚ç‚¹ã€‚å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œè°ƒåº¦å™¨å°†æŒ‰ç…§å…¶é…ç½®é¡ºåºè°ƒç”¨è¿™äº›è¿‡æ»¤æ’ä»¶ã€‚å¦‚æœä»»ä½•è¿‡æ»¤æ’ä»¶å°†èŠ‚ç‚¹æ ‡è®°ä¸ºä¸å¯è¡Œï¼Œåˆ™ä¸ä¼šä¸ºè¯¥èŠ‚ç‚¹è°ƒç”¨å‰©ä¸‹çš„è¿‡æ»¤æ’ä»¶ã€‚èŠ‚ç‚¹å¯ä»¥è¢«åŒæ—¶è¿›è¡Œè¯„ä¼°ã€‚
å‰ç½®è¯„åˆ† å‰ç½®è¯„åˆ†æ’ä»¶ç”¨äºæ‰§è¡Œ â€œå‰ç½®è¯„åˆ†â€ å·¥ä½œï¼Œå³ç”Ÿæˆä¸€ä¸ªå¯å…±äº«çŠ¶æ€ä¾›è¯„åˆ†æ’ä»¶ä½¿ç”¨ã€‚å¦‚æœ PreScore æ’ä»¶è¿”å›é”™è¯¯ï¼Œåˆ™è°ƒåº¦å‘¨æœŸå°†ç»ˆæ­¢ã€‚
è¯„åˆ† è¯„åˆ†æ’ä»¶ç”¨äºå¯¹é€šè¿‡è¿‡æ»¤é˜¶æ®µçš„èŠ‚ç‚¹è¿›è¡Œæ’åã€‚è°ƒåº¦å™¨å°†ä¸ºæ¯ä¸ªèŠ‚ç‚¹è°ƒç”¨æ¯ä¸ªè¯„åˆ†æ’ä»¶ã€‚å°†æœ‰ä¸€ä¸ªå®šä¹‰æ˜ç¡®çš„æ•´æ•°èŒƒå›´ï¼Œä»£è¡¨æœ€å°å’Œæœ€å¤§åˆ†æ•°ã€‚åœ¨æ ‡å‡†åŒ–è¯„åˆ†é˜¶æ®µä¹‹åï¼Œè°ƒåº¦å™¨å°†æ ¹æ®é…ç½®çš„æ’ä»¶æƒé‡åˆå¹¶æ‰€æœ‰æ’ä»¶çš„èŠ‚ç‚¹åˆ†æ•°ã€‚
æ ‡å‡†åŒ–è¯„åˆ† æ ‡å‡†åŒ–è¯„åˆ†æ’ä»¶ç”¨äºåœ¨è°ƒåº¦å™¨è®¡ç®—èŠ‚ç‚¹çš„æ’åä¹‹å‰ä¿®æ”¹åˆ†æ•°ã€‚åœ¨æ­¤æ‰©å±•ç‚¹æ³¨å†Œçš„æ’ä»¶å°†ä½¿ç”¨åŒä¸€æ’ä»¶çš„è¯„åˆ† ç»“æœè¢«è°ƒç”¨ã€‚æ¯ä¸ªæ’ä»¶åœ¨æ¯ä¸ªè°ƒåº¦å‘¨æœŸè°ƒç”¨ä¸€æ¬¡ã€‚
ä¾‹å¦‚ï¼Œå‡è®¾ä¸€ä¸ª BlinkingLightScorer æ’ä»¶åŸºäºå…·æœ‰çš„é—ªçƒæŒ‡ç¤ºç¯æ•°é‡æ¥å¯¹èŠ‚ç‚¹è¿›è¡Œæ’åã€‚</description>
    </item>
    
    <item>
      <title>é…ç½® Pod ä»¥ä½¿ç”¨ PersistentVolume ä½œä¸ºå­˜å‚¨</title>
      <link>https://lijun.in/tasks/configure-pod-container/configure-persistent-volume-storage/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/configure-persistent-volume-storage/</guid>
      <description>æœ¬æ–‡ä»‹ç»å¦‚ä½•é…ç½® Pod ä½¿ç”¨ PersistentVolumeClaim ä½œä¸ºå­˜å‚¨ã€‚ ä»¥ä¸‹æ˜¯è¯¥è¿‡ç¨‹çš„æ€»ç»“ï¼š
  é›†ç¾¤ç®¡ç†å‘˜åˆ›å»ºç”±ç‰©ç†å­˜å‚¨æ”¯æŒçš„ PersistentVolumeã€‚ç®¡ç†å‘˜ä¸å°†å·ä¸ä»»ä½• Pod å…³è”ã€‚
  ç¾¤é›†ç”¨æˆ·åˆ›å»ºä¸€ä¸ª PersistentVolumeClaimï¼Œå®ƒå°†è‡ªåŠ¨ç»‘å®šåˆ°åˆé€‚çš„ PersistentVolumeã€‚
  ç”¨æˆ·åˆ›å»ºä¸€ä¸ªä½¿ç”¨ PersistentVolumeClaim ä½œä¸ºå­˜å‚¨çš„ Podã€‚
  . heading &amp;ldquo;prerequisites&amp;rdquo; %}}   æ‚¨éœ€è¦ä¸€ä¸ªåŒ…å«å•ä¸ªèŠ‚ç‚¹çš„ Kubernetes é›†ç¾¤ï¼Œå¹¶ä¸”å¿…é¡»é…ç½® kubectl å‘½ä»¤è¡Œå·¥å…·ä»¥ä¾¿ä¸é›†ç¾¤äº¤äº’ã€‚ å¦‚æœè¿˜æ²¡æœ‰å•èŠ‚ç‚¹é›†ç¾¤ï¼Œå¯ä»¥ä½¿ç”¨ Minikube åˆ›å»ºä¸€ä¸ªã€‚
  ç†Ÿæ‚‰æŒä¹…å·ä¸­çš„ææ–™ã€‚
  åœ¨ä½ çš„èŠ‚ç‚¹ä¸Šåˆ›å»ºä¸€ä¸ª index.html æ–‡ä»¶ æ‰“å¼€é›†ç¾¤ä¸­èŠ‚ç‚¹çš„ä¸€ä¸ª shellã€‚ å¦‚ä½•æ‰“å¼€ shell å–å†³äºé›†ç¾¤çš„è®¾ç½®ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ Minikubeï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡è¾“å…¥ minikube ssh æ¥æ‰“å¼€èŠ‚ç‚¹çš„ shellã€‚
åœ¨ shell ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª /mnt/data ç›®å½•ï¼š
mkdir /mnt/data  åœ¨ /mnt/data ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª index.html æ–‡ä»¶ï¼š</description>
    </item>
    
    <item>
      <title>é…ç½®å‘½åç©ºé—´ä¸‹podæ€»æ•°</title>
      <link>https://lijun.in/tasks/administer-cluster/manage-resources/quota-pod-namespace/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/manage-resources/quota-pod-namespace/</guid>
      <description>æœ¬æ–‡ä¸»è¦æè¿°å¦‚ä½•é…ç½®ä¸€ä¸ªå‘½åç©ºé—´ä¸‹å¯è¿è¡Œçš„podæ€»æ•°ã€‚èµ„æºé…é¢è¯¦ç»†ä¿¡æ¯å¯æŸ¥çœ‹ï¼šèµ„æºé…é¢ ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ é¦–å…ˆåˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œè¿™æ ·å¯ä»¥å°†æœ¬æ¬¡æ“ä½œä¸­åˆ›å»ºçš„èµ„æºä¸é›†ç¾¤å…¶ä»–èµ„æºéš”ç¦»å¼€æ¥ã€‚
kubectl create namespace quota-pod-example åˆ›å»ºèµ„æºé…é¢ ä¸‹é¢æ˜¯ä¸€ä¸ªèµ„æºé…é¢çš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;admin/resource/quota-pod.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»ºè¿™ä¸ªèµ„æºé…é¢ï¼š
kubectl apply -f https://k8s.io/examples/admin/resource/quota-pod.yaml --namespace=quota-pod-example æŸ¥çœ‹èµ„æºé…é¢çš„è¯¦ç»†ä¿¡æ¯ï¼š
kubectl get resourcequota pod-demo --namespace=quota-pod-example --output=yaml ä»è¾“å‡ºçš„ä¿¡æ¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¯¥å‘½åç©ºé—´ä¸‹podçš„é…é¢æ˜¯2ä¸ªï¼Œç›®å‰åˆ›å»ºçš„podsæ•°ä¸º0ï¼Œé…é¢ä½¿ç”¨ç‡ä¸º0ã€‚
spec: hard: pods: &amp;#34;2&amp;#34; status: hard: pods: &amp;#34;2&amp;#34; used: pods: &amp;#34;0&amp;#34; ä¸‹é¢æ˜¯ä¸€ä¸ªDeploymentçš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;admin/resource/quota-pod-deployment.yaml&amp;rdquo; &amp;gt;}}
åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œ replicas: 3 å‘Šè¯‰kuberneteså°è¯•åˆ›å»ºä¸‰ä¸ªpodsï¼Œä¸”è¿è¡Œç›¸åŒçš„åº”ç”¨ã€‚
åˆ›å»ºè¿™ä¸ªDeploymentï¼š
kubectl apply -f https://k8s.io/examples/admin/resource/quota-pod-deployment.yaml --namespace=quota-pod-example æŸ¥çœ‹Deploymentçš„è¯¦ç»†ä¿¡æ¯ï¼š
kubectl get deployment pod-quota-demo --namespace=quota-pod-example --output=yaml ä»è¾“å‡ºçš„ä¿¡æ¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå°½ç®¡å°è¯•åˆ›å»ºä¸‰ä¸ªpodï¼Œä½†æ˜¯ç”±äºé…é¢çš„é™åˆ¶ï¼Œåªæœ‰ä¸¤ä¸ªpodèƒ½è¢«æˆåŠŸåˆ›å»ºã€‚</description>
    </item>
    
    <item>
      <title>å·²å®Œæˆèµ„æºçš„ TTL æ§åˆ¶å™¨</title>
      <link>https://lijun.in/concepts/workloads/controllers/ttlafterfinished/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/controllers/ttlafterfinished/</guid>
      <description>feature-state for_k8s_version=&amp;quot;v1.12&amp;rdquo; state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
TTL æ§åˆ¶å™¨æä¾›äº†ä¸€ç§ TTL æœºåˆ¶æ¥é™åˆ¶å·²å®Œæˆæ‰§è¡Œçš„èµ„æºå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚TTL æ§åˆ¶å™¨ç›®å‰åªå¤„ç† Jobï¼Œå¯èƒ½ä»¥åä¼šæ‰©å±•ä»¥å¤„ç†å°†å®Œæˆæ‰§è¡Œçš„å…¶ä»–èµ„æºï¼Œä¾‹å¦‚ Pod å’Œè‡ªå®šä¹‰èµ„æºã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤åŠŸèƒ½ç›®å‰æ˜¯ alpha ç‰ˆï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ kube-apiserver å’Œ kube-controller-manager ç‰¹æ€§å¼€å…³ TTLAfterFinished å¯ç”¨ã€‚
TTL æ§åˆ¶å™¨ TTL æ§åˆ¶å™¨ç°åœ¨åªæ”¯æŒ Jobã€‚é›†ç¾¤æ“ä½œå‘˜å¯ä»¥é€šè¿‡æŒ‡å®š Job çš„ .spec.ttlSecondsAfterFinished å­—æ®µæ¥è‡ªåŠ¨æ¸…ç†å·²ç»“æŸçš„ä½œä¸šï¼ˆComplete æˆ– Failedï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºçš„ç¤ºä¾‹ã€‚
TTL æ§åˆ¶å™¨å‡è®¾èµ„æºèƒ½åœ¨æ‰§è¡Œå®Œæˆåçš„ TTL ç§’å†…è¢«æ¸…ç†ï¼Œä¹Ÿå°±æ˜¯å½“ TTL è¿‡æœŸåã€‚å½“ TTL æ§åˆ¶å™¨æ¸…ç†èµ„æºæ—¶ï¼Œå®ƒå°†åšçº§è”åˆ é™¤æ“ä½œï¼Œå¦‚åˆ é™¤èµ„æºå¯¹è±¡çš„åŒæ—¶ä¹Ÿåˆ é™¤å…¶ä¾èµ–å¯¹è±¡ã€‚æ³¨æ„ï¼Œå½“èµ„æºè¢«åˆ é™¤æ—¶ï¼Œç”±è¯¥èµ„æºçš„ç”Ÿå‘½å‘¨æœŸä¿è¯å…¶ç»ˆç»“å™¨ï¼ˆfinalizersï¼‰ç­‰è¢«æ‰§è¡Œã€‚
å¯ä»¥éšæ—¶è®¾ç½® TTL ç§’ã€‚ä»¥ä¸‹æ˜¯è®¾ç½® Job çš„ .spec.ttlSecondsAfterFinished å­—æ®µçš„ä¸€äº›ç¤ºä¾‹ï¼š
 åœ¨èµ„æºæ¸…å•ï¼ˆmanifestï¼‰ä¸­æŒ‡å®šæ­¤å­—æ®µï¼Œä»¥ä¾¿ Job åœ¨å®Œæˆåçš„æŸä¸ªæ—¶é—´è¢«è‡ªåŠ¨æ¸…é™¤ã€‚ å°†æ­¤å­—æ®µè®¾ç½®ä¸ºå­˜åœ¨çš„ã€å·²å®Œæˆçš„èµ„æºï¼Œä»¥é‡‡ç”¨æ­¤æ–°åŠŸèƒ½ã€‚ åœ¨åˆ›å»ºèµ„æºæ—¶ä½¿ç”¨ mutating admission webhook åŠ¨æ€è®¾ç½®è¯¥å­—æ®µã€‚é›†ç¾¤ç®¡ç†å‘˜å¯ä»¥ä½¿ç”¨å®ƒå¯¹å®Œæˆçš„èµ„æºå¼ºåˆ¶æ‰§è¡Œ TTL ç­–ç•¥ã€‚ ä½¿ç”¨ mutating admission webhook åœ¨èµ„æºå®ŒæˆååŠ¨æ€è®¾ç½®è¯¥å­—æ®µï¼Œå¹¶æ ¹æ®èµ„æºçŠ¶æ€ã€æ ‡ç­¾ç­‰é€‰æ‹©ä¸åŒçš„ TTL å€¼ã€‚  è­¦å‘Š æ›´æ–° TTL ç§’ è¯·æ³¨æ„ï¼Œåœ¨åˆ›å»ºèµ„æºæˆ–å·²ç»æ‰§è¡Œç»“æŸåï¼Œä»å¯ä»¥ä¿®æ”¹å…¶ TTL å‘¨æœŸï¼Œä¾‹å¦‚ Job çš„ .</description>
    </item>
    
    <item>
      <title>IPv4/IPv6 åŒåè®®æ ˆ</title>
      <link>https://lijun.in/concepts/services-networking/dual-stack/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/services-networking/dual-stack/</guid>
      <description>feature-state for_k8s_version=&amp;quot;v1.16&amp;rdquo; state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
IPv4/IPv6 åŒåè®®æ ˆèƒ½å¤Ÿå°† IPv4 å’Œ IPv6 åœ°å€åˆ†é…ç»™ text=&amp;quot;Pods&amp;rdquo; term_id=&amp;quot;pod&amp;rdquo; &amp;gt;}} å’Œ text=&amp;quot;Services&amp;rdquo; term_id=&amp;quot;service&amp;rdquo; &amp;gt;}}ã€‚
å¦‚æœä½ ä¸º Kubernetes é›†ç¾¤å¯ç”¨äº† IPv4/IPv6 åŒåè®®æ ˆç½‘ç»œï¼Œåˆ™è¯¥é›†ç¾¤å°†æ”¯æŒåŒæ—¶åˆ†é… IPv4 å’Œ IPv6 åœ°å€ã€‚
æ”¯æŒçš„åŠŸèƒ½ åœ¨ Kubernetes é›†ç¾¤ä¸Šå¯ç”¨ IPv4/IPv6 åŒåè®®æ ˆå¯æä¾›ä¸‹é¢çš„åŠŸèƒ½ï¼š
 åŒåè®®æ ˆ pod ç½‘ç»œ (æ¯ä¸ª pod åˆ†é…ä¸€ä¸ª IPv4 å’Œ IPv6 åœ°å€) IPv4 å’Œ IPv6 å¯ç”¨çš„æœåŠ¡ (æ¯ä¸ªæœåŠ¡å¿…é¡»æ˜¯ä¸€ä¸ªå•ç‹¬çš„åœ°å€æ—) Pod çš„é›†ç¾¤å¤–å‡ºå£é€šè¿‡ IPv4 å’Œ IPv6 è·¯ç”±  å…ˆå†³æ¡ä»¶ ä¸ºäº†ä½¿ç”¨ IPv4/IPv6 åŒæ ˆçš„ Kubernetes é›†ç¾¤ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹å…ˆå†³æ¡ä»¶ï¼š
 Kubernetes 1.16 ç‰ˆæœ¬åŠæ›´é«˜ç‰ˆæœ¬ æä¾›å•†æ”¯æŒåŒåè®®æ ˆç½‘ç»œï¼ˆäº‘æä¾›å•†æˆ–å…¶ä»–æä¾›å•†å¿…é¡»èƒ½å¤Ÿä¸º Kubernetes èŠ‚ç‚¹æä¾›å¯è·¯ç”±çš„ IPv4/IPv6 ç½‘ç»œæ¥å£ï¼‰ æ”¯æŒåŒåè®®æ ˆçš„ç½‘ç»œæ’ä»¶ï¼ˆå¦‚ Kubenet æˆ– Calicoï¼‰  å¯ç”¨ IPv4/IPv6 åŒåè®®æ ˆ è¦å¯ç”¨ IPv4/IPv6 åŒåè®®æ ˆï¼Œä¸ºé›†ç¾¤çš„ç›¸å…³ç»„ä»¶å¯ç”¨ IPv6DualStack ç‰¹æ€§é—¨æ§ï¼Œå¹¶ä¸”è®¾ç½®åŒåè®®æ ˆçš„é›†ç¾¤ç½‘ç»œåˆ†é…ï¼š</description>
    </item>
    
    <item>
      <title>kubeadm ä»¤ç‰Œ</title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-token/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-token/</guid>
      <description>å¦‚ä½¿ç”¨å¼•å¯¼ä»¤ç‰Œè¿›è¡Œèº«ä»½éªŒè¯æ‰€æè¿°çš„ï¼Œå¼•å¯¼ä»¤ç‰Œç”¨äºåœ¨å³å°†åŠ å…¥é›†ç¾¤çš„èŠ‚ç‚¹å’Œä¸»èŠ‚ç‚¹é—´å»ºç«‹åŒå‘è®¤è¯ã€‚
kubeadm init åˆ›å»ºäº†ä¸€ä¸ªæœ‰æ•ˆæœŸä¸º 24 å°æ—¶çš„ä»¤ç‰Œï¼Œä¸‹é¢çš„å‘½ä»¤å…è®¸æ‚¨ç®¡ç†ä»¤ç‰Œï¼Œä¹Ÿå¯ä»¥åˆ›å»ºå’Œç®¡ç†æ–°çš„ä»¤ç‰Œã€‚
kubeadm token create . include &amp;ldquo;generated/kubeadm_token_create.md&amp;rdquo; &amp;gt;}}
kubeadm token delete . include &amp;ldquo;generated/kubeadm_token_delete.md&amp;rdquo; &amp;gt;}}
kubeadm token generate . include &amp;ldquo;generated/kubeadm_token_generate.md&amp;rdquo; &amp;gt;}}
kubeadm token list . include &amp;ldquo;generated/kubeadm_token_list.md&amp;rdquo; &amp;gt;}}
. heading &amp;ldquo;whatsnext&amp;rdquo; %}}  kubeadm join å¼•å¯¼ Kubernetes å·¥ä½œèŠ‚ç‚¹å¹¶å°†å…¶åŠ å…¥ç¾¤é›†  </description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ kubeadm åˆ›å»ºä¸€ä¸ªé«˜å¯ç”¨ etcd é›†ç¾¤</title>
      <link>https://lijun.in/setup/production-environment/tools/kubeadm/setup-ha-etcd-with-kubeadm/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/tools/kubeadm/setup-ha-etcd-with-kubeadm/</guid>
      <description>. note &amp;gt;}}
åœ¨æœ¬æŒ‡å—ä¸­ï¼Œå½“ kubeadm ç”¨ä½œä¸ºå¤–éƒ¨ etcd èŠ‚ç‚¹ç®¡ç†å·¥å…·ï¼Œè¯·æ³¨æ„ kubeadm ä¸è®¡åˆ’æ”¯æŒæ­¤ç±»èŠ‚ç‚¹çš„è¯ä¹¦æ›´æ¢æˆ–å‡çº§ã€‚å¯¹äºé•¿æœŸè§„åˆ’æ˜¯ä½¿ç”¨ etcdadm å¢å¼ºå·¥å…·æ¥ç®¡ç†è¿™æ–¹é¢ã€‚ . /note &amp;gt;}}
é»˜è®¤æƒ…å†µä¸‹ï¼Œkubeadm è¿è¡Œå•æˆå‘˜çš„ etcd é›†ç¾¤ï¼Œè¯¥é›†ç¾¤ç”±æ§åˆ¶é¢èŠ‚ç‚¹ä¸Šçš„ kubelet ä»¥é™æ€ Pod çš„æ–¹å¼è¿›è¡Œç®¡ç†ã€‚ç”±äº etcd é›†ç¾¤åªåŒ…å«ä¸€ä¸ªæˆå‘˜ä¸”ä¸èƒ½åœ¨ä»»ä¸€æˆå‘˜ä¸å¯ç”¨æ—¶ä¿æŒè¿è¡Œï¼Œæ‰€ä»¥è¿™ä¸æ˜¯ä¸€ç§é«˜å¯ç”¨è®¾ç½®ã€‚æœ¬ä»»åŠ¡ï¼Œå°†å‘Šè¯‰æ‚¨å¦‚ä½•åœ¨ä½¿ç”¨ kubeadm åˆ›å»ºä¸€ä¸ª kubernetes é›†ç¾¤æ—¶åˆ›å»ºä¸€ä¸ªå¤–éƒ¨ etcdï¼šæœ‰ä¸‰ä¸ªæˆå‘˜çš„é«˜å¯ç”¨ etcd é›†ç¾¤ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  ä¸‰ä¸ªå¯ä»¥é€šè¿‡ 2379 å’Œ 2380 ç«¯å£ç›¸äº’é€šä¿¡çš„ä¸»æœºã€‚æœ¬æ–‡æ¡£ä½¿ç”¨è¿™äº›ä½œä¸ºé»˜è®¤ç«¯å£ã€‚ä¸è¿‡ï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡ kubeadm çš„é…ç½®æ–‡ä»¶è¿›è¡Œè‡ªå®šä¹‰ã€‚   æ¯ä¸ªä¸»æœºå¿…é¡» å®‰è£…æœ‰ dockerã€kubelet å’Œ kubeadmã€‚   ä¸€äº›å¯ä»¥ç”¨æ¥åœ¨ä¸»æœºé—´å¤åˆ¶æ–‡ä»¶çš„åŸºç¡€è®¾æ–½ã€‚ä¾‹å¦‚ ssh å’Œ scp å°±å¯ä»¥æ»¡è¶³éœ€æ±‚ã€‚  å»ºç«‹é›†ç¾¤ ä¸€èˆ¬æ¥è¯´ï¼Œæ˜¯åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šç”Ÿæˆæ‰€æœ‰è¯ä¹¦å¹¶ä¸”åªåˆ†å‘è¿™äº›å¿…è¦çš„æ–‡ä»¶åˆ°å…¶å®ƒèŠ‚ç‚¹ä¸Šã€‚
. note &amp;gt;}}
kubeadm åŒ…å«ç”Ÿæˆä¸‹è¿°è¯ä¹¦æ‰€éœ€çš„æ‰€æœ‰å¿…è¦çš„å¯†ç å­¦å·¥å…·ï¼›åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸éœ€è¦å…¶ä»–åŠ å¯†å·¥å…·ã€‚ . /note &amp;gt;}}
  å°† kubelet é…ç½®ä¸º etcd çš„æœåŠ¡ç®¡ç†å™¨ã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ RBAC é‰´æƒ</title>
      <link>https://lijun.in/reference/access-authn-authz/rbac/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/access-authn-authz/rbac/</guid>
      <description>åŸºäºè§’è‰²ï¼ˆRoleï¼‰çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰æ˜¯ä¸€ç§åŸºäºä¼ä¸šä¸­ç”¨æˆ·çš„è§’è‰²æ¥è°ƒèŠ‚æ§åˆ¶å¯¹è®¡ç®—æœºæˆ–ç½‘ç»œèµ„æºçš„è®¿é—®æ–¹æ³•ã€‚
RBAC ä½¿ç”¨ rbac.authorization.k8s.io . glossary_tooltip text=&amp;quot;API ç»„&amp;rdquo; term_id=&amp;quot;api-group&amp;rdquo; &amp;gt;}} æ¥é©±åŠ¨é‰´æƒæ“ä½œï¼Œå…è®¸ç®¡ç†å‘˜é€šè¿‡ Kubernetes API åŠ¨æ€é…ç½®ç­–ç•¥ã€‚
åœ¨ 1.8 ç‰ˆæœ¬ä¸­ï¼ŒRBAC æ¨¡å¼æ˜¯ç¨³å®šçš„å¹¶é€šè¿‡ rbac.authorization.k8s.io/v1 API æä¾›æ”¯æŒã€‚
è¦å¯ç”¨ RBACï¼Œåœ¨å¯åŠ¨ API æœåŠ¡å™¨æ—¶æ·»åŠ  --authorization-mode=RBAC å‚æ•°ã€‚
API æ¦‚è¿° æœ¬èŠ‚ä»‹ç» RBAC API æ‰€å£°æ˜çš„å››ç§é¡¶çº§ç±»å‹ã€‚ç”¨æˆ·å¯ä»¥åƒä¸å…¶ä»– API èµ„æºäº¤äº’ä¸€æ ·ï¼Œ ï¼ˆé€šè¿‡ kubectlã€API è°ƒç”¨ç­‰æ–¹å¼ï¼‰ä¸è¿™äº›èµ„æºäº¤äº’ã€‚ä¾‹å¦‚ï¼Œ å‘½ä»¤ kubectl apply -f (resource).yml å¯ä»¥ç”¨åœ¨è¿™é‡Œçš„ä»»ä½•ä¸€ä¸ªä¾‹å­ä¹‹ä¸Šã€‚ å°½ç®¡å¦‚æ­¤ï¼Œå»ºè®®è¯»è€…å¾ªåºæ¸è¿›é˜…è¯»ä¸‹é¢çš„ç« èŠ‚ï¼Œç”±æµ…å…¥æ·±ã€‚
Role å’Œ ClusterRole åœ¨ RBAC API ä¸­ï¼Œä¸€ä¸ªè§’è‰²åŒ…å«ä¸€ç»„ç›¸å…³æƒé™çš„è§„åˆ™ã€‚æƒé™æ˜¯çº¯ç²¹ç´¯åŠ çš„ï¼ˆä¸å­˜åœ¨æ‹’ç»æŸæ“ä½œçš„è§„åˆ™ï¼‰ã€‚ è§’è‰²å¯ä»¥ç”¨ Role æ¥å®šä¹‰åˆ°æŸä¸ªå‘½åç©ºé—´ä¸Šï¼Œ æˆ–è€…ç”¨ ClusterRole æ¥å®šä¹‰åˆ°æ•´ä¸ªé›†ç¾¤ä½œç”¨åŸŸã€‚
ä¸€ä¸ª Role åªå¯ä»¥ç”¨æ¥å¯¹æŸä¸€å‘½åç©ºé—´ä¸­çš„èµ„æºèµ‹äºˆè®¿é—®æƒé™ã€‚ ä¸‹é¢çš„ Role ç¤ºä¾‹å®šä¹‰åˆ°åç§°ä¸º &amp;ldquo;default&amp;rdquo; çš„å‘½åç©ºé—´ï¼Œå¯ä»¥ç”¨æ¥æˆäºˆå¯¹è¯¥å‘½åç©ºé—´ä¸­çš„ Pods çš„è¯»å–æƒé™ï¼š
apiVersion: rbac.authorization.k8s.io/v1 kind: Role metadata: namespace: default name: pod-reader rules: - apiGroups: [&amp;#34;&amp;#34;] # &amp;#34;&amp;#34; æŒ‡å®šæ ¸å¿ƒ API ç»„ resources: [&amp;#34;pods&amp;#34;] verbs: [&amp;#34;get&amp;#34;, &amp;#34;watch&amp;#34;, &amp;#34;list&amp;#34;] ClusterRole å¯ä»¥æˆäºˆçš„æƒé™å’Œ Role ç›¸åŒï¼Œ ä½†æ˜¯å› ä¸º ClusterRole å±äºé›†ç¾¤èŒƒå›´ï¼Œæ‰€ä»¥å®ƒä¹Ÿå¯ä»¥æˆäºˆä»¥ä¸‹è®¿é—®æƒé™ï¼š</description>
    </item>
    
    <item>
      <title>å¼ºåˆ¶åˆ é™¤ StatefulSet ç±»å‹çš„ Pods</title>
      <link>https://lijun.in/tasks/run-application/force-delete-stateful-set-pod/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/run-application/force-delete-stateful-set-pod/</guid>
      <description>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åˆ é™¤ StatefulSet ç®¡ç†çš„éƒ¨åˆ† podsï¼Œå¹¶ä¸”è§£é‡Šäº†è¿™æ ·æ“ä½œæ—¶éœ€è¦è®°ä½çš„æ³¨æ„äº‹é¡¹ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  è¿™æ˜¯ä¸€é¡¹ç›¸å½“é«˜çº§çš„ä»»åŠ¡ï¼Œå¹¶ä¸”å¯èƒ½ä¼šè¿å StatefulSet å›ºæœ‰çš„æŸäº›å±æ€§ã€‚ ç»§ç»­ä»»åŠ¡ä¹‹å‰ï¼Œè¯·ç†Ÿæ‚‰ä¸‹é¢åˆ—ä¸¾çš„æ³¨æ„äº‹é¡¹ã€‚  StatefulSet æ³¨æ„äº‹é¡¹ åœ¨ StatefulSet çš„æ­£å¸¸æ“ä½œä¸­ï¼Œæ°¸è¿œä¸éœ€è¦å¼ºåˆ¶åˆ é™¤ StatefulSet ç®¡ç†çš„ podã€‚StatefulSet æ§åˆ¶å™¨è´Ÿè´£åˆ›å»ºï¼Œæ‰©å®¹å’Œåˆ é™¤ StatefulSet ç®¡ç†çš„ podsã€‚å®ƒå°è¯•ç¡®ä¿ä»åºå· 0 åˆ° N-1 æŒ‡å®šæ•°é‡çš„ pods å¤„äºæ´»åŠ¨çŠ¶æ€å¹¶å‡†å¤‡å°±ç»ªã€‚StatefulSet ç¡®ä¿åœ¨ä»»ä½•æ—¶å€™ï¼Œé›†ç¾¤ä¸­æœ€å¤šåªæœ‰ä¸€ä¸ªå…·æœ‰ç»™å®šæ ‡è¯†çš„ podã€‚è¿™å°±æ˜¯æ‰€è°“çš„ç”± StatefulSet æä¾›çš„æœ€å¤šä¸€ä¸ªçš„è¯­ä¹‰ã€‚
åº”è°¨æ…è¿›è¡Œæ‰‹åŠ¨å¼ºåˆ¶åˆ é™¤æ“ä½œï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šè¿å StatefulSet å›ºæœ‰çš„è‡³å¤šä¸€ä¸ªçš„è¯­ä¹‰ã€‚StatefulSets å¯ç”¨äºè¿è¡Œåˆ†å¸ƒå¼å’Œé›†ç¾¤çº§çš„åº”ç”¨ï¼Œè¿™äº›åº”ç”¨éœ€è¦ç¨³å®šçš„ç½‘ç»œæ ‡è¯†å’Œå¯é çš„å­˜å‚¨ã€‚è¿™äº›åº”ç”¨é€šå¸¸é…ç½®ä¸ºå…·æœ‰å›ºå®šæ ‡è¯†å›ºå®šæ•°é‡çš„æˆå‘˜é›†åˆã€‚å…·æœ‰ç›¸åŒèº«ä»½çš„å¤šä¸ªæˆå‘˜å¯èƒ½æ˜¯ç¾éš¾æ€§çš„ï¼Œå¹¶ä¸”å¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤± (e.g. åŸºäº quorum ç³»ç»Ÿä¸­çš„è„‘è£‚åœºæ™¯)ã€‚
åˆ é™¤ Pods æ‚¨å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ‰§è¡Œä¼˜é›…åœ°åˆ é™¤ pod:
kubectl delete pods &amp;lt;pod&amp;gt; ä¸ºäº†ä½¿ä¸Šé¢çš„æ–¹æ³•èƒ½å¤Ÿæ­£å¸¸ç»ˆæ­¢ï¼ŒPod ä¸€å®šä¸èƒ½è®¾ç½® pod.Spec.TerminationGracePeriodSeconds ä¸º 0ã€‚å°† pod.Spec.TerminationGracePeriodSeconds è®¾ç½®ä¸º 0s çš„åšæ³•æ˜¯ä¸å®‰å…¨çš„ï¼Œå¼ºçƒˆå»ºè®® StatefulSet ç±»å‹çš„ pods ä¸è¦ä½¿ç”¨ã€‚ä¼˜é›…åˆ é™¤æ˜¯å®‰å…¨çš„ï¼Œå¹¶ä¸”ä¼šåœ¨ kubelet ä» apiserver ä¸­åˆ é™¤åç§°ä¹‹å‰ç¡®ä¿ ä¼˜é›…åœ°å…³é—­ pod ã€‚</description>
    </item>
    
    <item>
      <title>è°ƒåº¦å™¨æ€§èƒ½è°ƒä¼˜</title>
      <link>https://lijun.in/concepts/scheduling-eviction/scheduler-perf-tuning/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/scheduling-eviction/scheduler-perf-tuning/</guid>
      <description>feature-state for_k8s_version=&amp;quot;1.14&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
ä½œä¸º kubernetes é›†ç¾¤çš„é»˜è®¤è°ƒåº¦å™¨ï¼Œkube-scheduler ä¸»è¦è´Ÿè´£å°† Pod è°ƒåº¦åˆ°é›†ç¾¤çš„ Node ä¸Šã€‚
åœ¨ä¸€ä¸ªé›†ç¾¤ä¸­ï¼Œæ»¡è¶³ä¸€ä¸ª Pod è°ƒåº¦è¯·æ±‚çš„æ‰€æœ‰ Node ç§°ä¹‹ä¸º å¯è°ƒåº¦ Nodeã€‚è°ƒåº¦å™¨å…ˆåœ¨é›†ç¾¤ä¸­æ‰¾åˆ°ä¸€ä¸ª Pod çš„å¯è°ƒåº¦ Nodeï¼Œç„¶åæ ¹æ®ä¸€ç³»åˆ—å‡½æ•°å¯¹è¿™äº›å¯è°ƒåº¦ Nodeæ‰“åˆ†ï¼Œä¹‹åé€‰å‡ºå…¶ä¸­å¾—åˆ†æœ€é«˜çš„ Node æ¥è¿è¡Œ Podã€‚æœ€åï¼Œè°ƒåº¦å™¨å°†è¿™ä¸ªè°ƒåº¦å†³å®šå‘ŠçŸ¥ kube-apiserverï¼Œè¿™ä¸ªè¿‡ç¨‹å«åš ç»‘å®šã€‚
è¿™ç¯‡æ–‡ç« å°†ä¼šä»‹ç»ä¸€äº›åœ¨å¤§è§„æ¨¡ Kubernetes é›†ç¾¤ä¸‹è°ƒåº¦å™¨æ€§èƒ½ä¼˜åŒ–çš„æ–¹å¼ã€‚
åœ¨å¤§è§„æ¨¡é›†ç¾¤ä¸­ï¼Œä½ å¯ä»¥è°ƒèŠ‚è°ƒåº¦å™¨çš„è¡¨ç°æ¥å¹³è¡¡è°ƒåº¦çš„å»¶è¿Ÿï¼ˆæ–° Pod å¿«é€Ÿå°±ä½ï¼‰å’Œç²¾åº¦ï¼ˆè°ƒåº¦å™¨å¾ˆå°‘åšå‡ºç³Ÿç³•çš„æ”¾ç½®å†³ç­–ï¼‰ã€‚
ä½ å¯ä»¥é€šè¿‡è®¾ç½® kube-scheduler çš„ percentageOfNodesToScore æ¥é…ç½®è¿™ä¸ªè°ƒä¼˜è®¾ç½®ã€‚è¿™ä¸ª KubeSchedulerConfiguration è®¾ç½®å†³å®šäº†è°ƒåº¦é›†ç¾¤ä¸­èŠ‚ç‚¹çš„é˜ˆå€¼ã€‚
è®¾ç½®é˜ˆå€¼ percentageOfNodesToScore é€‰é¡¹æ¥å—ä» 0 åˆ° 100 ä¹‹é—´çš„æ•´æ•°å€¼ã€‚0 å€¼æ¯”è¾ƒç‰¹æ®Šï¼Œè¡¨ç¤º kube-scheduler åº”è¯¥ä½¿ç”¨å…¶ç¼–è¯‘åçš„é»˜è®¤å€¼ã€‚ å¦‚æœä½ è®¾ç½® percentageOfNodesToScore çš„å€¼è¶…è¿‡äº† 100ï¼Œkube-scheduler çš„è¡¨ç°ç­‰ä»·äºè®¾ç½®å€¼ä¸º 100ã€‚
è¦ä¿®æ”¹è¿™ä¸ªå€¼ï¼Œç¼–è¾‘ kube-scheduler çš„é…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯ /etc/kubernetes/config/kube-scheduler.yamlï¼‰ï¼Œç„¶åé‡å¯è°ƒåº¦å™¨ã€‚
ä¿®æ”¹å®Œæˆåï¼Œä½ å¯ä»¥æ‰§è¡Œ
kubectl get componentstatuses æ¥æ£€æŸ¥è¯¥ kube-scheduler ç»„ä»¶æ˜¯å¦å¥åº·ã€‚è¾“å‡ºç±»ä¼¼å¦‚ä¸‹ï¼š
NAME STATUS MESSAGE ERROR controller-manager Healthy ok scheduler Healthy ok .</description>
    </item>
    
    <item>
      <title>é…ç½® kubelet åƒåœ¾å›æ”¶ç­–ç•¥</title>
      <link>https://lijun.in/concepts/cluster-administration/kubelet-garbage-collection/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/cluster-administration/kubelet-garbage-collection/</guid>
      <description>åƒåœ¾å›æ”¶æ˜¯ kubelet çš„ä¸€ä¸ªæœ‰ç”¨åŠŸèƒ½ï¼Œå®ƒå°†æ¸…ç†æœªä½¿ç”¨çš„é•œåƒå’Œå®¹å™¨ã€‚
Kubelet å°†æ¯åˆ†é’Ÿå¯¹å®¹å™¨æ‰§è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶ï¼Œæ¯äº”åˆ†é’Ÿå¯¹é•œåƒæ‰§è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶ã€‚
ä¸å»ºè®®ä½¿ç”¨å¤–éƒ¨åƒåœ¾æ”¶é›†å·¥å…·ï¼Œå› ä¸ºè¿™äº›å·¥å…·å¯èƒ½ä¼šåˆ é™¤åŸæœ¬æœŸæœ›å­˜åœ¨çš„å®¹å™¨è¿›è€Œç ´å kubelet çš„è¡Œä¸ºã€‚
é•œåƒå›æ”¶ Kubernetes å€ŸåŠ©äº cadvisor é€šè¿‡ imageManager æ¥ç®¡ç†æ‰€æœ‰é•œåƒçš„ç”Ÿå‘½å‘¨æœŸã€‚
é•œåƒåƒåœ¾å›æ”¶ç­–ç•¥åªè€ƒè™‘ä¸¤ä¸ªå› ç´ ï¼šHighThresholdPercent å’Œ LowThresholdPercentã€‚
ç£ç›˜ä½¿ç”¨ç‡è¶…è¿‡ä¸Šé™é˜ˆå€¼ï¼ˆHighThresholdPercentï¼‰å°†è§¦å‘åƒåœ¾å›æ”¶ã€‚
åƒåœ¾å›æ”¶å°†åˆ é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é•œåƒï¼Œç›´åˆ°ç£ç›˜ä½¿ç”¨ç‡æ»¡è¶³ä¸‹é™é˜ˆå€¼ï¼ˆLowThresholdPercentï¼‰ã€‚
å®¹å™¨å›æ”¶ å®¹å™¨åƒåœ¾å›æ”¶ç­–ç•¥è€ƒè™‘ä¸‰ä¸ªç”¨æˆ·å®šä¹‰å˜é‡ã€‚MinAge æ˜¯å®¹å™¨å¯ä»¥è¢«æ‰§è¡Œåƒåœ¾å›æ”¶çš„æœ€å°ç”Ÿå‘½å‘¨æœŸã€‚MaxPerPodContainer æ˜¯æ¯ä¸ª pod å†…å…è®¸å­˜åœ¨çš„æ­»äº¡å®¹å™¨çš„æœ€å¤§æ•°é‡ã€‚ MaxContainers æ˜¯å…¨éƒ¨æ­»äº¡å®¹å™¨çš„æœ€å¤§æ•°é‡ã€‚å¯ä»¥åˆ†åˆ«ç‹¬ç«‹åœ°é€šè¿‡å°† MinAge è®¾ç½®ä¸º 0ï¼Œä»¥åŠå°† MaxPerPodContainer å’Œ MaxContainers è®¾ç½®ä¸ºå°äº 0 æ¥ç¦ç”¨è¿™äº›å˜é‡ã€‚
Kubelet å°†å¤„ç†æ— æ³•è¾¨è¯†çš„ã€å·²åˆ é™¤çš„ä»¥åŠè¶…å‡ºå‰é¢æåˆ°çš„å‚æ•°æ‰€è®¾ç½®èŒƒå›´çš„å®¹å™¨ã€‚æœ€è€çš„å®¹å™¨é€šå¸¸ä¼šå…ˆè¢«ç§»é™¤ã€‚ MaxPerPodContainer å’Œ MaxContainer åœ¨æŸäº›åœºæ™¯ä¸‹å¯èƒ½ä¼šå­˜åœ¨å†²çªï¼Œä¾‹å¦‚åœ¨ä¿è¯æ¯ä¸ª pod å†…æ­»äº¡å®¹å™¨çš„æœ€å¤§æ•°é‡ï¼ˆMaxPerPodContainerï¼‰çš„æ¡ä»¶ä¸‹å¯èƒ½ä¼šè¶…è¿‡å…è®¸å­˜åœ¨çš„å…¨éƒ¨æ­»äº¡å®¹å™¨çš„æœ€å¤§æ•°é‡ï¼ˆMaxContainerï¼‰ã€‚ MaxPerPodContainer åœ¨è¿™ç§æƒ…å†µä¸‹ä¼šè¢«è¿›è¡Œè°ƒæ•´ï¼šæœ€åçš„æƒ…å†µæ˜¯å°† MaxPerPodContainer é™çº§ä¸º 1ï¼Œå¹¶é©±é€æœ€è€çš„å®¹å™¨ã€‚ æ­¤å¤–ï¼Œpod å†…å·²ç»è¢«åˆ é™¤çš„å®¹å™¨ä¸€æ—¦å¹´é¾„è¶…è¿‡ MinAge å°±ä¼šè¢«æ¸…ç†ã€‚
ä¸è¢« kubelet ç®¡ç†çš„å®¹å™¨ä¸å—å®¹å™¨åƒåœ¾å›æ”¶çš„çº¦æŸã€‚
ç”¨æˆ·é…ç½® ç”¨æˆ·å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ kubelet å‚æ•°è°ƒæ•´ç›¸å…³é˜ˆå€¼æ¥ä¼˜åŒ–é•œåƒåƒåœ¾å›æ”¶ï¼š
  image-gc-high-thresholdï¼Œè§¦å‘é•œåƒåƒåœ¾å›æ”¶çš„ç£ç›˜ä½¿ç”¨ç‡ç™¾åˆ†æ¯”ã€‚é»˜è®¤å€¼ä¸º 85%ã€‚
  image-gc-low-thresholdï¼Œé•œåƒåƒåœ¾å›æ”¶è¯•å›¾é‡Šæ”¾èµ„æºåè¾¾åˆ°çš„ç£ç›˜ä½¿ç”¨ç‡ç™¾åˆ†æ¯”ã€‚é»˜è®¤å€¼ä¸º 80%ã€‚
  æˆ‘ä»¬è¿˜å…è®¸ç”¨æˆ·é€šè¿‡ä»¥ä¸‹ kubelet å‚æ•°è‡ªå®šä¹‰åƒåœ¾æ”¶é›†ç­–ç•¥ï¼š</description>
    </item>
    
    <item>
      <title>é…ç½® Pod ä½¿ç”¨æŠ•å°„å·ä½œå­˜å‚¨</title>
      <link>https://lijun.in/tasks/configure-pod-container/configure-projected-volume-storage/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/configure-projected-volume-storage/</guid>
      <description>æœ¬æ–‡ä»‹ç»æ€æ ·é€šè¿‡æŠ•å°„ å·å°†ç°æœ‰çš„å¤šä¸ªå·èµ„æºæŒ‚è½½åˆ°ç›¸åŒçš„ç›®å½•ã€‚ å½“å‰ï¼Œsecretã€configMapã€downwardAPI å’Œ serviceAccountToken å·å¯ä»¥è¢«æŠ•å°„ã€‚
. note &amp;gt;}}
serviceAccountToken ä¸æ˜¯ä¸€ç§å·ç±»å‹ . /note &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ä¸º Pod é…ç½®æŠ•å°„å· æœ¬ç»ƒä¹ ä¸­ï¼Œæ‚¨å°†ä»æœ¬åœ°æ–‡ä»¶æ¥åˆ›å»ºåŒ…å«æœ‰ç”¨æˆ·åå’Œå¯†ç çš„ Secretã€‚ç„¶ååˆ›å»ºè¿è¡Œä¸€ä¸ªå®¹å™¨çš„ Podï¼Œè¯¥ Pod ä½¿ç”¨æŠ•å°„ å·å°† Secret æŒ‚è½½åˆ°ç›¸åŒçš„è·¯å¾„ä¸‹ã€‚
ä¸‹é¢æ˜¯ Pod çš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;pods/storage/projected.yaml&amp;rdquo; &amp;gt;}}
    &amp;lt;!--# Create files containing the username and password:--&amp;gt;# åˆ›å»ºåŒ…å«ç”¨æˆ·åå’Œå¯†ç çš„æ–‡ä»¶: echo -n &amp;#34;admin&amp;#34; &amp;gt; ./username.txt echo -n &amp;#34;1f2d1e2e67df&amp;#34; &amp;gt; ./password.txt--&amp;gt; &amp;lt;!--# Package these files into secrets:--&amp;gt;# å°†ä¸Šè¿°æ–‡ä»¶å¼•ç”¨åˆ° Secretï¼š kubectl create secret generic user --from-file=.</description>
    </item>
    
    <item>
      <title>Kubernetes ä¸­è°ƒåº¦ Windows å®¹å™¨çš„æŒ‡å—</title>
      <link>https://lijun.in/setup/production-environment/windows/user-guide-windows-containers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/windows/user-guide-windows-containers/</guid>
      <description>Windows åº”ç”¨ç¨‹åºæ„æˆäº†è®¸å¤šç»„ç»‡ä¸­è¿è¡Œçš„æœåŠ¡å’Œåº”ç”¨ç¨‹åºçš„å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚æœ¬æŒ‡å—å°†å¼•å¯¼æ‚¨å®Œæˆåœ¨ Kubernetes ä¸­é…ç½®å’Œéƒ¨ç½² Windows å®¹å™¨çš„æ­¥éª¤ã€‚
ç›®æ ‡  é…ç½®ä¸€ä¸ªç¤ºä¾‹ deployment ä»¥åœ¨ Windows èŠ‚ç‚¹ä¸Šè¿è¡Œ Windows å®¹å™¨ ï¼ˆå¯é€‰ï¼‰ä½¿ç”¨ç»„æ‰˜ç®¡æœåŠ¡å¸æˆ·ï¼ˆGMSAï¼‰ä¸ºæ‚¨çš„ Pod é…ç½® Active Directory èº«ä»½  åœ¨ä½ å¼€å§‹ä¹‹å‰  åˆ›å»ºä¸€ä¸ª Kubernetes é›†ç¾¤ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ä¸ªè¿è¡Œ Windows Server çš„ä¸»èŠ‚ç‚¹å’Œå·¥ä½œèŠ‚ç‚¹ é‡è¦çš„æ˜¯è¦æ³¨æ„ï¼Œå¯¹äº Linux å’Œ Windows å®¹å™¨ï¼Œåœ¨ Kubernetes ä¸Šåˆ›å»ºå’Œéƒ¨ç½²æœåŠ¡å’Œå·¥ä½œè´Ÿè½½çš„è¡Œä¸ºå‡ ä¹ç›¸åŒã€‚ä¸é›†ç¾¤æ¥å£çš„ Kubectl å‘½ä»¤ç›¸åŒã€‚æä¾›ä»¥ä¸‹éƒ¨åˆ†ä¸­çš„ç¤ºä¾‹åªæ˜¯ä¸ºäº†å¿«é€Ÿå¯åŠ¨ Windows å®¹å™¨çš„ä½¿ç”¨ä½“éªŒã€‚  å…¥é—¨ï¼šéƒ¨ç½² Windows å®¹å™¨ è¦åœ¨ Kubernetes ä¸Šéƒ¨ç½² Windows å®¹å™¨ï¼Œæ‚¨å¿…é¡»é¦–å…ˆåˆ›å»ºä¸€ä¸ªç¤ºä¾‹åº”ç”¨ç¨‹åºã€‚ä¸‹é¢çš„ç¤ºä¾‹ YAML æ–‡ä»¶åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ Web æœåŠ¡å™¨åº”ç”¨ç¨‹åºã€‚åˆ›å»ºä¸€ä¸ªåä¸º win-webserver.yaml çš„æœåŠ¡è§„çº¦ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š
apiVersion: v1 kind: Service metadata: name: win-webserver labels: app: win-webserver spec: ports: # the port that this service should serve on - port: 80 targetPort: 80 selector: app: win-webserver type: NodePort --- apiVersion: apps/v1 kind: Deployment metadata: labels: app: win-webserver name: win-webserver spec: replicas: 2 selector: matchLabels: app: win-webserver template: metadata: labels: app: win-webserver name: win-webserver spec: containers: - name: windowswebserver image: mcr.</description>
    </item>
    
    <item>
      <title>CronJob</title>
      <link>https://lijun.in/concepts/workloads/controllers/cron-jobs/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/controllers/cron-jobs/</guid>
      <description>feature-state for_k8s_version=&amp;quot;v1.8&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
Cron Job åˆ›å»ºåŸºäºæ—¶é—´è°ƒåº¦çš„ Jobsã€‚
ä¸€ä¸ª CronJob å¯¹è±¡å°±åƒ crontab (cron table) æ–‡ä»¶ä¸­çš„ä¸€è¡Œã€‚å®ƒç”¨ Cron æ ¼å¼è¿›è¡Œç¼–å†™ï¼Œå¹¶å‘¨æœŸæ€§åœ°åœ¨ç»™å®šçš„è°ƒåº¦æ—¶é—´æ‰§è¡Œ Jobã€‚
æ‰€æœ‰ CronJob çš„ schedule: æ—¶é—´éƒ½æ˜¯åŸºäºåˆå§‹ Job çš„ä¸»æ§èŠ‚ç‚¹çš„æ—¶åŒºã€‚
å¦‚æœä½ çš„æ§åˆ¶å¹³é¢åœ¨ Pod æˆ–æ˜¯è£¸å®¹å™¨ä¸­è¿è¡Œäº†ä¸»æ§ç¨‹åº (kube-controller-manager)ï¼Œ é‚£ä¹ˆä¸ºè¯¥å®¹å™¨è®¾ç½®çš„æ—¶åŒºå°†ä¼šå†³å®šå®šæ—¶ä»»åŠ¡çš„æ§åˆ¶å™¨æ‰€ä½¿ç”¨çš„æ—¶åŒºã€‚
ä¸º CronJob èµ„æºåˆ›å»ºæ¸…å•æ—¶ï¼Œè¯·ç¡®ä¿åˆ›å»ºçš„åç§°ä¸è¶…è¿‡ 52 ä¸ªå­—ç¬¦ã€‚è¿™æ˜¯å› ä¸º CronJob æ§åˆ¶å™¨å°†è‡ªåŠ¨åœ¨æä¾›çš„ä½œä¸šåç§°åé™„åŠ  11 ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”å­˜åœ¨ä¸€ä¸ªé™åˆ¶ï¼Œå³ä½œä¸šåç§°çš„æœ€å¤§é•¿åº¦ä¸èƒ½è¶…è¿‡ 63 ä¸ªå­—ç¬¦ã€‚
æœ‰å…³åˆ›å»ºå’Œä½¿ç”¨ CronJob çš„è¯´æ˜åŠè§„èŒƒæ–‡ä»¶çš„ç¤ºä¾‹ï¼Œè¯·å‚è§ä½¿ç”¨ CronJob è¿è¡Œè‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚
CronJob é™åˆ¶ CronJob åˆ›å»º Job å¯¹è±¡ï¼Œæ¯ä¸ª Job çš„æ‰§è¡Œæ¬¡æ•°å¤§çº¦ä¸ºä¸€æ¬¡ã€‚ æˆ‘ä»¬ä¹‹æ‰€ä»¥è¯´ &amp;ldquo;å¤§çº¦&amp;rdquo;ï¼Œæ˜¯å› ä¸ºåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šåˆ›å»ºä¸¤ä¸ª Jobï¼Œæˆ–è€…ä¸ä¼šåˆ›å»ºä»»ä½• Jobã€‚ æˆ‘ä»¬è¯•å›¾ä½¿è¿™äº›æƒ…å†µå°½é‡å°‘å‘ç”Ÿï¼Œä½†ä¸èƒ½å®Œå…¨æœç»ã€‚å› æ­¤ï¼ŒJob åº”è¯¥æ˜¯ å¹‚ç­‰çš„ã€‚
å¦‚æœ startingDeadlineSeconds è®¾ç½®ä¸ºå¾ˆå¤§çš„æ•°å€¼æˆ–æœªè®¾ç½®ï¼ˆé»˜è®¤ï¼‰ï¼Œå¹¶ä¸” concurrencyPolicy è®¾ç½®ä¸º Allowï¼Œåˆ™ä½œä¸šå°†å§‹ç»ˆè‡³å°‘è¿è¡Œä¸€æ¬¡ã€‚
å¯¹äºæ¯ä¸ª CronJobï¼ŒCronJob æ§åˆ¶å™¨ æ£€æŸ¥ä»ä¸Šä¸€æ¬¡è°ƒåº¦çš„æ—¶é—´ç‚¹åˆ°ç°åœ¨æ‰€é”™è¿‡äº†è°ƒåº¦æ¬¡æ•°ã€‚å¦‚æœé”™è¿‡çš„è°ƒåº¦æ¬¡æ•°è¶…è¿‡ 100 æ¬¡ï¼Œé‚£ä¹ˆå®ƒå°±ä¸ä¼šå¯åŠ¨è¿™ä¸ªä»»åŠ¡ï¼Œå¹¶è®°å½•è¿™ä¸ªé”™è¯¯:</description>
    </item>
    
    <item>
      <title>kubeadm version</title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-version/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-version/</guid>
      <description>æ­¤å‘½ä»¤ç”¨æ¥æŸ¥è¯¢ kubeadm çš„ç‰ˆæœ¬ã€‚
. include &amp;ldquo;generated/kubeadm_version.md&amp;rdquo; &amp;gt;}}</description>
    </item>
    
    <item>
      <title>ä¸´æ—¶å®¹å™¨</title>
      <link>https://lijun.in/concepts/workloads/pods/ephemeral-containers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/pods/ephemeral-containers/</guid>
      <description>feature-state state=&amp;quot;alpha&amp;rdquo; for_k8s_version=&amp;quot;v1.16&amp;rdquo; &amp;gt;}}
æ­¤é¡µé¢æ¦‚è¿°äº†ä¸´æ—¶å®¹å™¨ï¼šä¸€ç§ç‰¹æ®Šçš„å®¹å™¨ï¼Œè¯¥å®¹å™¨åœ¨ç°æœ‰ glossary_tooltip term_id=&amp;quot;pod&amp;rdquo; &amp;gt;}} ä¸­ä¸´æ—¶è¿è¡Œï¼Œä¸ºäº†å®Œæˆç”¨æˆ·å¯åŠ¨çš„æ“ä½œï¼Œä¾‹å¦‚æ•…éšœæ’æŸ¥ã€‚ä½¿ç”¨ä¸´æ—¶å®¹å™¨æ¥æ£€æŸ¥æœåŠ¡ï¼Œè€Œä¸æ˜¯æ„å»ºåº”ç”¨ç¨‹åºã€‚
ä¸´æ—¶å®¹å™¨å¤„äºæ—©æœŸçš„ alpha é˜¶æ®µï¼Œä¸é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒé›†ç¾¤ã€‚åº”è¯¥é¢„æ–™åˆ°ä¸´æ—¶å®¹å™¨åœ¨æŸäº›æƒ…å†µä¸‹ä¸èµ·ä½œç”¨ï¼Œä¾‹å¦‚åœ¨å®šä½å®¹å™¨çš„å‘½åç©ºé—´æ—¶ã€‚æ ¹æ® Kubernetes å¼ƒç”¨æ”¿ç­–ï¼Œè¯¥ alpha åŠŸèƒ½å°†æ¥å¯èƒ½å‘ç”Ÿé‡å¤§å˜åŒ–æˆ–å®Œå…¨åˆ é™¤ã€‚
äº†è§£ä¸´æ—¶å®¹å™¨ glossary_tooltip text=&amp;quot;Pods&amp;rdquo; term_id=&amp;quot;pod&amp;rdquo; &amp;gt;}} æ˜¯ Kubernetes åº”ç”¨ç¨‹åºçš„åŸºæœ¬æ„å»ºå—ã€‚ç”±äº pod æ˜¯ä¸€æ¬¡æ€§ä¸”å¯æ›¿æ¢çš„ï¼Œå› æ­¤ä¸€æ—¦ Pod åˆ›å»ºï¼Œå°±æ— æ³•å°†å®¹å™¨åŠ å…¥åˆ° Pod ä¸­ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œé€šå¸¸ä½¿ç”¨ glossary_tooltip text=&amp;quot;deployments&amp;rdquo; term_id=&amp;quot;deployment&amp;rdquo; &amp;gt;}} ä»¥å—æ§çš„æ–¹å¼æ¥åˆ é™¤å¹¶æ›¿æ¢ Podã€‚
æœ‰æ—¶æœ‰å¿…è¦æ£€æŸ¥ç°æœ‰ Pod çš„çŠ¶æ€ï¼Œä¾‹å¦‚ï¼Œå¯¹äºéš¾ä»¥å¤ç°çš„æ•…éšœè¿›è¡Œæ’æŸ¥ã€‚åœ¨è¿™äº›åœºæ™¯ä¸­ï¼Œå¯ä»¥åœ¨ç°æœ‰ Pod ä¸­è¿è¡Œä¸´æ—¶å®¹å™¨æ¥æ£€æŸ¥å…¶çŠ¶æ€å¹¶è¿è¡Œä»»æ„å‘½ä»¤ã€‚
ä»€ä¹ˆæ˜¯ä¸´æ—¶å®¹å™¨ï¼Ÿ ä¸´æ—¶å®¹å™¨ä¸å…¶ä»–å®¹å™¨çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä»¬ç¼ºå°‘å¯¹èµ„æºæˆ–æ‰§è¡Œçš„ä¿è¯ï¼Œå¹¶ä¸”æ°¸è¿œä¸ä¼šè‡ªåŠ¨é‡å¯ï¼Œå› æ­¤ä¸é€‚ç”¨äºæ„å»ºåº”ç”¨ç¨‹åºã€‚ä¸´æ—¶å®¹å™¨ä½¿ç”¨ä¸å¸¸è§„å®¹å™¨ç›¸åŒçš„ ContainerSpec æ®µè¿›è¡Œæè¿°ï¼Œä½†è®¸å¤šå­—æ®µæ˜¯ä¸ç›¸å®¹ä¸”ä¸å…è®¸çš„ã€‚
 ä¸´æ—¶å®¹å™¨æ²¡æœ‰ç«¯å£é…ç½®ï¼Œå› æ­¤åƒ portsï¼ŒlivenessProbeï¼ŒreadinessProbe è¿™æ ·çš„å­—æ®µæ˜¯ä¸å…è®¸çš„ã€‚ Pod èµ„æºåˆ†é…æ˜¯ä¸å¯å˜çš„ï¼Œå› æ­¤ resources é…ç½®æ˜¯ä¸å…è®¸çš„ã€‚ æœ‰å…³å…è®¸å­—æ®µçš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚è§[ä¸´æ—¶å®¹å™¨å‚è€ƒæ–‡æ¡£](/docs/reference/generated/kubernetes-api/&amp;lt; param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#ephemeralcontainer-v1-core)ã€‚  ä¸´æ—¶å®¹å™¨æ˜¯ä½¿ç”¨ API ä¸­çš„ä¸€ç§ç‰¹æ®Šçš„ ephemeralcontainers å¤„ç†å™¨è¿›è¡Œåˆ›å»ºçš„ï¼Œè€Œä¸æ˜¯ç›´æ¥æ·»åŠ åˆ° pod.spec æ®µï¼Œå› æ­¤æ— æ³•ä½¿ç”¨ kubectl edit æ¥æ·»åŠ ä¸€ä¸ªä¸´æ—¶å®¹å™¨ã€‚
ä¸å¸¸è§„å®¹å™¨ä¸€æ ·ï¼Œå°†ä¸´æ—¶å®¹å™¨æ·»åŠ åˆ° Pod åï¼Œå°†ä¸èƒ½æ›´æ”¹æˆ–åˆ é™¤ä¸´æ—¶å®¹å™¨ã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ kubeadm é…ç½®é›†ç¾¤ä¸­çš„æ¯ä¸ª kubelet</title>
      <link>https://lijun.in/setup/production-environment/tools/kubeadm/kubelet-integration/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/tools/kubeadm/kubelet-integration/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;1.11&amp;rdquo; state=&amp;quot;stable&amp;rdquo; &amp;gt;}}
kubeadm CLI å·¥å…·çš„ç”Ÿå‘½å‘¨æœŸä¸ kubeletè§£è€¦ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ˆæŠ¤ç¨‹åºï¼Œåœ¨ Kubernetes é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œã€‚ å½“ Kubernetes åˆå§‹åŒ–æˆ–å‡çº§æ—¶ï¼Œkubeadm CLI å·¥å…·ç”±ç”¨æˆ·æ‰§è¡Œï¼Œè€Œ kubelet å§‹ç»ˆåœ¨åå°è¿è¡Œã€‚
ç”±äºkubeletæ˜¯å®ˆæŠ¤ç¨‹åºï¼Œå› æ­¤éœ€è¦é€šè¿‡æŸç§åˆå§‹åŒ–ç³»ç»Ÿæˆ–æœåŠ¡ç®¡ç†å™¨è¿›è¡Œç»´æŠ¤ã€‚ å½“ä½¿ç”¨ DEB æˆ– RPM å®‰è£… kubelet æ—¶ï¼Œé…ç½®ç³»ç»Ÿå»ç®¡ç† kubeletã€‚ æ‚¨å¯ä»¥æ”¹ç”¨å…¶ä»–æœåŠ¡ç®¡ç†å™¨ï¼Œä½†éœ€è¦æ‰‹åŠ¨åœ°é…ç½®ã€‚
é›†ç¾¤ä¸­æ¶‰åŠçš„æ‰€æœ‰ kubelet çš„ä¸€äº›é…ç½®ç»†èŠ‚éƒ½å¿…é¡»ç›¸åŒï¼Œè€Œå…¶ä»–é…ç½®æ–¹é¢åˆ™éœ€è¦åŸºäºæ¯ä¸ª kubelet è¿›è¡Œè®¾ç½®ï¼Œä»¥é€‚åº”ç»™å®šæœºå™¨çš„ä¸åŒç‰¹æ€§ï¼Œä¾‹å¦‚æ“ä½œç³»ç»Ÿã€å­˜å‚¨å’Œç½‘ç»œã€‚ æ‚¨å¯ä»¥æ‰‹åŠ¨åœ°ç®¡ç† kubelet çš„é…ç½®ï¼Œä½†æ˜¯ kubeadm ç°åœ¨æä¾›ä¸€ç§ KubeletConfiguration API ç±»å‹ï¼Œç”¨äºé›†ä¸­ç®¡ç† kubelet çš„é…ç½®ã€‚
Kubelet é…ç½®æ¨¡å¼ ä»¥ä¸‹å„èŠ‚è®²è¿°äº†é€šè¿‡ä½¿ç”¨ kubeadm ç®€åŒ– kubelet é…ç½®æ¨¡å¼ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ‰‹åŠ¨åœ°ç®¡ç† kubelet é…ç½®ã€‚
å°†é›†ç¾¤çº§é…ç½®ä¼ æ’­åˆ°æ¯ä¸ª kubelet ä¸­ æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ kubeadm init å’Œ kubeadm join å‘½ä»¤ä¸º kubelet æä¾›é»˜è®¤å€¼ã€‚ æœ‰è¶£çš„ç¤ºä¾‹åŒ…æ‹¬ä½¿ç”¨å…¶ä»– CRI è¿è¡Œæ—¶æˆ–é€šè¿‡æœåŠ¡å™¨è®¾ç½®ä¸åŒçš„é»˜è®¤å­ç½‘ã€‚
å¦‚æœæ‚¨æƒ³ä½¿ç”¨å­ç½‘ 10.96.0.0/12 ä½œä¸ºé»˜è®¤çš„æœåŠ¡ï¼Œæ‚¨å¯ä»¥ç»™ kubeadm ä¼ é€’ --service-cidr å‚æ•°ï¼š</description>
    </item>
    
    <item>
      <title>åˆ›å»ºä¸€ä¸ªå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨</title>
      <link>https://lijun.in/tasks/access-application-cluster/create-external-load-balancer/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/create-external-load-balancer/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ªå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨ã€‚
. note &amp;gt;}}
æ­¤åŠŸèƒ½ä»…é€‚ç”¨äºæ”¯æŒå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨çš„äº‘æä¾›å•†æˆ–ç¯å¢ƒã€‚ . /note &amp;gt;}}
åˆ›å»ºæœåŠ¡æ—¶ï¼Œæ‚¨å¯ä»¥é€‰æ‹©è‡ªåŠ¨åˆ›å»ºäº‘ç½‘ç»œè´Ÿè½½å‡è¡¡å™¨ã€‚è¿™æä¾›äº†ä¸€ä¸ªå¤–éƒ¨å¯è®¿é—®çš„ IP åœ°å€ï¼Œå¯å°†æµé‡åˆ†é…åˆ°é›†ç¾¤èŠ‚ç‚¹ä¸Šçš„æ­£ç¡®ç«¯å£ä¸Š å‡è®¾é›†ç¾¤åœ¨æ”¯æŒçš„ç¯å¢ƒä¸­è¿è¡Œï¼Œå¹¶é…ç½®äº†æ­£ç¡®çš„äº‘è´Ÿè½½å¹³è¡¡å™¨æä¾›å•†åŒ…ã€‚
æœ‰å…³å¦‚ä½•é…ç½®å’Œä½¿ç”¨ Ingress èµ„æºä¸ºæœåŠ¡æä¾›å¤–éƒ¨å¯è®¿é—®çš„ URLã€è´Ÿè½½å‡è¡¡æµé‡ã€ç»ˆæ­¢ SSL ç­‰åŠŸèƒ½ï¼Œè¯·æŸ¥çœ‹ Ingress æ–‡æ¡£ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}  é…ç½®æ–‡ä»¶ è¦åˆ›å»ºå¤–éƒ¨è´Ÿè½½å‡è¡¡å™¨ï¼Œè¯·å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° æœåŠ¡é…ç½®æ–‡ä»¶ï¼š
type: LoadBalancer æ‚¨çš„é…ç½®æ–‡ä»¶å¯èƒ½ä¼šå¦‚ä¸‹æ‰€ç¤ºï¼š
apiVersion: v1 kind: Service metadata: name: example-service spec: selector: app: example ports: - port: 8765 targetPort: 9376 type: LoadBalancer ä½¿ç”¨ kubectl æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ kubectl expose å‘½ä»¤åŠå…¶ --type=LoadBalancer å‚æ•°åˆ›å»ºæœåŠ¡ï¼š
kubectl expose rc example --port=8765 --target-port=9376 \  --name=example-service --type=LoadBalancer æ­¤å‘½ä»¤é€šè¿‡ä½¿ç”¨ä¸å¼•ç”¨èµ„æºï¼ˆåœ¨ä¸Šé¢çš„ç¤ºä¾‹çš„æƒ…å†µä¸‹ï¼Œåä¸º example çš„ replication controllerï¼‰ç›¸åŒçš„é€‰æ‹©å™¨æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„æœåŠ¡ã€‚</description>
    </item>
    
    <item>
      <title>åŸºäºReplication Controlleræ‰§è¡Œæ»šåŠ¨å‡çº§</title>
      <link>https://lijun.in/tasks/run-application/rolling-update-replication-controller/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/run-application/rolling-update-replication-controller/</guid>
      <description>æ¦‚è¿° æ³¨: åˆ›å»ºå‰¯æœ¬åº”ç”¨çš„é¦–é€‰æ–¹æ³•æ˜¯ä½¿ç”¨[Deployment](/docs/api-reference/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#deployment-v1beta1-apps)ï¼ŒDeploymentä½¿ç”¨[ReplicaSet](/docs/api-reference/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#replicaset-v1beta1-extensions)æ¥è¿›è¡Œå‰¯æœ¬æ§åˆ¶ã€‚ æ›´å¤šä¿¡æ¯, æŸ¥çœ‹ä½¿ç”¨Deploymentè¿è¡Œä¸€ä¸ªæ— çŠ¶æ€åº”ç”¨ã€‚
ä¸ºäº†åœ¨æ›´æ–°æœåŠ¡çš„åŒæ—¶ä¸ä¸­æ–­ä¸šåŠ¡ï¼Œ kubectl æ”¯æŒ&amp;lsquo;æ»šåŠ¨æ›´æ–°&amp;rsquo;ï¼Œå®ƒä¸€æ¬¡æ›´æ–°ä¸€ä¸ªpodï¼Œè€Œä¸æ˜¯åŒæ—¶åœæ­¢æ•´ä¸ªæœåŠ¡ã€‚ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… æ»šåŠ¨æ›´æ–°è®¾è®¡æ–‡æ¡£ å’Œ æ»šåŠ¨æ›´æ–°ç¤ºä¾‹ã€‚
è¯·æ³¨æ„ï¼Œ kubectl rolling-update ä»…æ”¯æŒReplication Controllersã€‚ ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨Replication Controllerséƒ¨ç½²åº”ç”¨ï¼Œè¯·è€ƒè™‘å°†å…¶åˆ‡æ¢åˆ°Deployments. Deploymentæ˜¯ä¸€ç§è¢«æ¨èä½¿ç”¨çš„æ›´é«˜çº§åˆ«çš„æ§åˆ¶å™¨ï¼Œå®ƒå¯ä»¥å¯¹åº”ç”¨è¿›è¡Œå£°æ˜æ€§çš„è‡ªåŠ¨æ»šåŠ¨æ›´æ–°ã€‚ å¦‚æœæ‚¨ä»ç„¶å¸Œæœ›ä¿ç•™æ‚¨çš„Replication Controllerså¹¶ä½¿ç”¨ kubectl rolling-updateè¿›è¡Œæ»šåŠ¨æ›´æ–°ï¼Œ è¯·ç»§ç»­å¾€ä¸‹é˜…è¯»ï¼š
æ»šåŠ¨æ›´æ–°å¯ä»¥å¯¹replication controlleræ‰€ç®¡ç†çš„Podçš„é…ç½®è¿›è¡Œå˜æ›´ï¼Œå˜æ›´å¯ä»¥é€šè¿‡ä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶æ¥è¿›è¡Œï¼Œæˆ–è€…ï¼Œå¦‚æœåªæ›´æ–°é•œåƒï¼Œåˆ™å¯ä»¥ç›´æ¥æŒ‡å®šæ–°çš„å®¹å™¨é•œåƒã€‚
æ»šåŠ¨æ›´æ–°çš„å·¥ä½œæµç¨‹ï¼š
 é€šè¿‡æ–°çš„é…ç½®åˆ›å»ºä¸€ä¸ªreplication controller åœ¨æ–°çš„æ§åˆ¶å™¨ä¸Šå¢åŠ å‰¯æœ¬æ•°ï¼Œåœ¨æ—§çš„ä¸Šé¢å‡å°‘å‰¯æœ¬æ•°ï¼Œç›´åˆ°å‰¯æœ¬æ•°è¾¾åˆ°æœŸæœ›å€¼ åˆ é™¤ä¹‹å‰çš„replication controller  ä½¿ç”¨kubectl rolling-updateå‘½ä»¤æ¥è¿›è¡Œæ»šåŠ¨æ›´æ–°ï¼š
$ kubectl rolling-update NAME \ ([NEW_NAME] --image=IMAGE | -f FILE)  é€šè¿‡é…ç½®æ–‡ä»¶æ›´æ–° é€šè¿‡é…ç½®æ–‡ä»¶æ¥è¿›è¡Œæ»šåŠ¨æ›´æ–°ï¼Œéœ€è¦åœ¨kubectl rolling-updateå‘½ä»¤åé¢å¸¦ä¸Šæ–°çš„é…ç½®æ–‡ä»¶ï¼š
$ kubectl rolling-update NAME -f FILE  è¿™ä¸ªé…ç½®æ–‡ä»¶å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š
  æŒ‡å®šä¸åŒçš„metadata.nameå€¼
  è‡³å°‘è¦ä¿®æ”¹spec.</description>
    </item>
    
    <item>
      <title>kubeadm alpha</title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-alpha/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-alpha/</guid>
      <description>. caution &amp;gt;}}
kubeadm alpha æä¾›äº†ä¸€ç»„å¯ç”¨äºæ”¶é›†ç¤¾åŒºåé¦ˆçš„åŠŸèƒ½çš„é¢„è§ˆã€‚è¯·å°è¯•ä¸€ä¸‹è¿™äº›åŠŸèƒ½å¹¶ç»™æˆ‘ä»¬åé¦ˆï¼ . /caution &amp;gt;}}
kubeadm alpha certs renew ä½¿ç”¨ all å­å‘½ä»¤æ¥æ›´æ–°æ‰€æœ‰ Kubernetes è¯ä¹¦æˆ–æœ‰é€‰æ‹©æ€§åœ°æ›´æ–°å®ƒä»¬ã€‚æœ‰å…³è¯ä¹¦åˆ°æœŸå’Œç»­è®¢çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§è¯ä¹¦ç®¡ç†æ–‡æ¡£ã€‚
. tabs name=&amp;quot;tab-certs-renew&amp;rdquo; &amp;gt;}} . tab name=&amp;quot;renew&amp;rdquo; include=&amp;quot;generated/kubeadm_alpha_certs_renew.md&amp;rdquo; /&amp;gt;}} . tab name=&amp;quot;all&amp;rdquo; include=&amp;quot;generated/kubeadm_alpha_certs_renew_all.md&amp;rdquo; /&amp;gt;}} . tab name=&amp;quot;admin.conf&amp;rdquo; include=&amp;quot;generated/kubeadm_alpha_certs_renew_admin.conf.md&amp;rdquo; /&amp;gt;}} . tab name=&amp;quot;apiserver-etcd-client&amp;rdquo; include=&amp;quot;generated/kubeadm_alpha_certs_renew_apiserver-etcd-client.md&amp;rdquo; /&amp;gt;}} . tab name=&amp;quot;apiserver-kubelet-client&amp;rdquo; include=&amp;quot;generated/kubeadm_alpha_certs_renew_apiserver-kubelet-client.md&amp;rdquo; /&amp;gt;}} . tab name=&amp;quot;apiserver&amp;rdquo; include=&amp;quot;generated/kubeadm_alpha_certs_renew_apiserver.md&amp;rdquo; /&amp;gt;}} . tab name=&amp;quot;controller-manager.conf&amp;rdquo; include=&amp;quot;generated/kubeadm_alpha_certs_renew_controller-manager.conf.md&amp;rdquo; /&amp;gt;}} . tab name=&amp;quot;etcd-healthcheck-client&amp;rdquo; include=&amp;quot;generated/kubeadm_alpha_certs_renew_etcd-healthcheck-client.md&amp;rdquo; /&amp;gt;}} . tab name=&amp;quot;etcd-peer&amp;rdquo; include=&amp;quot;generated/kubeadm_alpha_certs_renew_etcd-peer.md&amp;rdquo; /&amp;gt;}} . tab name=&amp;quot;etcd-server&amp;rdquo; include=&amp;quot;generated/kubeadm_alpha_certs_renew_etcd-server.</description>
    </item>
    
    <item>
      <title>kubeadm init phase</title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-init-phase/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-init-phase/</guid>
      <description>kubeadm init phase èƒ½ç¡®ä¿è°ƒç”¨å¼•å¯¼è¿‡ç¨‹çš„åŸå­æ­¥éª¤ã€‚å› æ­¤ï¼Œå¦‚æœå¸Œæœ›è‡ªå®šä¹‰åº”ç”¨ï¼Œåˆ™å¯ä»¥è®© kubeadm åšä¸€äº›å·¥ä½œï¼Œç„¶åå¡«è¡¥ç©ºç™½ã€‚
kubeadm init phase ä¸ kubeadm init å·¥ä½œæµç¨‹ä¸€è‡´ï¼Œåå°éƒ½ä½¿ç”¨ç›¸åŒçš„ä»£ç ã€‚
kubeadm init phase preflight ä½¿ç”¨æ­¤å‘½ä»¤å¯ä»¥åœ¨æ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¸Šæ‰§è¡Œå¯åŠ¨å‰æ£€æŸ¥ã€‚
. tabs name=&amp;quot;tab-preflight&amp;rdquo; &amp;gt;}} . tab name=&amp;quot;preflight&amp;rdquo; include=&amp;quot;generated/kubeadm_init_phase_preflight.md&amp;rdquo; /&amp;gt;}} . /tabs &amp;gt;}}
kubeadm init phase kubelet-start æ­¤é˜¶æ®µå°†æ£€æŸ¥ kubelet é…ç½®æ–‡ä»¶å’Œç¯å¢ƒæ–‡ä»¶ï¼Œç„¶åå¯åŠ¨ kubeletã€‚
. tabs name=&amp;quot;tab-kubelet-start&amp;rdquo; &amp;gt;}} . tab name=&amp;quot;kubelet-start&amp;rdquo; include=&amp;quot;generated/kubeadm_init_phase_kubelet-start.md&amp;rdquo; /&amp;gt;}} . /tabs &amp;gt;}}
kubeadm init phase certs è¯¥é˜¶æ®µå¯ç”¨äºåˆ›å»º kubeadm æ‰€éœ€çš„æ‰€æœ‰è¯ä¹¦ã€‚
. tabs name=&amp;quot;tab-certs&amp;rdquo; &amp;gt;}} . tab name=&amp;quot;certs&amp;rdquo; include=&amp;quot;generated/kubeadm_init_phase_certs.md&amp;rdquo; /&amp;gt;}} . tab name=&amp;quot;all&amp;rdquo; include=&amp;quot;generated/kubeadm_init_phase_certs_all.md&amp;rdquo; /&amp;gt;}} .</description>
    </item>
    
    <item>
      <title>kubeadm join phase</title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-join-phase/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-join-phase/</guid>
      <description>kubeadm join phase ä½¿æ‚¨èƒ½å¤Ÿè°ƒç”¨ join è¿‡ç¨‹çš„åŸºæœ¬åŸå­æ­¥éª¤ã€‚å› æ­¤ï¼Œå¦‚æœå¸Œæœ›æ‰§è¡Œè‡ªå®šä¹‰æ“ä½œï¼Œå¯ä»¥è®© kubeadm åšä¸€äº›å·¥ä½œï¼Œç„¶åç”±ç”¨æˆ·æ¥è¡¥è¶³å‰©ä½™æ“ä½œã€‚
kubeadm join phase ä¸ kubeadm join å·¥ä½œæµç¨‹ ä¸€è‡´ï¼Œåå°éƒ½ä½¿ç”¨ç›¸åŒçš„ä»£ç ã€‚
kubeadm join phase . tabs name=&amp;quot;tab-phase&amp;rdquo; &amp;gt;}} . tab name=&amp;quot;phase&amp;rdquo; include=&amp;quot;generated/kubeadm_join_phase.md&amp;rdquo; /&amp;gt;}} . /tabs &amp;gt;}}
kubeadm join phase preflight ä½¿ç”¨æ­¤å‘½ä»¤å¯ä»¥åœ¨å³å°†åŠ å…¥é›†ç¾¤çš„èŠ‚ç‚¹ä¸Šæ‰§è¡Œå¯åŠ¨å‰æ£€æŸ¥ã€‚
. tabs name=&amp;quot;tab-preflight&amp;rdquo; &amp;gt;}} . tab name=&amp;quot;preflight&amp;rdquo; include=&amp;quot;generated/kubeadm_join_phase_preflight.md&amp;rdquo; /&amp;gt;}} . /tabs &amp;gt;}}
kubeadm join phase control-plane-prepare ä½¿ç”¨æ­¤é˜¶æ®µï¼Œæ‚¨å¯ä»¥å‡†å¤‡ä¸€ä¸ªä½œä¸ºæ§åˆ¶å¹³é¢çš„èŠ‚ç‚¹ã€‚
. tabs name=&amp;quot;tab-control-plane-prepare&amp;rdquo; &amp;gt;}} . tab name=&amp;quot;control-plane-prepare&amp;rdquo; include=&amp;quot;generated/kubeadm_join_phase_control-plane-prepare.md&amp;rdquo; /&amp;gt;}} . tab name=&amp;quot;all&amp;rdquo; include=&amp;quot;generated/kubeadm_join_phase_control-plane-prepare_all.md&amp;rdquo; /&amp;gt;}} . tab name=&amp;quot;download-certs&amp;rdquo; include=&amp;quot;generated/kubeadm_join_phase_control-plane-prepare_download-certs.</description>
    </item>
    
    <item>
      <title>kubeadm reset phase</title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-reset-phase/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-reset-phase/</guid>
      <description>kubeadm reset phase ä½¿æ‚¨èƒ½å¤Ÿè°ƒç”¨ reset è¿‡ç¨‹çš„åŸºæœ¬åŸå­æ­¥éª¤ã€‚å› æ­¤ï¼Œå¦‚æœå¸Œæœ›æ‰§è¡Œè‡ªå®šä¹‰æ“ä½œï¼Œå¯ä»¥è®© kubeadm åšä¸€äº›å·¥ä½œï¼Œç„¶åç”±ç”¨æˆ·æ¥è¡¥è¶³å‰©ä½™æ“ä½œã€‚
kubeadm reset phase ä¸ kubeadm reset å·¥ä½œæµç¨‹ ä¸€è‡´ï¼Œåå°éƒ½ä½¿ç”¨ç›¸åŒçš„ä»£ç ã€‚
kubeadm reset phase . tabs name=&amp;quot;tab-phase&amp;rdquo; &amp;gt;}} . tab name=&amp;quot;phase&amp;rdquo; include=&amp;quot;generated/kubeadm_reset_phase.md&amp;rdquo; /&amp;gt;}} . /tabs &amp;gt;}}
kubeadm reset phase preflight ä½¿ç”¨æ­¤é˜¶æ®µï¼Œæ‚¨å¯ä»¥åœ¨è¦é‡ç½®çš„èŠ‚ç‚¹ä¸Šæ‰§è¡Œå¯åŠ¨å‰æ£€æŸ¥é˜¶æ®µã€‚
. tabs name=&amp;quot;tab-preflight&amp;rdquo; &amp;gt;}} . tab name=&amp;quot;preflight&amp;rdquo; include=&amp;quot;generated/kubeadm_reset_phase_preflight.md&amp;rdquo; /&amp;gt;}} . /tabs &amp;gt;}}
kubeadm reset phase update-cluster-status ä½¿ç”¨æ­¤é˜¶æ®µï¼Œæ‚¨å¯ä»¥ä» ClusterStatus å¯¹è±¡ä¸­åˆ é™¤æ­¤æ§åˆ¶å¹³é¢èŠ‚ç‚¹ã€‚
. tabs name=&amp;quot;tab-update-cluster-status&amp;rdquo; &amp;gt;}} . tab name=&amp;quot;update-cluster-status&amp;rdquo; include=&amp;quot;generated/kubeadm_reset_phase_update-cluster-status.md&amp;rdquo; /&amp;gt;}} . /tabs &amp;gt;}}
kubeadm reset phase remove-etcd-member ä½¿ç”¨æ­¤é˜¶æ®µï¼Œæ‚¨å¯ä»¥ä» etcd é›†ç¾¤ä¸­åˆ é™¤æ­¤æ§åˆ¶å¹³é¢èŠ‚ç‚¹çš„ etcd æˆå‘˜ã€‚</description>
    </item>
    
    <item>
      <title>kubeadm upgrade phase</title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-upgrade-phase/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/kubeadm-upgrade-phase/</guid>
      <description>åœ¨ Kubernetes v1.15.0 ç‰ˆæœ¬ä¸­ï¼Œkubeadm å¼•å…¥äº†å¯¹ kubeadm upgrade node é˜¶æ®µçš„åˆæ­¥æ”¯æŒã€‚å…¶ä»– kubeadm upgrade å­å‘½ä»¤å¦‚ apply ç­‰é˜¶æ®µå°†åœ¨æœªæ¥å‘è¡Œç‰ˆä¸­æ·»åŠ ã€‚
kubeadm upgrade node phase ä½¿ç”¨æ­¤é˜¶æ®µï¼Œå¯ä»¥é€‰æ‹©æ‰§è¡Œè¾…åŠ©æ§åˆ¶å¹³é¢æˆ–å·¥ä½œèŠ‚ç‚¹å‡çº§çš„å•ç‹¬æ­¥éª¤ã€‚è¯·æ³¨æ„ï¼Œkubeadm upgrade apply å‘½ä»¤ä»ç„¶å¿…é¡»åœ¨ä¸»æ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¸Šè°ƒç”¨ã€‚
. tabs name=&amp;quot;tab-phase&amp;rdquo; &amp;gt;}} . tab name=&amp;quot;phase&amp;rdquo; include=&amp;quot;generated/kubeadm_upgrade_node_phase.md&amp;rdquo; /&amp;gt;}} . tab name=&amp;quot;control-plane&amp;rdquo; include=&amp;quot;generated/kubeadm_upgrade_node_phase_control-plane.md&amp;rdquo; /&amp;gt;}} . tab name=&amp;quot;kubelet-config&amp;rdquo; include=&amp;quot;generated/kubeadm_upgrade_node_phase_kubelet-config.md&amp;rdquo; /&amp;gt;}} . /tabs &amp;gt;}}
æ¥ä¸‹æ¥  kubeadm init å¼•å¯¼ä¸€ä¸ª Kubernetes æ§åˆ¶å¹³é¢èŠ‚ç‚¹ kubeadm join å°†èŠ‚ç‚¹åŠ å…¥åˆ°ç¾¤é›† kubeadm reset è¿˜åŸ kubeadm init æˆ– kubeadm join å‘½ä»¤å¯¹ä¸»æœºæ‰€åšçš„ä»»ä½•æ›´æ”¹ kubeadm upgrade å‡çº§ kubeadm èŠ‚ç‚¹ kubeadm alpha å°è¯•å®éªŒæ€§åŠŸèƒ½  </description>
    </item>
    
    <item>
      <title>Pod æ°´å¹³è‡ªåŠ¨ä¼¸ç¼©</title>
      <link>https://lijun.in/tasks/run-application/horizontal-pod-autoscale/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/run-application/horizontal-pod-autoscale/</guid>
      <description>Pod æ°´å¹³è‡ªåŠ¨ä¼¸ç¼©ï¼ˆHorizontal Pod Autoscalerï¼‰ç‰¹æ€§ï¼Œ å¯ä»¥åŸºäºCPUåˆ©ç”¨ç‡è‡ªåŠ¨ä¼¸ç¼© replication controllerã€deploymentå’Œ replica set ä¸­çš„ pod æ•°é‡ï¼Œï¼ˆé™¤äº† CPU åˆ©ç”¨ç‡ï¼‰ä¹Ÿå¯ä»¥ åŸºäºå…¶ä»–åº”ç¨‹åºæä¾›çš„åº¦é‡æŒ‡æ ‡custom metricsã€‚ pod è‡ªåŠ¨ç¼©æ”¾ä¸é€‚ç”¨äºæ— æ³•ç¼©æ”¾çš„å¯¹è±¡ï¼Œæ¯”å¦‚ DaemonSetsã€‚
Pod æ°´å¹³è‡ªåŠ¨ä¼¸ç¼©ç‰¹æ€§ç”± Kubernetes API èµ„æºå’Œæ§åˆ¶å™¨å®ç°ã€‚èµ„æºå†³å®šäº†æ§åˆ¶å™¨çš„è¡Œä¸ºã€‚ æ§åˆ¶å™¨ä¼šå‘¨æœŸæ€§çš„è·å–å¹³å‡ CPU åˆ©ç”¨ç‡ï¼Œå¹¶ä¸ç›®æ ‡å€¼ç›¸æ¯”è¾ƒåæ¥è°ƒæ•´ replication controller æˆ– deployment ä¸­çš„å‰¯æœ¬æ•°é‡ã€‚
Pod æ°´å¹³è‡ªåŠ¨ä¼¸ç¼©å·¥ä½œæœºåˆ¶ Pod æ°´å¹³è‡ªåŠ¨ä¼¸ç¼©çš„å®ç°æ˜¯ä¸€ä¸ªæ§åˆ¶å¾ªç¯ï¼Œç”± controller manager çš„ --horizontal-pod-autoscaler-sync-period å‚æ•° æŒ‡å®šå‘¨æœŸï¼ˆé»˜è®¤å€¼ä¸º15ç§’ï¼‰ã€‚
æ¯ä¸ªå‘¨æœŸå†…ï¼Œcontroller manager æ ¹æ®æ¯ä¸ª HorizontalPodAutoscaler å®šä¹‰ä¸­æŒ‡å®šçš„æŒ‡æ ‡æŸ¥è¯¢èµ„æºåˆ©ç”¨ç‡ã€‚ controller manager å¯ä»¥ä» resource metrics APIï¼ˆæ¯ä¸ªpod èµ„æºæŒ‡æ ‡ï¼‰å’Œ custom metrics APIï¼ˆå…¶ä»–æŒ‡æ ‡ï¼‰è·å–æŒ‡æ ‡ã€‚
 å¯¹äºæ¯ä¸ª pod çš„èµ„æºæŒ‡æ ‡ï¼ˆå¦‚ CPUï¼‰ï¼Œæ§åˆ¶å™¨ä»èµ„æºæŒ‡æ ‡ API ä¸­è·å–æ¯ä¸€ä¸ª HorizontalPodAutoscaler æŒ‡å®š çš„ pod çš„æŒ‡æ ‡ï¼Œç„¶åï¼Œå¦‚æœè®¾ç½®äº†ç›®æ ‡ä½¿ç”¨ç‡ï¼Œæ§åˆ¶å™¨è·å–æ¯ä¸ª pod ä¸­çš„å®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µï¼Œå¹¶è®¡ç®—èµ„æºä½¿ç”¨ç‡ã€‚ å¦‚æœä½¿ç”¨åŸå§‹å€¼ï¼Œå°†ç›´æ¥ä½¿ç”¨åŸå§‹æ•°æ®ï¼ˆä¸å†è®¡ç®—ç™¾åˆ†æ¯”ï¼‰ã€‚ ç„¶åï¼Œæ§åˆ¶å™¨æ ¹æ®å¹³å‡çš„èµ„æºä½¿ç”¨ç‡æˆ–åŸå§‹å€¼è®¡ç®—å‡ºç¼©æ”¾çš„æ¯”ä¾‹ï¼Œè¿›è€Œè®¡ç®—å‡ºç›®æ ‡å‰¯æœ¬æ•°ã€‚  éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœ pod æŸäº›å®¹å™¨ä¸æ”¯æŒèµ„æºé‡‡é›†ï¼Œé‚£ä¹ˆæ§åˆ¶å™¨å°†ä¸ä¼šä½¿ç”¨è¯¥ pod çš„ CPU ä½¿ç”¨ç‡ã€‚ ä¸‹é¢çš„ç®—æ³•ç»†èŠ‚ç« èŠ‚å°†ä¼šä»‹ç»è¯¦ç»†çš„ç®—æ³•ã€‚</description>
    </item>
    
    <item>
      <title>ä¸º Pod é…ç½®æœåŠ¡è´¦æˆ·</title>
      <link>https://lijun.in/tasks/configure-pod-container/configure-service-account/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/configure-service-account/</guid>
      <description>æœåŠ¡è´¦æˆ·ä¸º Pod ä¸­è¿è¡Œçš„è¿›ç¨‹æä¾›äº†ä¸€ä¸ªæ ‡è¯†ã€‚
æœ¬æ–‡æ˜¯æœåŠ¡è´¦æˆ·çš„ç”¨æˆ·ä½¿ç”¨ä»‹ç»ã€‚æ‚¨ä¹Ÿå¯ä»¥å‚è€ƒé›†ç¾¤ç®¡ç†æŒ‡å—ä¹‹æœåŠ¡è´¦æˆ·ã€‚
. note &amp;gt;}}
æœ¬æ–‡æ¡£æè¿° Kubernetes é¡¹ç›®æ¨èçš„é›†ç¾¤ä¸­æœåŠ¡å¸æˆ·çš„è¡Œä¸ºã€‚ é›†ç¾¤ç®¡ç†å‘˜ä¹Ÿå¯èƒ½å·²ç»å®šåˆ¶äº†æœåŠ¡è´¦æˆ·åœ¨é›†ç¾¤ä¸­çš„å±æ€§ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ¬æ–‡æ¡£å¯èƒ½å¹¶ä¸é€‚ç”¨ã€‚
. /note &amp;gt;}}
å½“æ‚¨ï¼ˆäººç±»ï¼‰è®¿é—®é›†ç¾¤æ—¶ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ kubectlï¼‰ï¼Œapi æœåŠ¡å™¨å°†æ‚¨çš„èº«ä»½éªŒè¯ä¸ºç‰¹å®šçš„ç”¨æˆ·å¸æˆ·ï¼ˆå½“å‰è¿™é€šå¸¸æ˜¯ adminï¼Œé™¤éæ‚¨çš„é›†ç¾¤ç®¡ç†å‘˜å·²ç»å®šåˆ¶äº†æ‚¨çš„é›†ç¾¤é…ç½®ï¼‰ã€‚ Pod å†…çš„å®¹å™¨ä¸­çš„è¿›ç¨‹ä¹Ÿå¯ä»¥ä¸ api æœåŠ¡å™¨æ¥è§¦ã€‚ å½“å®ƒä»¬è¿›è¡Œèº«ä»½éªŒè¯æ—¶ï¼Œå®ƒä»¬è¢«éªŒè¯ä¸ºç‰¹å®šçš„æœåŠ¡å¸æˆ·ï¼ˆä¾‹å¦‚ï¼Œdefaultï¼‰ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ä½¿ç”¨é»˜è®¤çš„æœåŠ¡è´¦æˆ·è®¿é—® API æœåŠ¡å™¨ å½“æ‚¨åˆ›å»º Pod æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šæœåŠ¡è´¦æˆ·ï¼ŒPod ä¼šè¢«æŒ‡å®šå‘½åç©ºé—´ä¸­çš„defaultæœåŠ¡è´¦æˆ·ã€‚ å¦‚æœæ‚¨æŸ¥çœ‹ Pod çš„åŸå§‹ json æˆ– yamlï¼ˆä¾‹å¦‚ï¼škubectl get pods/podname -o yamlï¼‰ï¼Œ æ‚¨å¯ä»¥çœ‹åˆ° spec.serviceAccountName å­—æ®µå·²ç»è¢«è‡ªåŠ¨è®¾ç½®äº†ã€‚
æ‚¨å¯ä»¥ä½¿ç”¨è‡ªåŠ¨æŒ‚è½½ç»™ Pod çš„æœåŠ¡è´¦æˆ·å‡­æ®è®¿é—® APIï¼Œè®¿é—®é›†ç¾¤ ä¸­æœ‰ç›¸å…³æè¿°ã€‚ æœåŠ¡è´¦æˆ·çš„ API è®¸å¯å–å†³äºæ‚¨æ‰€ä½¿ç”¨çš„æˆæƒæ’ä»¶å’Œç­–ç•¥ã€‚
åœ¨ 1.6 ä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨æœåŠ¡è´¦æˆ·ä¸Šè®¾ç½® automountServiceAccountToken: false æ¥å®ç°ä¸ç»™æœåŠ¡è´¦å·è‡ªåŠ¨æŒ‚è½½ API å‡­æ®ï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Node é‰´æƒ</title>
      <link>https://lijun.in/reference/access-authn-authz/node/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/access-authn-authz/node/</guid>
      <description>èŠ‚ç‚¹é‰´æƒæ˜¯ä¸€ç§ç‰¹æ®Šç”¨é€”çš„é‰´æƒæ¨¡å¼ï¼Œä¸“é—¨å¯¹ kubelet å‘å‡ºçš„ API è¯·æ±‚è¿›è¡Œé‰´æƒã€‚
æ¦‚è¿° èŠ‚ç‚¹é‰´æƒå™¨å…è®¸ kubelet æ‰§è¡Œ API æ“ä½œã€‚åŒ…æ‹¬ï¼š
è¯»å–æ“ä½œï¼š
 services endpoints nodes pods secretsã€configmapsã€ä»¥åŠç»‘å®šåˆ° kubelet çš„èŠ‚ç‚¹çš„ pod çš„æŒä¹…å·ç”³é¢†å’ŒæŒä¹…å·  å†™å…¥æ“ä½œï¼š
 èŠ‚ç‚¹å’ŒèŠ‚ç‚¹çŠ¶æ€ï¼ˆå¯ç”¨ NodeRestriction å‡†å…¥æ’ä»¶ä»¥é™åˆ¶ kubelet åªèƒ½ä¿®æ”¹è‡ªå·±çš„èŠ‚ç‚¹ï¼‰ Pod å’Œ Pod çŠ¶æ€ (å¯ç”¨ NodeRestriction å‡†å…¥æ’ä»¶ä»¥é™åˆ¶ kubelet åªèƒ½ä¿®æ”¹ç»‘å®šåˆ°è‡ªèº«çš„ Pod) äº‹ä»¶  é‰´æƒç›¸å…³æ“ä½œï¼š
 å¯¹äºåŸºäº TLS çš„å¯åŠ¨å¼•å¯¼è¿‡ç¨‹æ—¶ä½¿ç”¨çš„ certificationsigningrequests API çš„è¯»/å†™æƒé™ ä¸ºå§”æ´¾çš„èº«ä»½éªŒè¯/æˆæƒæ£€æŸ¥åˆ›å»º tokenreviews å’Œ subjectaccessreviews çš„èƒ½åŠ›  åœ¨å°†æ¥çš„ç‰ˆæœ¬ä¸­ï¼ŒèŠ‚ç‚¹é‰´æƒå™¨å¯èƒ½ä¼šæ·»åŠ æˆ–åˆ é™¤æƒé™ï¼Œä»¥ç¡®ä¿ kubelet å…·æœ‰æ­£ç¡®æ“ä½œæ‰€éœ€çš„æœ€å°æƒé™é›†ã€‚
ä¸ºäº†è·å¾—èŠ‚ç‚¹é‰´æƒå™¨çš„æˆæƒï¼Œkubelet å¿…é¡»ä½¿ç”¨ä¸€ä¸ªå‡­è¯ä»¥è¡¨ç¤ºå®ƒåœ¨ system:nodes ç»„ä¸­ï¼Œç”¨æˆ·åä¸º system:node:&amp;lt;nodeName&amp;gt;ã€‚ ä¸Šè¿°çš„ç»„åå’Œç”¨æˆ·åæ ¼å¼è¦ä¸ kubelet TLS å¯åŠ¨å¼•å¯¼è¿‡ç¨‹ä¸­ä¸ºæ¯ä¸ª kubelet åˆ›å»ºçš„æ ‡è¯†ç›¸åŒ¹é…ã€‚</description>
    </item>
    
    <item>
      <title>é…ç½®ä½ çš„äº‘å¹³å°é˜²ç«å¢™</title>
      <link>https://lijun.in/tasks/access-application-cluster/configure-cloud-provider-firewall/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/configure-cloud-provider-firewall/</guid>
      <description>è®¸å¤šäº‘æœåŠ¡æä¾›å•†ï¼ˆæ¯”å¦‚ è°·æ­Œè®¡ç®—å¼•æ“ï¼‰å®šä¹‰é˜²ç«å¢™ä»¥é˜²æ­¢æœåŠ¡æ— æ„é—´æš´éœ²åˆ°äº’è”ç½‘ä¸Šã€‚ å½“æš´éœ²æœåŠ¡ç»™å¤–ç½‘æ—¶ï¼Œä½ å¯èƒ½éœ€è¦åœ¨é˜²ç«å¢™ä¸Šå¼€å¯ä¸€ä¸ªæˆ–è€…æ›´å¤šçš„ç«¯å£æ¥æ”¯æŒæœåŠ¡ã€‚ æœ¬æ–‡æè¿°äº†è¿™ä¸ªè¿‡ç¨‹ï¼Œä»¥åŠå…¶ä»–äº‘æœåŠ¡å•†çš„å…·ä½“ä¿¡æ¯ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
è´Ÿè½½å‡è¡¡ï¼ˆLoadBalancerï¼‰æœåŠ¡çš„è®¿é—®é™åˆ¶ å½“ä»¥ spec.type: LoadBalancer æ–¹å¼é…ç½®æœåŠ¡æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ spec.loadBalancerSourceRanges æ¥æŒ‡å®šå…è®¸è®¿é—®è´Ÿè½½å‡è¡¡å™¨çš„ ip æ®µã€‚ è¿™ä¸ªå­—æ®µé‡‡ç”¨ CIDR çš„ IP æ®µï¼Œ kubernetes ä½¿ç”¨è¯¥æ®µé…ç½®é˜²ç«å¢™ã€‚ç›®å‰åªæœ‰ è°·æ­Œè®¡ç®—å¼•æ“ï¼Œè°·æ­Œäº‘åŸç”Ÿå¼•æ“ï¼Œäºšé©¬é€Šå¼¹æ€§åŸç”Ÿäº‘æœåŠ¡ å’Œ å¾®è½¯äº‘åŸç”Ÿå¹³å°æ”¯æŒæ­¤åŠŸèƒ½ã€‚ å¦‚æœäº‘æœåŠ¡æä¾›å•†ä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼Œè¿™ä¸ªå­—æ®µå°†è¢«å¿½ç•¥ã€‚
å‡è®¾å†…éƒ¨å­ç½‘ä¸ºå‡è®¾10.0.0.0/8ï¼Œåœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°†åˆ›å»ºä¸€ä¸ªä»…èƒ½ç”±ç¾¤é›†å†…éƒ¨IPè®¿é—®çš„è´Ÿè½½å‡è¡¡å™¨ã€‚æ­¤è´Ÿè½½å‡è¡¡å™¨ä¸å…è®¸æ¥è‡ª kubernetes é›†ç¾¤å¤–éƒ¨å®¢æˆ·ç«¯çš„è®¿é—®ã€‚
apiVersion: v1 kind: Service metadata: name: myapp spec: ports: - port: 8765 targetPort: 9376 selector: app: example type: LoadBalancer loadBalancerSourceRanges: - 10.0.0.0/8 åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°†åˆ›å»ºä¸€ä¸ªåªèƒ½è¢« IP ä¸º 130.211.204.1 å’Œ 130.211.204.2 çš„å®¢æˆ·ç«¯è®¿é—®çš„è´Ÿè½½æ®è¡¡å™¨ã€‚
apiVersion: v1 kind: Service metadata: name: myapp spec: ports: - port: 8765 targetPort: 9376 selector: app: example type: LoadBalancer loadBalancerSourceRanges: - 130.</description>
    </item>
    
    <item>
      <title>Webhook æ¨¡å¼</title>
      <link>https://lijun.in/reference/access-authn-authz/webhook/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/access-authn-authz/webhook/</guid>
      <description>WebHook æ˜¯ä¸€ç§ HTTP å›è°ƒï¼šæŸäº›æ¡ä»¶ä¸‹è§¦å‘çš„ HTTP POST è¯·æ±‚ï¼›é€šè¿‡ HTTP POST å‘é€çš„ç®€å•äº‹ä»¶é€šçŸ¥ã€‚ä¸€ä¸ªåŸºäº web åº”ç”¨å®ç°çš„ WebHook ä¼šåœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶æŠŠæ¶ˆæ¯å‘é€ç»™ç‰¹å®šçš„ URLã€‚
å…·ä½“æ¥è¯´ï¼Œå½“åœ¨åˆ¤æ–­ç”¨æˆ·æƒé™æ—¶ï¼ŒWebhook æ¨¡å¼ä¼šä½¿ Kubernetes æŸ¥è¯¢å¤–éƒ¨çš„ REST æœåŠ¡ã€‚
é…ç½®æ–‡ä»¶æ ¼å¼ Webhook æ¨¡å¼éœ€è¦ä¸€ä¸ª HTTP é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡ --authorization-webhook-config-file=SOME_FILENAME çš„å‚æ•°å£°æ˜ã€‚
é…ç½®æ–‡ä»¶çš„æ ¼å¼ä½¿ç”¨ kubeconfigã€‚åœ¨æ–‡ä»¶ä¸­ï¼Œ&amp;ldquo;users&amp;rdquo; ä»£è¡¨ç€ API æœåŠ¡å™¨çš„ webhookï¼Œè€Œ &amp;ldquo;cluster&amp;rdquo; ä»£è¡¨ç€è¿œç¨‹æœåŠ¡ã€‚
ä½¿ç”¨ HTTPS å®¢æˆ·ç«¯è®¤è¯çš„é…ç½®ä¾‹å­ï¼š
# Kubernetes API ç‰ˆæœ¬ apiVersion: v1 # API å¯¹è±¡ç§ç±» kind: Config # clusters ä»£è¡¨è¿œç¨‹æœåŠ¡ã€‚ clusters: - name: name-of-remote-authz-service cluster: # å¯¹è¿œç¨‹æœåŠ¡è¿›è¡Œèº«ä»½è®¤è¯çš„ CAã€‚ certificate-authority: /path/to/ca.pem # è¿œç¨‹æœåŠ¡çš„æŸ¥è¯¢ URLã€‚å¿…é¡»ä½¿ç”¨ &amp;#39;https&amp;#39;ã€‚ server: https://authz.example.com/authorize # users ä»£è¡¨ API æœåŠ¡å™¨çš„ webhook é…ç½® users: - name: name-of-api-server user: client-certificate: /path/to/cert.</description>
    </item>
    
    <item>
      <title>Horizontal Pod Autoscaleræ¼”ç»ƒ</title>
      <link>https://lijun.in/tasks/run-application/horizontal-pod-autoscale-walkthrough/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/run-application/horizontal-pod-autoscale-walkthrough/</guid>
      <description>Horizontal Pod Autoscaler å¯ä»¥æ ¹æ®CPUåˆ©ç”¨ç‡è‡ªåŠ¨ä¼¸ç¼© replication controllerã€deployment æˆ–è€… replica set ä¸­çš„Podæ•°é‡ ï¼ˆä¹Ÿå¯ä»¥åŸºäºå…¶ä»–åº”ç”¨ç¨‹åºæä¾›çš„åº¦é‡æŒ‡æ ‡ï¼Œç›®å‰è¿™ä¸€åŠŸèƒ½å¤„äº beta ç‰ˆæœ¬ï¼‰ã€‚
æœ¬æ–‡å°†å¼•å¯¼æ‚¨äº†è§£å¦‚ä½•ä¸º php-apache æœåŠ¡å™¨é…ç½®å’Œä½¿ç”¨ Horizontal Pod Autoscalerã€‚ æ›´å¤š Horizontal Pod Autoscaler çš„ä¿¡æ¯è¯·å‚é˜… Horizontal Pod Autoscaler user guideã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} æœ¬æ–‡ç¤ºä¾‹éœ€è¦ä¸€ä¸ª1.2æˆ–è€…æ›´é«˜ç‰ˆæœ¬çš„å¯è¿è¡Œçš„ Kubernetes é›†ç¾¤ä»¥åŠ kubectlã€‚ metrics-server ä¹Ÿéœ€è¦éƒ¨ç½²åˆ°é›†ç¾¤ä¸­ï¼Œ å®ƒå¯ä»¥é€šè¿‡ resource metrics API å¯¹å¤–æä¾›åº¦é‡æ•°æ®ï¼ŒHorizontal Pod Autoscaler æ­£æ˜¯æ ¹æ®æ­¤ API æ¥è·å–åº¦é‡æ•°æ®ï¼Œéƒ¨ç½²æ–¹æ³•è¯·å‚è€ƒ metrics-server ã€‚ å¦‚æœä½ æ­£åœ¨ä½¿ç”¨GCEï¼ŒæŒ‰ç…§ getting started on GCE guide æ“ä½œï¼Œmetrics-server ä¼šé»˜è®¤å¯åŠ¨ã€‚
å¦‚æœéœ€è¦ä¸º Horizontal Pod Autoscaler æŒ‡å®šå¤šç§èµ„æºåº¦é‡æŒ‡æ ‡ï¼Œæ‚¨çš„ Kubernetes é›†ç¾¤ä»¥åŠ kubectl è‡³å°‘éœ€è¦è¾¾åˆ°1.6ç‰ˆæœ¬ã€‚ æ­¤å¤–ï¼Œå¦‚æœè¦ä½¿ç”¨è‡ªå®šä¹‰åº¦é‡æŒ‡æ ‡ï¼Œæ‚¨çš„Kubernetes é›†ç¾¤è¿˜å¿…é¡»èƒ½å¤Ÿä¸æä¾›è¿™äº›è‡ªå®šä¹‰æŒ‡æ ‡çš„APIæœåŠ¡å™¨é€šä¿¡ã€‚ æœ€åï¼Œå¦‚æœè¦ä½¿ç”¨ä¸ Kubernetes å¯¹è±¡æ— å…³çš„åº¦é‡æŒ‡æ ‡ï¼Œåˆ™ Kubernetes é›†ç¾¤ç‰ˆæœ¬è‡³å°‘éœ€è¦è¾¾åˆ°1.</description>
    </item>
    
    <item>
      <title>ä»ç§æœ‰ä»“åº“æ‹‰å–é•œåƒ</title>
      <link>https://lijun.in/tasks/configure-pod-container/pull-image-private-registry/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/pull-image-private-registry/</guid>
      <description>æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ Secret ä»ç§æœ‰çš„ Docker é•œåƒä»“åº“æˆ–ä»£ç ä»“åº“æ‹‰å–é•œåƒæ¥åˆ›å»º Podã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}  æ‚¨éœ€è¦ Docker ID å’Œå¯†ç æ¥è¿›è¡Œæœ¬ç»ƒä¹ ã€‚
ç™»å½• Docker é•œåƒä»“åº“ åœ¨ä¸ªäººç”µè„‘ä¸Šï¼Œè¦æƒ³æ‹‰å–ç§æœ‰é•œåƒå¿…é¡»åœ¨é•œåƒä»“åº“ä¸Šè¿›è¡Œèº«ä»½éªŒè¯ã€‚
docker login å½“æç¤ºæ—¶ï¼Œè¾“å…¥ Docker ç”¨æˆ·åå’Œå¯†ç ã€‚
ç™»å½•è¿‡ç¨‹ä¼šåˆ›å»ºæˆ–æ›´æ–°ä¿å­˜æœ‰æˆæƒä»¤ç‰Œçš„ config.json æ–‡ä»¶ã€‚
æŸ¥çœ‹ config.json æ–‡ä»¶ï¼š
cat ~/.docker/config.json è¾“å‡ºç»“æœåŒ…å«ç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„éƒ¨åˆ†ï¼š
{ &amp;#34;auths&amp;#34;: { &amp;#34;https://index.docker.io/v1/&amp;#34;: { &amp;#34;auth&amp;#34;: &amp;#34;c3R...zE2&amp;#34; } } } . note &amp;gt;}}
å¦‚æœä½¿ç”¨ Docker å‡­è¯ä»“åº“ï¼Œåˆ™ä¸ä¼šçœ‹åˆ° auth æ¡ç›®ï¼Œçœ‹åˆ°çš„å°†æ˜¯ä»¥ä»“åº“åç§°ä½œä¸ºå€¼çš„ credsStore æ¡ç›®ã€‚ . /note &amp;gt;}}
åœ¨é›†ç¾¤ä¸­åˆ›å»ºä¿å­˜æˆæƒä»¤ç‰Œçš„ Secret Kubernetes é›†ç¾¤ä½¿ç”¨ docker-registry ç±»å‹çš„ Secret æ¥é€šè¿‡å®¹å™¨ä»“åº“çš„èº«ä»½éªŒè¯ï¼Œè¿›è€Œæå–ç§æœ‰æ˜ åƒã€‚</description>
    </item>
    
    <item>
      <title>åˆ—å‡ºé›†ç¾¤ä¸­æ‰€æœ‰è¿è¡Œå®¹å™¨çš„é•œåƒ</title>
      <link>https://lijun.in/tasks/access-application-cluster/list-all-running-container-images/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/list-all-running-container-images/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•ä½¿ç”¨ kubectl æ¥åˆ—å‡ºé›†ç¾¤ä¸­æ‰€æœ‰è¿è¡Œ pod çš„å®¹å™¨çš„é•œåƒ
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ kubectl æ¥è·å–é›†ç¾¤ä¸­è¿è¡Œçš„æ‰€æœ‰ Podï¼Œå¹¶æ ¼å¼åŒ–è¾“å‡ºæ¥æå–æ¯ä¸ª pod ä¸­çš„å®¹å™¨åˆ—è¡¨ã€‚
åˆ—å‡ºæ‰€æœ‰å‘½åç©ºé—´ä¸‹çš„æ‰€æœ‰å®¹å™¨  ä½¿ç”¨ kubectl get pods --all-namespaces è·å–æ‰€æœ‰å‘½åç©ºé—´ä¸‹çš„æ‰€æœ‰ Pod ä½¿ç”¨ -o jsonpath={..image} æ¥æ ¼å¼åŒ–è¾“å‡ºï¼Œä»¥ä»…åŒ…å«å®¹å™¨é•œåƒåç§°ã€‚ è¿™å°†ä»¥é€’å½’æ–¹å¼ä»è¿”å›çš„ json ä¸­è§£æå‡º image å­—æ®µã€‚  å‚é˜… jsonpath reference æ¥è·å–æ›´å¤šå…³äºå¦‚ä½•ä½¿ç”¨ jsonpath çš„ä¿¡æ¯ã€‚   ä½¿ç”¨æ ‡å‡†åŒ–å·¥å…·æ¥æ ¼å¼åŒ–è¾“å‡ºï¼štr, sort, uniq  ä½¿ç”¨ tr ä»¥ç”¨æ¢è¡Œç¬¦æ›¿æ¢ç©ºæ ¼ ä½¿ç”¨ sort æ¥å¯¹ç»“æœè¿›è¡Œæ’åº ä½¿ç”¨ uniq æ¥èšåˆé•œåƒè®¡æ•°    kubectl get pods --all-namespaces -o jsonpath=&amp;#34;{.</description>
    </item>
    
    <item>
      <title>æ§åˆ¶å™¨ç®¡ç†å™¨æŒ‡æ ‡</title>
      <link>https://lijun.in/concepts/cluster-administration/controller-metrics/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/cluster-administration/controller-metrics/</guid>
      <description>æ§åˆ¶å™¨ç®¡ç†å™¨æŒ‡æ ‡ä¸ºæ§åˆ¶å™¨ç®¡ç†å™¨çš„æ€§èƒ½å’Œå¥åº·æä¾›äº†é‡è¦çš„è§‚æµ‹æ‰‹æ®µã€‚
ä»€ä¹ˆæ˜¯æ§åˆ¶å™¨ç®¡ç†å™¨åº¦é‡ æ§åˆ¶å™¨ç®¡ç†å™¨æŒ‡æ ‡ä¸ºæ§åˆ¶å™¨ç®¡ç†å™¨çš„æ€§èƒ½å’Œå¥åº·æä¾›äº†é‡è¦çš„è§‚æµ‹æ‰‹æ®µã€‚ è¿™äº›åº¦é‡åŒ…æ‹¬å¸¸è§çš„ Go è¯­è¨€è¿è¡Œæ—¶åº¦é‡ï¼Œæ¯”å¦‚ go_routine è®¡æ•°ï¼Œä»¥åŠæ§åˆ¶å™¨ç‰¹å®šçš„åº¦é‡ï¼Œæ¯”å¦‚ etcd è¯·æ±‚å»¶è¿Ÿæˆ– äº‘æä¾›å•†ï¼ˆAWSã€GCEã€OpenStackï¼‰çš„ API å»¶è¿Ÿï¼Œè¿™äº›å‚æ•°å¯ä»¥ç”¨æ¥æµ‹é‡é›†ç¾¤çš„å¥åº·çŠ¶å†µã€‚
ä» Kubernetes 1.7 ç‰ˆæœ¬å¼€å§‹ï¼Œè¯¦ç»†çš„äº‘æä¾›å•†æŒ‡æ ‡å¯ç”¨äº GCEã€AWSã€Vsphere å’Œ OpenStack çš„å­˜å‚¨æ“ä½œã€‚ è¿™äº›åº¦é‡å¯ç”¨äºç›‘è§†æŒä¹…å·æ“ä½œçš„å¥åº·çŠ¶å†µã€‚
ä¾‹å¦‚ï¼Œåœ¨ GCE ä¸­è¿™äº›æŒ‡æ ‡å«åšï¼š
cloudprovider_gce_api_request_duration_seconds { request = &amp;quot;instance_list&amp;quot;} cloudprovider_gce_api_request_duration_seconds { request = &amp;quot;disk_insert&amp;quot;} cloudprovider_gce_api_request_duration_seconds { request = &amp;quot;disk_delete&amp;quot;} cloudprovider_gce_api_request_duration_seconds { request = &amp;quot;attach_disk&amp;quot;} cloudprovider_gce_api_request_duration_seconds { request = &amp;quot;detach_disk&amp;quot;} cloudprovider_gce_api_request_duration_seconds { request = &amp;quot;list_disk&amp;quot;} é…ç½® åœ¨é›†ç¾¤ä¸­ï¼Œæ§åˆ¶å™¨ç®¡ç†å™¨æŒ‡æ ‡å¯ä»å®ƒæ‰€åœ¨çš„ä¸»æœºä¸Šçš„ http://localhost:10252/metrics ä¸­è·å¾—ã€‚
è¿™äº›æŒ‡æ ‡æ˜¯ä»¥ prometheus æ ¼å¼ å‘å‡ºçš„ï¼Œæ˜¯äººç±»å¯è¯»çš„ã€‚
åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ‚¨å¯èƒ½æƒ³é…ç½® prometheus æˆ–å…¶ä»–ä¸€äº›æŒ‡æ ‡æ”¶é›†å·¥å…·ï¼Œä»¥å®šæœŸæ”¶é›†è¿™äº›æŒ‡æ ‡æ•°æ®ï¼Œå¹¶å°†å®ƒä»¬åº”ç”¨åˆ°æŸç§æ—¶é—´åºåˆ—æ•°æ®åº“ä¸­ã€‚</description>
    </item>
    
    <item>
      <title>é…ç½®æ‚¨çš„ kubernetes é›†ç¾¤ä»¥è‡ªæ‰˜ç®¡æ§åˆ¶å¹³å°</title>
      <link>https://lijun.in/setup/production-environment/tools/kubeadm/self-hosting/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/tools/kubeadm/self-hosting/</guid>
      <description>è‡ªæ‰˜ç®¡ Kubernetes æ§åˆ¶å¹³å° kubeadm å…è®¸æ‚¨å®éªŒæ€§åœ°åˆ›å»º self-hosted Kubernetes æ§åˆ¶å¹³é¢ã€‚ è¿™æ„å‘³ç€ API æœåŠ¡å™¨ï¼Œæ§åˆ¶ç®¡ç†å™¨å’Œè°ƒåº¦ç¨‹åºä¹‹ç±»çš„å…³é”®ç»„ä»¶å°†é€šè¿‡é…ç½® Kubernetes API ä»¥ DaemonSet pods çš„èº«ä»½è¿è¡Œï¼Œè€Œä¸æ˜¯é€šè¿‡é™æ€æ–‡ä»¶å°† static pods åœ¨ kubelet ä¸­é…ç½®ã€‚
è¦åˆ›å»ºè‡ªæ‰˜ç®¡é›†ç¾¤ï¼Œè¯·å‚è§ kubeadm alpha è‡ªæ‰˜ç®¡æ¢çº½ å‘½ä»¤ã€‚
è­¦å‘Š . caution &amp;gt;}}
æ­¤åŠŸèƒ½å°†æ‚¨çš„é›†ç¾¤è®¾ç½®ä¸ºä¸å—æ”¯æŒçš„çŠ¶æ€ï¼Œä»è€Œä½¿ kubeadm æ— æ³•å†ç®¡ç†æ‚¨çš„é›†ç¾¤ã€‚ è¿™åŒ…æ‹¬ kubeadm å‡çº§ ã€‚ . /caution &amp;gt;}}
 1.8åŠæ›´é«˜ç‰ˆæœ¬ä¸­çš„è‡ªæ‰˜ç®¡åŠŸèƒ½æœ‰ä¸€äº›é‡è¦é™åˆ¶ã€‚ ç‰¹åˆ«æ˜¯ï¼Œè‡ªæ‰˜ç®¡é›†ç¾¤åœ¨æ²¡æœ‰äººå·¥å¹²é¢„çš„æƒ…å†µä¸‹_æ— æ³•ä»æ§åˆ¶å¹³é¢èŠ‚ç‚¹çš„é‡æ–°å¯åŠ¨ä¸­æ¢å¤_ ã€‚   é»˜è®¤æƒ…å†µä¸‹ï¼Œè‡ªæ‰˜ç®¡çš„æ§åˆ¶å¹³é¢ Pod ä¾èµ–äºä» hostPath å·åŠ è½½çš„å‡­æ®ã€‚ é™¤åˆå§‹åˆ›å»ºå¤–ï¼Œè¿™äº›å‡­æ®ä¸ç”± kubeadm ç®¡ç†ã€‚   æ§åˆ¶å¹³é¢çš„è‡ªæ‰˜ç®¡éƒ¨åˆ†ä¸åŒ…æ‹¬ etcdï¼Œåè€…ä»ä½œä¸ºé™æ€ Pod è¿è¡Œã€‚  å¤„ç† è‡ªæ‰˜ç®¡å¼•å¯¼è¿‡ç¨‹è®°å½•åœ¨ kubeadm è®¾è®¡æ–‡æ¡£ ä¸­ã€‚
æ€»è€Œè¨€ä¹‹ï¼Œkubeadm alpha è‡ªæ‰˜ç®¡ çš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</description>
    </item>
    
    <item>
      <title>æŒ‡å®šåº”ç”¨ç¨‹åºçš„ä¸­æ–­é¢„ç®—ï¼ˆDisruption Budgetï¼‰</title>
      <link>https://lijun.in/tasks/run-application/configure-pdb/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/run-application/configure-pdb/</guid>
      <description>æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•é™åˆ¶åº”ç”¨ç¨‹åºçš„å¹¶å‘ä¸­æ–­æ•°é‡ï¼Œåœ¨å…è®¸é›†ç¾¤ç®¡ç†å‘˜ç®¡ç†é›†ç¾¤èŠ‚ç‚¹çš„åŒæ—¶ä¿è¯é«˜å¯ç”¨ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  ç”¨æˆ·æ˜¯ Kubernetes é›†ç¾¤ä¸­æœ‰é«˜å¯ç”¨éœ€æ±‚çš„åº”ç”¨çš„æ‰€æœ‰è€…ã€‚   ç”¨æˆ·åº”äº†è§£å¦‚ä½•éƒ¨ç½² æ— çŠ¶æ€åº”ç”¨ å’Œ/æˆ– æœ‰çŠ¶æ€åº”ç”¨ã€‚   ç”¨æˆ·åº”å½“å·²ç»é˜…è¯»è¿‡å…³äº Pod ä¸­æ–­ çš„æ–‡æ¡£ã€‚   ç”¨æˆ·åº”å½“ä¸é›†ç¾¤æ‰€æœ‰è€…æˆ–æœåŠ¡æä¾›è€…ç¡®è®¤å…¶éµä» Pod ä¸­æ–­é¢„ç®—ï¼ˆPod Disruption Budgetsï¼‰çš„è§„åˆ™ã€‚  ç”¨ PodDisruptionBudget æ¥ä¿æŠ¤åº”ç”¨  ç¡®å®šæƒ³è¦ä½¿ç”¨ PodDisruptionBudget (PDB) æ¥ä¿æŠ¤çš„åº”ç”¨ã€‚ è€ƒè™‘åº”ç”¨å¯¹ä¸­æ–­çš„ååº”ã€‚ ä»¥ YAML æ–‡ä»¶å½¢å¼å®šä¹‰ PDB ã€‚ é€šè¿‡ YAML æ–‡ä»¶åˆ›å»º PDB å¯¹è±¡ã€‚  ç¡®å®šè¦ä¿æŠ¤çš„åº”ç”¨ ç”¨æˆ·æƒ³è¦ä¿æŠ¤é€šè¿‡å†…ç½®çš„ Kubernetes æ§åˆ¶å™¨æŒ‡å®šçš„åº”ç”¨ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼š
 Deployment ReplicationController ReplicaSet StatefulSet  åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨æ§åˆ¶å™¨çš„ .spec.selector å­—æ®µä¸­åšè®°å½•ï¼Œå¹¶åœ¨ PDB çš„ .spec.selector å­—æ®µä¸­åŠ å…¥åŒæ ·çš„é€‰æ‹©å™¨ã€‚
ç”¨æˆ·ä¹Ÿå¯ä»¥ç”¨ PDB æ¥ä¿æŠ¤ä¸å—ä¸Šè¿°æ§åˆ¶å™¨æ§åˆ¶çš„ podï¼Œæˆ–ä»»æ„ç»„ï¼ˆarbitrary groupsï¼‰çš„ podï¼Œ ä½†æ˜¯æ­£å¦‚ ä»»æ„æ§åˆ¶å™¨å’Œé€‰æ‹©å™¨ ä¸­æè¿°çš„ï¼Œè¿™é‡Œå­˜åœ¨ä¸€äº›é™åˆ¶ã€‚</description>
    </item>
    
    <item>
      <title>é…ç½®å­˜æ´»ã€å°±ç»ªå’Œå¯åŠ¨æ¢æµ‹å™¨</title>
      <link>https://lijun.in/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/</guid>
      <description>è¿™ç¯‡æ–‡ç« ä»‹ç»å¦‚ä½•ç»™å®¹å™¨é…ç½®å­˜æ´»ã€å°±ç»ªå’Œå¯åŠ¨æ¢æµ‹å™¨ã€‚
kubelet ä½¿ç”¨å­˜æ´»æ¢æµ‹å™¨æ¥çŸ¥é“ä»€ä¹ˆæ—¶å€™è¦é‡å¯å®¹å™¨ã€‚ä¾‹å¦‚ï¼Œå­˜æ´»æ¢æµ‹å™¨å¯ä»¥æ•æ‰åˆ°æ­»é”ï¼ˆåº”ç”¨ç¨‹åºåœ¨è¿è¡Œï¼Œä½†æ˜¯æ— æ³•ç»§ç»­æ‰§è¡Œåé¢çš„æ­¥éª¤ï¼‰ã€‚è¿™æ ·çš„æƒ…å†µä¸‹é‡å¯å®¹å™¨æœ‰åŠ©äºè®©åº”ç”¨ç¨‹åºåœ¨æœ‰é—®é¢˜çš„æƒ…å†µä¸‹æ›´å¯ç”¨ã€‚
kubelet ä½¿ç”¨å°±ç»ªæ¢æµ‹å™¨å¯ä»¥çŸ¥é“å®¹å™¨ä»€ä¹ˆæ—¶å€™å‡†å¤‡å¥½äº†å¹¶å¯ä»¥å¼€å§‹æ¥å—è¯·æ±‚æµé‡ï¼Œ å½“ä¸€ä¸ª Pod å†…çš„æ‰€æœ‰å®¹å™¨éƒ½å‡†å¤‡å¥½äº†ï¼Œæ‰èƒ½æŠŠè¿™ä¸ª Pod çœ‹ä½œå°±ç»ªäº†ã€‚è¿™ç§ä¿¡å·çš„ä¸€ä¸ªç”¨é€”å°±æ˜¯æ§åˆ¶å“ªä¸ª Pod ä½œä¸º Service çš„åç«¯ã€‚åœ¨ Pod è¿˜æ²¡æœ‰å‡†å¤‡å¥½çš„æ—¶å€™ï¼Œä¼šä» Service çš„è´Ÿè½½å‡è¡¡å™¨ä¸­è¢«å‰”é™¤çš„ã€‚
kubelet ä½¿ç”¨å¯åŠ¨æ¢æµ‹å™¨å¯ä»¥çŸ¥é“åº”ç”¨ç¨‹åºå®¹å™¨ä»€ä¹ˆæ—¶å€™å¯åŠ¨äº†ã€‚å¦‚æœé…ç½®äº†è¿™ç±»æ¢æµ‹å™¨ï¼Œå°±å¯ä»¥æ§åˆ¶å®¹å™¨åœ¨å¯åŠ¨æˆåŠŸåå†è¿›è¡Œå­˜æ´»æ€§å’Œå°±ç»ªæ£€æŸ¥ï¼Œç¡®ä¿è¿™äº›å­˜æ´»ã€å°±ç»ªæ¢æµ‹å™¨ä¸ä¼šå½±å“åº”ç”¨ç¨‹åºçš„å¯åŠ¨ã€‚è¿™å¯ä»¥ç”¨äºå¯¹æ…¢å¯åŠ¨å®¹å™¨è¿›è¡Œå­˜æ´»æ€§æ£€æµ‹ï¼Œé¿å…å®ƒä»¬åœ¨å¯åŠ¨è¿è¡Œä¹‹å‰å°±è¢«æ€æ‰ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å®šä¹‰å­˜æ´»å‘½ä»¤ è®¸å¤šé•¿æ—¶é—´è¿è¡Œçš„åº”ç”¨ç¨‹åºæœ€ç»ˆä¼šè¿‡æ¸¡åˆ°æ–­å¼€çš„çŠ¶æ€ï¼Œé™¤éé‡æ–°å¯åŠ¨ï¼Œå¦åˆ™æ— æ³•æ¢å¤ã€‚Kubernetes æä¾›äº†å­˜æ´»æ¢æµ‹å™¨æ¥å‘ç°å¹¶è¡¥æ•‘è¿™ç§æƒ…å†µã€‚
åœ¨è¿™ç¯‡ç»ƒä¹ ä¸­ï¼Œä¼šåˆ›å»ºä¸€ä¸ª Podï¼Œå…¶ä¸­è¿è¡Œä¸€ä¸ªåŸºäº k8s.gcr.io/busybox é•œåƒçš„å®¹å™¨ã€‚ä¸‹é¢æ˜¯è¿™ä¸ª Pod çš„é…ç½®æ–‡ä»¶ã€‚
. codenew file=&amp;quot;pods/probe/exec-liveness.yaml&amp;rdquo; &amp;gt;}}
åœ¨è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥çœ‹åˆ° Pod ä¸­åªæœ‰ä¸€ä¸ªå®¹å™¨ã€‚periodSeconds å­—æ®µæŒ‡å®šäº† kubelet åº”è¯¥æ¯ 5 ç§’æ‰§è¡Œä¸€æ¬¡å­˜æ´»æ¢æµ‹ã€‚initialDelaySeconds å­—æ®µå‘Šè¯‰ kubelet åœ¨æ‰§è¡Œç¬¬ä¸€æ¬¡æ¢æµ‹å‰åº”è¯¥ç­‰å¾… 5 ç§’ã€‚kubelet åœ¨å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤ cat /tmp/healthy æ¥è¿›è¡Œæ¢æµ‹ã€‚å¦‚æœå‘½ä»¤æ‰§è¡ŒæˆåŠŸå¹¶ä¸”è¿”å›å€¼ä¸º 0ï¼Œkubelet å°±ä¼šè®¤ä¸ºè¿™ä¸ªå®¹å™¨æ˜¯å¥åº·å­˜æ´»çš„ã€‚å¦‚æœè¿™ä¸ªå‘½ä»¤è¿”å›é 0 å€¼ï¼Œkubelet ä¼šæ€æ­»è¿™ä¸ªå®¹å™¨å¹¶é‡æ–°å¯åŠ¨å®ƒã€‚
å½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œæ‰§è¡Œå¦‚ä¸‹çš„å‘½ä»¤ï¼š
/bin/sh -c &amp;#34;touch /tmp/healthy; sleep 30; rm -rf /tmp/healthy; sleep 600&amp;#34; è¿™ä¸ªå®¹å™¨ç”Ÿå‘½çš„å‰ 30 ç§’ï¼Œ /tmp/healthy æ–‡ä»¶æ˜¯å­˜åœ¨çš„ã€‚æ‰€ä»¥åœ¨è¿™æœ€å¼€å§‹çš„ 30 ç§’å†…ï¼Œæ‰§è¡Œå‘½ä»¤ cat /tmp/healthy ä¼šè¿”å›æˆåŠŸç ã€‚30 ç§’ä¹‹åï¼Œæ‰§è¡Œå‘½ä»¤ cat /tmp/healthy å°±ä¼šè¿”å›å¤±è´¥ç ã€‚</description>
    </item>
    
    <item>
      <title>ä¸ºé›†ç¾¤é…ç½® DNS</title>
      <link>https://lijun.in/tasks/access-application-cluster/configure-dns-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/configure-dns-cluster/</guid>
      <description>Kubernetes æä¾› DNS é›†ç¾¤æ’ä»¶ï¼Œå¤§å¤šæ•°æ”¯æŒçš„ç¯å¢ƒé»˜è®¤æƒ…å†µä¸‹éƒ½ä¼šå¯ç”¨ã€‚
æœ‰å…³å¦‚ä½•ä¸º Kubernetes é›†ç¾¤é…ç½® DNS çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… Kubernetes DNS æ’ä»¶ç¤ºä¾‹.</description>
    </item>
    
    <item>
      <title>å°† Pod åˆ†é…ç»™èŠ‚ç‚¹</title>
      <link>https://lijun.in/tasks/configure-pod-container/assign-pods-nodes/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/assign-pods-nodes/</guid>
      <description>æ­¤é¡µé¢æ˜¾ç¤ºå¦‚ä½•å°† Kubernetes Pod åˆ†é…ç»™ Kubernetes é›†ç¾¤ä¸­çš„ç‰¹å®šèŠ‚ç‚¹ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ç»™èŠ‚ç‚¹æ·»åŠ æ ‡ç­¾   åˆ—å‡ºé›†ç¾¤ä¸­çš„èŠ‚ç‚¹
 kubectl get nodes  è¾“å‡ºç±»ä¼¼å¦‚ä¸‹ï¼š
 NAME STATUS AGE VERSION worker0 Ready 1d v1.6.0+fff5156 worker1 Ready 1d v1.6.0+fff5156 worker2 Ready 1d v1.6.0+fff5156      é€‰æ‹©å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸ºå®ƒæ·»åŠ æ ‡ç­¾ï¼š
 kubectl label nodes &amp;lt;your-node-name&amp;gt; disktype=ssd  &amp;lt;your-node-name&amp;gt; æ˜¯ä½ é€‰æ‹©çš„èŠ‚ç‚¹çš„åç§°ã€‚
    éªŒè¯ä½ é€‰æ‹©çš„èŠ‚ç‚¹æ˜¯å¦æœ‰ disktype=ssd æ ‡ç­¾ï¼š
 kubectl get nodes --show-labels  è¾“å‡ºç±»ä¼¼å¦‚ä¸‹ï¼š</description>
    </item>
    
    <item>
      <title>å°† CoreDNS è®¾ç½®ä¸ºè”é‚¦é›†ç¾¤çš„ DNS æä¾›è€…</title>
      <link>https://lijun.in/tasks/federation/set-up-coredns-provider-federation/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/federation/set-up-coredns-provider-federation/</guid>
      <description>. deprecationfilewarning &amp;gt;}} . include &amp;ldquo;federation-deprecation-warning-note.md&amp;rdquo; &amp;gt;}} . /deprecationfilewarning &amp;gt;}}
æ­¤é¡µé¢æ˜¾ç¤ºå¦‚ä½•é…ç½®å’Œéƒ¨ç½² CoreDNSï¼Œå°†å…¶ç”¨ä½œè”é‚¦é›†ç¾¤çš„ DNS æä¾›è€…
. heading &amp;ldquo;objectives&amp;rdquo; %}}  é…ç½®å’Œéƒ¨ç½² CoreDNS æœåŠ¡å™¨ ä½¿ç”¨ CoreDNS ä½œä¸º dns æä¾›è€…è®¾ç½®è”é‚¦ åœ¨ nameserver æŸ¥æ‰¾é“¾ä¸­è®¾ç½® CoreDNS æœåŠ¡å™¨  . heading &amp;ldquo;prerequisites&amp;rdquo; %}}  ä½ éœ€è¦æœ‰ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Kubernetes é›†ç¾¤ï¼ˆä½œä¸ºä¸»æœºé›†ç¾¤å¼•ç”¨ï¼‰ã€‚è¯·å‚é˜…å…¥é—¨æŒ‡å—ï¼Œäº†è§£å¹³å°çš„å®‰è£…è¯´æ˜ã€‚ å¿…é¡»åœ¨è”é‚¦çš„é›†ç¾¤æˆå‘˜ä¸­æ”¯æŒ LoadBalancer æœåŠ¡ï¼Œç”¨æ¥æ”¯æŒè·¨è”é‚¦é›†ç¾¤çš„ CoreDNS æœåŠ¡å‘ç°ã€‚  éƒ¨ç½² CoreDNS å’Œ etcd å›¾è¡¨ CoreDNS å¯ä»¥éƒ¨ç½²åœ¨å„ç§é…ç½®ä¸­ã€‚ä¸‹é¢è§£é‡Šçš„æ˜¯ä¸€ä¸ªå‚è€ƒï¼Œå¯ä»¥æ ¹æ®å¹³å°å’Œè”é‚¦é›†ç¾¤çš„éœ€è¦è¿›è¡Œè°ƒæ•´ã€‚
ä¸ºäº†éƒ¨ç½² CoreDNSï¼Œæˆ‘ä»¬å°†åˆ©ç”¨å›¾è¡¨ã€‚ CoreDNS å°†éƒ¨ç½² etcd ä½œä¸ºåç«¯ï¼Œå¹¶ä¸”åº”è¯¥é¢„å…ˆå®‰è£…ã€‚etcd ä¹Ÿå¯ä»¥ä½¿ç”¨å›¾è¡¨è¿›è¡Œéƒ¨ç½²ã€‚ä¸‹é¢æ˜¾ç¤ºäº†éƒ¨ç½² etcd çš„è¯´æ˜ã€‚
helm install --namespace my-namespace --name etcd-operator stable/etcd-operator helm upgrade --namespace my-namespace --set cluster.</description>
    </item>
    
    <item>
      <title>é…ç½® Pod åˆå§‹åŒ–</title>
      <link>https://lijun.in/tasks/configure-pod-container/configure-pod-initialization/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/configure-pod-initialization/</guid>
      <description>æœ¬æ–‡ä»‹ç»åœ¨åº”ç”¨å®¹å™¨è¿è¡Œå‰ï¼Œæ€æ ·åˆ©ç”¨ Init å®¹å™¨åˆå§‹åŒ– Podã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åˆ›å»ºä¸€ä¸ªåŒ…å« Init å®¹å™¨çš„ Pod æœ¬ä¾‹ä¸­æ‚¨å°†åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸€ä¸ªåº”ç”¨å®¹å™¨å’Œä¸€ä¸ª Init å®¹å™¨çš„ Podã€‚Init å®¹å™¨åœ¨åº”ç”¨å®¹å™¨å¯åŠ¨å‰è¿è¡Œå®Œæˆã€‚
ä¸‹é¢æ˜¯ Pod çš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;pods/init-containers.yaml&amp;rdquo; &amp;gt;}}
é…ç½®æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°åº”ç”¨å®¹å™¨å’Œ Init å®¹å™¨å…±äº«äº†ä¸€ä¸ªå·ã€‚
Init å®¹å™¨å°†å…±äº«å·æŒ‚è½½åˆ°äº† /work-dir ç›®å½•ï¼Œåº”ç”¨å®¹å™¨å°†å…±äº«å·æŒ‚è½½åˆ°äº† /usr/share/nginx/html ç›®å½•ã€‚ Init å®¹å™¨æ‰§è¡Œå®Œä¸‹é¢çš„å‘½ä»¤å°±ç»ˆæ­¢ï¼š
wget -O /work-dir/index.html http://kubernetes.io  è¯·æ³¨æ„ Init å®¹å™¨åœ¨ nginx æœåŠ¡å™¨çš„æ ¹ç›®å½•å†™å…¥ index.htmlã€‚
åˆ›å»º Podï¼š
kubectl create -f https://k8s.io/examples/pods/init-containers.yaml  æ£€æŸ¥ nginx å®¹å™¨è¿è¡Œæ­£å¸¸ï¼š
kubectl get pod init-demo  ç»“æœè¡¨æ˜ nginx å®¹å™¨è¿è¡Œæ­£å¸¸ï¼š</description>
    </item>
    
    <item>
      <title>ä¸ºå®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶è®¾ç½®å¤„ç†å‡½æ•°</title>
      <link>https://lijun.in/tasks/configure-pod-container/attach-handler-lifecycle-event/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/attach-handler-lifecycle-event/</guid>
      <description>è¿™ä¸ªé¡µé¢å°†æ¼”ç¤ºå¦‚ä½•ä¸ºå®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶æŒ‚æ¥å¤„ç†å‡½æ•°ã€‚Kubernetes æ”¯æŒ postStart å’Œ preStop äº‹ä»¶ã€‚ å½“ä¸€ä¸ªå®¹å™¨å¯åŠ¨åï¼ŒKubernetes å°†ç«‹å³å‘é€ postStart äº‹ä»¶ï¼›åœ¨å®¹å™¨è¢«ç»ˆç»“ä¹‹å‰ï¼Œ Kubernetes å°†å‘é€ä¸€ä¸ª preStop äº‹ä»¶ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å®šä¹‰ postStart å’Œ preStop å¤„ç†å‡½æ•° åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œä½ å°†åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸€ä¸ªå®¹å™¨çš„ Podï¼Œè¯¥å®¹å™¨ä¸º postStart å’Œ preStop äº‹ä»¶æä¾›å¯¹åº”çš„å¤„ç†å‡½æ•°ã€‚
ä¸‹é¢æ˜¯å¯¹åº” Pod çš„é…ç½®æ–‡ä»¶
. codenew file=&amp;quot;pods/lifecycle-events.yaml&amp;rdquo; &amp;gt;}}
åœ¨ä¸Šè¿°é…ç½®æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ° postStart å‘½ä»¤åœ¨å®¹å™¨çš„ /usr/share ç›®å½•ä¸‹å†™å…¥æ–‡ä»¶ messageã€‚ å‘½ä»¤ preStop è´Ÿè´£ä¼˜é›…åœ°ç»ˆæ­¢ nginx æœåŠ¡ã€‚å½“å› ä¸ºå¤±æ•ˆè€Œå¯¼è‡´å®¹å™¨ç»ˆæ­¢æ—¶ï¼Œè¿™ä¸€å¤„ç†æ–¹å¼å¾ˆæœ‰ç”¨ã€‚```
åˆ›å»º Podï¼š
kubectl apply -f https://k8s.io/examples/pods/lifecycle-events.yaml  éªŒè¯ Pod ä¸­çš„å®¹å™¨å·²ç»è¿è¡Œï¼š
kubectl get pod lifecycle-demo  ä½¿ç”¨ shell è¿æ¥åˆ°ä½ çš„ Pod é‡Œçš„å®¹å™¨ï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨è”åˆæœåŠ¡æ¥å®ç°è·¨é›†ç¾¤çš„æœåŠ¡å‘ç°</title>
      <link>https://lijun.in/tasks/federation/federation-service-discovery/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/federation/federation-service-discovery/</guid>
      <description>. deprecationfilewarning &amp;gt;}} . include &amp;ldquo;federation-deprecation-warning-note.md&amp;rdquo; &amp;gt;}} . /deprecationfilewarning &amp;gt;}}
æœ¬æŒ‡å—è¯´æ˜äº†å¦‚ä½•ä½¿ç”¨ Kubernetes è”åˆæœåŠ¡è·¨å¤šä¸ª Kubernetes é›†ç¾¤éƒ¨ç½²é€šç”¨æœåŠ¡ã€‚è¿™æ ·å¯ä»¥è½»æ¾å®ç° Kubernetes åº”ç”¨ç¨‹åºçš„è·¨é›†ç¾¤æœåŠ¡å‘ç°å’Œå¯ç”¨åŒºå®¹é”™ã€‚
è”åˆæœåŠ¡çš„åˆ›å»ºä¸ä¼ ç»ŸæœåŠ¡å‡ ä¹ç›¸åŒ Kubernetes Services å³é€šè¿‡ API è°ƒç”¨æ¥æŒ‡å®šæ‰€éœ€çš„æœåŠ¡å±æ€§ã€‚å¯¹äºè”åˆæœåŠ¡ï¼Œæ­¤ API è°ƒç”¨å®šå‘åˆ°è”åˆèº«ä»½éªŒè¯ API æ¥å…¥ç‚¹ï¼Œè€Œä¸æ˜¯ Kubernetes é›†ç¾¤ API æ¥å…¥ç‚¹ã€‚è”åˆæœåŠ¡çš„ API ä¸ä¼ ç»Ÿ Kubernetes æœåŠ¡çš„ API æ˜¯ 100% å…¼å®¹çš„ã€‚
åˆ›å»ºåï¼Œè”åˆæœåŠ¡ä¼šè‡ªåŠ¨:
 åœ¨åŸºç¡€é›†ç¾¤è”åˆçš„æ¯ä¸ªé›†ç¾¤ä¸­åˆ›å»ºåŒ¹é…çš„ Kubernetes æœåŠ¡, ç›‘è§†é‚£äº›æœåŠ¡ &amp;ldquo;åˆ†ç‰‡&amp;rdquo;(åŠå…¶é©»ç•™çš„é›†ç¾¤)çš„è¿è¡ŒçŠ¶å†µ,ä»¥åŠ åœ¨å…¬å…± DNS æä¾›å•†(ä¾‹å¦‚ Google Cloud DNS æˆ– AWS Route 53)ä¸­ç®¡ç†ä¸€ç»„ DNS è®°å½•,å³ä½¿åœ¨é›†ç¾¤å¯ç”¨åŒºåŸŸä¸­æ–­çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½ç¡®ä¿æ‚¨è”åˆæœåŠ¡çš„å®¢æˆ·ç«¯å§‹ç»ˆå¯ä»¥æ— ç¼åœ°å®šä½åˆé€‚çš„å¥åº·æœåŠ¡æ¥å…¥ç‚¹ã€‚  å¦‚æœå­˜åœ¨å¥åº·çš„åˆ†ç‰‡ï¼Œè”åˆ Kubernetes é›†ç¾¤(å³ Pods )ä¸­çš„å®¢æˆ·ç«¯å°†è‡ªåŠ¨åœ¨å…¶ä¸­æ‰¾åˆ°è”åˆæœåŠ¡çš„æœ¬åœ°åˆ†ç‰‡é›†ç¾¤æˆ–è€…é›†ç¾¤ä¸­æœ€æ¥è¿‘çš„å¥åº·åˆ†ç‰‡;å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨æœ€æ¥è¿‘çš„å…¶ä»–é›†ç¾¤çš„å¥åº·åˆ†ç‰‡ã€‚
. toc &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} .</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ ConfigMap é…ç½® Pod</title>
      <link>https://lijun.in/tasks/configure-pod-container/configure-pod-configmap/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/configure-pod-configmap/</guid>
      <description>ConfigMap å…è®¸æ‚¨å°†é…ç½®æ–‡ä»¶ä¸é•œåƒæ–‡ä»¶åˆ†ç¦»ï¼Œä»¥ä½¿å®¹å™¨åŒ–çš„åº”ç”¨ç¨‹åºå…·æœ‰å¯ç§»æ¤æ€§ã€‚è¯¥é¡µé¢æä¾›äº†ä¸€ç³»åˆ—ä½¿ç”¨ç¤ºä¾‹ï¼Œè¿™äº›ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨å­˜å‚¨åœ¨ ConfigMap ä¸­çš„æ•°æ®åˆ›å»º ConfigMap å’Œé…ç½® Podã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åˆ›å»º ConfigMap æ‚¨å¯ä»¥åœ¨ kustomization.yaml ä¸­ä½¿ç”¨ kubectl create configmap æˆ– ConfigMap ç”Ÿæˆå™¨æ¥åˆ›å»ºConfigMapã€‚æ³¨æ„ï¼Œä» 1.14 ç‰ˆæœ¬å¼€å§‹ï¼Œ kubectl å¼€å§‹æ”¯æŒ kustomization.yamlã€‚
ä½¿ç”¨ kubectl åˆ›å»º ConfigMap åœ¨ç›®å½•, æ–‡ä»¶, æˆ–è€…æ–‡å­—å€¼ä¸­ä½¿ç”¨ kubectl create configmap å‘½ä»¤åˆ›å»ºconfigmapï¼š
kubectl create configmap &amp;lt;map-name&amp;gt; &amp;lt;data-source&amp;gt; å…¶ä¸­ï¼Œ &amp;lt;map-name&amp;gt; æ˜¯è¦åˆ†é…ç»™ ConfigMap çš„åç§°ï¼Œ&amp;lt;data-source&amp;gt; æ˜¯è¦ä»ä¸­æå–æ•°æ®çš„ç›®å½•ï¼Œæ–‡ä»¶æˆ–è€…æ–‡å­—å€¼ã€‚
æ•°æ®æºå¯¹åº”äº ConfigMap ä¸­çš„ key-value (é”®å€¼å¯¹)
 key = æ‚¨åœ¨å‘½ä»¤è¡Œä¸Šæä¾›çš„æ–‡ä»¶åæˆ–è€…å¯†é’¥ value = æ‚¨åœ¨å‘½ä»¤è¡Œä¸Šæä¾›çš„æ–‡ä»¶å†…å®¹æˆ–è€…æ–‡å­—å€¼  æ‚¨å¯ä»¥ä½¿ç”¨kubectl describeæˆ–è€… kubectl getæ£€ç´¢æœ‰å…³ ConfigMap çš„ä¿¡æ¯ã€‚</description>
    </item>
    
    <item>
      <title>åœ¨ Pod ä¸­çš„å®¹å™¨ä¹‹é—´å…±äº«è¿›ç¨‹å‘½åç©ºé—´</title>
      <link>https://lijun.in/tasks/configure-pod-container/share-process-namespace/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/share-process-namespace/</guid>
      <description>. feature-state state=&amp;quot;stable&amp;rdquo; for_k8s_version=&amp;quot;v1.17&amp;rdquo; &amp;gt;}}
æ­¤é¡µé¢å±•ç¤ºå¦‚ä½•ä¸º pod é…ç½®è¿›ç¨‹å‘½åç©ºé—´å…±äº«ã€‚ å½“å¯ç”¨è¿›ç¨‹å‘½åç©ºé—´å…±äº«æ—¶ï¼Œå®¹å™¨ä¸­çš„è¿›ç¨‹å¯¹è¯¥ pod ä¸­çš„æ‰€æœ‰å…¶ä»–å®¹å™¨éƒ½æ˜¯å¯è§çš„ã€‚
æ‚¨å¯ä»¥ä½¿ç”¨æ­¤åŠŸèƒ½æ¥é…ç½®åä½œå®¹å™¨ï¼Œæ¯”å¦‚æ—¥å¿—å¤„ç† sidecar å®¹å™¨ï¼Œæˆ–è€…å¯¹é‚£äº›ä¸åŒ…å«è¯¸å¦‚ shell ç­‰è°ƒè¯•å®ç”¨å·¥å…·çš„é•œåƒè¿›è¡Œæ•…éšœæ’æŸ¥ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
é…ç½® Pod è¿›ç¨‹å‘½åç©ºé—´å…±äº«ä½¿ç”¨ v1.PodSpec ä¸­çš„ ShareProcessNamespace å­—æ®µå¯ç”¨ã€‚ä¾‹å¦‚ï¼š
. codenew file=&amp;quot;pods/share-process-namespace.yaml&amp;rdquo; &amp;gt;}}
  åœ¨é›†ç¾¤ä¸­åˆ›å»º nginx podï¼š
kubectl apply -f https://k8s.io/examples/pods/share-process-namespace.yaml   è·å–å®¹å™¨ shellï¼Œæ‰§è¡Œ psï¼š
kubectl attach -it nginx -c shell å¦‚æœæ²¡æœ‰çœ‹åˆ°å‘½ä»¤æç¤ºç¬¦ï¼Œè¯·æŒ‰ enter å›è½¦é”®ã€‚
/ # ps ax PID USER TIME COMMAND 1 root 0:00 /pause 8 root 0:00 nginx: master process nginx -g daemon off; 14 101 0:00 nginx: worker process 15 root 0:00 sh 21 root 0:00 ps ax   æ‚¨å¯ä»¥åœ¨å…¶ä»–å®¹å™¨ä¸­å¯¹è¿›ç¨‹å‘å‡ºä¿¡å·ã€‚ä¾‹å¦‚ï¼Œå‘é€ SIGHUP åˆ° nginx ä»¥é‡å¯å·¥ä½œè¿›ç¨‹ã€‚è¿™éœ€è¦ SYS_PTRACE åŠŸèƒ½ã€‚</description>
    </item>
    
    <item>
      <title>åˆ›å»ºé™æ€ Pod</title>
      <link>https://lijun.in/tasks/configure-pod-container/static-pod/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/static-pod/</guid>
      <description>é™æ€ Pod åœ¨æŒ‡å®šçš„èŠ‚ç‚¹ä¸Šç”± kubelet å®ˆæŠ¤è¿›ç¨‹ç›´æ¥ç®¡ç†ï¼Œä¸éœ€è¦ . glossary_tooltip text=&amp;quot;API æœåŠ¡&amp;rdquo; term_id=&amp;quot;kube-apiserver&amp;rdquo; &amp;gt;}} ç›‘ç®¡ã€‚ ä¸åƒ Pod æ˜¯ç”±æ§åˆ¶é¢ç®¡ç†çš„ï¼ˆä¾‹å¦‚ï¼Œ. glossary_tooltip text=&amp;quot;Deployment&amp;rdquo; term_id=&amp;quot;deployment&amp;rdquo; &amp;gt;}}ï¼‰ï¼›ç›¸å kubelet ç›‘è§†æ¯ä¸ªé™æ€ Podï¼ˆåœ¨å®ƒå´©æºƒä¹‹åé‡æ–°å¯åŠ¨ï¼‰ã€‚
é™æ€ Pod æ°¸è¿œéƒ½ä¼šç»‘å®šåˆ°ä¸€ä¸ªæŒ‡å®šèŠ‚ç‚¹ä¸Šçš„ . glossary_tooltip term_id=&amp;quot;kubelet&amp;rdquo; &amp;gt;}}ã€‚
kubelet ä¼šå°è¯•é€šè¿‡ Kubernetes API æœåŠ¡å™¨ä¸ºæ¯ä¸ªé™æ€ Pod è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª . glossary_tooltip text=&amp;quot;é•œåƒ Pod&amp;rdquo; term_id=&amp;quot;mirror-pod&amp;rdquo; &amp;gt;}}ã€‚ è¿™æ„å‘³ç€èŠ‚ç‚¹ä¸Šè¿è¡Œçš„é™æ€ Pod å¯¹ API æœåŠ¡æ¥è¯´æ˜¯ä¸å¯è§çš„ï¼Œä½†æ˜¯ä¸èƒ½é€šè¿‡ API æœåŠ¡å™¨æ¥æ§åˆ¶ã€‚
. note &amp;gt;}} å¦‚æœä½ åœ¨è¿è¡Œä¸€ä¸ª Kubernetes é›†ç¾¤ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½è¿è¡Œä¸€ä¸ªé™æ€ Podï¼Œå°±å¯èƒ½éœ€è¦è€ƒè™‘ä½¿ç”¨ . glossary_tooltip text=&amp;quot;DaemonSet&amp;rdquo; term_id=&amp;quot;daemonset&amp;rdquo; &amp;gt;}} æ›¿ä»£è¿™ç§æ–¹å¼ã€‚ . /note &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.</description>
    </item>
    
    <item>
      <title>å°† Docker Compose æ–‡ä»¶è½¬æ¢ä¸º Kubernetes èµ„æº</title>
      <link>https://lijun.in/tasks/configure-pod-container/translate-compose-kubernetes/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/configure-pod-container/translate-compose-kubernetes/</guid>
      <description>Kompose æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæ˜¯ä¸ªè½¬æ¢å·¥å…·ï¼Œå¯å°† composeï¼ˆå³ Docker Composeï¼‰æ‰€ç»„è£…çš„æ‰€æœ‰å†…å®¹è½¬æ¢æˆå®¹å™¨ç¼–æ’å™¨ï¼ˆKubernetes æˆ– OpenShiftï¼‰å¯è¯†åˆ«çš„å½¢å¼ã€‚
æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ Kompose å®˜ç½‘ http://kompose.ioã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å®‰è£… Kompose æˆ‘ä»¬æœ‰å¾ˆå¤šç§æ–¹å¼å®‰è£… Komposeã€‚é¦–é€‰æ–¹å¼æ˜¯ä»æœ€æ–°çš„ GitHub å‘å¸ƒé¡µé¢ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶ã€‚
GitHub å‘å¸ƒç‰ˆæœ¬ Kompose é€šè¿‡ GitHub å‘å¸ƒç‰ˆæœ¬ï¼Œå‘å¸ƒå‘¨æœŸä¸ºä¸‰æ˜ŸæœŸã€‚æ‚¨å¯ä»¥åœ¨GitHub å‘å¸ƒé¡µé¢ä¸Šçœ‹åˆ°æ‰€æœ‰å½“å‰ç‰ˆæœ¬ã€‚
# Linux curl -L https://github.com/kubernetes/kompose/releases/download/v1.16.0/kompose-linux-amd64 -o kompose # macOS curl -L https://github.com/kubernetes/kompose/releases/download/v1.16.0/kompose-darwin-amd64 -o kompose # Windows curl -L https://github.com/kubernetes/kompose/releases/download/v1.16.0/kompose-windows-amd64.exe -o kompose.exe chmod +x kompose sudo mv ./kompose /usr/local/bin/kompose æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä¸‹è½½ tarballã€‚
Go ç”¨ go get å‘½ä»¤ä»ä¸»åˆ†æ”¯æ‹‰å–æœ€æ–°çš„å¼€å‘å˜æ›´çš„æ–¹æ³•å®‰è£… Komposeã€‚</description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm/</guid>
      <description>æ‘˜è¦ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ KUBEADM â”‚ â”‚ è½»æ¾åˆ›å»ºä¸€ä¸ªå®‰å…¨çš„ Kubernetes é›†ç¾¤ â”‚ â”‚ â”‚ â”‚ ç»™æˆ‘ä»¬åé¦ˆæ„è§çš„åœ°å€ï¼š â”‚ â”‚ https://github.com/kubernetes/kubeadm/issues â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ç”¨é€”ç¤ºä¾‹ï¼š
åˆ›å»ºä¸€ä¸ªæœ‰ä¸¤å°æœºå™¨çš„é›†ç¾¤ï¼ŒåŒ…å«ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼ˆç”¨æ¥æ§åˆ¶é›†ç¾¤ï¼‰ï¼Œå’Œä¸€ä¸ªå·¥ä½œèŠ‚ç‚¹ï¼ˆè¿è¡Œæ‚¨çš„å·¥ä½œè´Ÿè½½ï¼Œåƒ Pod å’Œ Deploymentï¼‰ã€‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ åœ¨ç¬¬ä¸€å°æœºå™¨ä¸Šï¼š â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ control-plane# kubeadm init â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ åœ¨ç¬¬äºŒå°æœºå™¨ä¸Šï¼š â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ worker# kubeadm join &amp;amp;lt;arguments-returned-from-init&amp;amp;gt;â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ æ‚¨å¯ä»¥é‡å¤ç¬¬äºŒæ­¥ï¼Œå‘é›†ç¾¤æ·»åŠ æ›´å¤šæœºå™¨ã€‚
é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha/</guid>
      <description>æ¦‚è¦ kubeadm å®éªŒå­å‘½ä»¤
é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_certificate-key/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_certificate-key/</guid>
      <description>æ¦‚è¦ è¯¥å‘½ä»¤å°†æ‰“å°å‡ºå¯ä»¥ä¸ &amp;ldquo;init&amp;rdquo; å‘½ä»¤ä¸€èµ·ä½¿ç”¨çš„å®‰å…¨çš„éšæœºç”Ÿæˆçš„è¯ä¹¦å¯†é’¥ã€‚
æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ kubeadm init --upload-certs è€Œæ— éœ€æŒ‡å®šè¯ä¹¦å¯†é’¥ï¼Œå®ƒå°†ä¸ºæ‚¨ç”Ÿæˆå¹¶æ‰“å°ä¸€ä¸ªè¯ä¹¦å¯†é’¥ã€‚
kubeadm alpha certs certificate-key [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_check-expiration/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_check-expiration/</guid>
      <description>æ¦‚è¦ æ£€æŸ¥ kubeadm ç®¡ç†çš„æœ¬åœ° PKI ä¸­è¯ä¹¦çš„åˆ°æœŸæ—¶é—´ã€‚
kubeadm alpha certs check-expiration [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤å¹¶éè®¾è®¡ç”¨æ¥å•ç‹¬è¿è¡Œã€‚è¯·å‚é˜…å¯ç”¨å­å‘½ä»¤åˆ—è¡¨ã€‚
kubeadm alpha certs renew [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_admin.conf/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_admin.conf/</guid>
      <description>æ¦‚è¦ ç»­è®¢ kubeconfig æ–‡ä»¶ä¸­åµŒå…¥çš„è¯ä¹¦ï¼Œä¾›ç®¡ç†å‘˜ å’Œ kubeadm è‡ªèº«ä½¿ç”¨ã€‚
æ— è®ºè¯ä¹¦çš„åˆ°æœŸæ—¥æœŸå¦‚ä½•ï¼Œç»­è®¢éƒ½æ˜¯æ— æ¡ä»¶è¿›è¡Œçš„ï¼›SAN ç­‰é¢å¤–å±æ€§å°†åŸºäºç°æœ‰æ–‡ä»¶/è¯ä¹¦ï¼Œå› æ­¤æ— éœ€é‡æ–°æä¾›å®ƒä»¬ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œç»­è®¢ä¼šå°è¯•ä½¿ç”¨ç”± kubeadm ç®¡ç†çš„æœ¬åœ° PKI ä¸­çš„è¯ä¹¦æœºæ„ï¼›ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨ K8s certificate API è¿›è¡Œè¯ä¹¦ç»­è®¢ï¼Œæˆ–è€…ï¼ˆä½œä¸ºæœ€åä¸€ç§é€‰æ‹©ï¼‰ç”Ÿæˆ CSR è¯·æ±‚ã€‚
ç»­è®¢åï¼Œä¸ºäº†ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼Œéœ€è¦é‡æ–°å¯åŠ¨æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œå¹¶æœ€ç»ˆé‡æ–°åˆ†å‘æ›´æ–°çš„è¯ä¹¦ï¼Œä»¥é˜²è¯ä¹¦æ–‡ä»¶åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚
kubeadm alpha certs renew admin.conf [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_all/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_all/</guid>
      <description>æ¦‚è¦ ç»­è®¢è¿è¡Œæ§åˆ¶å¹³é¢æ‰€éœ€çš„æ‰€æœ‰å·²çŸ¥è¯ä¹¦ã€‚ç»­è®¢æ˜¯æ— æ¡ä»¶è¿›è¡Œçš„ï¼Œä¸åˆ°æœŸæ—¥æœŸæ— å…³ã€‚ç»­è®¢ä¹Ÿå¯ä»¥å•ç‹¬è¿è¡Œä»¥è¿›è¡Œæ›´å¤šæ§åˆ¶ã€‚
kubeadm alpha certs renew all [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_apiserver-etcd-client/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_apiserver-etcd-client/</guid>
      <description>æ¦‚è¦ ç»­è®¢ apiserver ç”¨äºè®¿é—® etcd çš„è¯ä¹¦ã€‚
æ— è®ºè¯ä¹¦çš„åˆ°æœŸæ—¥æœŸå¦‚ä½•ï¼Œç»­è®¢éƒ½ä¼šæ— æ¡ä»¶åœ°è¿›è¡Œï¼›SAN ç­‰é¢å¤–å±æ€§å°†åŸºäºç°æœ‰æ–‡ä»¶/è¯ä¹¦ï¼Œå› æ­¤æ— éœ€é‡æ–°æä¾›å®ƒä»¬ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œç»­è®¢å°è¯•åœ¨ kubeadm ç®¡ç†çš„æœ¬åœ° PKI ä¸­ä½¿ç”¨è¯ä¹¦é¢å‘æœºæ„ï¼›ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œ å¯ä»¥ä½¿ç”¨ K8s è¯ä¹¦ API è¿›è¡Œè¯ä¹¦æ›´æ–°ï¼Œæˆ–è€…ä½œä¸ºæœ€åä¸€ä¸ªé€‰æ‹©æ¥ç”Ÿæˆ CSR è¯·æ±‚ã€‚
ç»­è®¢åï¼Œä¸ºäº†ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼Œéœ€è¦é‡æ–°å¯åŠ¨æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œå¹¶æœ€ç»ˆé‡æ–°åˆ†å‘æ›´æ–°çš„è¯ä¹¦ï¼Œä»¥é˜²æ–‡ä»¶åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚
kubeadm alpha certs renew apiserver-etcd-client [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_apiserver-kubelet-client/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_apiserver-kubelet-client/</guid>
      <description>æ¦‚è¦ ç»­è®¢ apiserver ç”¨äºè¿æ¥ kubelet çš„è¯ä¹¦ã€‚
æ— è®ºè¯ä¹¦çš„åˆ°æœŸæ—¥æœŸå¦‚ä½•ï¼Œç»­è®¢éƒ½ä¼šæ— æ¡ä»¶åœ°è¿›è¡Œï¼›SAN ç­‰é¢å¤–å±æ€§å°†åŸºäºç°æœ‰æ–‡ä»¶/è¯ä¹¦ï¼Œå› æ­¤æ— éœ€é‡æ–°æä¾›å®ƒä»¬ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œç»­è®¢å°è¯•ä½¿ç”¨ä½äº kubeadm æ‰€ç®¡ç†çš„æœ¬åœ° PKI ä¸­çš„è¯ä¹¦é¢å‘æœºæ„ï¼›ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œ ä¹Ÿå¯èƒ½è°ƒç”¨ K8s è¯ä¹¦ API è¿›è¡Œè¯ä¹¦æ›´æ–°ï¼›äº¦æˆ–è€…ï¼Œä½œä¸ºæœ€åä¸€ä¸ªé€‰æ‹©ï¼Œç”Ÿæˆ CSR è¯·æ±‚ã€‚
ç»­è®¢åï¼Œä¸ºäº†ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼Œéœ€è¦é‡æ–°å¯åŠ¨æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œå¹¶æœ€ç»ˆé‡æ–°åˆ†å‘æ›´æ–°çš„è¯ä¹¦ï¼Œä»¥é˜²æ–‡ä»¶åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚
kubeadm alpha certs renew apiserver-kubelet-client [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_apiserver/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_apiserver/</guid>
      <description>æ¦‚è¦ ç»­è®¢ç”¨äºæä¾› Kubernetes API çš„è¯ä¹¦ã€‚
æ— è®ºè¯ä¹¦çš„åˆ°æœŸæ—¥æœŸå¦‚ä½•ï¼Œç»­è®¢éƒ½ä¼šæ— æ¡ä»¶åœ°è¿›è¡Œï¼›SAN ç­‰é¢å¤–å±æ€§å°†åŸºäºç°æœ‰æ–‡ä»¶/è¯ä¹¦ï¼Œå› æ­¤æ— éœ€é‡æ–°æä¾›å®ƒä»¬ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œç»­è®¢å°è¯•åœ¨ kubeadm ç®¡ç†çš„æœ¬åœ° PKI ä¸­ä½¿ç”¨è¯ä¹¦é¢å‘æœºæ„ï¼›ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œ å¯ä»¥ä½¿ç”¨ K8s è¯ä¹¦ API è¿›è¡Œè¯ä¹¦æ›´æ–°ï¼Œæˆ–è€…ä½œä¸ºæœ€åä¸€ä¸ªé€‰æ‹©æ¥ç”Ÿæˆ CSR è¯·æ±‚ã€‚
ç»­è®¢åï¼Œä¸ºäº†ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼Œéœ€è¦é‡æ–°å¯åŠ¨æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œå¹¶æœ€ç»ˆé‡æ–°åˆ†å‘æ›´æ–°çš„è¯ä¹¦ï¼Œä»¥é˜²æ–‡ä»¶åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚
kubeadm alpha certs renew apiserver [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_controller-manager.conf/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_controller-manager.conf/</guid>
      <description>æ¦‚è¦ ç»­è®¢ kubeconfig æ–‡ä»¶ä¸­åµŒå…¥çš„è¯ä¹¦ï¼Œä»¥ä¾›æ§åˆ¶å™¨ç®¡ç†å™¨ï¼ˆcontroller managerï¼‰ä½¿ç”¨ã€‚
ç»­è®¢æ— æ¡ä»¶åœ°è¿›è¡Œï¼Œä¸è¯ä¹¦çš„åˆ°æœŸæ—¥æœŸæ— å…³ï¼›SAN ç­‰é¢å¤–å±æ€§å°†åŸºäºç°æœ‰çš„æ–‡ä»¶/è¯ä¹¦ï¼Œå› æ­¤æ— éœ€é‡æ–°æä¾›å®ƒä»¬ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œç»­è®¢ä¼šå°è¯•åœ¨ kubeadm ç®¡ç†çš„æœ¬åœ° PKI ä¸­ä½¿ç”¨è¯ä¹¦é¢å‘æœºæ„ï¼›ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œ å¯ä»¥ä½¿ç”¨ K8s è¯ä¹¦ API è¿›è¡Œè¯ä¹¦ç»­è®¢ï¼›äº¦æˆ–è€…ï¼Œä½œä¸ºæœ€åä¸€ç§é€‰æ‹©ï¼Œç”Ÿæˆ CSR è¯·æ±‚ã€‚
ç»­è®¢åï¼Œä¸ºäº†ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼Œéœ€è¦é‡æ–°å¯åŠ¨æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œå¹¶æœ€ç»ˆé‡æ–°åˆ†å‘æ›´æ–°çš„è¯ä¹¦ï¼Œä»¥é˜²æ–‡ä»¶åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚
kubeadm alpha certs renew controller-manager.conf [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_etcd-healthcheck-client/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_etcd-healthcheck-client/</guid>
      <description>æ¦‚è¦ ç»­è®¢ etcd å¥åº·æ£€æŸ¥çš„æ´»è·ƒæ€§æ¢é’ˆçš„è¯ä¹¦ã€‚
æ— è®ºè¯ä¹¦çš„åˆ°æœŸæ—¥æœŸå¦‚ä½•ï¼Œç»­è®¢éƒ½æ˜¯æ— æ¡ä»¶è¿›è¡Œçš„ï¼›SAN ç­‰é¢å¤–å±æ€§å°†åŸºäºç°æœ‰æ–‡ä»¶/è¯ä¹¦ï¼Œå› æ­¤æ— éœ€é‡æ–°æä¾›å®ƒä»¬ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œç»­è®¢ä¼šå°è¯•ä½¿ç”¨ç”± kubeadm ç®¡ç†çš„æœ¬åœ° PKI ä¸­çš„è¯ä¹¦æœºæ„ï¼›ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ K8s certificate API è¿›è¡Œè¯ä¹¦ç»­è®¢ï¼Œæˆ–è€…ï¼ˆä½œä¸ºæœ€åä¸€ç§é€‰æ‹©ï¼‰ç”Ÿæˆ CSR è¯·æ±‚ã€‚
ç»­è®¢åï¼Œä¸ºäº†ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼Œéœ€è¦é‡æ–°å¯åŠ¨æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œå¹¶æœ€ç»ˆé‡æ–°åˆ†å‘æ›´æ–°çš„è¯ä¹¦ï¼Œä»¥é˜²è¯ä¹¦æ–‡ä»¶åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚
kubeadm alpha certs renew etcd-healthcheck-client [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_etcd-peer/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_etcd-peer/</guid>
      <description>æ¦‚è¦ ç»­è®¢ etcd èŠ‚ç‚¹é—´ç”¨æ¥ç›¸äº’é€šä¿¡çš„è¯ä¹¦ã€‚
æ— è®ºè¯ä¹¦çš„åˆ°æœŸæ—¥æœŸå¦‚ä½•ï¼Œç»­è®¢éƒ½æ˜¯æ— æ¡ä»¶è¿›è¡Œçš„ï¼›SAN ç­‰é¢å¤–å±æ€§å°†åŸºäºç°æœ‰æ–‡ä»¶/è¯ä¹¦ï¼Œå› æ­¤æ— éœ€é‡æ–°æä¾›å®ƒä»¬ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œç»­è®¢ä¼šå°è¯•ä½¿ç”¨ç”± kubeadm ç®¡ç†çš„æœ¬åœ° PKI ä¸­çš„è¯ä¹¦æœºæ„ï¼›ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ K8s certificate API è¿›è¡Œè¯ä¹¦ç»­è®¢ï¼Œæˆ–è€…ï¼ˆä½œä¸ºæœ€åä¸€ç§é€‰æ‹©ï¼‰ç”Ÿæˆ CSR è¯·æ±‚ã€‚
ç»­è®¢åï¼Œä¸ºäº†ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼Œéœ€è¦é‡æ–°å¯åŠ¨æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œå¹¶æœ€ç»ˆé‡æ–°åˆ†å‘æ›´æ–°çš„è¯ä¹¦ï¼Œä»¥é˜²è¯ä¹¦æ–‡ä»¶åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚
kubeadm alpha certs renew etcd-peer [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_etcd-server/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_etcd-server/</guid>
      <description>æ¦‚è¦ ç»­è®¢ç”¨äºæä¾› etcd çš„è¯ä¹¦ã€‚
ç»­è®¢æ— æ¡ä»¶åœ°è¿›è¡Œï¼Œä¸è¯ä¹¦çš„åˆ°æœŸæ—¥æœŸæ— å…³ï¼›SAN ç­‰é¢å¤–å±æ€§å°†åŸºäºç°æœ‰çš„æ–‡ä»¶/è¯ä¹¦ï¼Œå› æ­¤æ— éœ€é‡æ–°æä¾›å®ƒä»¬ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œç»­è®¢ä¼šå°è¯•åœ¨ kubeadm ç®¡ç†çš„æœ¬åœ° PKI ä¸­ä½¿ç”¨è¯ä¹¦é¢å‘æœºæ„ï¼›ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œå¯ä»¥ä½¿ç”¨ K8s è¯ä¹¦ API è¿›è¡Œè¯ä¹¦ç»­è®¢ï¼Œæˆ–è€…ä½œä¸ºæœ€åä¸€ç§é€‰æ‹©æ¥ç”Ÿæˆ CSR è¯·æ±‚ã€‚
ç»­è®¢åï¼Œä¸ºäº†ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼Œéœ€è¦é‡æ–°å¯åŠ¨æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œå¹¶æœ€ç»ˆé‡æ–°åˆ†å‘æ›´æ–°çš„è¯ä¹¦ï¼Œä»¥é˜²æ–‡ä»¶åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚
kubeadm alpha certs renew etcd-server [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_front-proxy-client/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_front-proxy-client/</guid>
      <description>æ¦‚è¦ ä¸ºå‰ç«¯ä»£ç†å®¢æˆ·ç«¯ç»­è®¢è¯ä¹¦ã€‚
æ— è®ºè¯ä¹¦çš„åˆ°æœŸæ—¥æœŸå¦‚ä½•ï¼Œç»­è®¢éƒ½ä¼šæ— æ¡ä»¶åœ°è¿›è¡Œï¼›SAN ç­‰é¢å¤–å±æ€§å°†åŸºäºç°æœ‰æ–‡ä»¶/è¯ä¹¦ï¼Œå› æ­¤æ— éœ€é‡æ–°æä¾›å®ƒä»¬ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œç»­è®¢å°è¯•ä½¿ç”¨ä½äº kubeadm æ‰€ç®¡ç†çš„æœ¬åœ° PKI ä¸­çš„è¯ä¹¦é¢å‘æœºæ„ï¼›ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨ K8s è¯ä¹¦ API è¿›è¡Œè¯ä¹¦ç»­è®¢ï¼›äº¦æˆ–è€…ï¼Œä½œä¸ºæœ€åä¸€ç§æ–¹æ¡ˆï¼Œç”Ÿæˆ CSR è¯·æ±‚ã€‚
ç»­è®¢åï¼Œä¸ºäº†ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼Œéœ€è¦é‡æ–°å¯åŠ¨æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œå¹¶æœ€ç»ˆé‡æ–°åˆ†å‘æ›´æ–°çš„è¯ä¹¦ï¼Œä»¥é˜²æ–‡ä»¶åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚
kubeadm alpha certs renew front-proxy-client [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_scheduler.conf/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_certs_renew_scheduler.conf/</guid>
      <description>æ¦‚è¦ ç»­è®¢ kubeconfig æ–‡ä»¶ä¸­åµŒå…¥çš„è¯ä¹¦ï¼Œä»¥ä¾›è°ƒåº¦ç®¡ç†å™¨ä½¿ç”¨ã€‚
ç»­è®¢æ— æ¡ä»¶åœ°è¿›è¡Œï¼Œä¸è¯ä¹¦çš„åˆ°æœŸæ—¥æœŸæ— å…³ï¼›SAN ç­‰é¢å¤–å±æ€§å°†åŸºäºç°æœ‰çš„æ–‡ä»¶/è¯ä¹¦ï¼Œå› æ­¤æ— éœ€é‡æ–°æä¾›å®ƒä»¬ã€‚
é»˜è®¤æƒ…å†µä¸‹ï¼Œç»­è®¢ä¼šå°è¯•åœ¨ kubeadm ç®¡ç†çš„æœ¬åœ° PKI ä¸­ä½¿ç”¨è¯ä¹¦é¢å‘æœºæ„ï¼›ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œå¯ä»¥ä½¿ç”¨ K8s è¯ä¹¦ API è¿›è¡Œè¯ä¹¦ç»­è®¢ï¼›äº¦æˆ–è€…ï¼Œä½œä¸ºæœ€åä¸€ç§é€‰æ‹©ï¼Œç”Ÿæˆ CSR è¯·æ±‚ã€‚
ç»­è®¢åï¼Œä¸ºäº†ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼Œéœ€è¦é‡æ–°å¯åŠ¨æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œå¹¶æœ€ç»ˆé‡æ–°åˆ†å‘æ›´æ–°çš„è¯ä¹¦ï¼Œä»¥é˜²æ–‡ä»¶åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ã€‚
kubeadm alpha certs renew scheduler.conf [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubeconfig/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubeconfig/</guid>
      <description>æ¦‚è¦ kubeconfig æ–‡ä»¶åº”ç”¨ç¨‹åºã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤å½“å‰ä¸º alpha åŠŸèƒ½ã€‚
é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubeconfig_user/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubeconfig_user/</guid>
      <description>æ¦‚è¦ ä¸ºå…¶ä»–ç”¨æˆ·è¾“å‡º kubeconfig æ–‡ä»¶ã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤å½“å‰ä¸º Alpha åŠŸèƒ½ã€‚
kubeadm alpha kubeconfig user [flags] ç¤ºä¾‹ # ä¸ºåä¸º foo çš„å…¶ä»–ç”¨æˆ·è¾“å‡º kubeconfig æ–‡ä»¶ kubeadm alpha kubeconfig user --client-name=foo é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤å¹¶éè®¾è®¡ç”¨æ¥å•ç‹¬è¿è¡Œã€‚è¯·å‚é˜…å¯ç”¨å­å‘½ä»¤åˆ—è¡¨ã€‚
é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet_config/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet_config/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤å¹¶éè®¾è®¡ç”¨æ¥å•ç‹¬è¿è¡Œã€‚è¯·å‚é˜…å¯ç”¨å­å‘½ä»¤åˆ—è¡¨ã€‚
é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet_config_download/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet_config_download/</guid>
      <description>æ¦‚è¦ ä»é›†ç¾¤ä¸­å½¢å¼ä¸º &amp;ldquo;kubelet-config-1.X&amp;rdquo; çš„ ConfigMap ä¸­ä¸‹è½½ kubelet é…ç½®ï¼Œå…¶ä¸­ X æ˜¯ kubelet çš„æ¬¡è¦ç‰ˆæœ¬ã€‚ kubeadm è¦ä¹ˆé€šè¿‡æ‰§è¡Œ &amp;ldquo;kubelet &amp;ndash;version&amp;rdquo; è‡ªåŠ¨æ£€æµ‹ kubelet ç‰ˆæœ¬ï¼Œè¦ä¹ˆä¼ é€’ &amp;ndash;kubelet-version å‚æ•°ã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤å½“å‰ä¸º Alpha åŠŸèƒ½ã€‚
kubeadm alpha kubelet config download [flags] ç¤ºä¾‹ # ä»é›†ç¾¤ä¸­çš„ ConfigMap ä¸‹è½½ kubelet é…ç½®ã€‚è‡ªåŠ¨æ£€æµ‹ kubelet ç‰ˆæœ¬ã€‚ kubeadm alpha phase kubelet config download # ä»é›†ç¾¤ä¸­çš„ ConfigMap ä¸‹è½½ kubelet é…ç½®ã€‚ä½¿ç”¨ç‰¹å®šçš„æ‰€éœ€ kubelet ç‰ˆæœ¬ã€‚ kubeadm alpha phase kubelet config download --kubelet-version 1.16.0 é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet_config_enable-dynamic/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_kubelet_config_enable-dynamic/</guid>
      <description>æ¦‚è¦ é’ˆå¯¹é›†ç¾¤ä¸­çš„ kubelet-config-1.X ConfigMap å¯ç”¨æˆ–æ›´æ–°èŠ‚ç‚¹çš„åŠ¨æ€ kubelet é…ç½®ï¼Œå…¶ä¸­ X æ˜¯æ‰€éœ€ kubelet ç‰ˆæœ¬çš„æ¬¡è¦ç‰ˆæœ¬ã€‚
è­¦å‘Šï¼šæ­¤åŠŸèƒ½ä»å¤„äºè¯•éªŒé˜¶æ®µï¼Œé»˜è®¤æƒ…å†µä¸‹å¤„äºç¦ç”¨çŠ¶æ€ã€‚ä»…å½“çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆæ—¶æ‰å¯ç”¨å®ƒï¼Œå› ä¸ºåœ¨æ­¤é˜¶æ®µå®ƒå¯èƒ½ä¼šäº§ç”Ÿä»¤äººæƒŠè®¶çš„å‰¯ä½œç”¨ã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤å½“å‰ä¸º Alpha åŠŸèƒ½ã€‚
kubeadm alpha kubelet config enable-dynamic [flags] ç¤ºä¾‹  # ä¸ºèŠ‚ç‚¹å¯ç”¨åŠ¨æ€ kubelet é…ç½®ã€‚ kubeadm alpha phase kubelet enable-dynamic-config --node-name node-1 --kubelet-version 1.16.0 WARNING: This feature is still experimental, and disabled by default. Enable only if you know what you are doing, as it may have surprising side-effects at this stage. é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_selfhosting/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_selfhosting/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤å¹¶éè®¾è®¡ç”¨æ¥å•ç‹¬è¿è¡Œã€‚è¯·å‚é˜…å¯ç”¨å­å‘½ä»¤åˆ—è¡¨ã€‚
é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_selfhosting_pivot/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_alpha_selfhosting_pivot/</guid>
      <description>æ¦‚è¦ å°†ç”¨äºæ§åˆ¶å¹³é¢ç»„ä»¶çš„é™æ€ Pod æ–‡ä»¶è½¬æ¢ä¸ºé€šè¿‡ Kubernetes API é…ç½®çš„è‡ªæ‰˜ç®¡ DaemonSetã€‚
æœ‰å…³è‡ªæ‰˜ç®¡çš„é™åˆ¶ï¼Œè¯·å‚é˜…ç›¸å…³æ–‡æ¡£ã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤å½“å‰ä¸º alpha åŠŸèƒ½ã€‚
kubeadm alpha selfhosting pivot [flags] ç¤ºä¾‹ # å°†é™æ€ Pod æ‰˜ç®¡çš„æ§åˆ¶å¹³é¢è½¬æ¢ä¸ºè‡ªæ‰˜ç®¡çš„æ§åˆ¶å¹³é¢ã€‚ kubeadm alpha phase self-hosting convert-from-staticpods é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_completion/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_completion/</guid>
      <description>æ¦‚è¦ ä¸ºæŒ‡å®šçš„ shellï¼ˆbash æˆ– zshï¼‰è¾“å‡º shell è‡ªåŠ¨è¡¥å…¨ä»£ç ã€‚ å¿…é¡»æ¿€æ´» shell ä»£ç ä»¥æä¾›äº¤äº’å¼ kubeadm å‘½ä»¤è¡¥å…¨ã€‚è¿™å¯ä»¥é€šè¿‡åŠ è½½ .bash_profile æ–‡ä»¶å®Œæˆã€‚
æ³¨æ„: æ­¤åŠŸèƒ½ä¾èµ–äº bash-completion æ¡†æ¶ã€‚
åœ¨ Mac ä¸Šä½¿ç”¨ homebrew å®‰è£…:
brew install bash-completion å®‰è£…åï¼Œå¿…é¡»æ¿€æ´» bash_completionã€‚è¿™å¯ä»¥é€šè¿‡åœ¨ .bash_profile æ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢çš„å‘½ä»¤è¡Œæ¥å®Œæˆ
source $(brew --prefix)/etc/bash_completion å¦‚æœåœ¨ Linux ä¸Šæ²¡æœ‰å®‰è£… bash-completionï¼Œè¯·é€šè¿‡æ‚¨çš„å‘è¡Œç‰ˆçš„åŒ…ç®¡ç†å™¨å®‰è£… bash-completion è½¯ä»¶åŒ…ã€‚
zsh ç”¨æˆ·æ³¨æ„äº‹é¡¹ï¼š[1] zsh è‡ªåŠ¨è¡¥å…¨ä»…åœ¨ &amp;gt;=v5.2 åŠä»¥ä¸Šç‰ˆæœ¬ä¸­æ”¯æŒã€‚
kubeadm completion SHELL [flags] ç¤ºä¾‹ # åœ¨ Mac ä¸Šä½¿ç”¨ homebrew å®‰è£… bash completion brew install bash-completion printf &amp;quot;\n# Bash completion support\nsource $(brew --prefix)/etc/bash_completion\n&amp;quot; &amp;gt;&amp;gt; $HOME/.bash_profile source $HOME/.</description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config/</guid>
      <description>æ¦‚è¦ kube-system å‘½åç©ºé—´é‡Œæœ‰ä¸€ä¸ªåä¸º &amp;ldquo;kubeadm-config&amp;rdquo; çš„ ConfigMapï¼Œkubeadm ç”¨å®ƒæ¥å­˜å‚¨æœ‰å…³é›†ç¾¤çš„å†…éƒ¨é…ç½®ã€‚ kubeadm CLI v1.8.0+ é€šè¿‡ä¸€ä¸ªé…ç½®è‡ªåŠ¨åˆ›å»ºè¯¥ ConfigMapï¼Œè¿™ä¸ªé…ç½®æ˜¯å’Œ &amp;lsquo;kubeadm init&amp;rsquo; å…±ç”¨çš„ã€‚ ä½†æ˜¯æ‚¨å¦‚æœä½¿ç”¨ kubeadm v1.7.x æˆ–æ›´ä½çš„ç‰ˆæœ¬åˆå§‹åŒ–é›†ç¾¤ï¼Œé‚£ä¹ˆå¿…é¡»ä½¿ç”¨ &amp;lsquo;config upload&amp;rsquo; å‘½ä»¤åˆ›å»ºè¯¥ ConfigMapã€‚ è¿™æ˜¯å¿…è¦çš„æ“ä½œï¼Œç›®çš„æ˜¯ä½¿ &amp;lsquo;kubeadm upgrade&amp;rsquo; èƒ½å¤Ÿæ­£ç¡®åœ°é…ç½®å‡çº§åçš„é›†ç¾¤ã€‚
kubeadm config [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_images/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_images/</guid>
      <description>æ¦‚è¦ ä¸ kubeadm ä½¿ç”¨çš„å®¹å™¨é•œåƒäº¤äº’ã€‚
kubeadm config images [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_images_list/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_images_list/</guid>
      <description>æ¦‚è¦ æ‰“å° kubeadm è¦ä½¿ç”¨çš„é•œåƒåˆ—è¡¨ã€‚é…ç½®æ–‡ä»¶ç”¨äºè‡ªå®šä¹‰ä»»ä½•é•œåƒæˆ–é•œåƒå­˜å‚¨åº“ã€‚
kubeadm config images list [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_images_pull/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_images_pull/</guid>
      <description>æ¦‚è¦ æ‹‰å– kubeadm ä½¿ç”¨çš„é•œåƒã€‚
kubeadm config images pull [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_migrate/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_migrate/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤å…è®¸æ‚¨åœ¨ CLI å·¥å…·ä¸­å°†æœ¬åœ°æ—§ç‰ˆæœ¬çš„é…ç½®å¯¹è±¡è½¬æ¢ä¸ºæœ€æ–°æ”¯æŒçš„ç‰ˆæœ¬ï¼Œè€Œæ— éœ€å˜æ›´é›†ç¾¤ä¸­çš„ä»»ä½•å†…å®¹ã€‚åœ¨æ­¤ç‰ˆæœ¬çš„ kubeadm ä¸­ï¼Œæ”¯æŒä»¥ä¸‹ API ç‰ˆæœ¬ï¼š
 kubeadm.k8s.io/v1beta2  å› æ­¤ï¼Œæ— è®ºæ‚¨åœ¨æ­¤å¤„ä¼ é€’ &amp;ndash;old-config å‚æ•°çš„ç‰ˆæœ¬æ˜¯ä»€ä¹ˆï¼Œå½“å†™å…¥åˆ° stdout æˆ– &amp;ndash;new-config ï¼ˆå¦‚æœå·²æŒ‡å®šï¼‰æ—¶ï¼Œ éƒ½ä¼šè¯»å–ã€ååºåˆ—åŒ–ã€é»˜è®¤ã€è½¬æ¢ã€éªŒè¯å’Œé‡æ–°åºåˆ—åŒ– API å¯¹è±¡ã€‚
æ¢å¥è¯è¯´ï¼Œå¦‚æœæ‚¨å°†æ­¤æ–‡ä»¶ä¼ é€’ç»™ &amp;ldquo;kubeadm init&amp;rdquo;ï¼Œåˆ™è¯¥å‘½ä»¤çš„è¾“å‡ºå°±æ˜¯ kubeadm å®é™…ä¸Šåœ¨å†…éƒ¨è¯»å–çš„å†…å®¹ã€‚
kubeadm config migrate [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_print/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_print/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤æ˜¾ç¤ºæ‰€æä¾›å­å‘½ä»¤çš„é…ç½®ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ï¼šhttps://godoc.org/k8s.io/kubernetes/cmd/kubeadm/app/apis/kubeadm/v1beta2
kubeadm config print [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_print_init-defaults/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_print_init-defaults/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤æ‰“å°å¯¹è±¡ï¼Œä¾‹å¦‚ç”¨äº &amp;lsquo;kubeadm init&amp;rsquo; çš„é»˜è®¤ init é…ç½®å¯¹è±¡ã€‚
è¯·æ³¨æ„ï¼ŒBootstrap Token å­—æ®µä¹‹ç±»çš„æ•æ„Ÿå€¼å·²æ›¿æ¢ä¸º {&amp;ldquo;abcdef.0123456789abcdef&amp;rdquo; &amp;quot;&amp;rdquo; &amp;ldquo;nil&amp;rdquo; &amp;lt;nil&amp;gt; [] []} ä¹‹ç±»çš„å ä½ç¬¦å€¼ä»¥é€šè¿‡éªŒè¯ï¼Œä½†ä¸æ‰§è¡Œåˆ›å»ºä»¤ç‰Œçš„å®é™…è®¡ç®—ã€‚
kubeadm config print init-defaults [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_print_join-defaults/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_print_join-defaults/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤æ‰“å°å¯¹è±¡ï¼Œä¾‹å¦‚ç”¨äº &amp;lsquo;kubeadm join&amp;rsquo; çš„é»˜è®¤ join é…ç½®å¯¹è±¡ã€‚
è¯·æ³¨æ„ï¼Œè¯¸å¦‚å¯åŠ¨å¼•å¯¼ä»¤ç‰Œå­—æ®µä¹‹ç±»çš„æ•æ„Ÿå€¼å·²æ›¿æ¢ä¸º {&amp;ldquo;abcdef.0123456789abcdef&amp;rdquo; &amp;quot;&amp;rdquo; &amp;ldquo;nil&amp;rdquo; &amp;lt;nil&amp;gt; [] []} ä¹‹ç±»çš„å ä½ç¬¦å€¼ä»¥é€šè¿‡éªŒè¯ï¼Œä½†ä¸æ‰§è¡Œåˆ›å»ºä»¤ç‰Œçš„å®é™…è®¡ç®—ã€‚
kubeadm config print join-defaults [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_view/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_config_view/</guid>
      <description>æ¦‚è¦ ä½¿ç”¨æ­¤å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹ kubeadm é…ç½®çš„é›†ç¾¤ä¸­çš„ ConfigMapã€‚ è¯¥é…ç½®ä½äº &amp;ldquo;kube-system&amp;rdquo; å‘½åç©ºé—´ä¸­çš„åä¸º &amp;ldquo;kubeadm-config&amp;rdquo; çš„ ConfigMap ä¸­ã€‚
kubeadm config view [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init/</guid>
      <description>æ¦‚è¦ è¿è¡Œæ­¤å‘½ä»¤æ¥æ­å»º Kubernetes æ§åˆ¶å¹³é¢èŠ‚ç‚¹ã€‚
&amp;ldquo;init&amp;rdquo; å‘½ä»¤æ‰§è¡Œä»¥ä¸‹é˜¶æ®µï¼š
preflight Run pre-flight checks kubelet-start Write kubelet settings and (re)start the kubelet certs Certificate generation /ca Generate the self-signed Kubernetes CA to provision identities for other Kubernetes components /apiserver Generate the certificate for serving the Kubernetes API /apiserver-kubelet-client Generate the certificate for the API server to connect to kubelet /front-proxy-ca Generate the self-signed CA to provision identities for front proxy /front-proxy-client Generate the certificate for the front proxy client /etcd-ca Generate the self-signed CA to provision identities for etcd /etcd-server Generate the certificate for serving etcd /etcd-peer Generate the certificate for etcd nodes to communicate with each other /etcd-healthcheck-client Generate the certificate for liveness probes to healthcheck etcd /apiserver-etcd-client Generate the certificate the apiserver uses to access etcd /sa Generate a private key for signing service account tokens along with its public key kubeconfig Generate all kubeconfig files necessary to establish the control plane and the admin kubeconfig file /admin Generate a kubeconfig file for the admin to use and for kubeadm itself /kubelet Generate a kubeconfig file for the kubelet to use *only* for cluster bootstrapping purposes /controller-manager Generate a kubeconfig file for the controller manager to use /scheduler Generate a kubeconfig file for the scheduler to use control-plane Generate all static Pod manifest files necessary to establish the control plane /apiserver Generates the kube-apiserver static Pod manifest /controller-manager Generates the kube-controller-manager static Pod manifest /scheduler Generates the kube-scheduler static Pod manifest etcd Generate static Pod manifest file for local etcd /local Generate the static Pod manifest file for a local, single-node local etcd instance upload-config Upload the kubeadm and kubelet configuration to a ConfigMap /kubeadm Upload the kubeadm ClusterConfiguration to a ConfigMap /kubelet Upload the kubelet component config to a ConfigMap upload-certs Upload certificates to kubeadm-certs mark-control-plane Mark a node as a control-plane bootstrap-token Generates bootstrap tokens used to join a node to a cluster addon Install required addons for passing Conformance tests /coredns Install the CoreDNS addon to a Kubernetes cluster /kube-proxy Install the kube-proxy addon to a Kubernetes cluster kubeadm init [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase/</guid>
      <description>æ¦‚è¦ ä½¿ç”¨æ­¤å‘½ä»¤å¯ä»¥è°ƒç”¨ init å·¥ä½œæµç¨‹çš„å•ä¸ªé˜¶æ®µ
é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰æ‹©é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤å¹¶éè®¾è®¡ç”¨æ¥å•ç‹¬è¿è¡Œã€‚è¯·å‚é˜…å¯ç”¨å­å‘½ä»¤åˆ—è¡¨ã€‚
kubeadm init phase addon [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_all/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_all/</guid>
      <description>æ¦‚è¦ å®‰è£…æ‰€æœ‰æ’ä»¶ï¼ˆaddonï¼‰
kubeadm init phase addon all [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_coredns/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_coredns/</guid>
      <description>æ¦‚è¦ é€šè¿‡ API æœåŠ¡å™¨å®‰è£… CoreDNS é™„åŠ ç»„ä»¶ã€‚è¯·æ³¨æ„ï¼Œå³ä½¿ DNS æœåŠ¡å™¨å·²éƒ¨ç½²ï¼Œåœ¨å®‰è£… CNI ä¹‹å‰ DNS æœåŠ¡å™¨ä¸ä¼šè¢«è°ƒåº¦æ‰§è¡Œã€‚
kubeadm init phase addon coredns [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_kube-proxy/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_addon_kube-proxy/</guid>
      <description>æ¦‚è¦ é€šè¿‡ API æœåŠ¡å™¨å®‰è£… kube-proxy é™„åŠ ç»„ä»¶ã€‚
kubeadm init phase addon kube-proxy [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_bootstrap-token/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_bootstrap-token/</guid>
      <description>æ¦‚è¦ å¯åŠ¨å¼•å¯¼ä»¤ç‰Œï¼ˆbootstrap tokenï¼‰ç”¨äºåœ¨å³å°†åŠ å…¥é›†ç¾¤çš„èŠ‚ç‚¹å’Œæ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¹‹é—´å»ºç«‹åŒå‘ä¿¡ä»»ã€‚
è¯¥å‘½ä»¤ä½¿å¯åŠ¨å¼•å¯¼ä»¤ç‰Œï¼ˆbootstrap tokenï¼‰æ‰€éœ€çš„æ‰€æœ‰é…ç½®ç”Ÿæ•ˆï¼Œç„¶ååˆ›å»ºåˆå§‹ä»¤ç‰Œã€‚
kubeadm init phase bootstrap-token [flags] ç¤ºä¾‹ # è¿›è¡Œæ‰€æœ‰å¼•å¯¼ä»¤ç‰Œé…ç½®ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªåˆå§‹ä»¤ç‰Œï¼ŒåŠŸèƒ½ä¸Šä¸ kubeadm init ç”Ÿæˆçš„ä»¤ç‰Œç­‰æ•ˆã€‚ kubeadm init phase bootstrap-token é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤å¹¶éè®¾è®¡ç”¨æ¥å•ç‹¬è¿è¡Œã€‚è¯·å‚é˜…å¯ç”¨å­å‘½ä»¤åˆ—è¡¨ã€‚
kubeadm init phase certs [flags] é€‰é¡¹ ä»çˆ¶æŒ‡ä»¤ä¸­ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_all/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_all/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆæ‰€æœ‰è¯ä¹¦
kubeadm init phase certs all [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver-etcd-client/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver-etcd-client/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆ apiserver ç”¨äºè®¿é—® etcd çš„è¯ä¹¦ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° apiserver-etcd-client.cert å’Œ apiserver-etcd-client.key æ–‡ä»¶ä¸­ã€‚
å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å·²å­˜åœ¨ï¼Œåˆ™ kubeadm å°†è·³è¿‡ç”Ÿæˆæ­¥éª¤ï¼Œä½¿ç”¨ç°æœ‰æ–‡ä»¶ã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤å½“å‰ä¸º Alpha åŠŸèƒ½ã€‚
kubeadm init phase certs apiserver-etcd-client [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver-kubelet-client/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver-kubelet-client/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆä¾› API æœåŠ¡å™¨è¿æ¥ kubelet çš„è¯ä¹¦ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° apiserver-kubelet-client.cert å’Œ apiserver-kubelet-client.key æ–‡ä»¶ä¸­ã€‚
å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å·²å­˜åœ¨ï¼Œåˆ™ kubeadm å°†è·³è¿‡ç”Ÿæˆæ­¥éª¤ï¼Œä½¿ç”¨ç°æœ‰æ–‡ä»¶ã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤å½“å‰ä¸º Alpha åŠŸèƒ½ã€‚
kubeadm init phase certs apiserver-kubelet-client [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_apiserver/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆç”¨äºæœåŠ¡ Kubernetes API çš„è¯ä¹¦ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° apiserver.cert å’Œ apiserver.key æ–‡ä»¶ä¸­ã€‚
é»˜è®¤ SAN æ˜¯ kubernetesã€kubernetes.defaultã€kubernetes.default.svcã€kubernetes.default.svc.cluster.localã€10.96.0.1ã€127.0.0.1ã€‚
å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å·²å­˜åœ¨ï¼Œåˆ™ kubeadm å°†è·³è¿‡ç”Ÿæˆæ­¥éª¤ï¼Œä½¿ç”¨ç°æœ‰æ–‡ä»¶ã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤å½“å‰ä¸º Alpha åŠŸèƒ½ã€‚
kubeadm init phase certs apiserver [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_ca/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_ca/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆè‡ªç­¾åçš„ Kubernetes CA ä»¥æä¾›å…¶ä»– Kubernetes ç»„ä»¶çš„èº«ä»½ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° ca.cert å’Œ ca.key æ–‡ä»¶ä¸­ã€‚
å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å·²å­˜åœ¨ï¼Œåˆ™ kubeadm å°†è·³è¿‡ç”Ÿæˆæ­¥éª¤ï¼Œä½¿ç”¨ç°æœ‰æ–‡ä»¶ã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤å½“å‰ä¸º Alpha åŠŸèƒ½ã€‚
kubeadm init phase certs ca [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-ca/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-ca/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆç”¨äºä¸º etcd è®¾ç½®èº«ä»½çš„è‡ªç­¾å CAï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° etcd/ca.cert å’Œ etcd/ca.key æ–‡ä»¶ä¸­ã€‚
å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å·²å­˜åœ¨ï¼Œåˆ™ kubeadm å°†è·³è¿‡ç”Ÿæˆæ­¥éª¤ï¼Œä½¿ç”¨ç°æœ‰æ–‡ä»¶ã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤å½“å‰ä¸º Alpha åŠŸèƒ½ã€‚
kubeadm init phase certs etcd-ca [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-healthcheck-client/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-healthcheck-client/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆç”¨äº etcd å¥åº·æ£€æŸ¥çš„æ´»è·ƒæ€§æ¢é’ˆçš„è¯ä¹¦ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° healthcheck-client.cert å’Œ etcd/healthcheck-client.key æ–‡ä»¶ä¸­ã€‚
å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å·²å­˜åœ¨ï¼Œåˆ™ kubeadm å°†è·³è¿‡ç”Ÿæˆæ­¥éª¤ï¼Œä½¿ç”¨ç°æœ‰æ–‡ä»¶ã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤å½“å‰ä¸º alpha åŠŸèƒ½ã€‚
kubeadm init phase certs etcd-healthcheck-client [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-peer/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-peer/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆ etcd èŠ‚ç‚¹ç›¸äº’é€šä¿¡çš„è¯ä¹¦ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° etcd/peer.cert å’Œ etcd/peer.key æ–‡ä»¶ä¸­ã€‚
é»˜è®¤ SAN ä¸º localhostã€127.0.0.1ã€127.0.0.1ã€:: 1
å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å·²å­˜åœ¨ï¼Œåˆ™ kubeadm å°†è·³è¿‡ç”Ÿæˆæ­¥éª¤ï¼Œä½¿ç”¨ç°æœ‰æ–‡ä»¶ã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤å½“å‰ä¸º alpha åŠŸèƒ½ã€‚
kubeadm init phase certs etcd-peer [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-server/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_etcd-server/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆç”¨äºæä¾› etcd æœåŠ¡çš„è¯ä¹¦ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° etcd/server.cert å’Œ etcd/server.key æ–‡ä»¶ä¸­ã€‚
é»˜è®¤ SAN ä¸º localhostã€127.0.0.1ã€127.0.0.1ã€:: 1
å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å·²å­˜åœ¨ï¼Œåˆ™ kubeadm å°†è·³è¿‡ç”Ÿæˆæ­¥éª¤ï¼Œä½¿ç”¨ç°æœ‰æ–‡ä»¶ã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤å½“å‰ä¸º alpha åŠŸèƒ½ã€‚
kubeadm init phase certs etcd-server [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_front-proxy-ca/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_front-proxy-ca/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆè‡ªç­¾å CA æ¥æä¾›å‰ç«¯ä»£ç†çš„èº«ä»½ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° front-proxy-ca.cert å’Œ front-proxy-ca.key æ–‡ä»¶ä¸­ã€‚
å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å·²å­˜åœ¨ï¼Œkubeadm å°†è·³è¿‡ç”Ÿæˆæ­¥éª¤å¹¶å°†ä½¿ç”¨ç°æœ‰æ–‡ä»¶ã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤ç›®å‰æ˜¯ alpha é˜¶æ®µã€‚
kubeadm init phase certs front-proxy-ca [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_front-proxy-client/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_front-proxy-client/</guid>
      <description>æ¦‚è¦ ä¸ºå‰ç«¯ä»£ç†å®¢æˆ·ç«¯ç”Ÿæˆè¯ä¹¦ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° front-proxy-client.cert å’Œ front-proxy-client.key æ–‡ä»¶ä¸­ã€‚ å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å·²å­˜åœ¨ï¼Œkubeadm å°†è·³è¿‡ç”Ÿæˆæ­¥éª¤å¹¶å°†ä½¿ç”¨ç°æœ‰æ–‡ä»¶ã€‚ Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤ç›®å‰æ˜¯ alpha é˜¶æ®µã€‚
kubeadm init phase certs front-proxy-client [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_sa/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_certs_sa/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆç”¨äºç­¾å service account ä»¤ç‰Œçš„ç§é’¥åŠå…¶å…¬é’¥ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° sa.key å’Œ sa.pub æ–‡ä»¶ä¸­ã€‚å¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½å·²å­˜åœ¨ï¼Œåˆ™ kubeadm ä¼šè·³è¿‡ç”Ÿæˆæ­¥éª¤ï¼Œè€Œå°†ä½¿ç”¨ç°æœ‰æ–‡ä»¶ã€‚
Alpha å…è´£å£°æ˜ï¼šæ­¤å‘½ä»¤å½“å‰ä¸º alpha é˜¶æ®µã€‚
kubeadm init phase certs sa [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_control-plane/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_control-plane/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤å¹¶éè®¾è®¡ç”¨æ¥å•ç‹¬è¿è¡Œã€‚è¯·å‚é˜…å¯ç”¨å­å‘½ä»¤åˆ—è¡¨ã€‚
kubeadm init phase control-plane [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_control-plane_all/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_control-plane_all/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆæ‰€æœ‰çš„é™æ€ Pod æ¸…å•æ–‡ä»¶
kubeadm init phase control-plane all [flags] ç¤ºä¾‹ # ä¸º etcd ç”Ÿæˆé™æ€ Pod æ¸…å•æ–‡ä»¶ï¼Œå…¶åŠŸèƒ½ç­‰æ•ˆäº kubeadm init ç”Ÿæˆçš„æ–‡ä»¶ã€‚ kubeadm init phase control-plane all # ä½¿ç”¨ä»é…ç½®æ–‡ä»¶è¯»å–çš„é€‰é¡¹ä¸º etcd ç”Ÿæˆé™æ€ Pod æ¸…å•æ–‡ä»¶ã€‚ kubeadm init phase control-plane all --config config.yaml é€‰é¡¹ ä»çˆ¶æŒ‡ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_control-plane_apiserver/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_control-plane_apiserver/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆ kube-apiserver é™æ€ Pod æ¸…å•
kubeadm init phase control-plane apiserver [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_control-plane_controller-manager/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_control-plane_controller-manager/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆ kube-controller-manager é™æ€ Pod æ¸…å•
kubeadm init phase control-plane controller-manager [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_control-plane_scheduler/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_control-plane_scheduler/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆ kube-scheduler é™æ€ Pod æ¸…å•
kubeadm init phase control-plane scheduler [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_etcd/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_etcd/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤å¹¶éè®¾è®¡ç”¨æ¥å•ç‹¬è¿è¡Œã€‚è¯·å‚é˜…å¯ç”¨å­å‘½ä»¤åˆ—è¡¨ã€‚
kubeadm init phase etcd [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_etcd_local/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_etcd_local/</guid>
      <description>æ¦‚è¦ ä¸ºæœ¬åœ°å•èŠ‚ç‚¹ etcd å®ä¾‹ç”Ÿæˆé™æ€ Pod æ¸…å•æ–‡ä»¶
kubeadm init phase etcd local [flags] ç¤ºä¾‹ # ä¸º etcd ç”Ÿæˆé™æ€ Pod æ¸…å•æ–‡ä»¶ï¼Œå…¶åŠŸèƒ½ç­‰æ•ˆäº kubeadm init ç”Ÿæˆçš„æ–‡ä»¶ã€‚ kubeadm init phase etcd local # ä½¿ç”¨ä»é…ç½®æ–‡ä»¶è¯»å–çš„é€‰é¡¹ä¸º etcd ç”Ÿæˆé™æ€ Pod æ¸…å•æ–‡ä»¶ã€‚ kubeadm init phase etcd local --config config.yaml é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_kubeconfig/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_kubeconfig/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤å¹¶éè®¾è®¡ç”¨æ¥å•ç‹¬è¿è¡Œã€‚è¯·é˜…è¯»å¯ç”¨å­å‘½ä»¤åˆ—è¡¨ã€‚
kubeadm init phase kubeconfig [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_kubeconfig_admin/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_kubeconfig_admin/</guid>
      <description>æ¦‚è¦ ä¸ºç®¡ç†å‘˜å’Œ kubeadm æœ¬èº«ç”Ÿæˆ kubeconfig æ–‡ä»¶ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° admin.conf æ–‡ä»¶ä¸­ã€‚
kubeadm init phase kubeconfig admin [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_kubeconfig_all/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_kubeconfig_all/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆæ‰€æœ‰ kubeconfig æ–‡ä»¶
kubeadm init phase kubeconfig all [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_kubeconfig_controller-manager/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_kubeconfig_controller-manager/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆæ§åˆ¶å™¨ç®¡ç†å™¨è¦ä½¿ç”¨çš„ kubeconfig æ–‡ä»¶ï¼Œå¹¶ä¿å­˜åˆ° controller-manager.conf æ–‡ä»¶ä¸­ã€‚
kubeadm init phase kubeconfig controller-manager [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_kubeconfig_kubelet/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_kubeconfig_kubelet/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆ kubelet è¦ä½¿ç”¨çš„ kubeconfig æ–‡ä»¶ï¼Œå¹¶å°†å…¶ä¿å­˜åˆ° kubelet.conf æ–‡ä»¶ã€‚
è¯·æ³¨æ„ï¼Œè¯¥æ“ä½œç›®çš„æ˜¯ä»…åº”ç”¨äºå¼•å¯¼é›†ç¾¤ã€‚åœ¨æ§åˆ¶å¹³é¢å¯åŠ¨ä¹‹åï¼Œåº”è¯¥ä» CSR API è¯·æ±‚æ‰€æœ‰ kubelet å‡­æ®ã€‚
kubeadm init phase kubeconfig kubelet [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_kubeconfig_scheduler/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_kubeconfig_scheduler/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆè°ƒåº¦å™¨ï¼ˆschedulerï¼‰è¦ä½¿ç”¨çš„ kubeconfig æ–‡ä»¶ï¼Œå¹¶ä¿å­˜åˆ° scheduler.conf æ–‡ä»¶ä¸­ã€‚
kubeadm init phase kubeconfig scheduler [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_kubelet-start/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_kubelet-start/</guid>
      <description>æ¦‚è¦ ä½¿ç”¨ kubelet é…ç½®æ–‡ä»¶ç¼–å†™ä¸€ä¸ªæ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ç‰¹å®šèŠ‚ç‚¹çš„ kubelet è®¾ç½®ç¼–å†™ä¸€ä¸ªç¯å¢ƒæ–‡ä»¶ï¼Œç„¶åï¼ˆé‡æ–°ï¼‰å¯åŠ¨ kubeletã€‚
kubeadm init phase kubelet-start [flags] ç¤ºä¾‹ # ä» InitConfiguration æ–‡ä»¶ä¸­å†™å…¥å¸¦æœ‰ kubelet å‚æ•°çš„åŠ¨æ€ç¯å¢ƒæ–‡ä»¶ã€‚ kubeadm init phase kubelet-start --config config.yaml é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_mark-control-plane/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_mark-control-plane/</guid>
      <description>æ¦‚è¦ æ ‡è®° Node èŠ‚ç‚¹ä¸ºæ§åˆ¶å¹³é¢èŠ‚ç‚¹
kubeadm init phase mark-control-plane [flags] ç¤ºä¾‹ # å°†æ§åˆ¶å¹³é¢æ ‡ç­¾å’Œæ±¡ç‚¹åº”ç”¨äºå½“å‰èŠ‚ç‚¹ï¼Œå…¶åŠŸèƒ½ç­‰æ•ˆäº kubeadm initæ‰§è¡Œçš„æ“ä½œã€‚ kubeadm init phase mark-control-plane --config config.yml # å°†æ§åˆ¶å¹³é¢æ ‡ç­¾å’Œæ±¡ç‚¹åº”ç”¨äºç‰¹å®šèŠ‚ç‚¹ kubeadm init phase mark-control-plane --node-name myNode é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_preflight/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_preflight/</guid>
      <description>æ¦‚è¦ è¿è¡Œ kubeadm init å‰çš„å¯åŠ¨æ£€æŸ¥ã€‚
kubeadm init phase preflight [flags] æ¡ˆä¾‹ # ä½¿ç”¨é…ç½®æ–‡ä»¶å¯¹ kubeadm init è¿›è¡Œå¯åŠ¨æ£€æŸ¥ã€‚ kubeadm init phase preflight --config kubeadm-config.yml é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_upload-certs/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_upload-certs/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤å¹¶éè®¾è®¡ç”¨æ¥å•ç‹¬è¿è¡Œã€‚è¯·å‚é˜…å¯ç”¨å­å‘½ä»¤åˆ—è¡¨ã€‚
kubeadm init phase upload-certs [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_upload-config/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_upload-config/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤å¹¶éè®¾è®¡ç”¨æ¥å•ç‹¬è¿è¡Œã€‚è¯·å‚é˜…å¯ç”¨çš„å­å‘½ä»¤åˆ—è¡¨ã€‚
kubeadm init phase upload-config [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ä¸­ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_upload-config_all/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_upload-config_all/</guid>
      <description>æ¦‚è¦ å°†æ‰€æœ‰é…ç½®ä¸Šä¼ åˆ° ConfigMap
kubeadm init phase upload-config all [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_upload-config_kubeadm/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_upload-config_kubeadm/</guid>
      <description>æ¦‚è¦ å°† kubeadm ClusterConfiguration ä¸Šä¼ åˆ° kube-system å‘½åç©ºé—´ä¸­åä¸º kubeadm-config çš„ ConfigMap ä¸­ã€‚ è¿™æ ·å°±å¯ä»¥æ­£ç¡®é…ç½®ç³»ç»Ÿç»„ä»¶ï¼Œå¹¶åœ¨å‡çº§æ—¶æä¾›æ— ç¼çš„ç”¨æˆ·ä½“éªŒã€‚
å¦å¤–ï¼Œå¯ä»¥ä½¿ç”¨ kubeadm é…ç½®ã€‚
kubeadm init phase upload-config kubeadm [flags] ç¤ºä¾‹ # ä¸Šä¼ é›†ç¾¤é…ç½® kubeadm init phase upload-config --config=myConfig.yaml é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_upload-config_kubelet/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_init_phase_upload-config_kubelet/</guid>
      <description>æ¦‚è¦ å°†ä» kubeadm InitConfiguration å¯¹è±¡æå–çš„ kubelet é…ç½®ä¸Šä¼ åˆ°é›†ç¾¤ä¸­ kubelet-config-1.X å½¢å¼çš„ ConfigMapï¼Œå…¶ä¸­ X æ˜¯å½“å‰ï¼ˆAPI æœåŠ¡å™¨ï¼‰Kubernetes ç‰ˆæœ¬çš„æ¬¡è¦ç‰ˆæœ¬ã€‚
kubeadm init phase upload-config kubelet [flags]ç¤ºä¾‹ # å°† kubelet é…ç½®ä» kubeadm é…ç½®æ–‡ä»¶ä¸Šä¼ åˆ°é›†ç¾¤ä¸­çš„ ConfigMapã€‚kubeadm init phase upload-config kubelet --config kubeadm.yamlé€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join/</guid>
      <description>æ‘˜è¦ å½“èŠ‚ç‚¹åŠ å…¥ kubeadm åˆå§‹åŒ–çš„é›†ç¾¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å»ºç«‹åŒå‘ä¿¡ä»»ã€‚ è¿™ä¸ªè¿‡ç¨‹å¯ä»¥åˆ†è§£ä¸ºå‘ç°ï¼ˆè®©å¾…åŠ å…¥èŠ‚ç‚¹ä¿¡ä»» Kubernetes æ§åˆ¶å¹³é¢èŠ‚ç‚¹ï¼‰å’Œ TLS å¼•å¯¼ï¼ˆè®©Kubernetes æ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¿¡ä»»å¾…åŠ å…¥èŠ‚ç‚¹ï¼‰ä¸¤ä¸ªéƒ¨åˆ†ã€‚
æœ‰ä¸¤ç§ä¸»è¦çš„å‘ç°æ–¹æ¡ˆã€‚ ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å…±äº«ä»¤ç‰Œå’Œ API æœåŠ¡å™¨çš„ IP åœ°å€ã€‚ ç¬¬äºŒç§æ˜¯æä¾›ä¸€ä¸ªæ–‡ä»¶ - æ ‡å‡† kubeconfig æ–‡ä»¶çš„ä¸€ä¸ªå­é›†ã€‚ è¯¥æ–‡ä»¶å¯ä»¥æ˜¯æœ¬åœ°æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ HTTPS URL ä¸‹è½½ã€‚ æ ¼å¼æ˜¯ kubeadm join --discovery-token abcdef.1234567890abcdef 1.2.3.4:6443ã€kubeadm join--discovery-file path/to/file.conf æˆ–è€…kubeadm join --discovery-file https://url/file.confã€‚ åªèƒ½ä½¿ç”¨å…¶ä¸­ä¸€ç§ã€‚ å¦‚æœå‘ç°ä¿¡æ¯æ˜¯ä» URL åŠ è½½çš„ï¼Œå¿…é¡»ä½¿ç”¨ HTTPSã€‚ æ­¤å¤–ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸»æœºå®‰è£…çš„ CA åŒ…ç”¨äºéªŒè¯è¿æ¥ã€‚
å¦‚æœä½¿ç”¨å…±äº«ä»¤ç‰Œè¿›è¡Œå‘ç°ï¼Œè¿˜åº”è¯¥ä¼ é€’ &amp;ndash;discovery-token-ca-cert-hash å‚æ•°æ¥éªŒè¯ Kubernetes æ§åˆ¶å¹³é¢èŠ‚ç‚¹æä¾›çš„æ ¹è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰çš„å…¬é’¥ã€‚ æ­¤å‚æ•°çš„å€¼æŒ‡å®šä¸º &amp;ldquo;&amp;lt;hash-type&amp;gt;:&amp;lt;hex-encoded-value&amp;gt;&amp;quot;ï¼Œå…¶ä¸­æ”¯æŒçš„å“ˆå¸Œç±»å‹ä¸º &amp;ldquo;sha256&amp;rdquo;ã€‚å“ˆå¸Œæ˜¯é€šè¿‡ Subject Public Key Infoï¼ˆSPKIï¼‰å¯¹è±¡çš„å­—èŠ‚è®¡ç®—çš„ï¼ˆå¦‚ RFC7469ï¼‰ã€‚ è¿™ä¸ªå€¼å¯ä»¥ä» &amp;ldquo;kubeadm init&amp;rdquo; çš„è¾“å‡ºä¸­è·å¾—ï¼Œæˆ–è€…å¯ä»¥ä½¿ç”¨æ ‡å‡†å·¥å…·è¿›è¡Œè®¡ç®—ã€‚ å¯ä»¥å¤šæ¬¡é‡å¤ &amp;ndash;discovery-token-ca-cert-hash å‚æ•°ä»¥å…è®¸å¤šä¸ªå…¬é’¥ã€‚
å¦‚æœæ— æ³•æå‰çŸ¥é“ CA å…¬é’¥å“ˆå¸Œï¼Œåˆ™å¯ä»¥é€šè¿‡ &amp;ndash;discovery-token-unsafe-skip-ca-verification å‚æ•°ç¦ç”¨æ­¤éªŒè¯ã€‚ è¿™å‰Šå¼±äº†kubeadm å®‰å…¨æ¨¡å‹ï¼Œå› ä¸ºå…¶ä»–èŠ‚ç‚¹å¯èƒ½ä¼šæ¨¡ä»¿ Kubernetes æ§åˆ¶å¹³é¢èŠ‚ç‚¹ã€‚</description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase/</guid>
      <description>æ¦‚è¦ ä½¿ç”¨æ­¤å‘½ä»¤æ¥è°ƒç”¨ join å·¥ä½œæµç¨‹çš„æŸä¸ªé˜¶æ®µ
é€‰é¡¹ ä»çˆ¶å‘½ä»¤ä¸­ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-join/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-join/</guid>
      <description>æ¦‚è¦ æ·»åŠ ä½œä¸ºæ§åˆ¶å¹³é¢å®ä¾‹çš„æœºå™¨
kubeadm join phase control-plane-join [flags] ç¤ºä¾‹ # å°†æœºå™¨ä½œä¸ºæ§åˆ¶å¹³é¢å®ä¾‹åŠ å…¥ kubeadm join phase control-plane-join all é€‰é¡¹ ä»çˆ¶å‘½ä»¤ä¸­ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-join_all/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-join_all/</guid>
      <description>æ¦‚è¦ æ·»åŠ ä½œä¸ºæ§åˆ¶å¹³é¢å®ä¾‹çš„æœºå™¨
kubeadm join phase control-plane-join all [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-join_etcd/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-join_etcd/</guid>
      <description>æ¦‚è¦ æ·»åŠ æ–°çš„æœ¬åœ° etcd æˆå‘˜
kubeadm join phase control-plane-join etcd [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ä¸­ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-join_mark-control-plane/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-join_mark-control-plane/</guid>
      <description>æ¦‚è¦ å°† Node èŠ‚ç‚¹æ ‡è®°ä¸ºæ§åˆ¶å¹³é¢èŠ‚ç‚¹
kubeadm join phase control-plane-join mark-control-plane [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ä¸­ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-join_update-status/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-join_update-status/</guid>
      <description>æ¦‚è¦ å°†æ–°çš„æ§åˆ¶å¹³é¢èŠ‚ç‚¹æ³¨å†Œåˆ° kubeadm-config ConfigMap ç»´æŠ¤çš„ ClusterStatus ä¸­
kubeadm join phase control-plane-join update-status [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ä¸­ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-prepare/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-prepare/</guid>
      <description>æ¦‚è¦ å‡†å¤‡ä¸ºæ§åˆ¶å¹³é¢æœåŠ¡çš„æœºå™¨
kubeadm join phase control-plane-prepare [flags] ç¤ºä¾‹ # å‡†å¤‡ä¸ºæ§åˆ¶å¹³é¢æœåŠ¡çš„æœºå™¨ kubeadm join phase control-plane-prepare all é€‰é¡¹ ä»çˆ¶å‘½ä»¤ä¸­ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-prepare_all/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-prepare_all/</guid>
      <description>æ¦‚è¦ å‡†å¤‡ä¸ºæ§åˆ¶å¹³é¢æœåŠ¡çš„æœºå™¨
kubeadm join phase control-plane-prepare all [api-server-endpoint] [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-prepare_certs/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-prepare_certs/</guid>
      <description>æ¦‚è¦ ä¸ºæ–°çš„æ§åˆ¶å¹³é¢ç»„ä»¶ç”Ÿæˆè¯ä¹¦
kubeadm join phase control-plane-prepare certs [api-server-endpoint] [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-prepare_control-plane/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-prepare_control-plane/</guid>
      <description>æ¦‚è¦ ä¸ºæ–°çš„æ§åˆ¶å¹³é¢ç»„ä»¶ç”Ÿæˆæ¸…å•ï¼ˆmanifestï¼‰
kubeadm join phase control-plane-prepare control-plane [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ä¸­ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-prepare_download-certs/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-prepare_download-certs/</guid>
      <description>æ¦‚è¦ [å®éªŒ]ä» kubeadm-certs Secret ä¸‹è½½æ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¹‹é—´å…±äº«çš„è¯ä¹¦
kubeadm join phase control-plane-prepare download-certs [api-server-endpoint] [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ä¸­ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-prepare_kubeconfig/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_control-plane-prepare_kubeconfig/</guid>
      <description>æ¦‚è¦ ä¸ºæ–°çš„æ§åˆ¶å¹³é¢ç»„ä»¶ç”Ÿæˆ kubeconfig
kubeadm join phase control-plane-prepare kubeconfig [api-server-endpoint] [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ä¸­ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_kubelet-start/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_kubelet-start/</guid>
      <description>æ¦‚è¦ ç”Ÿæˆä¸€ä¸ªåŒ…å« KubeletConfiguration çš„æ–‡ä»¶å’Œä¸€ä¸ªåŒ…å«ç‰¹å®šäºèŠ‚ç‚¹çš„ kubelet é…ç½®çš„ç¯å¢ƒæ–‡ä»¶ï¼Œç„¶åï¼ˆé‡æ–°ï¼‰å¯åŠ¨ kubeletã€‚
kubeadm join phase kubelet-start [api-server-endpoint] [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_preflight/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_join_phase_preflight/</guid>
      <description>æ¦‚è¦ è¿è¡Œ kubeadm join å‘½ä»¤æ·»åŠ èŠ‚ç‚¹å‰æ£€æŸ¥ã€‚
kubeadm join phase preflight [api-server-endpoint] [flags] ç¤ºä¾‹ # ä½¿ç”¨é…ç½®æ–‡ä»¶è¿è¡Œ kubeadm join å‘½ä»¤æ·»åŠ èŠ‚ç‚¹å‰æ£€æŸ¥ã€‚ kubeadm join phase preflight --config kubeadm-config.yml é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_reset/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_reset/</guid>
      <description>æ¦‚è¦ å°½æœ€å¤§åŠªåŠ›è¿˜åŸé€šè¿‡ &amp;lsquo;kubeadm init&amp;rsquo; æˆ–è€… &amp;lsquo;kubeadm join&amp;rsquo; æ“ä½œå¯¹ä¸»æœºæ‰€åšçš„æ›´æ”¹
&amp;ldquo;reset&amp;rdquo; å‘½ä»¤æ‰§è¡Œä»¥ä¸‹é˜¶æ®µï¼š
preflight Run reset pre-flight checks update-cluster-status Remove this node from the ClusterStatus object. remove-etcd-member Remove a local etcd member. cleanup-node Run cleanup node. kubeadm reset [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_reset_phase/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_reset_phase/</guid>
      <description>æ¦‚è¦ ä½¿ç”¨æ­¤å‘½ä»¤æ¥è°ƒç”¨ reset å·¥ä½œæµç¨‹çš„æŸä¸ªé˜¶æ®µ
é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_reset_phase_cleanup-node/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_reset_phase_cleanup-node/</guid>
      <description>æ¦‚è¦ æ‰§è¡Œ cleanup nodeï¼ˆæ¸…ç†èŠ‚ç‚¹ï¼‰æ“ä½œã€‚
kubeadm reset phase cleanup-node [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_reset_phase_preflight/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_reset_phase_preflight/</guid>
      <description>æ¦‚è¦ kubeadm resetï¼ˆé‡ç½®ï¼‰å‰è¿è¡Œå¯åŠ¨å‰æ£€æŸ¥ã€‚
kubeadm reset phase preflight [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_reset_phase_remove-etcd-member/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_reset_phase_remove-etcd-member/</guid>
      <description>æ¦‚è¦ ä¸Šä¼ å…³äºå½“å‰çŠ¶æ€çš„é…ç½®ï¼Œä»¥ä¾¿ &amp;lsquo;kubeadm upgrade&amp;rsquo; ä»¥åå¯ä»¥çŸ¥é“å¦‚ä½•é…ç½®å‡çº§åçš„é›†ç¾¤ã€‚
kubeadm config upload [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_reset_phase_update-cluster-status/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_reset_phase_update-cluster-status/</guid>
      <description>æ¦‚è¦ å¦‚æœè¯¥èŠ‚ç‚¹æ˜¯æ§åˆ¶å¹³é¢èŠ‚ç‚¹ï¼Œä» ClusterStatus å¯¹è±¡ä¸­åˆ é™¤è¯¥èŠ‚ç‚¹ã€‚
kubeadm reset phase update-cluster-status [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_token/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_token/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤ç®¡ç†å¼•å¯¼ä»¤ç‰Œï¼ˆbootstrap tokenï¼‰ã€‚å®ƒæ˜¯å¯é€‰çš„ï¼Œä»…é€‚ç”¨äºé«˜çº§ç”¨ä¾‹ã€‚
ç®€è€Œè¨€ä¹‹ï¼Œå¼•å¯¼ä»¤ç‰Œï¼ˆbootstrap tokenï¼‰ç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹åŒå‘ä¿¡ä»»ã€‚ å½“å®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚ï¼Œå³å°†åŠ å…¥é›†ç¾¤çš„èŠ‚ç‚¹ï¼‰éœ€è¦æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å¼•å¯¼ä»¤ç‰Œç›¸ä¿¡æ­£åœ¨ä¸ä¹‹é€šä¿¡çš„æœåŠ¡å™¨ã€‚ ç„¶åå¯ä»¥ä½¿ç”¨å…·æœ‰ â€œç­¾åâ€ çš„å¼•å¯¼ä»¤ç‰Œã€‚
å¼•å¯¼ä»¤ç‰Œè¿˜å¯ä»¥ä½œä¸ºä¸€ç§å…è®¸å¯¹ API æœåŠ¡å™¨è¿›è¡ŒçŸ­æœŸèº«ä»½éªŒè¯çš„æ–¹æ³•ï¼ˆä»¤ç‰Œç”¨ä½œ API æœåŠ¡å™¨ä¿¡ä»»å®¢æˆ·ç«¯çš„æ–¹å¼ï¼‰ï¼Œä¾‹å¦‚ç”¨äºæ‰§è¡Œ TLS å¼•å¯¼ç¨‹åºã€‚
å¼•å¯¼ä»¤ç‰Œå‡†ç¡®æ¥è¯´æ˜¯ä»€ä¹ˆï¼Ÿ
 å®ƒæ˜¯ä½äº kube-system å‘½åç©ºé—´ä¸­ç±»å‹ä¸º â€œbootstrap.kubernetes.io/tokenâ€ çš„ä¸€ä¸ª Secretã€‚ å¼•å¯¼ä»¤ç‰Œçš„æ ¼å¼å¿…é¡»ä¸º â€œ[a-z0-9]{6}.[a-z0-9]{16}â€ï¼Œå‰ä¸€éƒ¨åˆ†æ˜¯å…¬å…±ä»¤ç‰Œ IDï¼Œè€Œåè€…æ˜¯ä»¤ç‰Œç§˜é’¥ï¼Œå¿…é¡»åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¿å¯†ï¼ å¿…é¡»å°† Secret çš„åç§°å‘½åä¸º â€œbootstrap-token-(token-id)â€ã€‚  æ‚¨å¯ä»¥åœ¨æ­¤å¤„é˜…è¯»æœ‰å…³å¼•å¯¼ä»¤ç‰Œï¼ˆbootstrap tokenï¼‰çš„æ›´å¤šä¿¡æ¯ï¼š /docs/admin/bootstrap-tokens/
kubeadm token [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_token_create/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_token_create/</guid>
      <description>æ¦‚è¦ è¿™ä¸ªå‘½ä»¤å°†ä¸ºä½ åˆ›å»ºä¸€ä¸ªå¼•å¯¼ä»¤ç‰Œã€‚ æ‚¨å¯ä»¥è®¾ç½®æ­¤ä»¤ç‰Œçš„ç”¨é€”ï¼Œ&amp;ldquo;æœ‰æ•ˆæ—¶é—´&amp;rdquo; å’Œå¯é€‰çš„äººæ€§åŒ–çš„æè¿°ã€‚
è¿™é‡Œçš„ [token] æ˜¯æŒ‡å°†è¦ç”Ÿæˆçš„å®é™…ä»¤ç‰Œã€‚ è¯¥ä»¤ç‰Œåº”è¯¥æ˜¯ä¸€ä¸ªé€šè¿‡å®‰å…¨æœºåˆ¶ç”Ÿæˆçš„éšæœºä»¤ç‰Œï¼Œå½¢å¼ä¸º &amp;ldquo;[a-z0-9]{6}.[a-z0-9]{16}&amp;quot;ã€‚ å¦‚æœæ²¡æœ‰ç»™å‡º [token]ï¼Œkubeadm å°†ç”Ÿæˆä¸€ä¸ªéšæœºä»¤ç‰Œã€‚
kubeadm token create [token] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_token_delete/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_token_delete/</guid>
      <description>æ¦‚è¦ è¿™ä¸ªå‘½ä»¤å°†ä¸ºä½ åˆ é™¤æŒ‡å®šçš„å¼•å¯¼ä»¤ç‰Œåˆ—è¡¨ã€‚
[token-value] æ˜¯è¦åˆ é™¤çš„ &amp;ldquo;[a-z0-9]{6}.[a-z0-9]{16}&amp;rdquo; å½¢å¼çš„å®Œæ•´ä»¤ç‰Œæˆ–è€…æ˜¯ &amp;ldquo;[a-z0-9]{6}&amp;rdquo; å½¢å¼çš„çš„ä»¤ç‰Œ IDã€‚
kubeadm token delete [token-value] ... é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_token_generate/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_token_generate/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤å°†æ‰“å°ä¸€ä¸ªéšæœºç”Ÿæˆçš„å¯ä»¥è¢« &amp;ldquo;init&amp;rdquo; å’Œ &amp;ldquo;join&amp;rdquo; å‘½ä»¤ä½¿ç”¨çš„å¼•å¯¼ä»¤ç‰Œã€‚ æ‚¨ä¸å¿…ä½¿ç”¨æ­¤å‘½ä»¤æ¥ç”Ÿæˆä»¤ç‰Œã€‚ä½ å¯ä»¥è‡ªå·±è®¾å®šï¼Œåªè¦æ ¼å¼ç¬¦åˆ &amp;ldquo;[a-z0-9]{6}.[a-z0-9]{16}&amp;quot;ã€‚è¿™ä¸ªå‘½ä»¤æä¾›æ˜¯ä¸ºäº†æ–¹ä¾¿ç”Ÿæˆè§„å®šæ ¼å¼çš„ä»¤ç‰Œã€‚ æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ &amp;ldquo;kubeadm init&amp;rdquo; å¹¶ä¸”ä¸æŒ‡å®šä»¤ç‰Œï¼Œè¯¥å‘½ä»¤ä¼šç”Ÿæˆä¸€ä¸ªä»¤ç‰Œå¹¶æ‰“å°å‡ºæ¥ã€‚
kubeadm token generate [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_token_list/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_token_list/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤å°†ä¸ºæ‚¨åˆ—å‡ºæ‰€æœ‰çš„å¼•å¯¼ä»¤ç‰Œã€‚
kubeadm token list [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade/</guid>
      <description>æ¦‚è¦ æ­¤å‘½ä»¤èƒ½å°†é›†ç¾¤å¹³æ»‘å‡çº§åˆ°æ–°ç‰ˆæœ¬
kubeadm upgrade [flags] é€‰é¡¹ ç»§æ‰¿äºçˆ¶å‘½ä»¤çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade_apply/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade_apply/</guid>
      <description>æ¦‚è¦ å°† Kubernetes é›†ç¾¤å‡çº§åˆ°æŒ‡å®šç‰ˆæœ¬
kubeadm upgrade apply [version] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade_diff/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade_diff/</guid>
      <description>æ¦‚è¿° æ˜¾ç¤ºå“ªäº›å·®å¼‚å°†è¢«åº”ç”¨äºç°æœ‰çš„é™æ€ pod èµ„æºæ¸…å•ã€‚å‚è€ƒ: kubeadm upgrade apply &amp;ndash;dry-run
kubeadm upgrade diff [version] [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade_node/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade_node/</guid>
      <description>æ¦‚è¦ å‡çº§é›†ç¾¤ä¸­æŸä¸ªèŠ‚ç‚¹çš„å‘½ä»¤
&amp;ldquo;node&amp;rdquo; å‘½ä»¤æ‰§è¡Œä»¥ä¸‹é˜¶æ®µï¼š
control-plane å¦‚æœå­˜åœ¨çš„è¯ï¼Œå‡çº§éƒ¨ç½²åœ¨è¯¥èŠ‚ç‚¹ä¸Šçš„ç®¡ç†é¢å®ä¾‹ kubelet-config æ›´æ–°è¯¥èŠ‚ç‚¹ä¸Šçš„ kubelet é…ç½® kubeadm upgrade node [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade_node_phase/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade_node_phase/</guid>
      <description>æ¦‚è¦ ä½¿ç”¨æ­¤å‘½ä»¤è°ƒç”¨ node å·¥ä½œæµçš„æŸä¸ªé˜¶æ®µ
é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade_node_phase_control-plane/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade_node_phase_control-plane/</guid>
      <description>æ¦‚è¦ å‡çº§éƒ¨ç½²åœ¨æ­¤èŠ‚ç‚¹ä¸Šçš„æ§åˆ¶å¹³é¢å®ä¾‹ï¼Œå¦‚æœæœ‰çš„è¯
kubeadm upgrade node phase control-plane [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade_node_phase_kubelet-config/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade_node_phase_kubelet-config/</guid>
      <description>ä»ç¾¤é›†ä¸­ &amp;ldquo;kubelet-config-1.X&amp;rdquo; çš„ ConfigMap ä¸‹è½½ kubelet é…ç½®ï¼Œå…¶ä¸­ X æ˜¯kubelet çš„æ¬¡è¦ç‰ˆæœ¬ã€‚ kubeadm ä½¿ç”¨ &amp;ndash;kubelet-version å‚æ•°æ¥ç¡®å®šæ‰€éœ€çš„ kubelet ç‰ˆæœ¬ã€‚
kubeadm upgrade node phase kubelet-config [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade_plan/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_upgrade_plan/</guid>
      <description>æ¦‚è¿° æ£€æŸ¥å¯å‡çº§åˆ°å“ªäº›ç‰ˆæœ¬ï¼Œå¹¶éªŒè¯æ‚¨å½“å‰çš„é›†ç¾¤æ˜¯å¦å¯å‡çº§ã€‚ è¦è·³è¿‡äº’è”ç½‘æ£€æŸ¥ï¼Œè¯·ä¼ é€’å¯é€‰çš„ [version] å‚æ•°
kubeadm upgrade plan [version] [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_version/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/kubeadm_version/</guid>
      <description>æ¦‚è¦ æ‰“å° kubeadm çš„ç‰ˆæœ¬
kubeadm version [flags] é€‰é¡¹ ä»çˆ¶å‘½ä»¤ç»§æ‰¿çš„é€‰é¡¹ </description>
    </item>
    
    <item>
      <title></title>
      <link>https://lijun.in/reference/setup-tools/kubeadm/generated/readme/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/setup-tools/kubeadm/generated/readme/</guid>
      <description>æ­¤ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½æ˜¯ä»å…¶ä»–ä»“åº“è‡ªåŠ¨ç”Ÿæˆçš„ã€‚ ä¸è¦äººå·¥ç¼–è¾‘å®ƒä»¬ã€‚ æ‚¨å¿…é¡»åœ¨ä¸Šæ¸¸ä»“åº“ä¸­ç¼–è¾‘å®ƒä»¬</description>
    </item>
    
    <item>
      <title>AppArmor</title>
      <link>https://lijun.in/tutorials/clusters/apparmor/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/clusters/apparmor/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;v1.4&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
Apparmor æ˜¯ä¸€ä¸ª Linux å†…æ ¸å®‰å…¨æ¨¡å—ï¼Œå®ƒè¡¥å……äº†æ ‡å‡†çš„åŸºäº Linux ç”¨æˆ·å’Œç»„çš„å®‰å…¨æ¨¡å—å°†ç¨‹åºé™åˆ¶ä¸ºæœ‰é™èµ„æºé›†çš„æƒé™ã€‚AppArmor å¯ä»¥é…ç½®ä¸ºä»»ä½•åº”ç”¨ç¨‹åºå‡å°‘æ½œåœ¨çš„æ”»å‡»é¢ï¼Œå¹¶ä¸”æä¾›æ›´åŠ æ·±å…¥çš„é˜²å¾¡ã€‚AppArmor æ˜¯é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®çš„ï¼Œè¿™äº›é…ç½®æ–‡ä»¶è¢«è°ƒæ•´ä¸ºæŠ¥åå•ï¼Œåˆ—å‡ºäº†ç‰¹å®šç¨‹åºæˆ–è€…å®¹å™¨æ‰€éœ€è¦çš„è®¿é—®æƒé™ï¼Œå¦‚ Linux åŠŸèƒ½ã€ç½‘ç»œè®¿é—®ã€æ–‡ä»¶æƒé™ç­‰ã€‚æ¯ä¸ªé…ç½®æ–‡ä»¶éƒ½å¯ä»¥åœ¨å¼ºåˆ¶æ¨¡å¼(é˜»æ­¢è®¿é—®ä¸å…è®¸çš„èµ„æº)æˆ–æŠ•è¯‰æ¨¡å¼(ä»…æŠ¥å‘Šå†²çª)ä¸‹è¿è¡Œã€‚
. heading &amp;ldquo;objectives&amp;rdquo; %}}  æŸ¥çœ‹å¦‚ä½•åœ¨èŠ‚ç‚¹ä¸ŠåŠ è½½é…ç½®æ–‡ä»¶ç¤ºä¾‹ äº†è§£å¦‚ä½•åœ¨ Pod ä¸Šå¼ºåˆ¶æ‰§è¡Œé…ç½®æ–‡ä»¶ äº†è§£å¦‚ä½•æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦å·²åŠ è½½ æŸ¥çœ‹è¿åé…ç½®æ–‡ä»¶æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µ æŸ¥çœ‹æ— æ³•åŠ è½½é…ç½®æ–‡ä»¶æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µ  . heading &amp;ldquo;prerequisites&amp;rdquo; %}} åŠ¡å¿…ï¼š
 Kubernetes ç‰ˆæœ¬è‡³å°‘æ˜¯ v1.4 &amp;ndash; AppArmor åœ¨ Kubernetes v1.4 ç‰ˆæœ¬ä¸­æ‰æ·»åŠ äº†å¯¹ AppArmor çš„æ”¯æŒã€‚æ—©äº v1.4 ç‰ˆæœ¬çš„ Kubernetes ç»„ä»¶ä¸çŸ¥é“æ–°çš„ AppArmor æ³¨é‡Šï¼Œå¹¶ä¸”å°†ä¼š é»˜è®¤å¿½ç•¥ æä¾›çš„ä»»ä½• AppArmor è®¾ç½®ã€‚ä¸ºäº†ç¡®ä¿æ‚¨çš„ Pods èƒ½å¤Ÿå¾—åˆ°é¢„æœŸçš„ä¿æŠ¤ï¼Œå¿…é¡»éªŒè¯èŠ‚ç‚¹çš„ Kubelet ç‰ˆæœ¬ï¼š  kubectl get nodes -o=jsonpath=$&amp;#39;{range .items[*]}{@.metadata.name}: {@.status.nodeInfo.kubeletVersion}\n{end}&amp;#39; gke-test-default-pool-239f5d02-gyn2: v1.4.0 gke-test-default-pool-239f5d02-x1kf: v1.4.0 gke-test-default-pool-239f5d02-xwux: v1.</description>
    </item>
    
    <item>
      <title>Auditing</title>
      <link>https://lijun.in/tasks/debug-application-cluster/audit/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/audit/</guid>
      <description>. feature-state state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
Kubernetes å®¡è®¡åŠŸèƒ½æä¾›äº†ä¸å®‰å…¨ç›¸å…³çš„æŒ‰æ—¶é—´é¡ºåºæ’åˆ—çš„è®°å½•é›†ï¼Œè®°å½•å•ä¸ªç”¨æˆ·ã€ç®¡ç†å‘˜æˆ–ç³»ç»Ÿå…¶ä»–ç»„ä»¶å½±å“ç³»ç»Ÿçš„æ´»åŠ¨é¡ºåºã€‚ å®ƒèƒ½å¸®åŠ©é›†ç¾¤ç®¡ç†å‘˜å¤„ç†ä»¥ä¸‹é—®é¢˜ï¼š
 å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ ä»€ä¹ˆæ—¶å€™å‘ç”Ÿçš„ï¼Ÿ è°è§¦å‘çš„ï¼Ÿ æ´»åŠ¨å‘ç”Ÿåœ¨å“ªä¸ªï¼ˆäº›ï¼‰å¯¹è±¡ä¸Šï¼Ÿ åœ¨å“ªè§‚å¯Ÿåˆ°çš„ï¼Ÿ å®ƒä»å“ªè§¦å‘çš„ï¼Ÿ æ´»åŠ¨çš„åç»­å¤„ç†è¡Œä¸ºæ˜¯ä»€ä¹ˆï¼Ÿ  . toc &amp;gt;}}
Kube-apiserver æ‰§è¡Œå®¡è®¡ã€‚æ¯ä¸ªæ‰§è¡Œé˜¶æ®µçš„æ¯ä¸ªè¯·æ±‚éƒ½ä¼šç”Ÿæˆä¸€ä¸ªäº‹ä»¶ï¼Œç„¶åæ ¹æ®ç‰¹å®šç­–ç•¥å¯¹äº‹ä»¶è¿›è¡Œé¢„å¤„ç†å¹¶å†™å…¥åç«¯ã€‚ æ‚¨å¯ä»¥åœ¨ è®¾è®¡æ–¹æ¡ˆ ä¸­æ‰¾åˆ°æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚ è¯¥ç­–ç•¥ç¡®å®šè®°å½•çš„å†…å®¹å¹¶ä¸”åœ¨åç«¯å­˜å‚¨è®°å½•ã€‚å½“å‰çš„åç«¯æ”¯æŒæ—¥å¿—æ–‡ä»¶å’Œ webhookã€‚
æ¯ä¸ªè¯·æ±‚éƒ½å¯ä»¥ç”¨ç›¸å…³çš„ &amp;ldquo;stage&amp;rdquo; è®°å½•ã€‚å·²çŸ¥çš„ stage æœ‰ï¼š
  RequestReceived - äº‹ä»¶çš„ stage å°†åœ¨å®¡è®¡å¤„ç†å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œå¹¶ä¸”åœ¨å§”æ‰˜ç»™å…¶ä½™å¤„ç†å™¨ä¹‹å‰ç”Ÿæˆã€‚
  ResponseStarted - åœ¨å“åº”æ¶ˆæ¯çš„å¤´éƒ¨å‘é€åï¼Œä½†æ˜¯å“åº”æ¶ˆæ¯ä½“å‘é€å‰ã€‚è¿™ä¸ª stage ä»…ä¸ºé•¿æ—¶é—´è¿è¡Œçš„è¯·æ±‚ç”Ÿæˆï¼ˆä¾‹å¦‚ watchï¼‰ã€‚
  ResponseComplete - å½“å“åº”æ¶ˆæ¯ä½“å®Œæˆå¹¶ä¸”æ²¡æœ‰æ›´å¤šæ•°æ®éœ€è¦ä¼ è¾“çš„æ—¶å€™ã€‚
  Panic - å½“ panic å‘ç”Ÿæ—¶ç”Ÿæˆã€‚
  . note &amp;gt;}}
æ³¨æ„ å®¡è®¡æ—¥å¿—è®°å½•åŠŸèƒ½ä¼šå¢åŠ  API server çš„å†…å­˜æ¶ˆè€—ï¼Œå› ä¸ºéœ€è¦ä¸ºæ¯ä¸ªè¯·æ±‚å­˜å‚¨å®¡è®¡æ‰€éœ€çš„æŸäº›ä¸Šä¸‹æ–‡ã€‚ æ­¤å¤–ï¼Œå†…å­˜æ¶ˆè€—å–å†³äºå®¡è®¡æ—¥å¿—è®°å½•çš„é…ç½®ã€‚ . /note &amp;gt;}}</description>
    </item>
    
    <item>
      <title>Credits</title>
      <link>https://lijun.in/credits/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/credits/</guid>
      <description></description>
    </item>
    
    <item>
      <title>DC/OS ä¸Šçš„ Kubernetes</title>
      <link>https://lijun.in/setup/production-environment/on-premises-vm/dcos/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/on-premises-vm/dcos/</guid>
      <description>Mesosphere æä¾›äº†ä¸€ä¸ªç®€å•çš„é€‰é¡¹æ¥å°† Kubernetes è®¾ç½®åˆ°DC/OSä¸Šï¼Œå®ƒæä¾›ï¼š
 çº¯ä¸Šæ¸¸ Kubernetes é›†ç¾¤ä¸€é”®éƒ¨ç½² é»˜è®¤æƒ…å†µä¸‹é«˜åº¦å¯ç”¨ä¸”å®‰å…¨ ä¸å¿«é€Ÿæ•°æ®å¹³å° (ä¾‹å¦‚ Akkaã€Cassandraã€Kafkaã€Spark) ä¸€èµ·è¿è¡Œçš„ Kubernetes  Mesosphere å®˜æ–¹æŒ‡å— DC/OS å…¥é—¨çš„æ­£å¼æ¥æºä½äºquickstart ä»“åº“ä¸­ã€‚</description>
    </item>
    
    <item>
      <title>Debug DNS æ–¹æ¡ˆ</title>
      <link>https://lijun.in/tasks/administer-cluster/dns-debugging-resolution/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/dns-debugging-resolution/</guid>
      <description>This page provides hints on diagnosing DNS problems.
&amp;ndash;&amp;gt;
è¿™ç¯‡æ–‡ç« æä¾›äº†ä¸€äº›å…³äº DNS é—®é¢˜è¯Šæ–­çš„æ–¹æ³•ã€‚
&amp;ndash;&amp;gt;
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}} Kubernetes 1.6 æˆ–è€…ä»¥ä¸Šç‰ˆæœ¬ã€‚ é›†ç¾¤å¿…é¡»ä½¿ç”¨äº† coredns (æˆ–è€… kube-dns)æ’ä»¶ã€‚  åˆ›å»ºä¸€ä¸ªç®€å•çš„ Pod ä½œä¸ºæµ‹è¯•ç¯å¢ƒ æ–°å»ºä¸€ä¸ªåä¸º busybox.yaml çš„æ–‡ä»¶å¹¶å¡«å…¥ä¸‹åˆ—å†…å®¹ï¼š
. codenew file=&amp;quot;admin/dns/busybox.yaml&amp;rdquo; &amp;gt;}}
ç„¶åä½¿ç”¨è¿™ä¸ªæ–‡ä»¶åˆ›å»ºä¸€ä¸ª Pod å¹¶éªŒè¯å…¶çŠ¶æ€ï¼š
kubectl create -f https://k8s.io/examples/admin/dns/busybox.yaml pod/busybox created kubectl get pods busybox NAME READY STATUS RESTARTS AGE busybox 1/1 Running 0 &amp;lt;some-time&amp;gt; åªè¦ Pod å¤„äº running çŠ¶æ€ï¼Œæ‚¨å°±å¯ä»¥åœ¨ç¯å¢ƒé‡Œæ‰§è¡Œ nslookup ã€‚ å¦‚æœæ‚¨çœ‹åˆ°ç±»ä¼¼ä¸‹åˆ—çš„å†…å®¹ï¼Œåˆ™è¡¨ç¤º DNS æ˜¯æ­£å¸¸è¿è¡Œçš„ã€‚</description>
    </item>
    
    <item>
      <title>Init å®¹å™¨</title>
      <link>https://lijun.in/concepts/workloads/pods/init-containers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/pods/init-containers/</guid>
      <description>æœ¬é¡µæä¾›äº† Init å®¹å™¨çš„æ¦‚è§ˆï¼Œå®ƒæ˜¯ä¸€ç§ä¸“ç”¨çš„å®¹å™¨ï¼Œåœ¨glossary_tooltip text=&amp;quot;Pod&amp;rdquo; term_id=&amp;quot;pod&amp;rdquo; &amp;gt;}}å†…çš„åº”ç”¨å®¹å™¨å¯åŠ¨ä¹‹å‰è¿è¡Œï¼Œå¹¶åŒ…æ‹¬ä¸€äº›åº”ç”¨é•œåƒä¸­ä¸å­˜åœ¨çš„å®ç”¨å·¥å…·å’Œå®‰è£…è„šæœ¬ã€‚
ä½ å¯ä»¥åœ¨Podçš„è§„æ ¼ä¿¡æ¯ä¸­ä¸containersæ•°ç»„åŒçº§çš„ä½ç½®æŒ‡å®š Init å®¹å™¨ã€‚
ç†è§£ Init å®¹å™¨ glossary_tooltip text=&amp;quot;Pod&amp;rdquo; term_id=&amp;quot;pod&amp;rdquo; &amp;gt;}} å¯ä»¥åŒ…å«å¤šä¸ªå®¹å™¨ï¼Œåº”ç”¨è¿è¡Œåœ¨è¿™äº›å®¹å™¨é‡Œé¢ï¼ŒåŒæ—¶ Pod ä¹Ÿå¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå…ˆäºåº”ç”¨å®¹å™¨å¯åŠ¨çš„ Init å®¹å™¨ã€‚
Init å®¹å™¨ä¸æ™®é€šçš„å®¹å™¨éå¸¸åƒï¼Œé™¤äº†å¦‚ä¸‹ä¸¤ç‚¹ï¼š
 å®ƒä»¬æ€»æ˜¯è¿è¡Œåˆ°å®Œæˆã€‚ æ¯ä¸ªéƒ½å¿…é¡»åœ¨ä¸‹ä¸€ä¸ªå¯åŠ¨ä¹‹å‰æˆåŠŸå®Œæˆã€‚  å¦‚æœ Pod çš„ Init å®¹å™¨å¤±è´¥ï¼ŒKubernetes ä¼šä¸æ–­åœ°é‡å¯è¯¥ Podï¼Œç›´åˆ° Init å®¹å™¨æˆåŠŸä¸ºæ­¢ã€‚ç„¶è€Œï¼Œå¦‚æœ Pod å¯¹åº”çš„ restartPolicy å€¼ä¸º Neverï¼Œå®ƒä¸ä¼šé‡æ–°å¯åŠ¨ã€‚
æŒ‡å®šå®¹å™¨ä¸º Init å®¹å™¨ï¼Œéœ€è¦åœ¨ Pod çš„ spec ä¸­æ·»åŠ  initContainers å­—æ®µï¼Œ è¯¥å­—æ®µå…§ä»¥[Container](/docs/reference/generated/kubernetes-api/&amp;lt; param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#container-v1-core) ç±»å‹å¯¹è±¡æ•°ç»„çš„å½¢å¼ç»„ç»‡ï¼Œå’Œåº”ç”¨çš„ containers æ•°ç»„åŒçº§ç›¸é‚»ã€‚ Init å®¹å™¨çš„çŠ¶æ€åœ¨ status.initContainerStatuses å­—æ®µä¸­ä»¥å®¹å™¨çŠ¶æ€æ•°ç»„çš„æ ¼å¼è¿”å›ï¼ˆç±»ä¼¼ status.containerStatuses å­—æ®µï¼‰ã€‚
ä¸æ™®é€šå®¹å™¨çš„ä¸åŒä¹‹å¤„ Init å®¹å™¨æ”¯æŒåº”ç”¨å®¹å™¨çš„å…¨éƒ¨å­—æ®µå’Œç‰¹æ€§ï¼ŒåŒ…æ‹¬èµ„æºé™åˆ¶ã€æ•°æ®å·å’Œå®‰å…¨è®¾ç½®ã€‚ ç„¶è€Œï¼ŒInit å®¹å™¨å¯¹èµ„æºè¯·æ±‚å’Œé™åˆ¶çš„å¤„ç†ç¨æœ‰ä¸åŒï¼Œåœ¨ä¸‹é¢ èµ„æº å¤„æœ‰è¯´æ˜ã€‚</description>
    </item>
    
    <item>
      <title>IP Masquerade Agent ç”¨æˆ·æŒ‡å—</title>
      <link>https://lijun.in/tasks/administer-cluster/ip-masq-agent/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/ip-masq-agent/</guid>
      <description>æ­¤é¡µé¢å±•ç¤ºå¦‚ä½•é…ç½®å’Œå¯ç”¨ ip-masq-agentã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
IP Masquerade Agent ç”¨æˆ·æŒ‡å— ip-masq-agent é…ç½® iptables è§„åˆ™ä»¥éšè—ä½äºé›†ç¾¤èŠ‚ç‚¹ IP åœ°å€åé¢çš„ pod çš„ IP åœ°å€ã€‚ è¿™é€šå¸¸åœ¨å°†æµé‡å‘é€åˆ°é›†ç¾¤çš„ pod CIDR èŒƒå›´ä¹‹å¤–çš„ç›®çš„åœ°æ—¶ä½¿ç”¨ã€‚
å…³é”®è¯  NAT (ç½‘ç»œåœ°å€è§£æ) æ˜¯ä¸€ç§é€šè¿‡ä¿®æ”¹ IP åœ°å€å¤´ä¸­çš„æºå’Œ/æˆ–ç›®æ ‡åœ°å€ä¿¡æ¯å°†ä¸€ä¸ª IP åœ°å€é‡æ–°æ˜ å°„åˆ°å¦ä¸€ä¸ª IP åœ°å€çš„æ–¹æ³•ã€‚é€šå¸¸ç”±æ‰§è¡Œ IP è·¯ç”±çš„è®¾å¤‡æ‰§è¡Œã€‚   ä¼ªè£… NAT çš„ä¸€ç§å½¢å¼ï¼Œé€šå¸¸ç”¨äºæ‰§è¡Œå¤šå¯¹ä¸€åœ°å€è½¬æ¢ï¼Œå…¶ä¸­å¤šä¸ªæº IP åœ°å€è¢«éšè—åœ¨å•ä¸ªåœ°å€åé¢ï¼Œè¯¥åœ°å€é€šå¸¸æ˜¯æ‰§è¡Œ IP è·¯ç”±çš„è®¾å¤‡ã€‚åœ¨ Kubernetes ä¸­ï¼Œè¿™æ˜¯èŠ‚ç‚¹çš„ IP åœ°å€ã€‚   CIDR (æ— ç±»åˆ«åŸŸé—´è·¯ç”±) åŸºäºå¯å˜é•¿åº¦å­ç½‘æ©ç ï¼Œå…è®¸æŒ‡å®šä»»æ„é•¿åº¦çš„å‰ç¼€ã€‚CIDR å¼•å…¥äº†ä¸€ç§æ–°çš„ IP åœ°å€è¡¨ç¤ºæ–¹æ³•ï¼Œç°åœ¨é€šå¸¸ç§°ä¸ºCIDRè¡¨ç¤ºæ³•ï¼Œå…¶ä¸­åœ°å€æˆ–è·¯ç”±å‰ç¼€åæ·»åŠ ä¸€ä¸ªåç¼€ï¼Œç”¨æ¥è¡¨ç¤ºå‰ç¼€çš„ä½æ•°ï¼Œä¾‹å¦‚ 192.168.2.0/24ã€‚   æœ¬åœ°é“¾è·¯ æœ¬åœ°é“¾è·¯æ˜¯ä»…å¯¹ç½‘æ®µæˆ–ä¸»æœºæ‰€è¿æ¥çš„å¹¿æ’­åŸŸå†…çš„é€šä¿¡æœ‰æ•ˆçš„ç½‘ç»œåœ°å€ã€‚IPv4çš„æœ¬åœ°é“¾è·¯åœ°å€åœ¨ CIDR è¡¨ç¤ºæ³•çš„åœ°å€å— 169.</description>
    </item>
    
    <item>
      <title>kube-apiserver</title>
      <link>https://lijun.in/reference/command-line-tools-reference/kube-apiserver/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/command-line-tools-reference/kube-apiserver/</guid>
      <description>kube-apiserver æ¦‚è¦ Kubernetes API server ä¸º api å¯¹è±¡éªŒè¯å¹¶é…ç½®æ•°æ®ï¼ŒåŒ…æ‹¬ podsã€ servicesã€ replicationcontrollers å’Œå…¶å®ƒ api å¯¹è±¡ã€‚API Server æä¾› REST æ“ä½œå’Œåˆ°é›†ç¾¤å…±äº«çŠ¶æ€çš„å‰ç«¯ï¼Œæ‰€æœ‰å…¶ä»–ç»„ä»¶é€šè¿‡å®ƒè¿›è¡Œäº¤äº’ã€‚
kube-apiserver é€‰é¡¹  --admission-control stringSlice æ§åˆ¶èµ„æºè¿›å…¥é›†ç¾¤çš„å‡†å…¥æ§åˆ¶æ’ä»¶çš„é¡ºåºåˆ—è¡¨ã€‚é€—å·åˆ†éš”çš„ NamespaceLifecycle åˆ—è¡¨ã€‚ï¼ˆé»˜è®¤å€¼ [AlwaysAdmit]ï¼‰ --admission-control-config-file string åŒ…å«å‡†å…¥æ§åˆ¶é…ç½®çš„æ–‡ä»¶ã€‚ --advertise-address ip å‘é›†ç¾¤æˆå‘˜é€šçŸ¥ apiserver æ¶ˆæ¯çš„ IP åœ°å€ã€‚è¿™ä¸ªåœ°å€å¿…é¡»èƒ½å¤Ÿè¢«é›†ç¾¤ä¸­å…¶ä»–æˆå‘˜è®¿é—®ã€‚å¦‚æœ IP åœ°å€ä¸ºç©ºï¼Œå°†ä¼šä½¿ç”¨ --bind-addressï¼Œå¦‚æœæœªæŒ‡å®š --bind-addressï¼Œå°†ä¼šä½¿ç”¨ä¸»æœºçš„é»˜è®¤æ¥å£åœ°å€ã€‚ --allow-privileged å¦‚æœä¸º true, å°†å…è®¸ç‰¹æƒå®¹å™¨ã€‚ --anonymous-auth å¯ç”¨åˆ° API server çš„å®‰å…¨ç«¯å£çš„åŒ¿åè¯·æ±‚ã€‚æœªè¢«å…¶ä»–è®¤è¯æ–¹æ³•æ‹’ç»çš„è¯·æ±‚è¢«å½“åšåŒ¿åè¯·æ±‚ã€‚åŒ¿åè¯·æ±‚çš„ç”¨æˆ·åä¸º system:anonymousï¼Œç”¨æˆ·ç»„åä¸º system:unauthenticatedã€‚ï¼ˆé»˜è®¤å€¼ trueï¼‰ --apiserver-count int é›†ç¾¤ä¸­è¿è¡Œçš„ apiserver æ•°é‡ï¼Œå¿…é¡»ä¸ºæ­£æ•°ã€‚ï¼ˆé»˜è®¤å€¼ 1ï¼‰ --audit-log-maxage int åŸºäºæ–‡ä»¶åä¸­çš„æ—¶é—´æˆ³ï¼Œæ—§å®¡è®¡æ—¥å¿—æ–‡ä»¶çš„æœ€é•¿ä¿ç•™å¤©æ•°ã€‚ --audit-log-maxbackup int æ—§å®¡è®¡æ—¥å¿—æ–‡ä»¶çš„æœ€å¤§ä¿ç•™ä¸ªæ•°ã€‚ --audit-log-maxsize int å®¡è®¡æ—¥å¿—è¢«è½®è½¬å‰çš„æœ€å¤§å…†å­—èŠ‚æ•°ã€‚ --audit-log-path string å¦‚æœè®¾ç½®è¯¥å€¼ï¼Œæ‰€æœ‰åˆ° apiserver çš„è¯·æ±‚éƒ½å°†ä¼šè¢«è®°å½•åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚&#39;-&#39; è¡¨ç¤ºè®°å½•åˆ°æ ‡å‡†è¾“å‡ºã€‚ --audit-policy-file string å®šä¹‰å®¡è®¡ç­–ç•¥é…ç½®çš„æ–‡ä»¶çš„è·¯å¾„ã€‚éœ€è¦æ‰“å¼€ &#39;AdvancedAuditing&#39; ç‰¹æ€§å¼€å…³ã€‚AdvancedAuditing éœ€è¦ä¸€ä¸ªé…ç½®æ¥å¯ç”¨å®¡è®¡åŠŸèƒ½ã€‚ --audit-webhook-config-file string ä¸€ä¸ªå…·æœ‰ kubeconfig æ ¼å¼æ–‡ä»¶çš„è·¯å¾„ï¼Œè¯¥æ–‡ä»¶å®šä¹‰äº†å®¡è®¡çš„ webhook é…ç½®ã€‚éœ€è¦æ‰“å¼€ &#39;AdvancedAuditing&#39; ç‰¹æ€§å¼€å…³ã€‚ --audit-webhook-mode string å‘é€å®¡è®¡äº‹ä»¶çš„ç­–ç•¥ã€‚ Blocking æ¨¡å¼è¡¨ç¤ºæ­£åœ¨å‘é€äº‹ä»¶æ—¶åº”è¯¥é˜»å¡æœåŠ¡å™¨çš„å“åº”ã€‚ Batch æ¨¡å¼ä½¿ webhook å¼‚æ­¥ç¼“å­˜å’Œå‘é€äº‹ä»¶ã€‚ Known æ¨¡å¼ä¸º batch,blockingã€‚ï¼ˆé»˜è®¤å€¼ &amp;quot;batch&amp;quot;) --authentication-token-webhook-cache-ttl duration ä» webhook ä»¤ç‰Œè®¤è¯è€…è·å–çš„å“åº”çš„ç¼“å­˜æ—¶é•¿ã€‚( é»˜è®¤å€¼ 2m0s) --authentication-token-webhook-config-file string åŒ…å« webhook é…ç½®çš„æ–‡ä»¶ï¼Œç”¨äºä»¤ç‰Œè®¤è¯ï¼Œå…·æœ‰ kubeconfig æ ¼å¼ã€‚API server å°†æŸ¥è¯¢è¿œç¨‹æœåŠ¡æ¥å†³å®šå¯¹ bearer ä»¤ç‰Œçš„è®¤è¯ã€‚ --authorization-mode string åœ¨å®‰å…¨ç«¯å£ä¸Šè¿›è¡Œæƒé™éªŒè¯çš„æ’ä»¶çš„é¡ºåºåˆ—è¡¨ã€‚ä»¥é€—å·åˆ†éš”çš„åˆ—è¡¨ï¼ŒåŒ…æ‹¬ï¼šAlwaysAllow,AlwaysDeny,ABAC,Webhook,RBAC,Node.</description>
    </item>
    
    <item>
      <title>kube-controller-manager</title>
      <link>https://lijun.in/reference/command-line-tools-reference/kube-controller-manager/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/command-line-tools-reference/kube-controller-manager/</guid>
      <description>kube-controller-manager æ¦‚è¿° Kubernetes æ§åˆ¶å™¨ç®¡ç†å™¨æ˜¯ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼ŒåµŒå…¥äº† Kubernetes é™„å¸¦çš„æ ¸å¿ƒæ§åˆ¶å¾ªç¯ã€‚ åœ¨æœºå™¨äººå’Œè‡ªåŠ¨åŒ–çš„åº”ç”¨ä¸­ï¼Œæ§åˆ¶å›è·¯æ˜¯ä¸€ä¸ªæ°¸ä¸ä¼‘æ­¢çš„å¾ªç¯ï¼Œç”¨äºè°ƒèŠ‚ç³»ç»ŸçŠ¶æ€ã€‚ åœ¨ Kubernetes ä¸­ï¼Œæ§åˆ¶å™¨æ˜¯ä¸€ä¸ªæ§åˆ¶å¾ªç¯ï¼Œå®ƒé€šè¿‡ apiserver ç›‘è§†é›†ç¾¤çš„å…±äº«çŠ¶æ€ï¼Œå¹¶å°è¯•è¿›è¡Œæ›´æ”¹ä»¥å°†å½“å‰çŠ¶æ€è½¬ä¸ºæ‰€éœ€çŠ¶æ€ã€‚ç°ä»Šï¼ŒKubernetes è‡ªå¸¦çš„æ§åˆ¶å™¨åŒ…æ‹¬å‰¯æœ¬æ§åˆ¶å™¨ï¼ŒèŠ‚ç‚¹æ§åˆ¶å™¨ï¼Œå‘½åç©ºé—´æ§åˆ¶å™¨å’Œserviceaccounts æ§åˆ¶å™¨ã€‚
kube-controller-manager [flags] é€‰é¡¹ &amp;lt;tr&amp;gt; &amp;lt;td colspan=&amp;quot;2&amp;quot;&amp;gt;--allocate-node-cidrs&amp;lt;/td&amp;gt; &amp;lt;/tr&amp;gt; &amp;lt;tr&amp;gt; &amp;lt;td&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td style=&amp;quot;line-height: 130%; word-wrap: break-word;&amp;quot;&amp;gt;Should CIDRs for Pods be allocated and set on the cloud provider.&amp;lt;/td&amp;gt; &amp;lt;/tr&amp;gt; &amp;lt;tr&amp;gt; &amp;lt;td colspan=&amp;quot;2&amp;quot;&amp;gt;--alsologtostderr&amp;lt;/td&amp;gt; &amp;lt;/tr&amp;gt; &amp;lt;tr&amp;gt; &amp;lt;td&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td style=&amp;quot;line-height: 130%; word-wrap: break-word;&amp;quot;&amp;gt;log to standard error as well as files&amp;lt;/td&amp;gt; &amp;lt;/tr&amp;gt; &amp;lt;tr&amp;gt; &amp;lt;td colspan=&amp;quot;2&amp;quot;&amp;gt;--attach-detach-reconcile-sync-period duration&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;Default: 1m0s&amp;lt;/td&amp;gt; &amp;lt;/tr&amp;gt; &amp;lt;tr&amp;gt; &amp;lt;td&amp;gt;&amp;lt;/td&amp;gt;&amp;lt;td style=&amp;quot;line-height: 130%; word-wrap: break-word;&amp;quot;&amp;gt;The reconciler sync wait time between volume attach detach.</description>
    </item>
    
    <item>
      <title>kubectl å‘½ä»¤</title>
      <link>https://lijun.in/reference/kubectl/kubectl-cmds/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/kubectl/kubectl-cmds/</guid>
      <description>kubectl å‘½ä»¤å‚è€ƒ</description>
    </item>
    
    <item>
      <title>kubectl å¤‡å¿˜å•</title>
      <link>https://lijun.in/reference/kubectl/cheatsheet/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/kubectl/cheatsheet/</guid>
      <description>ä¹Ÿå¯ä»¥çœ‹ä¸‹: Kubectl æ¦‚è¿° å’Œ JsonPath æŒ‡å—ã€‚
æœ¬é¡µé¢æ˜¯ kubectl å‘½ä»¤çš„æ¦‚è¿°ã€‚
kubectl - å¤‡å¿˜å• Kubectl è‡ªåŠ¨è¡¥å…¨ BASH â€‹```bash source &amp;lt;(kubectl completion bash) # åœ¨ bash ä¸­è®¾ç½®å½“å‰ shell çš„è‡ªåŠ¨è¡¥å…¨ï¼Œè¦å…ˆå®‰è£… bash-completion åŒ…ã€‚ echo &amp;ldquo;source &amp;lt;(kubectl completion bash)&amp;rdquo; &amp;raquo; ~/.bashrc # åœ¨æ‚¨çš„ bash shell ä¸­æ°¸ä¹…çš„æ·»åŠ è‡ªåŠ¨è¡¥å…¨
 &amp;lt;!-- You can also use a shorthand alias for `kubectl` that also works with completion: --&amp;gt; æ‚¨è¿˜å¯ä»¥ä¸º `kubectl` ä½¿ç”¨ä¸€ä¸ªé€Ÿè®°åˆ«åï¼Œè¯¥åˆ«åä¹Ÿå¯ä»¥ä¸ completion ä¸€èµ·ä½¿ç”¨ï¼š ```bash alias k=kubectl complete -F __start_kubectl k ZSH â€‹```bash source &amp;lt;(kubectl completion zsh) # åœ¨ zsh ä¸­è®¾ç½®å½“å‰ shell çš„è‡ªåŠ¨è¡¥å…¨ echo &amp;ldquo;if [ $commands[kubectl] ]; then source &amp;lt;(kubectl completion zsh); fi&amp;rdquo; &amp;raquo; ~/.</description>
    </item>
    
    <item>
      <title>kubectl çš„ç”¨æ³•çº¦å®š</title>
      <link>https://lijun.in/reference/kubectl/conventions/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/kubectl/conventions/</guid>
      <description>kubectl çš„æ¨èç”¨æ³•çº¦å®š
åœ¨å¯é‡ç”¨è„šæœ¬ä¸­ä½¿ç”¨ kubectl å¯¹äºè„šæœ¬ä¸­çš„ç¨³å®šè¾“å‡ºï¼š
 è¯·æ±‚ä¸€ä¸ªé¢å‘æœºå™¨çš„è¾“å‡ºæ ¼å¼ï¼Œä¾‹å¦‚ -o nameã€-o jsonã€-o yamlã€-o go template æˆ– -o jsonpathã€‚ å®Œå…¨é™å®šç‰ˆæœ¬ã€‚ä¾‹å¦‚ jobs.v1.batch/myjobã€‚è¿™å°†ç¡®ä¿ kubectl ä¸ä¼šä½¿ç”¨å…¶é»˜è®¤ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œæ›´æ”¹ã€‚ åœ¨ä½¿ç”¨åŸºäºç”Ÿæˆå™¨çš„å‘½ä»¤ï¼ˆä¾‹å¦‚ kubectl run æˆ–è€… kubectl exposeï¼‰æ—¶ï¼ŒæŒ‡å®š --generator å‚æ•°ä»¥å›ºå®šåˆ°ç‰¹å®šè¡Œä¸ºã€‚ ä¸è¦ä¾èµ–ä¸Šä¸‹æ–‡ã€é¦–é€‰é¡¹æˆ–å…¶ä»–éšå¼çŠ¶æ€ã€‚  æœ€ä½³å®è·µ kubectl run è‹¥å¸Œæœ› kubectl run æ»¡è¶³åŸºç¡€è®¾æ–½å³ä»£ç çš„è¦æ±‚ï¼š
 ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬çš„æ ‡ç­¾æ ‡è®°é•œåƒï¼Œä¸è¦å°†è¯¥æ ‡ç­¾ç§»åŠ¨åˆ°æ–°ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ :v1234ã€v1.2.3ã€r03062016-1-4ï¼Œè€Œä¸æ˜¯ :latestï¼ˆæœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…é…ç½®çš„æœ€ä½³å®è·µ)ã€‚ å›ºå®šåˆ°ç‰¹å®šçš„ç”Ÿæˆå™¨ç‰ˆæœ¬ï¼Œä¾‹å¦‚ kubectl run --generator=run-pod/v1ã€‚ ä½¿ç”¨åŸºäºç‰ˆæœ¬æ§åˆ¶çš„è„šæœ¬æ¥è®°å½•æ‰€ä½¿ç”¨çš„å‚æ•°ï¼Œæˆ–è€…è‡³å°‘ä½¿ç”¨ --record å‚æ•°ä»¥ä¾¿ä¸ºæ‰€åˆ›å»ºçš„å¯¹è±¡æ·»åŠ æ³¨è§£ï¼Œåœ¨ä½¿ç”¨è½»åº¦å‚æ•°åŒ–çš„é•œåƒæ—¶ï¼Œè®°å½•ä¸‹æ‰€ä½¿ç”¨çš„å‘½ä»¤è¡Œã€‚ ä½¿ç”¨åŸºäºç‰ˆæœ¬æ§åˆ¶çš„è„šæœ¬æ¥è¿è¡ŒåŒ…å«å¤§é‡å‚æ•°çš„é•œåƒã€‚ å¯¹äºæ— æ³•é€šè¿‡ kubectl run å‚æ•°æ¥è¡¨ç¤ºçš„åŠŸèƒ½ç‰¹æ€§ï¼Œä½¿ç”¨åŸºäºæºç æ§åˆ¶çš„é…ç½®æ–‡ä»¶ï¼Œä»¥è®°å½•è¦ä½¿ç”¨çš„åŠŸèƒ½ç‰¹æ€§ã€‚  ç”Ÿæˆå™¨ æ‚¨å¯ä»¥ä½¿ç”¨å¸¦æœ‰ --generator å‚æ•°çš„ kubectl run å‘½ä»¤åˆ›å»ºå¦‚ä¸‹èµ„æºï¼š
table caption=&amp;quot;å¯ä»¥ä½¿ç”¨ kubectl run åˆ›å»ºçš„èµ„æº&amp;rdquo; &amp;gt;}} | èµ„æº | API ç»„ | kubectl å‘½ä»¤ | |&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;-|&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash;|&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;ndash; | | Pod | v1 | kubectl run --generator=run-pod/v1 | | ReplicationController (å·²å¼ƒç”¨) | v1 | kubectl run --generator=run/v1 | | Deployment (å·²å¼ƒç”¨) | extensions/v1beta1 | kubectl run --generator=deployment/v1beta1 | | Deployment (å·²å¼ƒç”¨) | apps/v1beta1 | kubectl run --generator=deployment/apps.</description>
    </item>
    
    <item>
      <title>Kubelet authentication/authorization</title>
      <link>https://lijun.in/reference/command-line-tools-reference/kubelet-authentication-authorization/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/command-line-tools-reference/kubelet-authentication-authorization/</guid>
      <description>. toc &amp;gt;}}
Overview A kubelet&amp;rsquo;s HTTPS endpoint exposes APIs which give access to data of varying sensitivity, and allow you to perform operations with varying levels of power on the node and within containers.
This document describes how to authenticate and authorize access to the kubelet&amp;rsquo;s HTTPS endpoint.
Kubelet authentication By default, requests to the kubelet&amp;rsquo;s HTTPS endpoint that are not rejected by other configured authentication methods are treated as anonymous requests, and given a username of system:anonymous and a group of system:unauthenticated.</description>
    </item>
    
    <item>
      <title>Kubernetes API è®¿é—®æ§åˆ¶</title>
      <link>https://lijun.in/reference/access-authn-authz/controlling-access/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/access-authn-authz/controlling-access/</guid>
      <description>ç”¨æˆ·é€šè¿‡ kubectlã€å®¢æˆ·ç«¯åº“æˆ–è€…é€šè¿‡å‘é€ REST è¯·æ±‚è®¿é—® APIã€‚ ç”¨æˆ·ï¼ˆè‡ªç„¶äººï¼‰å’Œ Kubernetes æœåŠ¡è´¦æˆ· éƒ½å¯ä»¥è¢«æˆæƒè¿›è¡Œ API è®¿é—®ã€‚ è¯·æ±‚åˆ°è¾¾ API æœåŠ¡å™¨åä¼šç»è¿‡å‡ ä¸ªé˜¶æ®µï¼Œå…·ä½“è¯´æ˜å¦‚å›¾ï¼š
ä¼ è¾“å±‚å®‰å…¨ åœ¨å…¸å‹çš„ Kubernetes é›†ç¾¤ä¸­ï¼ŒAPI é€šè¿‡ 443 ç«¯å£æä¾›æœåŠ¡ã€‚ API æœåŠ¡å™¨ä¼šæä¾›ä¸€ä»½è¯ä¹¦ã€‚ è¯¥è¯ä¹¦ä¸€èˆ¬æ˜¯è‡ªç­¾åçš„ï¼Œ æ‰€ä»¥ç”¨æˆ·æœºå™¨ä¸Šçš„ $USER/.kube/config ç›®å½•é€šå¸¸ åŒ…å«è¯¥ API æœåŠ¡å™¨è¯ä¹¦çš„æ ¹è¯ä¹¦ï¼Œç”¨æ¥ä»£æ›¿ç³»ç»Ÿé»˜è®¤æ ¹è¯ä¹¦ã€‚ å½“ç”¨æˆ·ä½¿ç”¨ kube-up.sh åˆ›å»ºé›†ç¾¤æ—¶ï¼Œè¯¥è¯ä¹¦é€šå¸¸ä¼šè¢«è‡ªåŠ¨å†™å…¥ç”¨æˆ·çš„ $USER/.kube/configã€‚ å¦‚æœé›†ç¾¤ä¸­å­˜åœ¨å¤šä¸ªç”¨æˆ·ï¼Œåˆ™åˆ›å»ºè€…éœ€è¦ä¸å…¶ä»–ç”¨æˆ·å…±äº«è¯ä¹¦ã€‚
è®¤è¯ ä¸€æ—¦ TLS è¿æ¥å»ºç«‹ï¼ŒHTTP è¯·æ±‚å°±è¿›å…¥åˆ°äº†è®¤è¯çš„æ­¥éª¤ã€‚å³å›¾ä¸­çš„æ­¥éª¤ 1 ã€‚ é›†ç¾¤åˆ›å»ºè„šæœ¬æˆ–é›†ç¾¤ç®¡ç†å‘˜ä¼šä¸º API æœåŠ¡å™¨é…ç½®ä¸€ä¸ªæˆ–å¤šä¸ªè®¤è¯æ¨¡å—ã€‚ æ›´å…·ä½“çš„è®¤è¯ç›¸å…³çš„æè¿°è¯¦è§è¿™é‡Œã€‚
è®¤è¯æ­¥éª¤çš„è¾“å…¥æ˜¯æ•´ä¸ª HTTP è¯·æ±‚ï¼Œä½†è¿™é‡Œé€šå¸¸åªæ˜¯æ£€æŸ¥è¯·æ±‚å¤´å’Œ / æˆ–å®¢æˆ·ç«¯è¯ä¹¦ã€‚
è®¤è¯æ¨¡å—æ”¯æŒå®¢æˆ·ç«¯è¯ä¹¦ï¼Œå¯†ç å’Œ Plain Tokensï¼Œ Bootstrap Tokensï¼Œä»¥åŠ JWT Tokensï¼ˆç”¨äºæœåŠ¡è´¦æˆ·ï¼‰ã€‚
ï¼ˆç®¡ç†å‘˜ï¼‰å¯ä»¥åŒæ—¶è®¾ç½®å¤šç§è®¤è¯æ¨¡å—ï¼Œåœ¨è®¾ç½®äº†å¤šä¸ªè®¤è¯æ¨¡å—çš„æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ¨¡å—ä¼šä¾æ¬¡å°è¯•è®¤è¯ï¼Œ ç›´åˆ°å…¶ä¸­ä¸€ä¸ªè®¤è¯æˆåŠŸã€‚
åœ¨ GCE å¹³å°ä¸­ï¼Œå®¢æˆ·ç«¯è¯ä¹¦ï¼Œå¯†ç å’Œ Plain Tokensï¼ŒBootstrap Tokensï¼Œä»¥åŠ JWT Tokens åŒæ—¶è¢«å¯ç”¨ã€‚
å¦‚æœè¯·æ±‚è®¤è¯å¤±è´¥ï¼Œåˆ™è¯·æ±‚è¢«æ‹’ç»ï¼Œè¿”å› 401 çŠ¶æ€ç ã€‚ å¦‚æœè®¤è¯æˆåŠŸï¼Œåˆ™è¢«è®¤è¯ä¸ºå…·ä½“çš„ usernameï¼Œè¯¥ç”¨æˆ·åå¯ä¾›éšåçš„æ­¥éª¤ä¸­ä½¿ç”¨ã€‚ä¸€äº›è®¤è¯æ¨¡å—è¿˜æä¾›äº†ç”¨æˆ·çš„ç»„æˆå‘˜å…³ç³»ï¼Œå¦ä¸€äº›åˆ™æ²¡æœ‰ã€‚</description>
    </item>
    
    <item>
      <title>Kubernetes ä¸­çš„ä»£ç†</title>
      <link>https://lijun.in/concepts/cluster-administration/proxies/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/cluster-administration/proxies/</guid>
      <description>æœ¬æ–‡è®²è¿°äº† Kubernetes ä¸­æ‰€ä½¿ç”¨çš„ä»£ç†ã€‚
ä»£ç† ç”¨æˆ·åœ¨ä½¿ç”¨ Kubernetes çš„è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°å‡ ç§ä¸åŒçš„ä»£ç†ï¼ˆproxyï¼‰ï¼š
  kubectl proxyï¼š
 è¿è¡Œåœ¨ç”¨æˆ·çš„æ¡Œé¢æˆ– pod ä¸­ ä»æœ¬æœºåœ°å€åˆ° Kubernetes apiserver çš„ä»£ç† å®¢æˆ·ç«¯åˆ°ä»£ç†ä½¿ç”¨ HTTP åè®® ä»£ç†åˆ° apiserver ä½¿ç”¨ HTTPS åè®® æŒ‡å‘ apiserver æ·»åŠ è®¤è¯å¤´ä¿¡æ¯    apiserver proxyï¼š
 æ˜¯ä¸€ä¸ªå»ºç«‹åœ¨ apiserver å†…éƒ¨çš„â€œå ¡å’â€ å°†é›†ç¾¤å¤–éƒ¨çš„ç”¨æˆ·ä¸ç¾¤é›† IP ç›¸è¿æ¥ï¼Œè¿™äº›IPæ˜¯æ— æ³•é€šè¿‡å…¶ä»–æ–¹å¼è®¿é—®çš„ è¿è¡Œåœ¨ apiserver è¿›ç¨‹å†… å®¢æˆ·ç«¯åˆ°ä»£ç†ä½¿ç”¨ HTTPS åè®® (å¦‚æœé…ç½® apiserver ä½¿ç”¨ HTTP åè®®ï¼Œåˆ™ä½¿ç”¨ HTTP åè®®) é€šè¿‡å¯ç”¨ä¿¡æ¯è¿›è¡Œé€‰æ‹©ï¼Œä»£ç†åˆ°ç›®çš„åœ°å¯èƒ½ä½¿ç”¨ HTTP æˆ– HTTPS åè®® å¯ä»¥ç”¨æ¥è®¿é—® Nodeã€ Pod æˆ– Service å½“ç”¨æ¥è®¿é—® Service æ—¶ï¼Œä¼šè¿›è¡Œè´Ÿè½½å‡è¡¡    kube proxyï¼š</description>
    </item>
    
    <item>
      <title>Kubernetes äº‘ç®¡ç†æ§åˆ¶å™¨</title>
      <link>https://lijun.in/tasks/administer-cluster/running-cloud-controller/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/running-cloud-controller/</guid>
      <description>. feature-state state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
Kubernetes v1.6 åŒ…å«ä¸€ä¸ªæ–°çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå«åš cloud-controller-managerã€‚cloud-controller-manager æ˜¯ä¸€ä¸ªåµŒå…¥äº†ç‰¹å®šäº‘æœåŠ¡æ§åˆ¶å¾ªç¯é€»è¾‘çš„å®ˆæŠ¤è¿›ç¨‹ã€‚è¿™äº›ç‰¹å®šäº‘æœåŠ¡æ§åˆ¶å¾ªç¯é€»è¾‘æœ€åˆå­˜åœ¨äº kube-controller-manager ä¸­ã€‚ç”±äºäº‘æœåŠ¡æä¾›å•†å¼€å‘å’Œå‘å¸ƒçš„é€Ÿåº¦ä¸ Kubernetes é¡¹ç›®ä¸åŒï¼Œå°†æœåŠ¡æä¾›å•†ä¸“ç”¨ä»£ç ä» cloud-controller-manager äºŒè¿›åˆ¶ä¸­æŠ½è±¡å‡ºæ¥æœ‰åŠ©äºäº‘æœåŠ¡å‚å•†åœ¨ Kubernetes æ ¸å¿ƒä»£ç ä¹‹å¤–ç‹¬ç«‹è¿›è¡Œå¼€å‘ã€‚
cloud-controller-manager å¯ä»¥è¢«é“¾æ¥åˆ°ä»»ä½•æ»¡è¶³ cloudprovider.Interface çº¦æŸçš„äº‘æœåŠ¡æä¾›å•†ã€‚ä¸ºäº†å…¼å®¹æ—§ç‰ˆæœ¬ï¼ŒKubernetes æ ¸å¿ƒé¡¹ç›®ä¸­æä¾›çš„ cloud-controller-manager ä½¿ç”¨å’Œ kube-controller-manager ç›¸åŒçš„äº‘æœåŠ¡ç±»åº“ã€‚å·²ç»åœ¨ Kubernetes æ ¸å¿ƒé¡¹ç›®ä¸­æ”¯æŒçš„äº‘æœåŠ¡æä¾›å•†é¢„è®¡å°†é€šè¿‡ä½¿ç”¨ in-tree çš„ cloud-controller-manager è¿‡æ¸¡åˆ° Kubernetes æ ¸å¿ƒä¹‹å¤–ã€‚åœ¨å°†æ¥çš„ Kubernetes å‘å¸ƒä¸­ï¼Œæ‰€æœ‰çš„äº‘ç®¡ç†æ§åˆ¶å™¨å°†åœ¨ Kubernetes æ ¸å¿ƒé¡¹ç›®ä¹‹å¤–ï¼Œç”± sig é¢†å¯¼è€…æˆ–è€…äº‘æœåŠ¡å‚å•†è¿›è¡Œå¼€å‘ã€‚
ç®¡ç† éœ€æ±‚ æ¯ä¸ªäº‘æœåŠ¡éƒ½æœ‰ä¸€å¥—å„è‡ªçš„éœ€æ±‚ç”¨äºç³»ç»Ÿå¹³å°çš„é›†æˆï¼Œè¿™ä¸åº”ä¸è¿è¡Œ kube-controller-manager çš„éœ€æ±‚æœ‰å¤ªå¤§å·®å¼‚ã€‚ä½œä¸ºç»éªŒæ³•åˆ™ï¼Œä½ éœ€è¦ï¼š
 äº‘æœåŠ¡è®¤è¯ / æˆæƒï¼šæ‚¨çš„äº‘æœåŠ¡å¯èƒ½éœ€è¦ä½¿ç”¨ä»¤ç‰Œæˆ–è€… IAM è§„åˆ™ä»¥å…è®¸å¯¹å…¶ API çš„è®¿é—® kubernetes è®¤è¯ / æˆæƒï¼šcloud-controller-manager å¯èƒ½éœ€è¦ RBAC è§„åˆ™ä»¥è®¿é—® kubernetes apiserver é«˜å¯ç”¨ï¼šç±»ä¼¼äº kube-controller-managerï¼Œæ‚¨å¯èƒ½å¸Œæœ›é€šè¿‡ä¸»èŠ‚ç‚¹é€‰ä¸¾ï¼ˆé»˜è®¤å¼€å¯ï¼‰é…ç½®ä¸€ä¸ªé«˜å¯ç”¨çš„äº‘ç®¡ç†æ§åˆ¶å™¨ã€‚  è¿è¡Œäº‘ç®¡ç†æ§åˆ¶å™¨ æ‚¨éœ€è¦å¯¹é›†ç¾¤é…ç½®åšé€‚å½“çš„ä¿®æ”¹ä»¥æˆåŠŸåœ°è¿è¡Œäº‘ç®¡ç†æ§åˆ¶å™¨ï¼š
 ä¸€å®šä¸è¦ä¸º kube-apiserver å’Œ kube-controller-manager æŒ‡å®š --cloud-provider æ ‡å¿—ã€‚è¿™å°†ä¿è¯å®ƒä»¬ä¸ä¼šè¿è¡Œä»»ä½•äº‘æœåŠ¡ä¸“ç”¨å¾ªç¯é€»è¾‘ï¼Œè¿™å°†ä¼šç”±äº‘ç®¡ç†æ§åˆ¶å™¨è¿è¡Œã€‚æœªæ¥è¿™ä¸ªæ ‡è®°å°†è¢«åºŸå¼ƒå¹¶å»é™¤ã€‚ kubelet å¿…é¡»ä½¿ç”¨ --cloud-provider=external è¿è¡Œã€‚è¿™æ˜¯ä¸ºäº†ä¿è¯è®© kubelet çŸ¥é“åœ¨æ‰§è¡Œä»»ä½•ä»»åŠ¡å‰ï¼Œå®ƒå¿…é¡»è¢«äº‘ç®¡ç†æ§åˆ¶å™¨åˆå§‹åŒ–ã€‚  è¯·è®°ä½ï¼Œè®¾ç½®ç¾¤é›†ä½¿ç”¨äº‘ç®¡ç†æ§åˆ¶å™¨å°†ç”¨å¤šç§æ–¹å¼æ›´æ”¹ç¾¤é›†è¡Œä¸ºï¼š</description>
    </item>
    
    <item>
      <title>Kubernetes åœ¨çº¿åŸ¹è®­æ¦‚è¿°</title>
      <link>https://lijun.in/tutorials/online-training/overview/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/online-training/overview/</guid>
      <description>ä»¥ä¸‹æ˜¯æä¾› Kubernetes åœ¨çº¿åŸ¹è®­çš„ä¸€äº›ç½‘ç«™:
 [AIOps Essentials (ä½¿ç”¨ Prometheus åº¦é‡æ ‡å‡†è‡ªåŠ¨ç¼©æ”¾ Kubernetes) å’ŒåŠ¨æ‰‹å®éªŒå®¤ (Linux å­¦é™¢)] (https://linuxacademy.com/devops/training/course/name/using-machine-learning-to-scale-kubernetes-clusters)   [å¸¦æœ‰åŠ¨æ‰‹å®éªŒå®¤çš„ Amazon EKS æ·±å…¥ç ”ç©¶(Linux å­¦é™¢)] (https://linuxacademy.com/amazon-web-services/training/course/name/amazon-eks-deep-dive)   [å…·æœ‰åŠ¨æ‰‹å®éªŒå’Œå®è·µè€ƒè¯•çš„ Cloud Native è®¤è¯ Kubernetes ç®¡ç†å‘˜ (CKA)(Linux å­¦é™¢)] (https://linuxacademy.com/linux/training/course/name/cloud-native-certified-kubernetes-administrator-cka)   å¸¦æœ‰å®è·µæµ‹è¯•çš„è®¤è¯ Kubernetes ç®¡ç†å‘˜å‡†å¤‡è¯¾ç¨‹ (KodeKloud)   [ç»è¿‡å®è·µå®éªŒå®¤å’Œå®è·µè€ƒè¯•è®¤è¯çš„ Kubernetes åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜(CKAD) (Linux å­¦é™¢)] (https://linuxacademy.com/containers/training/course/name/certified-kubernetes-application-developer-ckad/)   ç»è¿‡è®¤è¯çš„å¸¦æœ‰å®è·µæµ‹è¯•çš„ Kubernetes åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜å‡†å¤‡è¯¾ç¨‹ (KodeKloud)   Google Kubernetes å¼•æ“å…¥é—¨(Coursera)   [Kubernetes å…¥é—¨ (Pluralsight)] (https://www.pluralsight.com/courses/getting-started-kubernetes)   OCI Oracle Kubernetes å¼•æ“(OKE)ä¸Šçš„ Kubernetesé›†ç¾¤å…¥é—¨ (å­¦ä¹ åº“)   [Google Kubernetes å¼•æ“æ·±åº¦å­¦ä¹  (Linux å­¦é™¢)] (https://linuxacademy.</description>
    </item>
    
    <item>
      <title>Master èŠ‚ç‚¹é€šä¿¡</title>
      <link>https://lijun.in/concepts/architecture/master-node-communication/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/architecture/master-node-communication/</guid>
      <description>æ¦‚è§ˆ æœ¬æ–‡å¯¹ Master èŠ‚ç‚¹ï¼ˆç¡®åˆ‡è¯´æ˜¯ apiserverï¼‰å’Œ Kubernetes é›†ç¾¤ä¹‹é—´çš„é€šä¿¡è·¯å¾„è¿›è¡Œäº†åˆ†ç±»ã€‚ç›®çš„æ˜¯ä¸ºäº†è®©ç”¨æˆ·èƒ½å¤Ÿè‡ªå®šä¹‰ä»–ä»¬çš„å®‰è£…ï¼Œå¯¹ç½‘ç»œé…ç½®è¿›è¡ŒåŠ å›ºï¼Œä½¿å¾—é›†ç¾¤èƒ½å¤Ÿåœ¨ä¸å¯ä¿¡çš„ç½‘ç»œä¸Šï¼ˆæˆ–è€…åœ¨ä¸€ä¸ªäº‘æœåŠ¡å•†å®Œå…¨å…¬å…±çš„ IP ä¸Šï¼‰è¿è¡Œã€‚
Cluster -&amp;gt; Master æ‰€æœ‰ä»é›†ç¾¤åˆ° master çš„é€šä¿¡è·¯å¾„éƒ½ç»ˆæ­¢äº apiserverï¼ˆå…¶å®ƒ master ç»„ä»¶æ²¡æœ‰è¢«è®¾è®¡ä¸ºå¯æš´éœ²è¿œç¨‹æœåŠ¡ï¼‰ã€‚åœ¨ä¸€ä¸ªå…¸å‹çš„éƒ¨ç½²ä¸­ï¼Œapiserver è¢«é…ç½®ä¸ºåœ¨ä¸€ä¸ªå®‰å…¨çš„ HTTPS ç«¯å£ï¼ˆ443ï¼‰ä¸Šç›‘å¬è¿œç¨‹è¿æ¥å¹¶å¯ç”¨ä¸€ç§æˆ–å¤šç§å½¢å¼çš„å®¢æˆ·ç«¯èº«ä»½è®¤è¯æœºåˆ¶ã€‚ä¸€ç§æˆ–å¤šç§å®¢æˆ·ç«¯èº«ä»½è®¤è¯æœºåˆ¶åº”è¯¥è¢«å¯ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å…è®¸ä½¿ç”¨ åŒ¿åè¯·æ±‚ æˆ– service account tokens çš„æ—¶å€™ã€‚
åº”è¯¥ä½¿ç”¨é›†ç¾¤çš„å…¬å…±æ ¹è¯ä¹¦å¼€é€šèŠ‚ç‚¹ï¼Œå¦‚æ­¤å®ƒä»¬å°±èƒ½å¤ŸåŸºäºæœ‰æ•ˆçš„å®¢æˆ·ç«¯å‡­æ®å®‰å…¨çš„è¿æ¥ apiserverã€‚ä¾‹å¦‚ï¼šåœ¨ä¸€ä¸ªé»˜è®¤çš„ GCE éƒ¨ç½²ä¸­ï¼Œå®¢æˆ·ç«¯å‡­æ®ä»¥å®¢æˆ·ç«¯è¯ä¹¦çš„å½¢å¼æä¾›ç»™ kubeletã€‚è¯·æŸ¥çœ‹ kubelet TLS bootstrapping è·å–å¦‚ä½•è‡ªåŠ¨æä¾› kubelet å®¢æˆ·ç«¯è¯ä¹¦ã€‚
æƒ³è¦è¿æ¥åˆ° apiserver çš„ Pods å¯ä»¥ä½¿ç”¨ä¸€ä¸ª service account å®‰å…¨çš„è¿›è¡Œè¿æ¥ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå½“ Pods è¢«å®ä¾‹åŒ–æ—¶ Kubernetes å°†è‡ªåŠ¨çš„æŠŠå…¬å…±æ ¹è¯ä¹¦å’Œä¸€ä¸ªæœ‰æ•ˆçš„ä¸è®°åä»¤ç‰Œæ³¨å…¥åˆ° pod é‡Œã€‚kubernetes service ï¼ˆæ‰€æœ‰ namespaces ä¸­ï¼‰éƒ½é…ç½®äº†ä¸€ä¸ªè™šæ‹Ÿ IP åœ°å€ï¼Œç”¨äºè½¬å‘ï¼ˆé€šè¿‡ kube-proxyï¼‰è¯·æ±‚åˆ° apiserver çš„ HTTPS endpointã€‚
Master ç»„ä»¶é€šè¿‡éå®‰å…¨ï¼ˆæ²¡æœ‰åŠ å¯†æˆ–è®¤è¯ï¼‰ç«¯å£å’Œé›†ç¾¤çš„ apiserver é€šä¿¡ã€‚è¿™ä¸ªç«¯å£é€šå¸¸åªåœ¨ master èŠ‚ç‚¹çš„ localhost æ¥å£æš´éœ²ï¼Œè¿™æ ·ï¼Œæ‰€æœ‰åœ¨ç›¸åŒæœºå™¨ä¸Šè¿è¡Œçš„ master ç»„ä»¶å°±èƒ½å’Œé›†ç¾¤çš„ apiserver é€šä¿¡ã€‚ä¸€æ®µæ—¶é—´ä»¥åï¼Œmaster ç»„ä»¶å°†å˜ä¸ºä½¿ç”¨å¸¦èº«ä»½è®¤è¯å’Œæƒé™éªŒè¯çš„å®‰å…¨ç«¯å£ï¼ˆæŸ¥çœ‹#13598ï¼‰ã€‚</description>
    </item>
    
    <item>
      <title>oVirt</title>
      <link>https://lijun.in/setup/production-environment/on-premises-vm/ovirt/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/on-premises-vm/ovirt/</guid>
      <description>oVirt æ˜¯ä¸€ä¸ªè™šæ‹Ÿæ•°æ®ä¸­å¿ƒç®¡ç†å™¨ï¼Œå¯ä»¥å¯¹å¤šä¸ªä¸»æœºä¸Šçš„å¤šä¸ªè™šæ‹Ÿæœºè¿›è¡Œå¼ºå¤§çš„ç®¡ç†ã€‚ ä½¿ç”¨ KVM å’Œ libvirt ï¼Œå¯ä»¥å°† oVirt å®‰è£…åœ¨ Fedoraã€CentOS æˆ–è€… Red Hat Enterprise Linux ä¸»æœºä¸Šï¼Œä»¥éƒ¨ç½²å’Œç®¡ç†æ‚¨çš„è™šæ‹Ÿæ•°æ®ä¸­å¿ƒã€‚
oVirt äº‘é©±åŠ¨çš„éƒ¨ç½² oVirt äº‘é©±åŠ¨å¯ä»¥è½»æ¾å‘ç°æ–° VM å®ä¾‹å¹¶è‡ªåŠ¨å°†å…¶æ·»åŠ ä¸º Kubernetes é›†ç¾¤çš„èŠ‚ç‚¹ã€‚ ç›®å‰ï¼ŒåŒ…æ‹¬ Kubernetes åœ¨å†…ï¼Œå°šæ— ç¤¾åŒºæ”¯æŒæˆ–é¢„åŠ è½½çš„ VM é•œåƒï¼Œä½†å¯ä»¥åœ¨ VM ä¸­ å¯¼å…¥ æˆ– å®‰è£… Project Atomicï¼ˆæˆ– Fedoraï¼‰æ¥ ç”Ÿæˆæ¨¡ç‰ˆã€‚ åŒ…æ‹¬ Kubernetes çš„ä»»ä½•å…¶ä»– Linux å‘è¡Œç‰ˆä¹Ÿå¯èƒ½å¯è¡Œã€‚
å¿…é¡»åœ¨å¯„å®¿ç³»ç»Ÿä¸­ å®‰è£… ovirt-guest-agentï¼Œæ‰èƒ½å°† VM çš„ IP åœ°å€å’Œä¸»æœºåæŠ¥ç»™ ovirt-engine å¹¶æœ€ç»ˆæŠ¥å‘Šç»™ Kubernetesã€‚
ä¸€æ—¦ Kubernetes æ¨¡ç‰ˆå¯ç”¨ï¼Œå°±å¯ä»¥å¼€å§‹åˆ›å»ºå¯ç”±äº‘é©±åŠ¨å‘ç°çš„ VMã€‚
ä½¿ç”¨ oVirt äº‘é©±åŠ¨ oVirt äº‘é©±åŠ¨éœ€è¦è®¿é—® oVirt REST-API æ¥æ”¶é›†æ­£ç¡®çš„ä¿¡æ¯ï¼Œæ‰€éœ€çš„å‡­æ®åº”åœ¨ ovirt-cloud.conf æ–‡ä»¶ä¸­è®¾å®šï¼š
[connection] uri = https://localhost:8443/ovirt-engine/api username = admin@internal password = admin åœ¨åŒä¸€æ–‡ä»¶ä¸­ï¼Œå¯ä»¥æŒ‡å®šï¼ˆä½¿ç”¨ filters èŠ‚åŒºï¼‰æœç´¢æŸ¥è¯¢ï¼Œç”¨äºè¾¨è¯†è¦æŠ¥å‘Šç»™ Kubernetes çš„ VMï¼š</description>
    </item>
    
    <item>
      <title>Pod å®‰å…¨ç­–ç•¥</title>
      <link>https://lijun.in/concepts/policy/pod-security-policy/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/policy/pod-security-policy/</guid>
      <description>PodSecurityPolicy ç±»å‹çš„å¯¹è±¡èƒ½å¤Ÿæ§åˆ¶ï¼Œæ˜¯å¦å¯ä»¥å‘ Pod å‘é€è¯·æ±‚ï¼Œè¯¥ Pod èƒ½å¤Ÿå½±å“è¢«åº”ç”¨åˆ° Pod å’Œå®¹å™¨çš„ SecurityContextã€‚ æŸ¥çœ‹ Pod å®‰å…¨ç­–ç•¥å»ºè®® è·å–æ›´å¤šä¿¡æ¯ã€‚
ä»€ä¹ˆæ˜¯ Pod å®‰å…¨ç­–ç•¥ï¼Ÿ Pod å®‰å…¨ç­–ç•¥ æ˜¯é›†ç¾¤çº§åˆ«çš„èµ„æºï¼Œå®ƒèƒ½å¤Ÿæ§åˆ¶ Pod è¿è¡Œçš„è¡Œä¸ºï¼Œä»¥åŠå®ƒå…·æœ‰è®¿é—®ä»€ä¹ˆçš„èƒ½åŠ›ã€‚ PodSecurityPolicy å¯¹è±¡å®šä¹‰äº†ä¸€ç»„æ¡ä»¶ï¼ŒæŒ‡ç¤º Pod å¿…é¡»æŒ‰ç³»ç»Ÿæ‰€èƒ½æ¥å—çš„é¡ºåºè¿è¡Œã€‚ å®ƒä»¬å…è®¸ç®¡ç†å‘˜æ§åˆ¶å¦‚ä¸‹æ–¹é¢ï¼š
   æ§åˆ¶é¢ å­—æ®µåç§°     å·²æˆæƒå®¹å™¨çš„è¿è¡Œ privileged   ä¸ºå®¹å™¨æ·»åŠ é»˜è®¤çš„ä¸€ç»„èƒ½åŠ› defaultAddCapabilities   ä¸ºå®¹å™¨å»æ‰æŸäº›èƒ½åŠ› requiredDropCapabilities   å®¹å™¨èƒ½å¤Ÿè¯·æ±‚æ·»åŠ æŸäº›èƒ½åŠ› allowedCapabilities   æ§åˆ¶å·ç±»å‹çš„ä½¿ç”¨ volumes   ä¸»æœºç½‘ç»œçš„ä½¿ç”¨ hostNetwork   ä¸»æœºç«¯å£çš„ä½¿ç”¨ hostPorts   ä¸»æœº PID namespace çš„ä½¿ç”¨ hostPID   ä¸»æœº IPC namespace çš„ä½¿ç”¨ hostIPC   ä¸»æœºè·¯å¾„çš„ä½¿ç”¨ allowedHostPaths   å®¹å™¨çš„ SELinux ä¸Šä¸‹æ–‡ seLinux   ç”¨æˆ· ID runAsUser   é…ç½®å…è®¸çš„è¡¥å……ç»„ supplementalGroups   åˆ†é…æ‹¥æœ‰ Pod æ•°æ®å·çš„ FSGroup fsGroup   å¿…é¡»ä½¿ç”¨ä¸€ä¸ªåªè¯»çš„ root æ–‡ä»¶ç³»ç»Ÿ readOnlyRootFilesystem    Pod å®‰å…¨ç­–ç•¥ ç”±è®¾ç½®å’Œç­–ç•¥ç»„æˆï¼Œå®ƒä»¬èƒ½å¤Ÿæ§åˆ¶ Pod è®¿é—®çš„å®‰å…¨ç‰¹å¾ã€‚è¿™äº›è®¾ç½®åˆ†ä¸ºå¦‚ä¸‹ä¸‰ç±»ï¼š</description>
    </item>
    
    <item>
      <title>Pod çš„ç”Ÿå‘½å‘¨æœŸ</title>
      <link>https://lijun.in/concepts/workloads/pods/pod-lifecycle/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/workloads/pods/pod-lifecycle/</guid>
      <description>è¯¥é¡µé¢å°†æè¿° Pod çš„ç”Ÿå‘½å‘¨æœŸã€‚
Pod phase Pod çš„ status å®šä¹‰åœ¨ PodStatus å¯¹è±¡ä¸­ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª phase å­—æ®µã€‚
Pod çš„è¿è¡Œé˜¶æ®µï¼ˆphaseï¼‰æ˜¯ Pod åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­çš„ç®€å•å®è§‚æ¦‚è¿°ã€‚è¯¥é˜¶æ®µå¹¶ä¸æ˜¯å¯¹å®¹å™¨æˆ– Pod çš„ç»¼åˆæ±‡æ€»ï¼Œä¹Ÿä¸æ˜¯ä¸ºäº†åšä¸ºç»¼åˆçŠ¶æ€æœºã€‚
Pod ç›¸ä½çš„æ•°é‡å’Œå«ä¹‰æ˜¯ä¸¥æ ¼æŒ‡å®šçš„ã€‚é™¤äº†æœ¬æ–‡æ¡£ä¸­åˆ—ä¸¾çš„å†…å®¹å¤–ï¼Œä¸åº”è¯¥å†å‡å®š Pod æœ‰å…¶ä»–çš„ phase å€¼ã€‚
ä¸‹é¢æ˜¯ phase å¯èƒ½çš„å€¼ï¼š
 æŒ‚èµ·ï¼ˆPendingï¼‰ï¼šPod å·²è¢« Kubernetes ç³»ç»Ÿæ¥å—ï¼Œä½†æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨é•œåƒå°šæœªåˆ›å»ºã€‚ç­‰å¾…æ—¶é—´åŒ…æ‹¬è°ƒåº¦ Pod çš„æ—¶é—´å’Œé€šè¿‡ç½‘ç»œä¸‹è½½é•œåƒçš„æ—¶é—´ï¼Œè¿™å¯èƒ½éœ€è¦èŠ±ç‚¹æ—¶é—´ã€‚ è¿è¡Œä¸­ï¼ˆRunningï¼‰ï¼šè¯¥ Pod å·²ç»ç»‘å®šåˆ°äº†ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ŒPod ä¸­æ‰€æœ‰çš„å®¹å™¨éƒ½å·²è¢«åˆ›å»ºã€‚è‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨æ­£åœ¨è¿è¡Œï¼Œæˆ–è€…æ­£å¤„äºå¯åŠ¨æˆ–é‡å¯çŠ¶æ€ã€‚ æˆåŠŸï¼ˆSucceededï¼‰ï¼šPod ä¸­çš„æ‰€æœ‰å®¹å™¨éƒ½è¢«æˆåŠŸç»ˆæ­¢ï¼Œå¹¶ä¸”ä¸ä¼šå†é‡å¯ã€‚ å¤±è´¥ï¼ˆFailedï¼‰ï¼šPod ä¸­çš„æ‰€æœ‰å®¹å™¨éƒ½å·²ç»ˆæ­¢äº†ï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨æ˜¯å› ä¸ºå¤±è´¥ç»ˆæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®¹å™¨ä»¥é0çŠ¶æ€é€€å‡ºæˆ–è€…è¢«ç³»ç»Ÿç»ˆæ­¢ã€‚ æœªçŸ¥ï¼ˆUnknownï¼‰ï¼šå› ä¸ºæŸäº›åŸå› æ— æ³•å–å¾— Pod çš„çŠ¶æ€ï¼Œé€šå¸¸æ˜¯å› ä¸ºä¸ Pod æ‰€åœ¨ä¸»æœºé€šä¿¡å¤±è´¥ã€‚  Pod çŠ¶æ€ Pod æœ‰ä¸€ä¸ª PodStatus å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª PodCondition æ•°ç»„ã€‚ PodCondition æ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ª type å­—æ®µå’Œä¸€ä¸ª status å­—æ®µã€‚type å­—æ®µæ˜¯å­—ç¬¦ä¸²ï¼Œå¯èƒ½çš„å€¼æœ‰ PodScheduledã€Readyã€Initialized å’Œ Unschedulableã€‚status å­—æ®µæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯èƒ½çš„å€¼æœ‰ Trueã€False å’Œ Unknownã€‚</description>
    </item>
    
    <item>
      <title>Showcase</title>
      <link>https://lijun.in/showcase/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/showcase/</guid>
      <description></description>
    </item>
    
    <item>
      <title>StackDriver ä¸­çš„äº‹ä»¶</title>
      <link>https://lijun.in/tasks/debug-application-cluster/events-stackdriver/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/events-stackdriver/</guid>
      <description>Kubernetes äº‹ä»¶æ˜¯ä¸€ç§å¯¹è±¡ï¼Œå®ƒä¸ºç”¨æˆ·æä¾›äº†æ´å¯Ÿé›†ç¾¤å†…å‘ç”Ÿçš„äº‹æƒ…çš„èƒ½åŠ›ï¼Œä¾‹å¦‚è°ƒåº¦ç¨‹åºåšå‡ºäº†ä»€ä¹ˆå†³å®šï¼Œæˆ–è€…ä¸ºä»€ä¹ˆæŸäº› Pod è¢«é€å‡ºèŠ‚ç‚¹ã€‚ æ‚¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºè‡ªæ£€å’Œè°ƒè¯•ä¸­é˜…è¯»æœ‰å…³ä½¿ç”¨äº‹ä»¶è°ƒè¯•åº”ç”¨ç¨‹åºçš„æ›´å¤šä¿¡æ¯ã€‚
å› ä¸ºäº‹ä»¶æ˜¯ API å¯¹è±¡ï¼Œæ‰€ä»¥å®ƒä»¬å­˜å‚¨åœ¨ä¸»èŠ‚ç‚¹ä¸Šçš„ apiserver ä¸­ã€‚ ä¸ºäº†é¿å…ä¸»èŠ‚ç‚¹ç£ç›˜ç©ºé—´è¢«å¡«æ»¡ï¼Œå°†å¼ºåˆ¶æ‰§è¡Œä¿ç•™ç­–ç•¥ï¼šäº‹ä»¶åœ¨æœ€åä¸€æ¬¡å‘ç”Ÿçš„ä¸€å°æ—¶åå°†ä¼šè¢«åˆ é™¤ã€‚ ä¸ºäº†æä¾›æ›´é•¿çš„å†å²è®°å½•å’Œèšåˆèƒ½åŠ›ï¼Œåº”è¯¥å®‰è£…ç¬¬ä¸‰æ–¹è§£å†³æ–¹æ¡ˆæ¥æ•è·äº‹ä»¶ã€‚
æœ¬æ–‡æè¿°äº†ä¸€ä¸ªå°† Kubernetes äº‹ä»¶å¯¼å‡ºä¸º Stackdriver Logging çš„è§£å†³æ–¹æ¡ˆï¼Œåœ¨è¿™é‡Œå¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œå¤„ç†å’Œåˆ†æã€‚
. note &amp;gt;}}
ä¸èƒ½ä¿è¯é›†ç¾¤ä¸­å‘ç”Ÿçš„æ‰€æœ‰äº‹ä»¶éƒ½å°†å¯¼å‡ºåˆ° Stackdriverã€‚ äº‹ä»¶ä¸èƒ½å¯¼å‡ºçš„ä¸€ç§å¯èƒ½æƒ…å†µæ˜¯äº‹ä»¶å¯¼å‡ºå™¨æ²¡æœ‰è¿è¡Œï¼ˆä¾‹å¦‚ï¼Œåœ¨é‡æ–°å¯åŠ¨æˆ–å‡çº§æœŸé—´ï¼‰ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥å°†äº‹ä»¶ç”¨äºè®¾ç½® metrics å’Œ alerts ç­‰ç›®çš„ï¼Œä½†æ‚¨åº”è¯¥æ³¨æ„æ½œåœ¨çš„ä¸å‡†ç¡®æ€§ã€‚ . /note &amp;gt;}}
éƒ¨ç½² Google Kubernetes Engine åœ¨ Google Kubernetes Engine ä¸­ï¼Œå¦‚æœå¯ç”¨äº†äº‘æ—¥å¿—ï¼Œé‚£ä¹ˆäº‹ä»¶å¯¼å‡ºå™¨é»˜è®¤éƒ¨ç½²åœ¨ä¸»èŠ‚ç‚¹è¿è¡Œç‰ˆæœ¬ä¸º 1.7 åŠæ›´é«˜ç‰ˆæœ¬çš„é›†ç¾¤ä¸­ã€‚ ä¸ºäº†é˜²æ­¢å¹²æ‰°æ‚¨çš„å·¥ä½œè´Ÿè½½ï¼Œäº‹ä»¶å¯¼å‡ºå™¨æ²¡æœ‰è®¾ç½®èµ„æºï¼Œå¹¶ä¸”å¤„äºå°½åŠ›è€Œä¸ºçš„ QoS ç±»å‹ä¸­ï¼Œè¿™æ„å‘³ç€å®ƒå°†åœ¨èµ„æºåŒ®ä¹çš„æƒ…å†µä¸‹ç¬¬ä¸€ä¸ªè¢«æ€æ­»ã€‚ å¦‚æœè¦å¯¼å‡ºäº‹ä»¶ï¼Œè¯·ç¡®ä¿æœ‰è¶³å¤Ÿçš„èµ„æºç»™äº‹ä»¶å¯¼å‡ºå™¨ Pod ä½¿ç”¨ã€‚ è¿™å¯èƒ½ä¼šå› ä¸ºå·¥ä½œè´Ÿè½½çš„ä¸åŒè€Œæœ‰æ‰€ä¸åŒï¼Œä½†å¹³å‡è€Œè¨€ï¼Œéœ€è¦å¤§çº¦ 100MB çš„å†…å­˜å’Œ 100m çš„ CPUã€‚
éƒ¨ç½²åˆ°ç°æœ‰é›†ç¾¤ ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å°†äº‹ä»¶å¯¼å‡ºå™¨éƒ¨ç½²åˆ°æ‚¨çš„é›†ç¾¤ï¼š
kubectl create -f https://k8s.io/examples/debug/event-exporter.yaml ç”±äºäº‹ä»¶å¯¼å‡ºå™¨è®¿é—® Kubernetes APIï¼Œå› æ­¤å®ƒéœ€è¦æƒé™æ‰èƒ½è®¿é—®ã€‚ ä»¥ä¸‹çš„éƒ¨ç½²é…ç½®ä¸ºä½¿ç”¨ RBAC æˆæƒã€‚ å®ƒè®¾ç½®æœåŠ¡å¸æˆ·å’Œé›†ç¾¤è§’è‰²ç»‘å®šï¼Œä»¥å…è®¸äº‹ä»¶å¯¼å‡ºå™¨è¯»å–äº‹ä»¶ã€‚ ä¸ºäº†ç¡®ä¿äº‹ä»¶å¯¼å‡ºå™¨ Pod ä¸ä¼šä»èŠ‚ç‚¹ä¸­é€€å‡ºï¼Œæ‚¨å¯ä»¥å¦å¤–è®¾ç½®èµ„æºè¯·æ±‚ã€‚ å¦‚å‰æ‰€è¿°ï¼Œ100MB å†…å­˜å’Œ 100m CPU åº”è¯¥å°±è¶³å¤Ÿäº†ã€‚</description>
    </item>
    
    <item>
      <title>StatefulSet åŸºç¡€</title>
      <link>https://lijun.in/tutorials/stateful-application/basic-stateful-set/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/stateful-application/basic-stateful-set/</guid>
      <description>æœ¬æ•™ç¨‹ä»‹ç»å¦‚ä½•äº†ä½¿ç”¨ StatefulSets æ¥ç®¡ç†åº”ç”¨ã€‚æ¼”ç¤ºäº†å¦‚ä½•åˆ›å»ºã€åˆ é™¤ã€æ‰©å®¹/ç¼©å®¹å’Œæ›´æ–° StatefulSets çš„ Podsã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} åœ¨å¼€å§‹æœ¬æ•™ç¨‹ä¹‹å‰ï¼Œä½ åº”è¯¥ç†Ÿæ‚‰ä»¥ä¸‹ Kubernetes çš„æ¦‚å¿µï¼š
 Pods Cluster DNS Headless Services PersistentVolumes [PersistentVolume Provisioning](https://github.com/kubernetes/examples/tree/. param &amp;ldquo;githubbranch&amp;rdquo; &amp;gt;}}/staging/persistent-volume-provisioning/) StatefulSets kubectl CLI  æœ¬æ•™ç¨‹å‡è®¾ä½ çš„é›†ç¾¤è¢«é…ç½®ä¸ºåŠ¨æ€çš„æä¾› PersistentVolumesã€‚å¦‚æœæ²¡æœ‰è¿™æ ·é…ç½®ï¼Œåœ¨å¼€å§‹æœ¬æ•™ç¨‹ä¹‹å‰ï¼Œä½ éœ€è¦æ‰‹åŠ¨å‡†å¤‡ 2 ä¸ª 1 GiB çš„å­˜å‚¨å·ã€‚
. heading &amp;ldquo;objectives&amp;rdquo; %}} StatefulSets æ—¨åœ¨ä¸æœ‰çŠ¶æ€çš„åº”ç”¨åŠåˆ†å¸ƒå¼ç³»ç»Ÿä¸€èµ·ä½¿ç”¨ã€‚ç„¶è€Œåœ¨ Kubernetes ä¸Šç®¡ç†æœ‰çŠ¶æ€åº”ç”¨å’Œåˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯ä¸€ä¸ªå®½æ³›è€Œå¤æ‚çš„è¯é¢˜ã€‚ä¸ºäº†æ¼”ç¤º StatefulSet çš„åŸºæœ¬ç‰¹æ€§ï¼Œå¹¶ä¸”ä¸ä½¿å‰åçš„ä¸»é¢˜æ··æ·†ï¼Œä½ å°†ä¼šä½¿ç”¨ StatefulSet éƒ¨ç½²ä¸€ä¸ªç®€å•çš„ web åº”ç”¨ã€‚
åœ¨é˜…è¯»æœ¬æ•™ç¨‹åï¼Œä½ å°†ç†Ÿæ‚‰ä»¥ä¸‹å†…å®¹ï¼š
 å¦‚ä½•åˆ›å»º StatefulSet StatefulSet æ€æ ·ç®¡ç†å®ƒçš„ Pods å¦‚ä½•åˆ é™¤ StatefulSet å¦‚ä½•å¯¹ StatefulSet è¿›è¡Œæ‰©å®¹/ç¼©å®¹ å¦‚ä½•æ›´æ–°ä¸€ä¸ª StatefulSet çš„ Pods  åˆ›å»º StatefulSet ä½œä¸ºå¼€å§‹ï¼Œä½¿ç”¨å¦‚ä¸‹ç¤ºä¾‹åˆ›å»ºä¸€ä¸ª StatefulSetã€‚å®ƒå’Œ StatefulSets æ¦‚å¿µä¸­çš„ç¤ºä¾‹ç›¸ä¼¼ã€‚å®ƒåˆ›å»ºäº†ä¸€ä¸ª Headless Service nginx ç”¨æ¥å‘å¸ƒ StatefulSet web ä¸­çš„ Pod çš„ IP åœ°å€ã€‚</description>
    </item>
    
    <item>
      <title>TLS bootstrapping</title>
      <link>https://lijun.in/reference/command-line-tools-reference/kubelet-tls-bootstrapping/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/command-line-tools-reference/kubelet-tls-bootstrapping/</guid>
      <description>. toc &amp;gt;}}
Overview This document describes how to set up TLS client certificate bootstrapping for kubelets. Kubernetes 1.4 introduced an API for requesting certificates from a cluster-level Certificate Authority (CA). The original intent of this API is to enable provisioning of TLS client certificates for kubelets. The proposal can be found here and progress on the feature is being tracked as feature #43.
kube-apiserver configuration The API server should be configured with an authenticator that can authenticate tokens as a user in the system:bootstrappers group.</description>
    </item>
    
    <item>
      <title>ä¸º Kubernetes è¿è¡Œ etcd é›†ç¾¤</title>
      <link>https://lijun.in/tasks/administer-cluster/configure-upgrade-etcd/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/configure-upgrade-etcd/</guid>
      <description>. glossary_definition term_id=&amp;quot;etcd&amp;rdquo; length=&amp;quot;all&amp;rdquo; prepend=&amp;quot;etcd æ˜¯ä¸€ä¸ª&amp;quot;&amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å…ˆå†³æ¡ä»¶   è¿è¡Œçš„ etcd é›†ç¾¤ä¸ªæ•°æˆå‘˜ä¸ºå¥‡æ•°ã€‚
  etcd æ˜¯ä¸€ä¸ª leader-based åˆ†å¸ƒå¼ç³»ç»Ÿã€‚ç¡®ä¿ä¸»èŠ‚ç‚¹å®šæœŸå‘æ‰€æœ‰ä»èŠ‚ç‚¹å‘é€å¿ƒè·³ï¼Œä»¥ä¿æŒé›†ç¾¤ç¨³å®šã€‚
  ç¡®ä¿ä¸å‘ç”Ÿèµ„æºä¸è¶³ã€‚
é›†ç¾¤çš„æ€§èƒ½å’Œç¨³å®šæ€§å¯¹ç½‘ç»œå’Œç£ç›˜ IO éå¸¸æ•æ„Ÿã€‚ä»»ä½•èµ„æºåŒ®ä¹éƒ½ä¼šå¯¼è‡´å¿ƒè·³è¶…æ—¶ï¼Œä»è€Œå¯¼è‡´é›†ç¾¤çš„ä¸ç¨³å®šã€‚ä¸ç¨³å®šçš„æƒ…å†µè¡¨æ˜æ²¡æœ‰é€‰å‡ºä»»ä½•ä¸»èŠ‚ç‚¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé›†ç¾¤ä¸èƒ½å¯¹å…¶å½“å‰çŠ¶æ€è¿›è¡Œä»»ä½•æ›´æ”¹ï¼Œè¿™æ„å‘³ç€ä¸èƒ½è°ƒåº¦æ–°çš„ podã€‚
  ä¿æŒç¨³å®šçš„ etcd é›†ç¾¤å¯¹ Kubernetes é›†ç¾¤çš„ç¨³å®šæ€§è‡³å…³é‡è¦ã€‚å› æ­¤ï¼Œè¯·åœ¨ä¸“ç”¨æœºå™¨æˆ–éš”ç¦»ç¯å¢ƒä¸Šè¿è¡Œ etcd é›†ç¾¤ï¼Œä»¥æ»¡è¶³æ‰€éœ€èµ„æºéœ€æ±‚ã€‚
  åœ¨ç”Ÿäº§ä¸­è¿è¡Œçš„ etcd çš„æœ€ä½æ¨èç‰ˆæœ¬æ˜¯ 3.2.10+ã€‚
  èµ„æºè¦æ±‚ ä½¿ç”¨æœ‰é™çš„èµ„æºè¿è¡Œ etcd åªé€‚åˆæµ‹è¯•ç›®çš„ã€‚ä¸ºäº†åœ¨ç”Ÿäº§ä¸­éƒ¨ç½²ï¼Œéœ€è¦å…ˆè¿›çš„ç¡¬ä»¶é…ç½®ã€‚åœ¨ç”Ÿäº§ä¸­éƒ¨ç½² etcd ä¹‹å‰ï¼Œè¯·æŸ¥çœ‹æ‰€éœ€èµ„æºå‚è€ƒæ–‡æ¡£ã€‚
å¯åŠ¨ etcd é›†ç¾¤ æœ¬èŠ‚ä»‹ç»å¦‚ä½•å¯åŠ¨å•èŠ‚ç‚¹å’Œå¤šèŠ‚ç‚¹ etcd é›†ç¾¤ã€‚
å•èŠ‚ç‚¹ etcd é›†ç¾¤ åªä¸ºæµ‹è¯•ç›®çš„ä½¿ç”¨å•èŠ‚ç‚¹ etcd é›†ç¾¤ã€‚</description>
    </item>
    
    <item>
      <title>ä¸ºå®¹å™¨è®¾ç½®ç¯å¢ƒå˜é‡</title>
      <link>https://lijun.in/tasks/inject-data-application/define-environment-variable-container/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/inject-data-application/define-environment-variable-container/</guid>
      <description>æœ¬é¡µå°†å±•ç¤ºå¦‚ä½•ä¸º kubernetes Pod ä¸‹çš„å®¹å™¨è®¾ç½®ç¯å¢ƒå˜é‡ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ä¸ºå®¹å™¨è®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡ åˆ›å»º Pod æ—¶ï¼Œå¯ä»¥ä¸ºå…¶ä¸‹çš„å®¹å™¨è®¾ç½®ç¯å¢ƒå˜é‡ã€‚é€šè¿‡é…ç½®æ–‡ä»¶çš„ env æˆ–è€… envFrom å­—æ®µæ¥è®¾ç½®ç¯å¢ƒå˜é‡ã€‚
æœ¬ç¤ºä¾‹ä¸­ï¼Œå°†åˆ›å»ºä¸€ä¸ªåªåŒ…å«å•ä¸ªå®¹å™¨çš„ Podã€‚Pod çš„é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ç¯å¢ƒå˜é‡çš„åç§°ä¸º DEMO_GREETINGï¼Œ å…¶å€¼ä¸º &amp;quot;Hello from the environment&amp;quot;ã€‚ä¸‹é¢æ˜¯ Pod çš„é…ç½®æ–‡ä»¶å†…å®¹ï¼š
. codenew file=&amp;quot;pods/inject/envars.yaml&amp;rdquo; &amp;gt;}}
  åŸºäº YAML æ–‡ä»¶åˆ›å»ºä¸€ä¸ª Podï¼š
kubectl apply -f https://k8s.io/examples/pods/inject/envars.yaml     è·å–ä¸€ä¸‹å½“å‰æ­£åœ¨è¿è¡Œçš„ Pods ä¿¡æ¯ï¼š
kubectl get pods -l purpose=demonstrate-envars æŸ¥è¯¢ç»“æœåº”ä¸ºï¼š
NAME READY STATUS RESTARTS AGE envar-demo 1/1 Running 0 9s     è¿›å…¥è¯¥ Pod ä¸‹çš„å®¹å™¨å¹¶æ‰“å¼€ä¸€ä¸ªå‘½ä»¤ç»ˆç«¯ï¼š</description>
    </item>
    
    <item>
      <title>ä¸ºç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹é¢„ç•™è®¡ç®—èµ„æº</title>
      <link>https://lijun.in/tasks/administer-cluster/reserve-compute-resources/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/reserve-compute-resources/</guid>
      <description>Kubernetes çš„èŠ‚ç‚¹å¯ä»¥æŒ‰ç…§ Capacity è°ƒåº¦ã€‚é»˜è®¤æƒ…å†µä¸‹ pod èƒ½å¤Ÿä½¿ç”¨èŠ‚ç‚¹å…¨éƒ¨å¯ç”¨å®¹é‡ã€‚è¿™æ˜¯ä¸ªé—®é¢˜ï¼Œå› ä¸ºèŠ‚ç‚¹è‡ªå·±é€šå¸¸è¿è¡Œäº†ä¸å°‘é©±åŠ¨ OS å’Œ Kubernetes çš„ç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹ã€‚é™¤éä¸ºè¿™äº›ç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹ç•™å‡ºèµ„æºï¼Œå¦åˆ™å®ƒä»¬å°†ä¸ pod äº‰å¤ºèµ„æºå¹¶å¯¼è‡´èŠ‚ç‚¹èµ„æºçŸ­ç¼ºé—®é¢˜ã€‚
kubelet å…¬å¼€äº†ä¸€ä¸ªåä¸º Node Allocatable çš„ç‰¹æ€§ï¼Œæœ‰åŠ©äºä¸ºç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹é¢„ç•™è®¡ç®—èµ„æºã€‚Kubernetes æ¨èé›†ç¾¤ç®¡ç†å‘˜æŒ‰ç…§æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„å·¥ä½œè´Ÿè½½å¯†åº¦é…ç½® Node Allocatableã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å¯åˆ†é…çš„èŠ‚ç‚¹ Node Capacity --------------------------- | kube-reserved | |-------------------------| | system-reserved | |-------------------------| | eviction-threshold | |-------------------------| | | | allocatable | | (available for pods) | | | | | --------------------------- Kubernetes èŠ‚ç‚¹ä¸Šçš„ Allocatable è¢«å®šä¹‰ä¸º pod å¯ç”¨è®¡ç®—èµ„æºé‡ã€‚è°ƒåº¦å™¨ä¸ä¼šè¶…é¢ç”³è¯· Allocatableã€‚ç›®å‰æ”¯æŒ CPU, memory å’Œ ephemeral-storage è¿™å‡ ä¸ªå‚æ•°ã€‚</description>
    </item>
    
    <item>
      <title>ä¸ºèŠ‚ç‚¹å‘å¸ƒæ‰©å±•èµ„æº</title>
      <link>https://lijun.in/tasks/administer-cluster/extended-resource-node/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/extended-resource-node/</guid>
      <description>æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•ä¸ºèŠ‚ç‚¹æŒ‡å®šæ‰©å±•èµ„æºã€‚ æ‰©å±•èµ„æºå…è®¸é›†ç¾¤ç®¡ç†å‘˜å‘å¸ƒèŠ‚ç‚¹çº§åˆ«çš„èµ„æºï¼Œè¿™äº›èµ„æºåœ¨ä¸è¿›è¡Œå‘å¸ƒçš„æƒ…å†µä¸‹æ— æ³•è¢« Kubernetes æ„ŸçŸ¥ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
è·å–æ‚¨çš„èŠ‚ç‚¹åç§° kubectl get nodes é€‰æ‹©æ‚¨çš„ä¸€ä¸ªèŠ‚ç‚¹ç”¨äºæ­¤ç»ƒä¹ ã€‚
åœ¨æ‚¨çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šå‘å¸ƒä¸€ç§æ–°çš„æ‰©å±•èµ„æº ä¸ºåœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šå‘å¸ƒä¸€ç§æ–°çš„æ‰©å±•èµ„æºï¼Œéœ€è¦å‘é€ä¸€ä¸ª HTTP PATCH è¯·æ±‚åˆ° Kubernetes API serverã€‚ ä¾‹å¦‚ï¼šå‡è®¾æ‚¨çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸Šå¸¦æœ‰å››ä¸ª dongle èµ„æºã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª PATCH è¯·æ±‚çš„ç¤ºä¾‹ï¼Œ è¯¥è¯·æ±‚ä¸ºæ‚¨çš„èŠ‚ç‚¹å‘å¸ƒå››ä¸ª dongle èµ„æºã€‚
PATCH /api/v1/nodes/&amp;lt;your-node-name&amp;gt;/status HTTP/1.1 Accept: application/json Content-Type: application/json-patch+json Host: k8s-master:8080 [ { &amp;#34;op&amp;#34;: &amp;#34;add&amp;#34;, &amp;#34;path&amp;#34;: &amp;#34;/status/capacity/example.com~1dongle&amp;#34;, &amp;#34;value&amp;#34;: &amp;#34;4&amp;#34; } ] æ³¨æ„ï¼šKubernetes ä¸éœ€è¦äº†è§£ dongle èµ„æºçš„å«ä¹‰å’Œç”¨é€”ã€‚ å‰é¢çš„ PATCH è¯·æ±‚ä»…ä»…å‘Šè¯‰ Kubernetes æ‚¨çš„èŠ‚ç‚¹æ‹¥æœ‰å››ä¸ªæ‚¨ç§°ä¹‹ä¸º dongle çš„ä¸œè¥¿ã€‚
å¯åŠ¨ä¸€ä¸ªä»£ç†ï¼ˆproxyï¼‰ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥å¾ˆå®¹æ˜“åœ°å‘ Kubernetes API server å‘é€è¯·æ±‚ï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ ABAC é‰´æƒ</title>
      <link>https://lijun.in/reference/access-authn-authz/abac/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/access-authn-authz/abac/</guid>
      <description>åŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼ˆAttribute-based access control - ABACï¼‰å®šä¹‰äº†è®¿é—®æ§åˆ¶èŒƒä¾‹ï¼Œå…¶ä¸­é€šè¿‡ä½¿ç”¨å°†å±æ€§ç»„åˆåœ¨ä¸€èµ·çš„ç­–ç•¥æ¥å‘ç”¨æˆ·æˆäºˆè®¿é—®æƒé™ã€‚
ç­–ç•¥æ–‡ä»¶æ ¼å¼ åŸºäº ABAC æ¨¡å¼ï¼Œå¯ä»¥è¿™æ ·æŒ‡å®šç­–ç•¥æ–‡ä»¶ --authorization-policy-file=SOME_FILENAMEã€‚
æ­¤æ–‡ä»¶æ ¼å¼æ˜¯ JSON Linesï¼Œä¸åº”å­˜åœ¨å°é—­çš„åˆ—è¡¨æˆ–æ˜ å°„ï¼Œæ¯è¡Œä¸€ä¸ªæ˜ å°„ã€‚
æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªç­–ç•¥å¯¹è±¡ï¼Œç­–ç•¥å¯¹è±¡æ˜¯å…·æœ‰ä»¥ä¸‹å±æ€§çš„æ˜ å°„ï¼š
 ç‰ˆæœ¬æ§åˆ¶å±æ€§ï¼š  apiVersionï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼šæœ‰æ•ˆå€¼ä¸ºabac.authorization.kubernetes.io/v1beta1ï¼Œå…è®¸å¯¹ç­–ç•¥æ ¼å¼è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œè½¬æ¢ã€‚ kindï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼šæœ‰æ•ˆå€¼ä¸º Policyï¼Œå…è®¸å¯¹ç­–ç•¥æ ¼å¼è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œè½¬æ¢ã€‚   spec é…ç½®ä¸ºå…·æœ‰ä»¥ä¸‹æ˜ å°„çš„å±æ€§ï¼š  ä¸»ä½“åŒ¹é…å±æ€§ï¼š  userï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼›æ¥è‡ª --token-auth-file çš„ç”¨æˆ·å­—ç¬¦ä¸²ï¼Œå¦‚æœä½ æŒ‡å®š userï¼Œå®ƒå¿…é¡»ä¸éªŒè¯ç”¨æˆ·çš„ç”¨æˆ·ååŒ¹é…ã€‚ groupï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼›å¦‚æœæŒ‡å®š groupï¼Œå®ƒå¿…é¡»ä¸ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·çš„ä¸€ä¸ªç»„åŒ¹é…ï¼Œsystem:authenticatedåŒ¹é…æ‰€æœ‰ç»è¿‡èº«ä»½éªŒè¯çš„è¯·æ±‚ã€‚system:unauthenticatedåŒ¹é…æ‰€æœ‰æœªç»è¿‡èº«ä»½éªŒè¯çš„è¯·æ±‚ã€‚     èµ„æºåŒ¹é…å±æ€§ï¼š  apiGroupï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼›ä¸€ä¸ª API ç»„ã€‚  ä¾‹ï¼š extensions é€šé…ç¬¦ï¼š*åŒ¹é…æ‰€æœ‰ API ç»„ã€‚   namespaceï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼›ä¸€ä¸ªå‘½åç©ºé—´ã€‚  ä¾‹å¦‚ï¼škube-system é€šé…ç¬¦ï¼š*åŒ¹é…æ‰€æœ‰èµ„æºè¯·æ±‚ã€‚   resourceï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼›èµ„æºç±»å‹ã€‚  ä¾‹ï¼špods é€šé…ç¬¦ï¼š*åŒ¹é…æ‰€æœ‰èµ„æºè¯·æ±‚ã€‚     éèµ„æºåŒ¹é…å±æ€§ï¼š  nonResourcePathï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼›éèµ„æºè¯·æ±‚è·¯å¾„ã€‚  ä¾‹å¦‚ï¼š/versionæˆ– /apis é€šé…ç¬¦ï¼š  * åŒ¹é…æ‰€æœ‰éèµ„æºè¯·æ±‚ã€‚ /foo/* åŒ¹é… /foo/ çš„æ‰€æœ‰å­è·¯å¾„ã€‚       readonlyï¼Œé”®å…¥å¸ƒå°”å€¼ï¼Œå¦‚æœä¸º trueï¼Œåˆ™è¡¨ç¤ºè¯¥ç­–ç•¥ä»…é€‚ç”¨äº getã€list å’Œ watch æ“ä½œã€‚  .</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ ConfigMap æ¥é…ç½® Redis</title>
      <link>https://lijun.in/tutorials/configuration/configure-redis-using-configmap/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/configuration/configure-redis-using-configmap/</guid>
      <description>è¿™ç¯‡æ–‡æ¡£åŸºäºä½¿ç”¨ ConfigMap æ¥é…ç½® Containers è¿™ä¸ªä»»åŠ¡ï¼Œæä¾›äº†ä¸€ä¸ªä½¿ç”¨ ConfigMap æ¥é…ç½® Redis çš„çœŸå®æ¡ˆä¾‹ã€‚
. heading &amp;ldquo;objectives&amp;rdquo; %}}    åˆ›å»ºä¸€ä¸ªåŒ…å«ä»¥ä¸‹å†…å®¹çš„ kustomization.yaml æ–‡ä»¶ï¼š ä¸€ä¸ª ConfigMap ç”Ÿæˆå™¨ ä¸€ä¸ªä½¿ç”¨ ConfigMap çš„ Pod èµ„æºé…ç½®   ä½¿ç”¨ kubectl apply -k ./ åº”ç”¨æ•´ä¸ªè·¯å¾„çš„é…ç½® éªŒè¯é…ç½®å·²ç»è¢«æ­£ç¡®åº”ç”¨ã€‚  . heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}   æ­¤é¡µé¢ä¸Šæ˜¾ç¤ºçš„ç¤ºä¾‹é€‚ç”¨äº kubectl 1.14å’Œåœ¨å…¶ä»¥ä¸Šçš„ç‰ˆæœ¬ã€‚ ç†è§£ä½¿ç”¨ConfigMapæ¥é…ç½®Containersã€‚  çœŸå®ä¸–ç•Œçš„æ¡ˆä¾‹ï¼šä½¿ç”¨ ConfigMap æ¥é…ç½® Redis æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ConfigMapä¸­çš„æ•°æ®æ¥é…ç½®Redisç¼“å­˜ã€‚
 æ ¹æ®docs/user-guide/configmap/redis/redis-configæ¥åˆ›å»ºä¸€ä¸ªConfigMapï¼š  . codenew file=&amp;quot;pods/config/redis-config&amp;rdquo; &amp;gt;}}
curl -OL https://k8s.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ CoreDNS è¿›è¡ŒæœåŠ¡å‘ç°</title>
      <link>https://lijun.in/tasks/administer-cluster/coredns/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/coredns/</guid>
      <description>æ­¤é¡µé¢ä»‹ç»äº† CoreDNS å‡çº§è¿‡ç¨‹ä»¥åŠå¦‚ä½•å®‰è£… CoreDNS è€Œä¸æ˜¯ kube-dnsã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å…³äº CoreDNS CoreDNS æ˜¯ä¸€ä¸ªçµæ´»å¯æ‰©å±•çš„ DNS æœåŠ¡å™¨ï¼Œå¯ä»¥ä½œä¸º Kubernetes é›†ç¾¤ DNSã€‚ä¸ Kubernetes ä¸€æ ·ï¼ŒCoreDNS é¡¹ç›®ç”± . glossary_tooltip text=&amp;quot;CNCF&amp;rdquo; term_id=&amp;quot;cncf&amp;rdquo; &amp;gt;}} æ‰˜ç®¡ã€‚
é€šè¿‡åœ¨ç°æœ‰çš„é›†ç¾¤ä¸­æ›¿æ¢ kube-dnsï¼Œå¯ä»¥åœ¨é›†ç¾¤ä¸­ä½¿ç”¨ CoreDNS ä»£æ›¿ kube-dns éƒ¨ç½²ï¼Œæˆ–è€…ä½¿ç”¨ kubeadm ç­‰å·¥å…·æ¥ä¸ºæ‚¨éƒ¨ç½²å’Œå‡çº§é›†ç¾¤ã€‚
å®‰è£… CoreDNS æœ‰å…³æ‰‹åŠ¨éƒ¨ç½²æˆ–æ›¿æ¢ kube-dnsï¼Œè¯·å‚é˜… CoreDNS GitHub å·¥ç¨‹ã€‚
è¿ç§»åˆ° CoreDNS ä½¿ç”¨ kubeadm å‡çº§ç°æœ‰é›†ç¾¤ åœ¨ Kubernetes 1.10 åŠæ›´é«˜ç‰ˆæœ¬ä¸­ï¼Œå½“æ‚¨ä½¿ç”¨ kubeadm å‡çº§ä½¿ç”¨ kube-dns çš„é›†ç¾¤æ—¶ï¼Œæ‚¨è¿˜å¯ä»¥è¿ç§»åˆ° CoreDNSã€‚ åœ¨æœ¬ä¾‹ä¸­ kubeadm å°†ç”Ÿæˆ CoreDNS é…ç½®ï¼ˆ&amp;ldquo;Corefile&amp;rdquo;ï¼‰åŸºäº kube-dns ConfigMapï¼Œä¿å­˜è”é‚¦ã€å­˜æ ¹åŸŸå’Œä¸Šæ¸¸åç§°æœåŠ¡å™¨çš„é…ç½®ã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ crictl å¯¹ Kubernetes èŠ‚ç‚¹è¿›è¡Œè°ƒè¯•</title>
      <link>https://lijun.in/tasks/debug-application-cluster/crictl/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/crictl/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;v1.11&amp;rdquo; state=&amp;quot;stable&amp;rdquo; &amp;gt;}}
crictl æ˜¯ CRI å…¼å®¹çš„å®¹å™¨è¿è¡Œæ—¶å‘½ä»¤è¡Œæ¥å£ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥æ£€æŸ¥å’Œè°ƒè¯• Kubernetes èŠ‚ç‚¹ä¸Šçš„å®¹å™¨è¿è¡Œæ—¶å’Œåº”ç”¨ç¨‹åºã€‚ crictlå’Œå®ƒçš„æºä»£ç åœ¨ cri-tools ä»£ç åº“ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} crictl éœ€è¦å¸¦æœ‰ CRI è¿è¡Œæ—¶çš„ Linux æ“ä½œç³»ç»Ÿã€‚
å®‰è£… crictl æ‚¨å¯ä»¥ä» cri-tools å‘å¸ƒé¡µé¢ä¸‹è½½ä¸€ä¸ªå‹ç¼©çš„ crictl å½’æ¡£æ–‡ä»¶ï¼Œç”¨äºå‡ ç§ä¸åŒçš„æ¶æ„ã€‚ ä¸‹è½½ä¸æ‚¨çš„ kubernetes ç‰ˆæœ¬ç›¸å¯¹åº”çš„ç‰ˆæœ¬ã€‚ æå–å®ƒå¹¶å°†å…¶ç§»åŠ¨åˆ°ç³»ç»Ÿè·¯å¾„ä¸Šçš„æŸä¸ªä½ç½®ï¼Œä¾‹å¦‚/usr/local/bin/ã€‚
ä¸€èˆ¬ç”¨æ³• crictl å‘½ä»¤æœ‰å‡ ä¸ªå­å‘½ä»¤å’Œè¿è¡Œæ—¶å‚æ•°ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·ä½¿ç”¨ crictl help æˆ– crictl &amp;lt;subcommand&amp;gt; help è·å–å¸®åŠ©ä¿¡æ¯ã€‚
crictl é»˜è®¤è¿æ¥åˆ° unix:///var/run/dockershim.sockã€‚ å¯¹äºå…¶ä»–çš„è¿è¡Œæ—¶ï¼Œæ‚¨å¯ä»¥ç”¨å¤šç§ä¸åŒçš„æ–¹æ³•è®¾ç½®ç«¯ç‚¹ï¼š
 é€šè¿‡è®¾ç½®å‚æ•° --runtime-endpoint å’Œ --image-endpoint é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ CONTAINER_RUNTIME_ENDPOINT å’Œ IMAGE_SERVICE_ENDPOINT é€šè¿‡åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ç«¯ç‚¹ --config=/etc/crictl.yaml  æ‚¨è¿˜å¯ä»¥åœ¨è¿æ¥åˆ°æœåŠ¡å™¨å¹¶å¯ç”¨æˆ–ç¦ç”¨è°ƒè¯•æ—¶æŒ‡å®šè¶…æ—¶å€¼ï¼Œæ–¹æ³•æ˜¯åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š timeout æˆ– debug å€¼ï¼Œæˆ–è€…ä½¿ç”¨ --timeout å’Œ --debug å‘½ä»¤è¡Œå‚æ•°ã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ ElasticSearch å’Œ Kibana è¿›è¡Œæ—¥å¿—ç®¡ç†</title>
      <link>https://lijun.in/tasks/debug-application-cluster/logging-elasticsearch-kibana/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/logging-elasticsearch-kibana/</guid>
      <description>åœ¨ Google Compute Engine (GCE) å¹³å°ä¸Šï¼Œé»˜è®¤çš„æ—¥å¿—ç®¡ç†æ”¯æŒç›®æ ‡æ˜¯ Stackdriver Loggingï¼Œåœ¨ ä½¿ç”¨ Stackdriver Logging ç®¡ç†æ—¥å¿—ä¸­è¯¦ç»†æè¿°äº†è¿™ä¸€ç‚¹ã€‚
æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•è®¾ç½®ä¸€ä¸ªé›†ç¾¤ï¼Œå°†æ—¥å¿—å¯¼å…¥Elasticsearchï¼Œå¹¶ä½¿ç”¨ Kibana æŸ¥çœ‹æ—¥å¿—ï¼Œä½œä¸ºåœ¨ GCE ä¸Šè¿è¡Œåº”ç”¨æ—¶ä½¿ç”¨ Stackdriver Logging ç®¡ç†æ—¥å¿—çš„æ›¿ä»£æ–¹æ¡ˆã€‚
. note &amp;gt;}}
æ‚¨ä¸èƒ½åœ¨ Google Kubernetes Engine å¹³å°è¿è¡Œçš„ Kubernetes é›†ç¾¤ä¸Šè‡ªåŠ¨çš„éƒ¨ç½² Elasticsearch å’Œ Kibanaã€‚æ‚¨å¿…é¡»æ‰‹åŠ¨éƒ¨ç½²å®ƒä»¬ã€‚ . /note &amp;gt;}}
è¦ä½¿ç”¨ Elasticsearch å’Œ Kibana å¤„ç†é›†ç¾¤æ—¥å¿—ï¼Œæ‚¨åº”è¯¥åœ¨ä½¿ç”¨ kube-up.sh è„šæœ¬åˆ›å»ºé›†ç¾¤æ—¶è®¾ç½®ä¸‹é¢æ‰€ç¤ºçš„ç¯å¢ƒå˜é‡ï¼š
KUBE_LOGGING_DESTINATION=elasticsearch æ‚¨è¿˜åº”è¯¥ç¡®ä¿è®¾ç½®äº† KUBE_ENABLE_NODE_LOGGING=true ï¼ˆè¿™æ˜¯ GCE å¹³å°çš„é»˜è®¤è®¾ç½®ï¼‰ã€‚
ç°åœ¨ï¼Œå½“æ‚¨åˆ›å»ºé›†ç¾¤æ—¶ï¼Œå°†æœ‰ä¸€æ¡æ¶ˆæ¯å°†æŒ‡ç¤ºæ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œçš„ Fluentd æ—¥å¿—æ”¶é›†å®ˆæŠ¤è¿›ç¨‹ä»¥ ElasticSearch ä¸ºæ—¥å¿—è¾“å‡ºç›®æ ‡ï¼š
$ cluster/kube-up.sh ... Project: kubernetes-satnam Zone: us-central1-b ... calling kube-up Project: kubernetes-satnam Zone: us-central1-b +++ Staging server tars to Google Storage: gs://kubernetes-staging-e6d0e81793/devel +++ kubernetes-server-linux-amd64.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Falco å®¡è®¡</title>
      <link>https://lijun.in/tasks/debug-application-cluster/falco/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/falco/</guid>
      <description>ä½¿ç”¨ Falco é‡‡é›†å®¡è®¡äº‹ä»¶ Falcoæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œç”¨äºä¸ºäº‘åŸç”Ÿå¹³å°æä¾›å…¥ä¾µå’Œå¼‚å¸¸æ£€æµ‹ã€‚æœ¬èŠ‚ä»‹ç»å¦‚ä½•è®¾ç½® Falcoã€å¦‚ä½•å°†å®¡è®¡äº‹ä»¶å‘é€åˆ° Falco å…¬å¼€çš„ Kubernetes Audit ç«¯ç‚¹ã€ä»¥åŠ Falco å¦‚ä½•åº”ç”¨ä¸€ç»„è§„åˆ™æ¥è‡ªåŠ¨æ£€æµ‹å¯ç–‘è¡Œä¸ºã€‚
å®‰è£… Falco ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å®‰è£… Falco ï¼š
 [ç‹¬ç«‹å®‰è£… Falco][falco_installation] [Kubernetes DaemonSet][falco_installation] [Falco Helm Chart][falco_helm_chart]  å®‰è£…å®Œæˆ Falco åï¼Œè¯·ç¡®ä¿å°†å…¶é…ç½®ä¸ºå…¬å¼€ Audit Webhookã€‚ä¸ºæ­¤ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š
webserver: enabled: true listen_port: 8765 k8s_audit_endpoint: /k8s_audit ssl_enabled: false ssl_certificate: /etc/falco/falco.pem æ­¤é…ç½®é€šå¸¸ä½äº /etc/falco/falco.yaml æ–‡ä»¶ä¸­ã€‚å¦‚æœ Falco ä½œä¸º Kubernetes DaemonSet å®‰è£…ï¼Œè¯·ç¼–è¾‘ falco-config ConfigMap å¹¶æ·»åŠ æ­¤é…ç½®ã€‚
é…ç½® Kubernetes å®¡è®¡   ä¸º kube-apiserver webhook å®¡è®¡åç«¯åˆ›å»ºä¸€ä¸ªkubeconfigæ–‡ä»¶ã€‚
 cat &amp;lt;&amp;lt;EOF &amp;gt; /etc/kubernetes/audit-webhook-kubeconfig apiVersion: v1 kind: Config clusters: - cluster: server: http://&amp;lt;ip_of_falco&amp;gt;:8765/k8s_audit name: falco contexts: - context: cluster: falco user: &amp;quot;&amp;quot; name: default-context current-context: default-context preferences: {} users: [] EOF     ä½¿ç”¨ä»¥ä¸‹é€‰é¡¹å¯åŠ¨ kube-apiserverï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Helm å®‰è£… Service Catalog</title>
      <link>https://lijun.in/tasks/service-catalog/install-service-catalog-using-helm/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/service-catalog/install-service-catalog-using-helm/</guid>
      <description>. glossary_definition term_id=&amp;quot;service-catalog&amp;rdquo; length=&amp;quot;all&amp;rdquo; prepend=&amp;quot;Service Catalog is&amp;rdquo; &amp;gt;}}
ä½¿ç”¨ Helm åœ¨ Kubernetes é›†ç¾¤ä¸Šå®‰è£… Service Catalogã€‚ è¦è·å–æœ‰å…³æ­¤è¿‡ç¨‹çš„æœ€æ–°ä¿¡æ¯ï¼Œè¯·æµè§ˆ kubernetes-incubator/service-catalog ä»“åº“ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  ç†è§£ Service Catalog çš„å…³é”®æ¦‚å¿µã€‚ Service Catalog éœ€è¦ Kubernetes é›†ç¾¤ç‰ˆæœ¬åœ¨ 1.7 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ æ‚¨å¿…é¡»å¯ç”¨ Kubernetes é›†ç¾¤çš„ DNS åŠŸèƒ½ã€‚  å¦‚æœä½¿ç”¨åŸºäºäº‘çš„ Kubernetes é›†ç¾¤æˆ– . glossary_tooltip text=&amp;quot;Minikube&amp;rdquo; term_id=&amp;quot;minikube&amp;rdquo; &amp;gt;}}ï¼Œåˆ™å¯èƒ½å·²ç»å¯ç”¨äº†é›†ç¾¤ DNSã€‚ å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ hack/local-up-cluster.shï¼Œè¯·ç¡®ä¿è®¾ç½®äº† KUBE_ENABLE_CLUSTER_DNS ç¯å¢ƒå˜é‡ï¼Œç„¶åè¿è¡Œå®‰è£…è„šæœ¬ã€‚   å®‰è£…å’Œè®¾ç½® v1.7 æˆ–æ›´é«˜ç‰ˆæœ¬çš„ kubectlï¼Œç¡®ä¿å°†å…¶é…ç½®ä¸ºè¿æ¥åˆ° Kubernetes é›†ç¾¤ã€‚ å®‰è£… v2.7.0 æˆ–æ›´é«˜ç‰ˆæœ¬çš„ Helmã€‚  éµç…§ Helm å®‰è£…è¯´æ˜ã€‚ å¦‚æœå·²ç»å®‰è£…äº†é€‚å½“ç‰ˆæœ¬çš„ Helmï¼Œè¯·æ‰§è¡Œ helm init æ¥å®‰è£… Helm çš„æœåŠ¡å™¨ç«¯ç»„ä»¶ Tillerã€‚    æ·»åŠ  service-catalog Helm ä»“åº“ å®‰è£… Helm åï¼Œé€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°† service-catalog Helm å­˜å‚¨åº“æ·»åŠ åˆ°æœ¬åœ°è®¡ç®—æœºï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ IBM Cloud Private åœ¨å¤šä¸ªäº‘ä¸Šè¿è¡Œ Kubernetes</title>
      <link>https://lijun.in/setup/production-environment/turnkey/icp/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/turnkey/icp/</guid>
      <description>IBMÂ® Cloud Private æ˜¯ä¸€ä¸ª ä¸€ç«™å¼äº‘è§£å†³æ–¹æ¡ˆå¹¶ä¸”æ˜¯ä¸€ä¸ªæœ¬åœ°çš„ä¸€ç«™å¼äº‘è§£å†³æ–¹æ¡ˆã€‚ IBM Cloud Private æä¾›çº¯ä¸Šæ¸¸ Kubernetesï¼Œä»¥åŠè¿è¡Œå®é™…ä¼ä¸šå·¥ä½œè´Ÿè½½æ‰€éœ€çš„å…¸å‹ç®¡ç†ç»„ä»¶ã€‚è¿™äº›å·¥ä½œè´Ÿè½½åŒ…æ‹¬å¥åº·ç®¡ç†ã€æ—¥å¿—ç®¡ç†ã€å®¡è®¡è·Ÿè¸ªä»¥åŠç”¨äºè·Ÿè¸ªå¹³å°ä¸Šå·¥ä½œè´Ÿè½½ä½¿ç”¨æƒ…å†µçš„è®¡é‡ã€‚
IBM Cloud Private æä¾›äº†ç¤¾åŒºç‰ˆå’Œå…¨æ”¯æŒçš„ä¼ä¸šç‰ˆã€‚å¯ä» Docker Hub å…è´¹è·å¾—ç¤¾åŒºç‰ˆæœ¬ã€‚ä¼ä¸šç‰ˆæ”¯æŒé«˜å¯ç”¨æ€§æ‹“æ‰‘ï¼Œå¹¶åŒ…æ‹¬ IBM å¯¹ Kubernetes å’Œ IBM Cloud Private ç®¡ç†å¹³å°çš„å•†ä¸šæ”¯æŒã€‚å¦‚æœæ‚¨æƒ³å°è¯• IBM Cloud Privateï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ‰˜ç®¡è¯•ç”¨ç‰ˆã€æ•™ç¨‹æˆ–è‡ªæˆ‘æŒ‡å¯¼æ¼”ç¤ºã€‚æ‚¨ä¹Ÿå¯ä»¥å°è¯•å…è´¹çš„ç¤¾åŒºç‰ˆã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… IBM Cloud Private å…¥é—¨ã€‚
æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·æµè§ˆä»¥ä¸‹èµ„æºï¼š
 IBM Cloud Private IBM Cloud Private å‚è€ƒæ¶æ„ IBM Cloud Private æ–‡æ¡£  IBM Cloud Private å’Œ Terraform æ‚¨å¯ä»¥åˆ©ç”¨ä¸€ä¸‹æ¨¡å—ä½¿ç”¨ Terraform éƒ¨ç½² IBM Cloud Privateï¼š
 AWSï¼šå°† IBM Cloud Private éƒ¨ç½²åˆ° AWS Azureï¼šå°† IBM Cloud Private éƒ¨ç½²åˆ° Azure IBM Cloudï¼šå°† IBM Cloud Private é›†ç¾¤éƒ¨ç½²åˆ° IBM Cloud OpenStackï¼šå°†IBM Cloud Private éƒ¨ç½²åˆ° OpenStack Terraform æ¨¡å—ï¼šåœ¨ä»»ä½•æ”¯æŒçš„åŸºç¡€æ¶æ„ä¾›åº”å•†ä¸Šéƒ¨ç½² IBM Cloud Private VMwareï¼šå°† IBM Cloud Private éƒ¨ç½²åˆ° VMware  AWS ä¸Šçš„ IBM Cloud Private æ‚¨å¯ä»¥ä½¿ç”¨ AWS CloudFormation æˆ– Terraform åœ¨ Amazon Web Servicesï¼ˆAWSï¼‰ä¸Šéƒ¨ç½² IBM Cloud Private é›†ç¾¤ã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ KMS æä¾›å•†è¿›è¡Œæ•°æ®åŠ å¯†</title>
      <link>https://lijun.in/tasks/administer-cluster/kms-provider/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/kms-provider/</guid>
      <description>æœ¬é¡µå±•ç¤ºäº†å¦‚ä½•é…ç½®ç§˜é’¥ç®¡ç†æœåŠ¡â€”â€” Key Management Service (KMS) æä¾›å•†å’Œæ’ä»¶ä»¥å¯ç”¨æ•°æ®åŠ å¯†ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}   éœ€è¦ Kubernetes 1.10.0 æˆ–æ›´æ–°ç‰ˆæœ¬   éœ€è¦ etcd v3 æˆ–æ›´æ–°ç‰ˆæœ¬  . feature-state for_k8s_version=&amp;quot;v1.12&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
KMS åŠ å¯†æä¾›å•†ä½¿ç”¨å°å¥—åŠ å¯†æ¨¡å‹æ¥åŠ å¯† etcd ä¸­çš„æ•°æ®ã€‚æ•°æ®ä½¿ç”¨æ•°æ®åŠ å¯†ç§˜é’¥ï¼ˆDEKï¼‰åŠ å¯†ï¼›æ¯æ¬¡åŠ å¯†éƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„ DEKã€‚è¿™äº› DEK ç»ä¸€ä¸ªç§˜é’¥åŠ å¯†ç§˜é’¥ï¼ˆKEKï¼‰åŠ å¯†ååœ¨ä¸€ä¸ªè¿œç«¯çš„ KMS ä¸­å­˜å‚¨å’Œç®¡ç†ã€‚KMS æä¾›å•†ä½¿ç”¨ gRPC ä¸ä¸€ä¸ªç‰¹å®šçš„ KMS æ’ä»¶é€šä¿¡ã€‚è¿™ä¸ª KMS æ’ä»¶ä½œä¸ºä¸€ä¸ª gRPC æœåŠ¡å™¨è¢«éƒ¨ç½²åœ¨ Kubernetes ä¸»æœåŠ¡å™¨çš„åŒä¸€ä¸ªä¸»æœºä¸Šï¼Œè´Ÿè´£ä¸è¿œç«¯ KMS çš„é€šä¿¡ã€‚
é…ç½® KMS æä¾›å•† ä¸ºäº†åœ¨ API æœåŠ¡å™¨ä¸Šé…ç½® KMS æä¾›å•†ï¼Œåœ¨åŠ å¯†é…ç½®æ–‡ä»¶ä¸­çš„æä¾›å•†æ•°ç»„ä¸­åŠ å…¥ä¸€ä¸ªç±»å‹ä¸º kms çš„æä¾›å•†ï¼Œå¹¶è®¾ç½®ä¸‹åˆ—å±æ€§ï¼š
 name: KMS æ’ä»¶çš„æ˜¾ç¤ºåç§°ã€‚ endpoint: gRPC æœåŠ¡å™¨ï¼ˆKMS æ’ä»¶ï¼‰çš„ç›‘å¬åœ°å€ã€‚è¯¥ç«¯ç‚¹æ˜¯ä¸€ä¸ª UNIX çš„å¥—æ¥å­—ã€‚ cachesize: ä»¥æ˜æ–‡ç¼“å­˜çš„æ•°æ®åŠ å¯†ç§˜é’¥ï¼ˆDEKsï¼‰çš„æ•°é‡ã€‚ä¸€æ—¦è¢«ç¼“å­˜ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ DEKs è€Œæ— éœ€å¦å¤–è°ƒç”¨ KMSï¼›è€Œæœªè¢«ç¼“å­˜çš„ DEKs éœ€è¦è°ƒç”¨ä¸€æ¬¡ KMS æ‰èƒ½è§£åŒ…ã€‚ timeout: åœ¨è¿”å›ä¸€ä¸ªé”™è¯¯ä¹‹å‰ï¼Œkube-apiserver ç­‰å¾… kms-plugin å“åº”çš„æ—¶é—´ï¼ˆé»˜è®¤æ˜¯ 3 ç§’ï¼‰ã€‚  å‚è§ ç†è§£é™æ€æ•°æ®åŠ å¯†é…ç½®</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ kubeadm è¿›è¡Œè¯ä¹¦ç®¡ç†</title>
      <link>https://lijun.in/tasks/administer-cluster/kubeadm/kubeadm-certs/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/kubeadm/kubeadm-certs/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;v1.15&amp;rdquo; state=&amp;quot;stable&amp;rdquo; &amp;gt;}}
ç”± kubeadm ç”Ÿæˆçš„å®¢æˆ·ç«¯è¯ä¹¦åœ¨ 1 å¹´ååˆ°æœŸã€‚ æœ¬é¡µè¯´æ˜å¦‚ä½•ä½¿ç”¨ kubeadm ç®¡ç†è¯ä¹¦ç»­è®¢ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} ç†Ÿæ‚‰ Kubernetes ä¸­çš„ PKIè¯ä¹¦å’Œè¦æ±‚ã€‚
æ‚¨åº”è¯¥ç†Ÿæ‚‰Kubernetes ä¸­çš„ PKI è¯ä¹¦å’Œè¦æ±‚ã€‚
æ£€æŸ¥è¯ä¹¦æ˜¯å¦è¿‡æœŸ check-expiration èƒ½è¢«ç”¨æ¥æ£€æŸ¥è¯ä¹¦æ˜¯å¦è¿‡æœŸ
kubeadm alpha certs check-expiration è¾“å‡ºç±»ä¼¼äºä»¥ä¸‹å†…å®¹ï¼š
CERTIFICATE EXPIRES RESIDUAL TIME EXTERNALLY MANAGED admin.conf May 15, 2020 13:03 UTC 364d false apiserver May 15, 2020 13:00 UTC 364d false apiserver-etcd-client May 15, 2020 13:00 UTC 364d false apiserver-kubelet-client May 15, 2020 13:00 UTC 364d false controller-manager.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Kubernetes API è®¿é—®é›†ç¾¤</title>
      <link>https://lijun.in/tasks/administer-cluster/access-cluster-api/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/access-cluster-api/</guid>
      <description>æœ¬é¡µå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Kubernetes API è®¿é—®é›†ç¾¤
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
è®¿é—®é›†ç¾¤ API ä½¿ç”¨ kubectl è¿›è¡Œé¦–æ¬¡è®¿é—® é¦–æ¬¡è®¿é—® Kubernetes API æ—¶ï¼Œè¯·ä½¿ç”¨ Kubernetes å‘½ä»¤è¡Œå·¥å…· kubectl ã€‚
è¦è®¿é—®é›†ç¾¤ï¼Œæ‚¨éœ€è¦çŸ¥é“é›†ç¾¤ä½ç½®å¹¶æ‹¥æœ‰è®¿é—®å®ƒçš„å‡­è¯ã€‚é€šå¸¸ï¼Œå½“æ‚¨å®Œæˆå…¥é—¨æŒ‡å—æ—¶ï¼Œè¿™ä¼šè‡ªåŠ¨è®¾ç½®å®Œæˆï¼Œæˆ–è€…ç”±å…¶ä»–äººè®¾ç½®å¥½é›†ç¾¤å¹¶å°†å‡­è¯å’Œä½ç½®æä¾›ç»™æ‚¨ã€‚
ä½¿ç”¨æ­¤å‘½ä»¤æ£€æŸ¥ kubectl å·²çŸ¥çš„ä½ç½®å’Œå‡­è¯ï¼š
kubectl config view è®¸å¤š[æ ·ä¾‹](https://github.com/kubernetes/examples/tree/. param &amp;ldquo;githubbranch&amp;rdquo; &amp;gt;}}/)æä¾›äº†ä½¿ç”¨ kubectl çš„ä»‹ç»ã€‚å®Œæ•´æ–‡æ¡£è¯·è§ kubectl æ‰‹å†Œã€‚
ç›´æ¥è®¿é—® REST API kubectl å¤„ç†å¯¹ API æœåŠ¡å™¨çš„å®šä½å’Œèº«ä»½éªŒè¯ã€‚å¦‚æœæ‚¨æƒ³é€šè¿‡ http å®¢æˆ·ç«¯ï¼ˆå¦‚ curl æˆ– wgetï¼Œæˆ–æµè§ˆå™¨ï¼‰ç›´æ¥è®¿é—® REST APIï¼Œæ‚¨å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å¯¹ API æœåŠ¡å™¨è¿›è¡Œå®šä½å’Œèº«ä»½éªŒè¯ï¼š
 ä»¥ä»£ç†æ¨¡å¼è¿è¡Œ kubectlï¼ˆæ¨èï¼‰ã€‚ æ¨èä½¿ç”¨æ­¤æ–¹æ³•ï¼Œå› ä¸ºå®ƒç”¨å­˜å‚¨çš„ apiserver ä½ç½®å¹¶ä½¿ç”¨è‡ªç­¾åè¯ä¹¦éªŒè¯ API æœåŠ¡å™¨çš„æ ‡è¯†ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•æ— æ³•è¿›è¡Œä¸­é—´äººï¼ˆMITMï¼‰æ”»å‡»ã€‚ å¦å¤–ï¼Œæ‚¨å¯ä»¥ç›´æ¥ä¸º http å®¢æˆ·ç«¯æä¾›ä½ç½®å’Œèº«ä»½è®¤è¯ã€‚è¿™é€‚ç”¨äºè¢«ä»£ç†æ··æ·†çš„å®¢æˆ·ç«¯ä»£ç ã€‚ä¸ºé˜²æ­¢ä¸­é—´äººæ”»å‡»ï¼Œæ‚¨éœ€è¦å°†æ ¹è¯ä¹¦å¯¼å…¥æµè§ˆå™¨ã€‚  ä½¿ç”¨ Go æˆ– Python å®¢æˆ·ç«¯åº“å¯ä»¥åœ¨ä»£ç†æ¨¡å¼ä¸‹è®¿é—® kubectlã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Minikube å®‰è£… Kubernetes</title>
      <link>https://lijun.in/setup/learning-environment/minikube/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/learning-environment/minikube/</guid>
      <description>Minikube æ˜¯ä¸€ç§å¯ä»¥è®©æ‚¨åœ¨æœ¬åœ°è½»æ¾è¿è¡Œ Kubernetes çš„å·¥å…·ã€‚Minikube åœ¨ç¬”è®°æœ¬ç”µè„‘ä¸Šçš„è™šæ‹Ÿæœºï¼ˆVMï¼‰ä¸­è¿è¡Œå•èŠ‚ç‚¹ Kubernetes é›†ç¾¤ï¼Œä¾›é‚£äº›å¸Œæœ›å°è¯• Kubernetes æˆ–è¿›è¡Œæ—¥å¸¸å¼€å‘çš„ç”¨æˆ·ä½¿ç”¨ã€‚
Minikube åŠŸèƒ½ Minikube æ”¯æŒä»¥ä¸‹ Kubernetes åŠŸèƒ½ï¼š
 DNS NodePorts ConfigMaps å’Œ Secrets Dashboards å®¹å™¨è¿è¡Œæ—¶: Dockerã€CRI-O ä»¥åŠ containerd å¯ç”¨ CNI ï¼ˆå®¹å™¨ç½‘ç»œæ¥å£ï¼‰ Ingress  å®‰è£… è¯·å‚é˜…å®‰è£… Minikubeã€‚
å¿«é€Ÿå¼€å§‹ è¿™ä¸ªç®€çŸ­çš„æ¼”ç¤ºå°†æŒ‡å¯¼æ‚¨å¦‚ä½•åœ¨æœ¬åœ°å¯åŠ¨ã€ä½¿ç”¨å’Œåˆ é™¤ Minikubeã€‚è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¼€å§‹æ¢ç´¢ Minikubeã€‚
  å¯åŠ¨ Minikube å¹¶åˆ›å»ºä¸€ä¸ªé›†ç¾¤ï¼š
minikube start è¾“å‡ºç±»ä¼¼äºï¼š
Starting local Kubernetes cluster... Running pre-create checks... Creating machine... Starting local Kubernetes cluster... æœ‰å…³ä½¿ç”¨ç‰¹å®š Kubernetes ç‰ˆæœ¬ã€VM æˆ–å®¹å™¨è¿è¡Œæ—¶å¯åŠ¨é›†ç¾¤çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…å¯åŠ¨é›†ç¾¤ã€‚
  ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ kubectl ä¸é›†ç¾¤è¿›è¡Œäº¤äº’ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ä¸é›†ç¾¤äº¤äº’ã€‚
è®©æˆ‘ä»¬ä½¿ç”¨åä¸º echoserver çš„é•œåƒåˆ›å»ºä¸€ä¸ª Kubernetes Deploymentï¼Œå¹¶ä½¿ç”¨ --port åœ¨ç«¯å£ 8080 ä¸Šæš´éœ²æœåŠ¡ã€‚echoserver æ˜¯ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡å™¨ã€‚</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ PodPreset å°†ä¿¡æ¯æ³¨å…¥ Pods</title>
      <link>https://lijun.in/tasks/inject-data-application/podpreset/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/inject-data-application/podpreset/</guid>
      <description>åœ¨ pod åˆ›å»ºæ—¶ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ podpreset å¯¹è±¡å°† secretsã€å·æŒ‚è½½å’Œç¯å¢ƒå˜é‡ç­‰ä¿¡æ¯æ³¨å…¥å…¶ä¸­ã€‚ æœ¬æ–‡å±•ç¤ºäº†ä¸€äº› PodPreset èµ„æºä½¿ç”¨çš„ç¤ºä¾‹ã€‚ ç”¨æˆ·å¯ä»¥ä»ç†è§£ Pod Presets ä¸­äº†è§£ PodPresets çš„æ•´ä½“æƒ…å†µã€‚
. toc &amp;gt;}}
åˆ›å»º Pod Preset ç®€å•çš„ Pod Spec ç¤ºä¾‹ è¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•é€šè¿‡ Pod Preset ä¿®æ”¹ Pod spec ã€‚
. codenew file=&amp;quot;podpreset/preset.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»º PodPresetï¼š
kubectl apply -f https://k8s.io/examples/podpreset/preset.yaml æ£€æŸ¥æ‰€åˆ›å»ºçš„ PodPresetï¼š
kubectl get podpreset NAME AGE allow-database 1m æ–°çš„ PodPreset ä¼šå¯¹æ‰€æœ‰å…·æœ‰æ ‡ç­¾ role: frontend çš„ Pods é‡‡å–è¡ŒåŠ¨ã€‚
ç”¨æˆ·æäº¤çš„ pod specï¼š
. codenew file=&amp;quot;podpreset/pod.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»º Podï¼š
kubectl create -f https://k8s.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ SC å®‰è£…æœåŠ¡ç›®å½•</title>
      <link>https://lijun.in/tasks/service-catalog/install-service-catalog-using-sc/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/service-catalog/install-service-catalog-using-sc/</guid>
      <description>. glossary_definition term_id=&amp;quot;service-catalog&amp;rdquo; length=&amp;quot;all&amp;rdquo; prepend=&amp;quot;Service Catalog is&amp;rdquo; &amp;gt;}}
ä½¿ç”¨æœåŠ¡ç›®å½•å®‰è£…ç¨‹åºå·¥å…·å¯ä»¥è½»æ¾åœ°åœ¨ Kubernetes é›†ç¾¤ä¸Šå®‰è£…æˆ–å¸è½½æœåŠ¡ç›®å½•ã€‚ è¿™ä¸ª CLI å·¥å…·ä»¥ sc å‘½ä»¤å½¢å¼è¢«å®‰è£…åœ¨æ‚¨çš„æœ¬åœ°ç¯å¢ƒä¸­ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}   äº†è§£æœåŠ¡ç›®å½•çš„ä¸»è¦æ¦‚å¿µã€‚
  å®‰è£… Go 1.6+ ä»¥åŠè®¾ç½® GOPATHã€‚
  å®‰è£…ç”Ÿæˆ SSL å·¥ä»¶æ‰€éœ€çš„ cfssl å·¥å…·ã€‚
  æœåŠ¡ç›®å½•éœ€è¦ Kubernetes 1.7+ ç‰ˆæœ¬ã€‚
  å®‰è£…å’Œè®¾ç½® kubectlï¼Œä»¥ä¾¿å°†å…¶é…ç½®ä¸ºè¿æ¥åˆ° Kubernetes v1.7+ é›†ç¾¤ã€‚
  è¦å®‰è£…æœåŠ¡ç›®å½•ï¼Œkubectl ç”¨æˆ·å¿…é¡»ç»‘å®šåˆ° cluster-admin è§’è‰²ã€‚ä¸ºäº†ç¡®ä¿è¿™æ˜¯æ­£ç¡®çš„ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
 kubectl create clusterrolebinding cluster-admin-binding --clusterrole=cluster-admin --user=&amp;lt;user-name&amp;gt;    åœ¨æœ¬åœ°ç¯å¢ƒä¸­å®‰è£… sc ä½¿ç”¨ go get å‘½ä»¤å®‰è£… sc CLI å·¥å…·ï¼š</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Secret å®‰å…¨åœ°åˆ†å‘å‡­è¯</title>
      <link>https://lijun.in/tasks/inject-data-application/distribute-credentials-secure/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/inject-data-application/distribute-credentials-secure/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•å®‰å…¨åœ°å°†æ•æ„Ÿæ•°æ®ï¼ˆå¦‚å¯†ç å’ŒåŠ å¯†å¯†é’¥ï¼‰æ³¨å…¥åˆ° Pods ä¸­ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å°† secret æ•°æ®è½¬æ¢ä¸º base-64 å½¢å¼ å‡è®¾ç”¨æˆ·æƒ³è¦æœ‰ä¸¤æ¡ secret æ•°æ®ï¼šç”¨æˆ·å my-app å’Œå¯†ç  39528$vdg7Jbã€‚ é¦–å…ˆä½¿ç”¨ Base64 ç¼–ç  å°†ç”¨æˆ·åå’Œå¯†ç è½¬åŒ–ä¸º base-64 å½¢å¼ã€‚ è¿™é‡Œæ˜¯ä¸€ä¸ª Linux ç¤ºä¾‹ï¼š
```shell echo -n &#39;my-app&#39; | base64 echo -n &#39;39528$vdg7Jb&#39; | base64 ```  ç»“æœæ˜¾ç¤º base-64 å½¢å¼çš„ç”¨æˆ·åä¸º bXktYXBwï¼Œ base-64 å½¢å¼çš„å¯†ç ä¸º Mzk1MjgkdmRnN0piã€‚
åˆ›å»º Secret è¿™é‡Œæ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»ºå­˜æœ‰ç”¨æˆ·åå’Œå¯†ç çš„ Secret:
. codenew file=&amp;quot;pods/inject/secret.yaml&amp;rdquo; &amp;gt;}}
  åˆ›å»º Secret
kubectl create -f https://k8s.io/examples/pods/inject/secret.yaml .</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Service æŠŠå‰ç«¯è¿æ¥åˆ°åç«¯</title>
      <link>https://lijun.in/tasks/access-application-cluster/connecting-frontend-backend/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/connecting-frontend-backend/</guid>
      <description>æœ¬ä»»åŠ¡ä¼šæè¿°å¦‚ä½•åˆ›å»ºå‰ç«¯å¾®æœåŠ¡å’Œåç«¯å¾®æœåŠ¡ã€‚åç«¯å¾®æœåŠ¡æ˜¯ä¸€ä¸ª hello æ¬¢è¿ç¨‹åºã€‚ å‰ç«¯å’Œåç«¯çš„è¿æ¥æ˜¯é€šè¿‡ Kubernetes æœåŠ¡å¯¹è±¡ï¼ˆService objectï¼‰å®Œæˆçš„ã€‚
. heading &amp;ldquo;objectives&amp;rdquo; %}}  ä½¿ç”¨éƒ¨ç½²å¯¹è±¡ï¼ˆDeployment objectï¼‰åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªå¾®æœåŠ¡ ä»åç«¯å°†æµé‡è·¯ç”±åˆ°å‰ç«¯ ä½¿ç”¨æœåŠ¡å¯¹è±¡æŠŠå‰ç«¯åº”ç”¨è¿æ¥åˆ°åç«¯åº”ç”¨  . heading &amp;ldquo;prerequisites&amp;rdquo; %}}   . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
  æœ¬ä»»åŠ¡ä½¿ç”¨ å¤–éƒ¨è´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œ æ‰€ä»¥éœ€è¦å¯¹åº”çš„å¯æ”¯æŒæ­¤åŠŸèƒ½çš„ç¯å¢ƒã€‚å¦‚æœä½ çš„ç¯å¢ƒä¸èƒ½æ”¯æŒï¼Œä½ å¯ä»¥ä½¿ç”¨ NodePort ç±»å‹çš„æœåŠ¡ä»£æ›¿ã€‚
  ä½¿ç”¨éƒ¨ç½²å¯¹è±¡ï¼ˆDeploymentï¼‰åˆ›å»ºåç«¯ åç«¯æ˜¯ä¸€ä¸ªç®€å•çš„ hello æ¬¢è¿å¾®æœåŠ¡åº”ç”¨ã€‚è¿™æ˜¯åç«¯åº”ç”¨çš„ Deployment é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;service/access/hello.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»ºåç«¯ Deploymentï¼š
kubectl apply -f https://k8s.io/examples/service/access/hello.yaml æŸ¥çœ‹åç«¯çš„ Deployment ä¿¡æ¯ï¼š
kubectl describe deployment hello è¾“å‡ºç±»ä¼¼äºï¼š
Name: hello Namespace: default CreationTimestamp: Mon, 24 Oct 2016 14:21:02 -0700 Labels: app=hello tier=backend track=stable Selector: app=hello,tier=backend,track=stable Replicas: 7 updated | 7 total | 7 available | 0 unavailable StrategyType: RollingUpdate MinReadySeconds: 0 RollingUpdateStrategy: 1 max unavailable, 1 max surge OldReplicaSets: &amp;lt;none&amp;gt; NewReplicaSet: hello-3621623197 (7/7 replicas created) Events: .</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Source IP</title>
      <link>https://lijun.in/tutorials/services/source-ip/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/services/source-ip/</guid>
      <description>Kubernetes é›†ç¾¤ä¸­è¿è¡Œçš„åº”ç”¨é€šè¿‡ Service æŠ½è±¡æ¥äº’ç›¸æŸ¥æ‰¾ã€é€šä¿¡å’Œä¸å¤–éƒ¨ä¸–ç•Œæ²Ÿé€šã€‚æœ¬æ–‡ä»‹ç»è¢«å‘é€åˆ°ä¸åŒç±»å‹ Services çš„æ•°æ®åŒ…æº IP çš„å˜åŒ–è¿‡ç¨‹ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„éœ€æ±‚æ”¹å˜è¿™äº›è¡Œä¸ºã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
æœ¯è¯­è¡¨ æœ¬æ–‡ä½¿ç”¨äº†ä¸‹åˆ—æœ¯è¯­ï¼š
 NAT: ç½‘ç»œåœ°å€è½¬æ¢ Source NAT: æ›¿æ¢æ•°æ®åŒ…çš„æº IP, é€šå¸¸ä¸ºèŠ‚ç‚¹çš„ IP Destination NAT: æ›¿æ¢æ•°æ®åŒ…çš„ç›®çš„ IP, é€šå¸¸ä¸º Pod çš„ IP VIP: ä¸€ä¸ªè™šæ‹Ÿ IP, ä¾‹å¦‚åˆ†é…ç»™æ¯ä¸ª Kubernetes Service çš„ IP Kube-proxy: ä¸€ä¸ªç½‘ç»œå®ˆæŠ¤ç¨‹åºï¼Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šåè°ƒ Service VIP ç®¡ç†  å‡†å¤‡å·¥ä½œ ä½ å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªæ­£å¸¸å·¥ä½œçš„ Kubernetes 1.5 é›†ç¾¤æ¥è¿è¡Œæ­¤æ–‡æ¡£ä¸­çš„ç¤ºä¾‹ã€‚è¯¥ç¤ºä¾‹ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ nginx webserverï¼Œé€šè¿‡ä¸€ä¸ªHTTPæ¶ˆæ¯å¤´è¿”å›å®ƒæ¥æ”¶åˆ°è¯·æ±‚çš„æºIPã€‚ä½ å¯ä»¥åƒä¸‹é¢è¿™æ ·åˆ›å»ºå®ƒï¼š
kubectl run source-ip-app --image=k8s.gcr.io/echoserver:1.4 è¾“å‡ºç»“æœä¸º
deployment.apps/source-ip-app created . heading &amp;ldquo;objectives&amp;rdquo; %}}  é€šè¿‡å¤šç§ç±»å‹çš„ Services æš´éœ²ä¸€ä¸ªç®€å•åº”ç”¨ ç†è§£æ¯ç§ Service ç±»å‹å¦‚ä½•å¤„ç†æº IP NAT ç†è§£ä¿ç•™æºIPæ‰€æ¶‰åŠçš„æŠ˜ä¸­  Type=ClusterIP ç±»å‹ Services çš„ Source IP å¦‚æœä½ çš„ kube-proxy è¿è¡Œåœ¨ iptables æ¨¡å¼ä¸‹ï¼Œä»é›†ç¾¤å†…éƒ¨å‘é€åˆ° ClusterIP çš„åŒ…æ°¸è¿œä¸ä¼šè¿›è¡Œæºåœ°å€ NATï¼Œè¿™ä» Kubernetes 1.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨Deploymentè¿è¡Œä¸€ä¸ªæ— çŠ¶æ€åº”ç”¨</title>
      <link>https://lijun.in/tasks/run-application/run-stateless-application-deployment/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/run-application/run-stateless-application-deployment/</guid>
      <description>æœ¬æ–‡ä»‹ç»é€šè¿‡Kubernetes Deploymentå¯¹è±¡å¦‚ä½•å»è¿è¡Œä¸€ä¸ªåº”ç”¨.
. heading &amp;ldquo;objectives&amp;rdquo; %}}  åˆ›å»ºä¸€ä¸ªnginx deployment. ä½¿ç”¨kubectlåˆ—ä¸¾å…³äºdeploymentä¿¡æ¯. æ›´æ–°deployment.  . heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åˆ›å»ºå’Œæ¢ç©¶ä¸€ä¸ªnginx deployment ä½ å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªKubernetes Deploymentå¯¹è±¡æ¥è¿è¡Œä¸€ä¸ªåº”ç”¨, å¯ä»¥åœ¨ä¸€ä¸ªYAMLæ–‡ä»¶ä¸­æè¿°Deployment. ä¾‹å¦‚, ä¸‹é¢è¿™ä¸ªYAMLæ–‡ä»¶æè¿°äº†ä¸€ä¸ªè¿è¡Œnginx:1.7.9 Dockeré•œåƒçš„Deployment:
. codenew file=&amp;quot;application/deployment.yaml&amp;rdquo; &amp;gt;}}
  é€šè¿‡YAMLæ–‡ä»¶åˆ›å»ºä¸€ä¸ªDeployment:
 kubectl apply -f https://k8s.io/examples/application/deployment.yaml    å±•ç¤ºDeploymentç›¸å…³ä¿¡æ¯:
kubectl describe deployment nginx-deployment user@computer:~/website$ kubectl describe deployment nginx-deployment Name: nginx-deployment Namespace: default CreationTimestamp: Tue, 30 Aug 2016 18:11:37 -0700 Labels: app=nginx Annotations: deployment.</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨å¯åŠ¨å¼•å¯¼ä»¤ç‰Œï¼ˆBootstrap Tokensï¼‰è®¤è¯</title>
      <link>https://lijun.in/reference/access-authn-authz/bootstrap-tokens/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/access-authn-authz/bootstrap-tokens/</guid>
      <description>. toc &amp;gt;}}
æ¦‚è¿° å¯åŠ¨å¼•å¯¼ä»¤ç‰Œæ˜¯ä¸€ç§ç®€å•çš„æŒæœ‰è€…ä»¤ç‰Œï¼ˆBearer Tokenï¼‰ï¼Œè¿™ç§ä»¤ç‰Œæ˜¯åœ¨æ–°å»ºé›†ç¾¤æˆ–è€…åœ¨ç°æœ‰é›†ç¾¤ä¸­æ·»åŠ æ–°èŠ‚ç‚¹æ—¶ä½¿ç”¨çš„ã€‚ å®ƒè¢«è®¾è®¡æˆèƒ½å¤Ÿæ”¯æŒ kubeadmï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥è¢«ç”¨åœ¨å…¶ä»–çš„æ¡ˆä¾‹ä¸­ä»¥ä¾¿ç”¨æˆ·åœ¨ ä¸ä½¿ç”¨ kubeadm çš„æƒ…å†µä¸‹å¯åŠ¨é›†ç¾¤ã€‚å®ƒä¹Ÿè¢«è®¾è®¡æˆå¯ä»¥é€šè¿‡ RBAC ç­–ç•¥ï¼Œç»“åˆ Kubelet TLS Bootstrapping ç³»ç»Ÿè¿›è¡Œå·¥ä½œã€‚
å¯åŠ¨å¼•å¯¼ä»¤ç‰Œè¢«å®šä¹‰æˆä¸€ä¸ªç‰¹å®šç±»å‹çš„ secrets(bootstrap.kubernetes.io/token)ï¼Œå¹¶å­˜åœ¨äº kube-system å‘½åç©ºé—´ä¸­ã€‚ç„¶åè¿™äº› secrets ä¼šè¢« API æœåŠ¡å™¨ä¸Šçš„å¯åŠ¨å¼•å¯¼çš„è®¤è¯å™¨è¯»å–ã€‚ æ§åˆ¶å™¨ç®¡ç†å™¨ä¸­çš„æ§åˆ¶å™¨ TokenCleaner èƒ½å¤Ÿåˆ é™¤è¿‡æœŸçš„ä»¤ç‰Œã€‚åœ¨èŠ‚ç‚¹å‘ç°çš„è¿‡ç¨‹ä¸­ Kubernetes ä¼šä½¿ç”¨ç‰¹æ®Šçš„ ConfigMap å¯¹è±¡ã€‚ æ§åˆ¶å™¨ç®¡ç†å™¨ä¸­çš„ BootstrapSigner æ§åˆ¶å™¨ä¹Ÿä¼šä½¿ç”¨å¯åŠ¨å¼•å¯¼ä»¤ç‰Œä¸ºè¿™ç±»å¯¹è±¡ç”Ÿæˆç­¾åä¿¡æ¯ã€‚
ç›®å‰ï¼Œå¯åŠ¨å¼•å¯¼ä»¤ç‰Œå¤„äº alpha é˜¶æ®µï¼Œä½†æ˜¯é¢„æœŸä¹Ÿä¸ä¼šæœ‰å¤§çš„çªç ´æ€§å˜åŒ–ã€‚
ä»¤ç‰Œæ ¼å¼ å¯åŠ¨å¼•å¯¼ä»¤ç‰Œä½¿ç”¨ abcdef.0123456789abcdef çš„å½¢å¼ã€‚ æ›´åŠ è§„èŒƒåœ°è¯´ï¼Œå®ƒä»¬å¿…é¡»ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼ [a-z0-9]{6}\.[a-z0-9]{16}ã€‚
ä»¤ç‰Œçš„ç¬¬ä¸€éƒ¨åˆ†æ˜¯ &amp;ldquo;Token ID&amp;rdquo; ï¼Œå®ƒæ˜¯å…¬å…±ä¿¡æ¯ã€‚ç”¨äºå¼•ç”¨æŸä¸ªä»¤ç‰Œï¼Œå¹¶ç¡®ä¿ä¸ä¼šæ³„éœ²è®¤è¯æ‰€ä½¿ç”¨çš„ç§˜å¯†ä¿¡æ¯ã€‚ ç¬¬äºŒéƒ¨åˆ†æ˜¯â€œä»¤ç‰Œç§˜å¯†ï¼ˆToken Secretï¼‰â€ï¼Œå®ƒåº”è¯¥è¢«å…±äº«ç»™æ”¶ä¿¡çš„ç¬¬ä¸‰æ–¹ã€‚
å¯ç”¨å¯åŠ¨å¼•å¯¼ä»¤ç‰Œ æ‰€æœ‰ä¸å¯åŠ¨å¼•å¯¼ä»¤ç‰Œç›¸å…³çš„ç‰¹æ€§åœ¨ Kubernetes v1.6 ç‰ˆæœ¬ä¸­é»˜è®¤éƒ½æ˜¯ç¦ç”¨çš„ã€‚
ä½ å¯ä»¥åœ¨ API æœåŠ¡å™¨ä¸Šé€šè¿‡ --enable-bootstrap-token-auth å‚æ•°å¯ç”¨å¯åŠ¨å¼•å¯¼ä»¤ç‰Œã€‚ ä½ å¯ä»¥è®¾ç½®æ§åˆ¶ç®¡ç†å™¨çš„ --controllers å‚æ•°æ¥å¯ç”¨å¯åŠ¨å¼•å¯¼ä»¤ç‰Œç›¸å…³çš„æ§åˆ¶å™¨ï¼Œä¾‹å¦‚ --controllers=*,tokencleaner,bootstrapsigner ã€‚ åœ¨ä½¿ç”¨ kubeadm æ—¶ï¼Œè¿™æ˜¯è‡ªåŠ¨å®Œæˆçš„ã€‚
HTTPS è°ƒç”¨ä¸­çš„ä»¤ç‰Œæ˜¯è¿™æ ·ä½¿ç”¨çš„ï¼š</description>
    </item>
    
    <item>
      <title>å…³é”®æ’ä»¶ Pod çš„è°ƒåº¦ä¿è¯</title>
      <link>https://lijun.in/tasks/administer-cluster/guaranteed-scheduling-critical-addon-pods/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/guaranteed-scheduling-critical-addon-pods/</guid>
      <description>é™¤äº†åœ¨ä¸»æœºä¸Šè¿è¡Œçš„ Kubernetes æ ¸å¿ƒç»„ä»¶ï¼ˆå¦‚ api-server ã€scheduler ã€controller-managerï¼‰ä¹‹å¤–ï¼Œè¿˜æœ‰è®¸å¤šæ’ä»¶ï¼Œç”±äºå„ç§åŸå› ï¼Œ å¿…é¡»åœ¨å¸¸è§„é›†ç¾¤èŠ‚ç‚¹ï¼ˆè€Œä¸æ˜¯ Kubernetes ä¸»èŠ‚ç‚¹ï¼‰ä¸Šè¿è¡Œã€‚ å…¶ä¸­ä¸€äº›æ’ä»¶å¯¹äºåŠŸèƒ½å®Œå¤‡çš„ç¾¤é›†è‡³å…³é‡è¦ï¼Œä¾‹å¦‚ Heapsterã€DNS å’Œ UIã€‚ å¦‚æœå…³é”®æ’ä»¶è¢«é€å‡ºï¼ˆæ‰‹åŠ¨æˆ–ä½œä¸ºå‡çº§ç­‰å…¶ä»–æ“ä½œçš„å‰¯ä½œç”¨ï¼‰æˆ–è€…å˜æˆæŒ‚èµ·çŠ¶æ€ï¼Œç¾¤é›†å¯èƒ½ä¼šåœæ­¢æ­£å¸¸å·¥ä½œã€‚ å…³é”®æ’ä»¶è¿›å…¥æŒ‚èµ·çŠ¶æ€çš„ä¾‹å­æœ‰ï¼šé›†ç¾¤åˆ©ç”¨ç‡è¿‡é«˜ï¼›è¢«é€å‡ºçš„å…³é”®æ’ä»¶ Pod é‡Šæ”¾äº†ç©ºé—´ï¼Œä½†è¯¥ç©ºé—´è¢«ä¹‹å‰æ‚¬å†³çš„ Pod å ç”¨ï¼›ç”±äºå…¶å®ƒåŸå› å¯¼è‡´èŠ‚ç‚¹ä¸Šå¯ç”¨èµ„æºçš„æ€»é‡å‘ç”Ÿå˜åŒ–ã€‚
æ ‡è®°å…³é”® Pod è¦å°† pod æ ‡è®°ä¸ºå…³é”®æ€§ï¼ˆcriticalï¼‰ï¼Œpod å¿…é¡»åœ¨ kube-system å‘½åç©ºé—´ä¸­è¿è¡Œï¼ˆå¯é€šè¿‡å‚æ•°é…ç½®ï¼‰ã€‚ åŒæ—¶ï¼Œéœ€è¦å°† priorityClassName è®¾ç½®ä¸º system-cluster-critical æˆ– system-node-critical ï¼Œåè€…æ˜¯æ•´ä¸ªç¾¤é›†çš„æœ€é«˜çº§åˆ«ã€‚ æˆ–è€…ï¼Œä¹Ÿå¯ä»¥ä¸º Pod æ·»åŠ åä¸º scheduler.alpha.kubernetes.io/critical-podã€å€¼ä¸ºç©ºå­—ç¬¦ä¸²çš„æ³¨è§£ã€‚ ä¸è¿‡ï¼Œè¿™ä¸€æ³¨è§£ä» 1.13 ç‰ˆæœ¬å¼€å§‹ä¸å†æ¨èä½¿ç”¨ï¼Œå¹¶å°†åœ¨ 1.14 ä¸­åˆ é™¤ã€‚</description>
    </item>
    
    <item>
      <title>å‡çº§ kubeadm é›†ç¾¤</title>
      <link>https://lijun.in/tasks/administer-cluster/kubeadm/kubeadm-upgrade/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/kubeadm/kubeadm-upgrade/</guid>
      <description>æœ¬é¡µä»‹ç»äº†å¦‚ä½•å°† kubeadm åˆ›å»ºçš„ Kubernetes é›†ç¾¤ä» 1.16.x ç‰ˆæœ¬å‡çº§åˆ° 1.17.x ç‰ˆæœ¬ï¼Œä»¥åŠä»ç‰ˆæœ¬ 1.17.x å‡çº§åˆ° 1.17.y ï¼Œå…¶ä¸­ y &amp;gt; xã€‚
è¦æŸ¥çœ‹ kubeadm åˆ›å»ºçš„æœ‰å…³æ—§ç‰ˆæœ¬é›†ç¾¤å‡çº§çš„ä¿¡æ¯ï¼Œè¯·å‚è€ƒä»¥ä¸‹é¡µé¢ï¼š
 å°† kubeadm é›†ç¾¤ä» 1.15 å‡çº§åˆ° 1.16 å°† kubeadm é›†ç¾¤ä» 1.14 å‡çº§åˆ° 1.15 å°† kubeadm é›†ç¾¤ä» 1.13 å‡çº§åˆ° 1.14  é«˜ç‰ˆæœ¬å‡çº§å·¥ä½œæµå¦‚ä¸‹ï¼š
 å‡çº§ä¸»æ§åˆ¶å¹³é¢èŠ‚ç‚¹ã€‚ å‡çº§å…¶ä»–æ§åˆ¶å¹³é¢èŠ‚ç‚¹ã€‚ å‡çº§å·¥ä½œèŠ‚ç‚¹ã€‚  . heading &amp;ldquo;prerequisites&amp;rdquo; %}}  æ‚¨éœ€è¦æœ‰ä¸€ä¸ªç”± kubeadm åˆ›å»ºå¹¶è¿è¡Œç€ 1.16.0 æˆ–æ›´é«˜ç‰ˆæœ¬çš„ Kubernetes é›†ç¾¤ã€‚ ç¦ç”¨ Swapã€‚ é›†ç¾¤åº”ä½¿ç”¨é™æ€çš„æ§åˆ¶å¹³é¢å’Œ etcd pod æˆ–è€… å¤–éƒ¨ etcdã€‚ åŠ¡å¿…ä»”ç»†è®¤çœŸé˜…è¯»[å‘è¡Œè¯´æ˜](. latest-release-notes &amp;gt;}})ã€‚ åŠ¡å¿…å¤‡ä»½æ‰€æœ‰é‡è¦ç»„ä»¶ï¼Œä¾‹å¦‚å­˜å‚¨åœ¨æ•°æ®åº“ä¸­åº”ç”¨å±‚é¢çš„çŠ¶æ€ã€‚ kubeadm upgrade ä¸ä¼šå½±å“æ‚¨çš„å·¥ä½œè´Ÿè½½ï¼Œåªä¼šæ¶‰åŠ Kubernetes å†…éƒ¨çš„ç»„ä»¶ï¼Œä½†å¤‡ä»½ç»ˆç©¶æ˜¯å¥½çš„ã€‚  é™„åŠ ä¿¡æ¯  å‡çº§åï¼Œå› ä¸ºå®¹å™¨ spec å“ˆå¸Œå€¼å·²æ›´æ”¹ï¼Œæ‰€ä»¥æ‰€æœ‰å®¹å™¨éƒ½ä¼šé‡æ–°å¯åŠ¨ã€‚ æ‚¨åªèƒ½ä»ä¸€ä¸ªæ¬¡ç‰ˆæœ¬å‡çº§åˆ°ä¸‹ä¸€ä¸ªæ¬¡ç‰ˆæœ¬ï¼Œæˆ–è€…åŒæ ·æ¬¡ç‰ˆæœ¬çš„è¡¥ä¸ç‰ˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡çº§æ—¶æ— æ³•è·³è¿‡ç‰ˆæœ¬ã€‚ ä¾‹å¦‚ï¼Œæ‚¨åªèƒ½ä» 1.</description>
    </item>
    
    <item>
      <title>åŒ Pod å†…çš„å®¹å™¨ä½¿ç”¨å…±äº«å·é€šä¿¡</title>
      <link>https://lijun.in/tasks/access-application-cluster/communicate-containers-same-pod-shared-volume/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/communicate-containers-same-pod-shared-volume/</guid>
      <description>æœ¬æ–‡æ—¨åœ¨è¯´æ˜å¦‚ä½•è®©ä¸€ä¸ª Pod å†…çš„ä¸¤ä¸ªå®¹å™¨ä½¿ç”¨ä¸€ä¸ªå·ï¼ˆVolumeï¼‰è¿›è¡Œé€šä¿¡ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå®¹å™¨çš„ Pod åœ¨è¿™ä¸ªç»ƒä¹ ä¸­ï¼Œä½ ä¼šåˆ›å»ºä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå®¹å™¨çš„ Podã€‚ä¸¤ä¸ªå®¹å™¨å…±äº«ä¸€ä¸ªå·ç”¨äºä»–ä»¬ä¹‹é—´çš„é€šä¿¡ã€‚ Pod çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š
. codenew file=&amp;quot;pods/two-container-pod.yaml&amp;rdquo; &amp;gt;}}
åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ° Pod æœ‰ä¸€ä¸ªå…±äº«å·ï¼Œåä¸º shared-dataã€‚
é…ç½®æ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªå®¹å™¨è¿è¡Œäº†ä¸€ä¸ª nginx æœåŠ¡å™¨ã€‚å…±äº«å·çš„æŒ‚è½½è·¯å¾„æ˜¯ /usr/share/nginx/htmlã€‚ ç¬¬äºŒä¸ªå®¹å™¨æ˜¯åŸºäº debian é•œåƒçš„ï¼Œæœ‰ä¸€ä¸ª /pod-data çš„æŒ‚è½½è·¯å¾„ã€‚ç¬¬äºŒä¸ªå®¹å™¨è¿è¡Œäº†ä¸‹é¢çš„å‘½ä»¤ç„¶åç»ˆæ­¢ã€‚
echo Hello from the debian container &amp;gt; /pod-data/index.html  æ³¨æ„ï¼Œç¬¬äºŒä¸ªå®¹å™¨åœ¨ nginx æœåŠ¡å™¨çš„æ ¹ç›®å½•ä¸‹å†™äº† index.html æ–‡ä»¶ã€‚
åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå®¹å™¨çš„ Podï¼š
kubectl apply -f https://k8s.io/examples/pods/two-container-pod.yaml  æŸ¥çœ‹ Pod å’Œå®¹å™¨çš„ä¿¡æ¯ï¼š
kubectl get pod two-containers --output=yaml  è¿™æ˜¯è¾“å‡ºçš„ä¸€éƒ¨åˆ†ï¼š
apiVersion: v1 kind: Pod metadata: .</description>
    </item>
    
    <item>
      <title>å¯ç”¨ç«¯ç‚¹åˆ‡ç‰‡</title>
      <link>https://lijun.in/tasks/administer-cluster/enabling-endpointslices/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/enabling-endpointslices/</guid>
      <description>æœ¬é¡µæä¾›å¯ç”¨ Kubernetes ç«¯ç‚¹åˆ‡ç‰‡çš„æ€»è§ˆ
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ä»‹ç» ç«¯ç‚¹åˆ‡ç‰‡ä¸º Kubernetes ç«¯ç‚¹æä¾›äº†å¯ä¼¸ç¼©å’Œå¯æ‰©å±•çš„æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒä»¬å»ºç«‹åœ¨ç«¯ç‚¹æä¾›çš„åŠŸèƒ½åŸºç¡€ä¹‹ä¸Šï¼Œå¹¶ä»¥å¯ä¼¸ç¼©çš„æ–¹å¼è¿›è¡Œæ‰©å±•ã€‚å½“æœåŠ¡å…·æœ‰å¤§é‡ï¼ˆ&amp;gt;100ï¼‰ç½‘ç»œç«¯ç‚¹ï¼Œ å®ƒä»¬å°†è¢«åˆ†æˆå¤šä¸ªè¾ƒå°çš„ç«¯ç‚¹åˆ‡ç‰‡èµ„æºï¼Œè€Œä¸æ˜¯å•ä¸ªå¤§å‹ç«¯ç‚¹èµ„æºã€‚
å¯ç”¨ç«¯ç‚¹åˆ‡ç‰‡ . feature-state for_k8s_version=&amp;quot;v1.16&amp;rdquo; state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
. note &amp;gt;}}
å°½ç®¡ç«¯ç‚¹åˆ‡ç‰‡æœ€ç»ˆå¯èƒ½ä¼šå–ä»£ç«¯ç‚¹ï¼Œä½†è®¸å¤š Kubernetes ç»„ä»¶ä»ç„¶ä¾èµ–äºç«¯ç‚¹ã€‚ç›®å‰ï¼Œå¯ç”¨ç«¯ç‚¹åˆ‡ç‰‡åº”è¯¥è¢«è§†ä¸ºé›†ç¾¤ä¸­ç«¯ç‚¹çš„è¡¥å……ï¼Œè€Œä¸æ˜¯å®ƒä»¬çš„æ›¿ä»£ã€‚
. /note &amp;gt;}}
ä½œä¸º Alpha åŠŸèƒ½ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒKubernetes ä¸­æœªå¯ç”¨ç«¯ç‚¹åˆ‡ç‰‡ã€‚å¯ç”¨ç«¯ç‚¹åˆ‡ç‰‡éœ€è¦å¯¹ Kubernetes é›†ç¾¤è¿›è¡Œå¤šè¾¾ 3 é¡¹é…ç½®ä¿®æ”¹ã€‚
è¦å¯ç”¨åŒ…æ‹¬ç«¯ç‚¹åˆ‡ç‰‡çš„ Discovery API ç»„ï¼Œè¯·ä½¿ç”¨è¿è¡Œæ—¶é…ç½®æ ‡å¿—ï¼ˆ--runtime-config=discovery.k8s.io/v1alpha1=trueï¼‰ã€‚
è¯¥é€»è¾‘è´Ÿè´£ç›‘è§†æœåŠ¡ï¼Œpod å’ŒèŠ‚ç‚¹ä»¥åŠåˆ›å»ºæˆ–æ›´æ–°ä¸ä¹‹å…³è”ï¼Œåœ¨ç«¯ç‚¹åˆ‡ç‰‡æ§åˆ¶å™¨å†…çš„ç«¯ç‚¹åˆ‡ç‰‡ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œæ­¤åŠŸèƒ½å¤„äºç¦ç”¨çŠ¶æ€ï¼Œä½†å¯ä»¥é€šè¿‡å¯ç”¨åœ¨ kube-controller-manager æ§åˆ¶å™¨çš„æ ‡å¿—ï¼ˆ--controllers=endpointsliceï¼‰æ¥å¼€å¯ã€‚
å¯¹äºåƒ kube-proxy è¿™æ ·çš„ Kubernetes ç»„ä»¶çœŸæ­£å¼€å§‹ä½¿ç”¨ç«¯ç‚¹åˆ‡ç‰‡ï¼Œéœ€è¦å¼€å¯ç«¯ç‚¹åˆ‡ç‰‡åŠŸèƒ½æ ‡å¿—ï¼ˆ--feature-gates=EndpointSlice=trueï¼‰ã€‚
ä½¿ç”¨ç«¯ç‚¹åˆ‡ç‰‡ åœ¨é›†ç¾¤ä¸­å®Œå…¨å¯ç”¨ç«¯ç‚¹åˆ‡ç‰‡çš„æƒ…å†µä¸‹ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°å¯¹åº”çš„æ¯ä¸ªç«¯ç‚¹èµ„æºçš„ç«¯ç‚¹åˆ‡ç‰‡èµ„æºã€‚é™¤äº†å…¼å®¹ç°æœ‰çš„ç«¯ç‚¹åŠŸèƒ½ï¼Œç«¯ç‚¹åˆ‡ç‰‡åº”åŒ…æ‹¬æ‹“æ‰‘ç­‰æ–°çš„ä¿¡æ¯ã€‚å®ƒä»¬å°†ä½¿é›†ç¾¤ä¸­ç½‘ç»œç«¯ç‚¹å…·æœ‰æ›´å¼ºçš„å¯ä¼¸ç¼©æ€§ï¼Œå¯æ‰©å±•æ€§ã€‚</description>
    </item>
    
    <item>
      <title>å‘½åç©ºé—´æ¼”ç»ƒ</title>
      <link>https://lijun.in/tasks/administer-cluster/namespaces-walkthrough/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/namespaces-walkthrough/</guid>
      <description>Kubernetes . glossary_tooltip text=&amp;quot;å‘½åç©ºé—´&amp;rdquo; term_id=&amp;quot;namespace&amp;rdquo; &amp;gt;}} æœ‰åŠ©äºä¸åŒçš„é¡¹ç›®ã€å›¢é˜Ÿæˆ–å®¢æˆ·å»å…±äº« Kubernetes é›†ç¾¤ã€‚
åå­—ç©ºé—´é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°è¿™ç‚¹ï¼š
 ä¸ºåå­—è®¾ç½®ä½œç”¨åŸŸ. ä¸ºé›†ç¾¤ä¸­çš„éƒ¨åˆ†èµ„æºå…³è”é‰´æƒå’Œç­–ç•¥çš„æœºåˆ¶ã€‚  ä½¿ç”¨å¤šä¸ªå‘½åç©ºé—´æ˜¯å¯é€‰çš„ã€‚
æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Kubernetes å‘½åç©ºé—´ç»†åˆ†ç¾¤é›†ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ç¯å¢ƒå‡†å¤‡ æ­¤ç¤ºä¾‹ä½œå¦‚ä¸‹å‡è®¾ï¼š
 æ‚¨å·²æ‹¥æœ‰ä¸€ä¸ª é…ç½®å¥½çš„ Kubernetes é›†ç¾¤ã€‚ æ‚¨å·²å¯¹ Kubernetes çš„ Pods, Services å’Œ Deployments æœ‰åŸºæœ¬ç†è§£ã€‚   ç†è§£é»˜è®¤å‘½åç©ºé—´  é»˜è®¤æƒ…å†µä¸‹ï¼ŒKubernetes é›†ç¾¤ä¼šåœ¨é…ç½®é›†ç¾¤æ—¶å®ä¾‹åŒ–ä¸€ä¸ªé»˜è®¤å‘½åç©ºé—´ï¼Œç”¨ä»¥å­˜æ”¾é›†ç¾¤æ‰€ä½¿ç”¨çš„é»˜è®¤ Podsã€Services å’Œ Deployments é›†åˆã€‚
å‡è®¾æ‚¨æœ‰ä¸€ä¸ªæ–°çš„é›†ç¾¤ï¼Œæ‚¨å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹æ“ä½œæ¥æ£€æŸ¥å¯ç”¨çš„å‘½åç©ºé—´ï¼š
kubectl get namespaces NAME STATUS AGE default Active 13m åˆ›å»ºæ–°çš„å‘½åç©ºé—´ åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸¤ä¸ªé¢å¤–çš„ Kubernetes å‘½åç©ºé—´æ¥ä¿å­˜æˆ‘ä»¬çš„å†…å®¹ã€‚
æˆ‘ä»¬å‡è®¾ä¸€ä¸ªåœºæ™¯ï¼ŒæŸç»„ç»‡æ­£åœ¨ä½¿ç”¨å…±äº«çš„ Kubernetes é›†ç¾¤æ¥æ”¯æŒå¼€å‘å’Œç”Ÿäº§ï¼š</description>
    </item>
    
    <item>
      <title>åœ¨ AWS EC2 ä¸Šè¿è¡Œ Kubernetes</title>
      <link>https://lijun.in/setup/production-environment/turnkey/aws/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/turnkey/aws/</guid>
      <description>æœ¬é¡µé¢ä»‹ç»äº†å¦‚ä½•åœ¨ AWS ä¸Šå®‰è£… Kubernetes é›†ç¾¤ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} åœ¨ AWS ä¸Šåˆ›å»º Kubernetes é›†ç¾¤ï¼Œæ‚¨å°†éœ€è¦ AWS çš„ Access Key ID å’Œ Secret Access Keyã€‚
æ”¯æŒçš„ç”Ÿäº§çº§åˆ«å·¥å…·  conjure-up æ˜¯ Kubernetes çš„å¼€æºå®‰è£…ç¨‹åºï¼Œå¯åœ¨ Ubuntu ä¸Šåˆ›å»ºä¸åŸç”Ÿ AWS é›†æˆçš„ Kubernetes é›†ç¾¤ã€‚   Kubernetes Operations - ç”Ÿäº§çº§ K8s çš„å®‰è£…ã€å‡çº§å’Œç®¡ç†ã€‚æ”¯æŒåœ¨ AWS è¿è¡Œ Debianã€Ubuntuã€CentOS å’Œ RHELã€‚   CoreOS Tectonic åŒ…æ‹¬å¼€æºçš„ Tectonic å®‰è£…ç¨‹åºï¼Œå®ƒç”¨äºåœ¨ AWS ä¸Šåˆ›å»ºå¸¦æœ‰ Container Linux èŠ‚ç‚¹çš„ Kubernetes é›†ç¾¤ã€‚   èµ·æºäº CoreOSï¼ŒKubernetes Incubator ç»´æŠ¤çš„ CLI å·¥å…·ï¼Œ kube-aws ï¼Œè¯¥å·¥å…·ä½¿ç”¨ Container Linux èŠ‚ç‚¹åˆ›å»ºå’Œç®¡ç† Kubernetes é›†ç¾¤ï¼Œå®ƒä½¿ç”¨äº† AWS å·¥å…·ï¼šEC2ã€CloudFormation å’Œ Autoscalingã€‚   KubeOne æ˜¯ä¸€ä¸ªå¼€æºé›†ç¾¤ç”Ÿå‘½å‘¨æœŸç®¡ç†å·¥å…·ï¼Œå®ƒå¯ç”¨äºåˆ›å»ºï¼Œå‡çº§å’Œç®¡ç†é«˜å¯ç”¨ Kubernetes é›†ç¾¤ã€‚  é›†ç¾¤å…¥é—¨ å‘½ä»¤è¡Œç®¡ç†å·¥å…·ï¼škubectl é›†ç¾¤å¯åŠ¨è„šæœ¬å°†åœ¨æ‚¨çš„å·¥ä½œç«™ä¸Šä¸ºæ‚¨æä¾›ä¸€ä¸ª kubernetes ç›®å½•ã€‚ æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä»æ­¤é¡µé¢ä¸‹è½½æœ€æ–°çš„ Kubernetes ç‰ˆæœ¬ã€‚</description>
    </item>
    
    <item>
      <title>åœ¨ Azure ä¸Šè¿è¡Œ Kubernetes</title>
      <link>https://lijun.in/setup/production-environment/turnkey/azure/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/turnkey/azure/</guid>
      <description>Azure Kubernetes æœåŠ¡ (AKS) Azure Kubernetes æœåŠ¡æä¾›äº†ç®€å•çš„ Kubernetes é›†ç¾¤éƒ¨ç½²æ–¹å¼ã€‚
æœ‰å…³é€šè¿‡ Azure Kubernetes æœåŠ¡å°† Kubernetes é›†ç¾¤éƒ¨ç½²åˆ° Azure çš„ç¤ºä¾‹ï¼š
å¾®è½¯ Azure Kubernetes æœåŠ¡
å®šåˆ¶éƒ¨ç½²ï¼šAKS å¼•æ“ Azure Kubernetes æœåŠ¡çš„æ ¸å¿ƒæ˜¯å¼€æºï¼Œå¹¶ä¸”å¯ä»¥åœ¨ GitHub ä¸Šè®©ç¤¾åŒºä½¿ç”¨å’Œå‚ä¸è´¡çŒ®ï¼šAKS å¼•æ“ã€‚æ—§ç‰ˆ ACS å¼•æ“ ä»£ç åº“å·²è¢«å¼ƒç”¨ï¼Œä»¥æ”¯æŒAKS-engineã€‚
å¦‚æœæ‚¨éœ€è¦åœ¨ Azure Kubernetes æœåŠ¡æ­£å¼æ”¯æŒçš„èŒƒå›´ä¹‹å¤–å¯¹éƒ¨ç½²è¿›è¡Œè‡ªå®šä¹‰ï¼Œåˆ™ AKS å¼•æ“æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚è¿™äº›è‡ªå®šä¹‰åŒ…æ‹¬éƒ¨ç½²åˆ°ç°æœ‰è™šæ‹Ÿç½‘ç»œä¸­ï¼Œåˆ©ç”¨å¤šä¸ªä»£ç†ç¨‹åºæ± ç­‰ã€‚ä¸€äº›ç¤¾åŒºå¯¹ AKS å¼•æ“çš„è´¡çŒ®ç”šè‡³å¯èƒ½æˆä¸º Azure Kubernetes æœåŠ¡çš„ç‰¹æ€§ã€‚
AKS å¼•æ“çš„è¾“å…¥æ˜¯ä¸€ä¸ªæè¿° Kubernetes é›†ç¾¤çš„ apimodel JSON æ–‡ä»¶ã€‚å®ƒå’Œç”¨äºç›´æ¥é€šè¿‡ Azure Kubernetes æœåŠ¡éƒ¨ç½²é›†ç¾¤çš„ Azure èµ„æºç®¡ç†å™¨ï¼ˆARMï¼‰æ¨¡æ¿è¯­æ³•ç›¸ä¼¼ã€‚äº§ç”Ÿçš„è¾“å‡ºæ˜¯ä¸€ä¸ª ARM æ¨¡æ¿ï¼Œå¯ä»¥å°†å…¶ç­¾å…¥æºä»£ç ç®¡ç†ï¼Œå¹¶ä½¿ç”¨å®ƒå°† Kubernetes é›†ç¾¤éƒ¨ç½²åˆ° Azureã€‚
æ‚¨å¯ä»¥æŒ‰ç…§ **AKS å¼•æ“ Kubernetes æ•™ç¨‹**å¼€å§‹ä½¿ç”¨ã€‚
é€‚ç”¨äº Azure çš„ CoreOS Tectonic é€‚ç”¨äº Azure çš„ CoreOS Tectonic Installer æ˜¯å¼€æºçš„ï¼Œå®ƒå¯ä»¥è®©ç¤¾åŒºåœ¨ GitHub ä¸Šä½¿ç”¨å’Œå‚ä¸è´¡çŒ®ï¼šTectonic Installerã€‚</description>
    </item>
    
    <item>
      <title>åœ¨ Kubernetes é›†ç¾¤ä¸­ä½¿ç”¨ NodeLocal DNSCache</title>
      <link>https://lijun.in/tasks/administer-cluster/nodelocaldns/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/nodelocaldns/</guid>
      <description>æœ¬é¡µæ¦‚è¿°äº† Kubernetes ä¸­çš„ NodeLocal DNSCache åŠŸèƒ½ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å¼•è¨€ NodeLocal DNSCache é€šè¿‡åœ¨é›†ç¾¤èŠ‚ç‚¹ä¸Šä½œä¸º DaemonSet è¿è¡Œ dns ç¼“å­˜ä»£ç†æ¥æé«˜é›†ç¾¤ DNS æ€§èƒ½ã€‚ åœ¨å½“ä»Šçš„ä½“ç³»ç»“æ„ä¸­ï¼Œå¤„äº ClusterFirst DNS æ¨¡å¼çš„ Pod å¯ä»¥è¿æ¥åˆ° kube-dns serviceIP è¿›è¡Œ DNS æŸ¥è¯¢ã€‚ é€šè¿‡ kube-proxy æ·»åŠ çš„ iptables è§„åˆ™å°†å…¶è½¬æ¢ä¸º kube-dns/CoreDNS ç«¯ç‚¹ã€‚ å€ŸåŠ©è¿™ç§æ–°æ¶æ„ï¼ŒPods å°†å¯ä»¥è®¿é—®åœ¨åŒä¸€èŠ‚ç‚¹ä¸Šè¿è¡Œçš„ dns ç¼“å­˜ä»£ç†ï¼Œä»è€Œé¿å…äº† iptables DNAT è§„åˆ™å’Œè¿æ¥è·Ÿè¸ªã€‚ æœ¬åœ°ç¼“å­˜ä»£ç†å°†æŸ¥è¯¢ kube-dns æœåŠ¡ä»¥è·å–é›†ç¾¤ä¸»æœºåçš„ç¼“å­˜ç¼ºå¤±ï¼ˆé»˜è®¤ä¸º cluster.local åç¼€ï¼‰ã€‚
åŠ¨æœº  ä½¿ç”¨å½“å‰çš„ DNS ä½“ç³»ç»“æ„ï¼Œå¦‚æœæ²¡æœ‰æœ¬åœ° kube-dns/CoreDNS å®ä¾‹ï¼Œåˆ™å…·æœ‰æœ€é«˜ DNS QPS çš„ Pod å¯èƒ½å¿…é¡»å»¶ä¼¸åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ã€‚ åœ¨è¿™ç§è„šæœ¬ä¸‹ï¼Œæ‹¥æœ‰æœ¬åœ°ç¼“å­˜å°†æœ‰åŠ©äºæ”¹å–„å»¶è¿Ÿã€‚   è·³è¿‡ iptables DNAT å’Œè¿æ¥è·Ÿè¸ªå°†æœ‰åŠ©äºå‡å°‘ conntrack ç«äº‰å¹¶é¿å… UDP DNS æ¡ç›®å¡«æ»¡ conntrack è¡¨ã€‚   ä»æœ¬åœ°ç¼“å­˜ä»£ç†åˆ° kube-dns æœåŠ¡çš„è¿æ¥å¯ä»¥å‡çº§åˆ° TCP ã€‚ TCP conntrack æ¡ç›®å°†åœ¨è¿æ¥å…³é—­æ—¶è¢«åˆ é™¤ï¼Œç›¸å UDP æ¡ç›®å¿…é¡»è¶…æ—¶(é»˜è®¤ nf_conntrack_udp_timeout æ˜¯ 30 ç§’)   å°† DNS æŸ¥è¯¢ä» UDP å‡çº§åˆ° TCP å°†å‡å°‘å½’å› äºä¸¢å¼ƒçš„ UDP æ•°æ®åŒ…å’Œ DNS è¶…æ—¶çš„å°¾éƒ¨ç­‰å¾…æ—¶é—´ï¼Œé€šå¸¸é•¿è¾¾ 30 ç§’ï¼ˆ3 æ¬¡é‡è¯•+ 10 ç§’è¶…æ—¶ï¼‰ã€‚   åœ¨èŠ‚ç‚¹çº§åˆ«å¯¹ dns è¯·æ±‚çš„åº¦é‡å’Œå¯è§æ€§ã€‚   å¯ä»¥é‡æ–°å¯ç”¨è´Ÿç¼“å­˜ï¼Œä»è€Œå‡å°‘å¯¹ kube-dns æœåŠ¡çš„æŸ¥è¯¢æ•°é‡ã€‚  æ¶æ„å›¾ å¯ç”¨ NodeLocal DNSCache ä¹‹åï¼Œè¿™æ˜¯ DNS æŸ¥è¯¢æ‰€éµå¾ªçš„è·¯å¾„ï¼š</description>
    </item>
    
    <item>
      <title>åœ¨ Kubernetes é›†ç¾¤ä¸­ä½¿ç”¨ sysctl</title>
      <link>https://lijun.in/tasks/administer-cluster/sysctl-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/sysctl-cluster/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;v1.11&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•é€šè¿‡ sysctl æ¥å£åœ¨ Kubernetes é›†ç¾¤ä¸­é…ç½®å’Œä½¿ç”¨å†…æ ¸å‚æ•°ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
è·å– Sysctl çš„å‚æ•°åˆ—è¡¨ åœ¨ Linux ä¸­ï¼Œç®¡ç†å‘˜å¯ä»¥é€šè¿‡ sysctl æ¥å£ä¿®æ”¹å†…æ ¸è¿è¡Œæ—¶çš„å‚æ•°ã€‚åœ¨ /proc/sys/ è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹å­˜æ”¾è®¸å¤šå†…æ ¸å‚æ•°ã€‚è¿™äº›å‚æ•°æ¶‰åŠäº†å¤šä¸ªå†…æ ¸å­ç³»ç»Ÿï¼Œå¦‚ï¼š
 å†…æ ¸å­ç³»ç»Ÿ (é€šå¸¸å‰ç¼€ä¸º: kernel.) ç½‘ç»œå­ç³»ç»Ÿ (é€šå¸¸å‰ç¼€ä¸º: net.) è™šæ‹Ÿå†…å­˜å­ç³»ç»Ÿ (é€šå¸¸å‰ç¼€ä¸º: vm.) MDADM å­ç³»ç»Ÿ (é€šå¸¸å‰ç¼€ä¸º: dev.) æ›´å¤šå­ç³»ç»Ÿè¯·å‚è§ å†…æ ¸æ–‡æ¡£ã€‚  è‹¥è¦è·å–å®Œæ•´çš„å‚æ•°åˆ—è¡¨ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤
$ sudo sysctl -a å¯ç”¨éå®‰å…¨çš„ Sysctl å‚æ•° sysctl å‚æ•°åˆ†ä¸º å®‰å…¨ å’Œ éå®‰å…¨çš„ã€‚å®‰å…¨ sysctl å‚æ•°é™¤äº†éœ€è¦è®¾ç½®æ°å½“çš„å‘½åç©ºé—´å¤–ï¼Œåœ¨åŒä¸€ node ä¸Šçš„ä¸åŒ Pod ä¹‹é—´ä¹Ÿå¿…é¡»æ˜¯ ç›¸äº’éš”ç¦»çš„ã€‚è¿™æ„å‘³ç€åœ¨ Pod ä¸Šè®¾ç½® å®‰å…¨ sysctl å‚æ•°</description>
    </item>
    
    <item>
      <title>åœ¨å®æ—¶é›†ç¾¤ä¸Šé‡æ–°é…ç½®èŠ‚ç‚¹çš„ Kubelet</title>
      <link>https://lijun.in/tasks/administer-cluster/reconfigure-kubelet/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/reconfigure-kubelet/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;v1.11&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
åŠ¨æ€Kubeleté…ç½® å¼•å¯¼ä½ åœ¨ä¸€ä¸ªè¿è¡Œçš„ Kubernetes é›†ç¾¤ä¸Šæ›´æ”¹æ¯ä¸€ä¸ª Kubelet çš„é…ç½®ï¼Œé€šè¿‡éƒ¨ç½² ConfigMap å¹¶é…ç½®æ¯ä¸ªèŠ‚ç‚¹æ¥ä½¿ç”¨å®ƒã€‚
. warning &amp;gt;}}
è­¦å‘Šï¼šæ‰€æœ‰Kubeleté…ç½®å‚æ•°éƒ½å¯ä»¥åŠ¨æ€åœ°æ›´æ”¹ï¼Œä½†è¿™å¯¹æŸäº›å‚æ•°æ¥è¯´æ˜¯ä¸å®‰å…¨çš„ã€‚åœ¨å†³å®šåŠ¨æ€æ›´æ”¹å‚æ•°ä¹‹å‰ï¼Œä½ éœ€è¦æ·±åˆ»ç†è§£è¿™ç§å˜åŒ–å°†å¦‚ä½•å½±å“ä½ çš„é›†ç¾¤çš„è¡Œä¸ºã€‚ åœ¨æŠŠä¸€ç»„èŠ‚ç‚¹æ¨å¹¿åˆ°é›†ç¾¤èŒƒå›´ä¹‹å‰ï¼Œéƒ½è¦ä»”ç»†åœ°æµ‹è¯•è¿™äº›èŠ‚ç‚¹ä¸Šçš„é…ç½®å˜åŒ–ã€‚ä¸é…ç½®ç›¸å…³çš„å»ºè®®å¯ä»¥åœ¨å…·ä½“çš„æ–‡ä»¶ä¸‹æ‰¾åˆ°ï¼Œå†…è” KubeletConfiguration ç±»å‹æ–‡æ¡£ã€‚ . /warning &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  Kubernetes v1.11 æˆ–è€…æ›´é«˜ç‰ˆæœ¬é…ç½®åœ¨ä¸»èŠ‚ç‚¹å’ŒèŠ‚ç‚¹ä¸Š kubectl v1.11 æˆ–è€…æ›´é«˜ç‰ˆæœ¬å’Œé›†ç¾¤é…ç½®é€šä¿¡ The Kubelet --dynamic-config-dir flag å¿…é¡»è®¾ç½®åœ¨èŠ‚ç‚¹çš„å¯å†™ç›®å½•ä¸Š  åœ¨ä½ é›†ç¾¤ä¸­çš„ä¸€ä¸ªå®æ—¶èŠ‚ç‚¹ä¸Šé…ç½®Kubelet åŸºæœ¬å·¥ä½œæµç¨‹æ¦‚è¿° åœ¨å®æ—¶é›†ç¾¤ä¸­é…ç½® Kubelet çš„åŸºæœ¬å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š
 ç¼–å†™ä¸€ä¸ª YAML æˆ– JSON çš„é…ç½®æ–‡ä»¶åŒ…å« Kubelet çš„é…ç½®ã€‚ å°†æ­¤æ–‡ä»¶åŒ…è£…åœ¨ ConfigMap ä¸­å¹¶å°†å…¶ä¿å­˜åˆ° Kubernetes æ§åˆ¶å¹³é¢ã€‚ æ›´æ–° Kubelet çš„ç›¸åº”èŠ‚ç‚¹å¯¹è±¡ä»¥ä½¿ç”¨æ­¤ ConfigMapã€‚  æ¯ä¸ª Kubelet éƒ½ä¼šåœ¨å…¶å„è‡ªçš„èŠ‚ç‚¹å¯¹è±¡ä¸ŠæŸ¥çœ‹é…ç½®å¼•ç”¨ã€‚å½“æ­¤å¼•ç”¨æ›´æ”¹æ—¶ï¼ŒKubelet å°†ä¸‹è½½æ–°é…ç½®ï¼Œ æ›´æ–°æœ¬åœ°å¼•ç”¨ä»¥å¼•ç”¨è¯¥æ–‡ä»¶ï¼Œç„¶åé€€å‡ºã€‚ è¦æƒ³ä½¿è¯¥åŠŸèƒ½æ­£å¸¸åœ°å·¥ä½œï¼Œæ‚¨å¿…é¡»è¿è¡Œæ“ä½œç³»ç»Ÿçº§åˆ«çš„æœåŠ¡ç®¡ç†å™¨ï¼ˆå¦‚systemdï¼‰ï¼Œå¦‚æœé€€å‡ºï¼Œå°†é‡å¯Kubeletã€‚ å½“Kubeleté‡æ–°å¯åŠ¨æ—¶ï¼Œå®ƒå°†å¼€å§‹ä½¿ç”¨æ–°é…ç½®ã€‚</description>
    </item>
    
    <item>
      <title>åœ¨æœ¬åœ°å¼€å‘å’Œè°ƒè¯•æœåŠ¡</title>
      <link>https://lijun.in/tasks/debug-application-cluster/local-debugging/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/local-debugging/</guid>
      <description>Kubernetes åº”ç”¨ç¨‹åºé€šå¸¸ç”±å¤šä¸ªç‹¬ç«‹çš„æœåŠ¡ç»„æˆï¼Œæ¯ä¸ªæœåŠ¡éƒ½åœ¨è‡ªå·±çš„å®¹å™¨ä¸­è¿è¡Œã€‚ åœ¨è¿œç«¯çš„ Kubernetes é›†ç¾¤ä¸Šå¼€å‘å’Œè°ƒè¯•è¿™äº›æœåŠ¡å¯èƒ½å¾ˆéº»çƒ¦ï¼Œéœ€è¦åœ¨è¿è¡Œçš„å®¹å™¨ä¸Šæ‰“å¼€ shellï¼Œç„¶ååœ¨è¿œç«¯ shell ä¸­è¿è¡Œæ‚¨æ‰€éœ€çš„å·¥å…·ã€‚
telepresence æ˜¯ä¸€ç§å·¥å…·ï¼Œç”¨äºåœ¨æœ¬åœ°è½»æ¾å¼€å‘å’Œè°ƒè¯•æœåŠ¡ï¼ŒåŒæ—¶å°†æœåŠ¡ä»£ç†åˆ°è¿œç¨‹ Kubernetes é›†ç¾¤ã€‚ ä½¿ç”¨ telepresence å¯ä»¥ä¸ºæœ¬åœ°æœåŠ¡ä½¿ç”¨è‡ªå®šä¹‰å·¥å…·ï¼ˆå¦‚è°ƒè¯•å™¨å’Œ IDEï¼‰ï¼Œå¹¶æä¾›å¯¹ Configmapã€Secrets å’Œè¿œç¨‹é›†ç¾¤ä¸Šè¿è¡Œçš„æœåŠ¡çš„å®Œå…¨è®¿é—®ã€‚
 Kubernetes é›†ç¾¤å®‰è£…å®Œæ¯• é…ç½®å¥½ kubectl ä¸é›†ç¾¤äº¤äº’ Telepresence å®‰è£…å®Œæ¯•  æ‰“å¼€ç»ˆç«¯ï¼Œä¸å¸¦å‚æ•°è¿è¡Œ telepresenceï¼Œä»¥æ‰“å¼€ telepresence shellã€‚è¿™ä¸ª shell åœ¨æœ¬åœ°è¿è¡Œï¼Œä½¿æ‚¨å¯ä»¥å®Œå…¨è®¿é—®æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚
telepresence shell çš„ä½¿ç”¨æ–¹å¼å¤šç§å¤šæ ·ã€‚ ä¾‹å¦‚ï¼Œåœ¨ä½ çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šå†™ä¸€ä¸ª shell è„šæœ¬ï¼Œç„¶åç›´æ¥åœ¨ shell ä¸­å®æ—¶è¿è¡Œå®ƒã€‚ æ‚¨ä¹Ÿå¯ä»¥åœ¨è¿œç«¯ shell ä¸Šæ‰§è¡Œæ­¤æ“ä½œï¼Œä½†è¿™æ ·å¯èƒ½æ— æ³•ä½¿ç”¨é¦–é€‰çš„ä»£ç ç¼–è¾‘å™¨ï¼Œå¹¶ä¸”åœ¨å®¹å™¨ç»ˆæ­¢æ—¶è„šæœ¬å°†è¢«åˆ é™¤ã€‚
å¼€å‘å’Œè°ƒè¯•ç°æœ‰çš„æœåŠ¡ åœ¨ Kubernetes ä¸Šå¼€å‘åº”ç”¨ç¨‹åºæ—¶ï¼Œé€šå¸¸å¯¹å•ä¸ªæœåŠ¡è¿›è¡Œç¼–ç¨‹æˆ–è°ƒè¯•ã€‚ æœåŠ¡å¯èƒ½éœ€è¦è®¿é—®å…¶ä»–æœåŠ¡ä»¥è¿›è¡Œæµ‹è¯•å’Œè°ƒè¯•ã€‚ ä¸€ç§é€‰æ‹©æ˜¯ä½¿ç”¨è¿ç»­éƒ¨ç½²ç®¡é“ï¼Œä½†å³ä½¿æœ€å¿«çš„éƒ¨ç½²ç®¡é“ä¹Ÿä¼šåœ¨ç¨‹åºæˆ–è°ƒè¯•å‘¨æœŸä¸­å¼•å…¥å»¶è¿Ÿã€‚
ä½¿ç”¨ --swap-deployment é€‰é¡¹å°†ç°æœ‰éƒ¨ç½²ä¸ Telepresence ä»£ç†äº¤æ¢ã€‚äº¤æ¢å…è®¸æ‚¨åœ¨æœ¬åœ°è¿è¡ŒæœåŠ¡å¹¶èƒ½å¤Ÿè¿æ¥åˆ°è¿œç«¯çš„ Kubernetes é›†ç¾¤ã€‚è¿œç«¯çš„é›†ç¾¤ä¸­çš„æœåŠ¡ç°åœ¨å°±å¯ä»¥è®¿é—®æœ¬åœ°è¿è¡Œçš„å®ä¾‹ã€‚
åˆ°è¿è¡Œ telepresence å¹¶å¸¦æœ‰ --swap-deployment é€‰é¡¹ï¼Œè¯·è¾“å…¥ï¼š
telepresence --swap-deployment $DEPLOYMENT_NAME
è¿™é‡Œçš„ $DEPLOYMENT_NAME æ˜¯æ‚¨ç°æœ‰çš„éƒ¨ç½²åç§°ã€‚
è¿è¡Œæ­¤å‘½ä»¤å°†ç”Ÿæˆ shellã€‚åœ¨ shell ä¸­ï¼Œå¯åŠ¨æ‚¨çš„æœåŠ¡ã€‚ ç„¶åï¼Œæ‚¨å°±å¯ä»¥åœ¨æœ¬åœ°å¯¹æºä»£ç è¿›è¡Œç¼–è¾‘ã€ä¿å­˜å¹¶èƒ½çœ‹åˆ°æ›´æ”¹ç«‹å³ç”Ÿæ•ˆã€‚æ‚¨è¿˜å¯ä»¥åœ¨è°ƒè¯•å™¨æˆ–ä»»ä½•å…¶ä»–æœ¬åœ°å¼€å‘å·¥å…·ä¸­è¿è¡ŒæœåŠ¡ã€‚</description>
    </item>
    
    <item>
      <title>åœ¨è”é‚¦ä¸­è®¾ç½®æ”¾ç½®ç­–ç•¥</title>
      <link>https://lijun.in/tasks/federation/set-up-placement-policies-federation/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/federation/set-up-placement-policies-federation/</guid>
      <description>. deprecationfilewarning &amp;gt;}} . include &amp;ldquo;federation-deprecation-warning-note.md&amp;rdquo; &amp;gt;}} . /deprecationfilewarning &amp;gt;}}
æ­¤é¡µé¢æ˜¾ç¤ºå¦‚ä½•ä½¿ç”¨å¤–éƒ¨ç­–ç•¥å¼•æ“å¯¹è”é‚¦èµ„æºå¼ºåˆ¶æ‰§è¡ŒåŸºäºç­–ç•¥çš„æ”¾ç½®å†³ç­–ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} æ‚¨éœ€è¦ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Kubernetes é›†ç¾¤(å®ƒè¢«å¼•ç”¨ä¸ºä¸»æœºé›†ç¾¤)ã€‚æœ‰å…³æ‚¨çš„å¹³å°çš„å®‰è£…è¯´æ˜ï¼Œè¯·å‚é˜…å…¥é—¨æŒ‡å—ã€‚
Deploying è”é‚¦å¹¶é…ç½®å¤–éƒ¨ç­–ç•¥å¼•æ“ å¯ä»¥ä½¿ç”¨ kubefed init éƒ¨ç½²è”é‚¦æ§åˆ¶å¹³é¢ã€‚
Deploying è”é‚¦æ§åˆ¶å¹³é¢ä¹‹åï¼Œå¿…é¡»åœ¨è”é‚¦ API æœåŠ¡å™¨ä¸­é…ç½®ä¸€ä¸ªå‡†å…¥æ§åˆ¶å™¨ï¼Œè¯¥æ§åˆ¶å™¨å¼ºåˆ¶æ‰§è¡Œä»å¤–éƒ¨ç­–ç•¥å¼•æ“æ¥æ”¶åˆ°çš„æ”¾ç½®å†³ç­–ã€‚
kubectl create -f scheduling-policy-admission.yaml  ä¸‹å›¾æ˜¯å‡†å…¥æ§åˆ¶å™¨çš„ ConfigMap ç¤ºä¾‹ï¼š
. codenew file=&amp;quot;federation/scheduling-policy-admission.yaml&amp;rdquo; &amp;gt;}}
ConfigMap åŒ…å«ä¸‰ä¸ªæ–‡ä»¶ï¼š
 config.yml æŒ‡å®š è°ƒåº¦ç­–ç•¥ å‡†å…¥æ§åˆ¶å™¨é…ç½®æ–‡ä»¶çš„ä½ç½®ã€‚ scheduling-policy-config.yml æŒ‡å®šä¸å¤–éƒ¨ç­–ç•¥å¼•æ“è”ç³»æ‰€éœ€çš„ kubeconfig æ–‡ä»¶çš„ä½ç½®ã€‚ è¯¥æ–‡ä»¶è¿˜å¯ä»¥åŒ…å«ä¸€ä¸ª retryBackoff å€¼ï¼Œè¯¥å€¼ä»¥æ¯«ç§’ä¸ºå•ä½æ§åˆ¶åˆå§‹é‡è¯• backoff å»¶è¿Ÿã€‚ opa-kubeconfig æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ kubeconfigï¼ŒåŒ…å«è”ç³»å¤–éƒ¨ç­–ç•¥å¼•æ“æ‰€éœ€çš„ URL å’Œå‡­è¯ã€‚  ç¼–è¾‘è”é‚¦ API æœåŠ¡å™¨éƒ¨ç½²ä»¥å¯ç”¨ SchedulingPolicy å‡†å…¥æ§åˆ¶å™¨ã€‚
kubectl -n federation-system edit deployment federation-apiserver  æ›´æ–° Federation API æœåŠ¡å™¨å‘½ä»¤è¡Œå‚æ•°ä»¥å¯ç”¨å‡†å…¥æ§åˆ¶å™¨ï¼Œ å¹¶å°† ConfigMap æŒ‚è½½åˆ°å®¹å™¨ä¸­ã€‚å¦‚æœå­˜åœ¨ç°æœ‰çš„ -enable-admissionplugins å‚æ•°ï¼Œåˆ™è¿½åŠ  SchedulingPolicy è€Œä¸æ˜¯æ·»åŠ å¦ä¸€è¡Œã€‚</description>
    </item>
    
    <item>
      <title>åœ¨è…¾è®¯äº‘å®¹å™¨æœåŠ¡ä¸Šè¿è¡Œ Kubernetes</title>
      <link>https://lijun.in/setup/production-environment/turnkey/tencent/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/turnkey/tencent/</guid>
      <description>è…¾è®¯äº‘å®¹å™¨æœåŠ¡ è…¾è®¯äº‘å®¹å™¨æœåŠ¡ï¼ˆTKEï¼‰æä¾›æœ¬åœ° Kubernetes å®¹å™¨ç®¡ç†æœåŠ¡ã€‚æ‚¨åªéœ€å‡ ä¸ªæ­¥éª¤å³å¯ä½¿ç”¨ TKE éƒ¨ç½²å’Œç®¡ç† Kubernetes é›†ç¾¤ã€‚æœ‰å…³è¯¦ç»†è¯´æ˜ï¼Œè¯·å‚é˜…éƒ¨ç½²è…¾è®¯äº‘å®¹å™¨æœåŠ¡ã€‚
TKE æ˜¯è®¤è¯çš„ Kubernetes äº§å“ã€‚å®ƒä¸åŸç”Ÿ Kubernetes API å®Œå…¨å…¼å®¹ã€‚
å®šåˆ¶éƒ¨ç½² è…¾è®¯ Kubernetes Engine çš„æ ¸å¿ƒæ˜¯å¼€æºçš„ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ GitHub ä¸Šä½¿ç”¨ã€‚
ä½¿ç”¨ TKE åˆ›å»º Kubernetes é›†ç¾¤æ—¶ï¼Œå¯ä»¥é€‰æ‹©æ‰˜ç®¡æ¨¡å¼æˆ–ç‹¬ç«‹éƒ¨ç½²æ¨¡å¼ã€‚å¦å¤–ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰éƒ¨ç½²ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ç°æœ‰çš„ Cloud Virtual Machine å®ä¾‹æ¥åˆ›å»ºé›†ç¾¤ï¼Œä¹Ÿå¯ä»¥åœ¨ IPVS æ¨¡å¼ä¸‹å¯ç”¨ Kube-proxyã€‚
ä¸‹ä¸€æ­¥ è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… TKE æ–‡æ¡£ã€‚</description>
    </item>
    
    <item>
      <title>åœ¨é˜¿é‡Œäº‘ä¸Šè¿è¡Œ Kubernetes</title>
      <link>https://lijun.in/setup/production-environment/turnkey/alibaba-cloud/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/setup/production-environment/turnkey/alibaba-cloud/</guid>
      <description>é˜¿é‡Œäº‘å®¹å™¨æœåŠ¡ é˜¿é‡Œäº‘å®¹å™¨æœåŠ¡ä½¿æ‚¨å¯ä»¥åœ¨é˜¿é‡Œäº‘ ECS å®ä¾‹é›†ç¾¤ä¸Šè¿è¡Œå’Œç®¡ç† Docker åº”ç”¨ç¨‹åºã€‚å®ƒæ”¯æŒæµè¡Œçš„å¼€æºå®¹å™¨ç¼–æ’å¼•æ“ï¼šDocker Swarm å’Œ Kubernetesã€‚
ä¸ºäº†ç®€åŒ–é›†ç¾¤çš„éƒ¨ç½²å’Œç®¡ç†ï¼Œè¯·ä½¿ç”¨ å®¹å™¨æœåŠ¡ Kubernetes ç‰ˆã€‚æ‚¨å¯ä»¥æŒ‰ç…§ Kubernetes æ¼”ç»ƒå¿«é€Ÿå…¥é—¨ï¼Œå…¶ä¸­æœ‰ä¸€äº›ä½¿ç”¨ä¸­æ–‡ä¹¦å†™çš„å®¹å™¨æœåŠ¡ Kubernetes ç‰ˆæ•™ç¨‹ã€‚
è¦ä½¿ç”¨è‡ªå®šä¹‰äºŒè¿›åˆ¶æ–‡ä»¶æˆ–å¼€æºç‰ˆæœ¬çš„ Kubernetesï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹è¯´æ˜è¿›è¡Œæ“ä½œã€‚
è‡ªå®šä¹‰éƒ¨ç½² é˜¿é‡Œäº‘ Kubernetes Cloud Provider å®ç° çš„æºä»£ç æ˜¯å¼€æºçš„ï¼Œå¯åœ¨ GitHub ä¸Šè·å¾—ã€‚
æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ä¸­æ–‡ç‰ˆæœ¬å¿«é€Ÿéƒ¨ç½² Kubernetes - é˜¿é‡Œäº‘ä¸Šçš„VPCç¯å¢ƒå’Œè‹±æ–‡ç‰ˆæœ¬ã€‚</description>
    </item>
    
    <item>
      <title>å£°æ˜ç½‘ç»œç­–ç•¥</title>
      <link>https://lijun.in/tasks/administer-cluster/declare-network-policy/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/declare-network-policy/</guid>
      <description>æœ¬æ–‡å¯ä»¥å¸®åŠ©æ‚¨å¼€å§‹ä½¿ç”¨ Kubernetes çš„ NetworkPolicy API å£°æ˜ç½‘ç»œç­–ç•¥å»ç®¡ç† Pod ä¹‹é—´çš„é€šä¿¡
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} æ‚¨é¦–å…ˆéœ€è¦æœ‰ä¸€ä¸ªæ”¯æŒç½‘ç»œç­–ç•¥çš„ Kubernetes é›†ç¾¤ã€‚å·²ç»æœ‰è®¸å¤šæ”¯æŒ NetworkPolicy çš„ç½‘ç»œæä¾›å•†ï¼ŒåŒ…æ‹¬ï¼š
 Calico Romana Weave ç½‘ç»œ  æ³¨æ„ï¼šä»¥ä¸Šåˆ—è¡¨æ˜¯æ ¹æ®äº§å“åç§°æŒ‰å­—æ¯é¡ºåºæ’åºï¼Œè€Œä¸æ˜¯æŒ‰æ¨èæˆ–åå¥½æ’åºã€‚ä¸‹é¢ç¤ºä¾‹å¯¹äºä½¿ç”¨äº†ä¸Šé¢ä»»ä½•æä¾›å•†çš„ Kubernetes é›†ç¾¤éƒ½æ˜¯æœ‰æ•ˆçš„
åˆ›å»ºä¸€ä¸ªnginx deployment å¹¶ä¸”é€šè¿‡æœåŠ¡å°†å…¶æš´éœ² ä¸ºäº†æŸ¥çœ‹ Kubernetes ç½‘ç»œç­–ç•¥æ˜¯æ€æ ·å·¥ä½œçš„ï¼Œå¯ä»¥ä»åˆ›å»ºä¸€ä¸ªnginx deployment å¹¶ä¸”é€šè¿‡æœåŠ¡å°†å…¶æš´éœ²å¼€å§‹
$ kubectl run nginx --image=nginx --replicas=2 deployment &amp;quot;nginx&amp;quot; created $ kubectl expose deployment nginx --port=80 service &amp;quot;nginx&amp;quot; exposed åœ¨ default å‘½åç©ºé—´ä¸‹è¿è¡Œäº†ä¸¤ä¸ª nginx podï¼Œè€Œä¸”é€šè¿‡ä¸€ä¸ªåå­—ä¸º nginx çš„æœåŠ¡è¿›è¡Œäº†æš´éœ²
$ kubectl get svc,pod NAME CLUSTER-IP EXTERNAL-IP PORT(S) AGE svc/kubernetes 10.100.0.1 &amp;lt;none&amp;gt; 443/TCP 46m svc/nginx 10.</description>
    </item>
    
    <item>
      <title>å®‰è£…æ‰©å±•ï¼ˆAddonsï¼‰</title>
      <link>https://lijun.in/concepts/cluster-administration/addons/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/cluster-administration/addons/</guid>
      <description>Add-ons æ‰©å±•äº† Kubernetes çš„åŠŸèƒ½ã€‚
æœ¬æ–‡åˆ—ä¸¾äº†ä¸€äº›å¯ç”¨çš„ add-ons ä»¥åŠåˆ°å®ƒä»¬å„è‡ªå®‰è£…è¯´æ˜çš„é“¾æ¥ã€‚
æ¯ä¸ª add-ons æŒ‰å­—æ¯é¡ºåºæ’åº - é¡ºåºä¸ä»£è¡¨ä»»ä½•ä¼˜å…ˆåœ°ä½ã€‚
ç½‘ç»œå’Œç½‘ç»œç­–ç•¥  ACI é€šè¿‡ Cisco ACI æä¾›é›†æˆçš„å®¹å™¨ç½‘ç»œå’Œå®‰å…¨ç½‘ç»œã€‚ Calico æ˜¯ä¸€ä¸ªå®‰å…¨çš„ L3 ç½‘ç»œå’Œç½‘ç»œç­–ç•¥æä¾›è€…ã€‚ Canal ç»“åˆ Flannel å’Œ Calicoï¼Œæä¾›ç½‘ç»œå’Œç½‘ç»œç­–ç•¥ã€‚ Cilium æ˜¯ä¸€ä¸ª L3 ç½‘ç»œå’Œç½‘ç»œç­–ç•¥æ’ä»¶ï¼Œèƒ½å¤Ÿé€æ˜çš„å®æ–½ HTTP/API/L7 ç­–ç•¥ã€‚åŒæ—¶æ”¯æŒè·¯ç”±ï¼ˆroutingï¼‰å’Œå åŠ /å°è£…ï¼ˆoverlay/encapsulationï¼‰æ¨¡å¼ã€‚ CNI-Genie ä½¿ Kubernetes æ— ç¼è¿æ¥åˆ°ä¸€ç§ CNI æ’ä»¶ï¼Œä¾‹å¦‚ï¼šFlannelã€Calicoã€Canalã€Romana æˆ–è€… Weaveã€‚ Contiv ä¸ºå¤šç§ç”¨ä¾‹æä¾›å¯é…ç½®ç½‘ç»œï¼ˆä½¿ç”¨ BGP çš„åŸç”Ÿ L3ï¼Œä½¿ç”¨ vxlan çš„ overlayï¼Œç»å…¸ L2 å’Œ Cisco-SDN/ACIï¼‰å’Œä¸°å¯Œçš„ç­–ç•¥æ¡†æ¶ã€‚Contiv é¡¹ç›®å®Œå…¨å¼€æºã€‚å®‰è£…å·¥å…·åŒæ—¶æä¾›åŸºäºå’Œä¸åŸºäº kubeadm çš„å®‰è£…é€‰é¡¹ã€‚ åŸºäº Tungsten Fabric çš„ Contrailï¼Œæ˜¯ä¸€ä¸ªå¼€æºçš„å¤šäº‘ç½‘ç»œè™šæ‹ŸåŒ–å’Œç­–ç•¥ç®¡ç†å¹³å°ï¼ŒContrail å’Œ Tungsten Fabric ä¸ä¸šåŠ¡æµç¨‹ç³»ç»Ÿï¼ˆä¾‹å¦‚ Kubernetesã€OpenShiftã€OpenStackå’ŒMesosï¼‰é›†æˆåœ¨ä¸€èµ·ï¼Œå¹¶ä¸ºè™šæ‹Ÿæœºã€å®¹å™¨æˆ– Pod ä»¥åŠè£¸æœºå·¥ä½œè´Ÿè½½æä¾›äº†éš”ç¦»æ¨¡å¼ã€‚ Flannel æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨äº Kubernetes çš„ overlay ç½‘ç»œæä¾›è€…ã€‚ Knitter æ˜¯ä¸º kubernetes æä¾›å¤åˆç½‘ç»œè§£å†³æ–¹æ¡ˆçš„ç½‘ç»œç»„ä»¶ã€‚ Multus æ˜¯ä¸€ä¸ªå¤šæ’ä»¶ï¼Œå¯åœ¨ Kubernetes ä¸­æä¾›å¤šç§ç½‘ç»œæ”¯æŒï¼Œä»¥æ”¯æŒæ‰€æœ‰ CNI æ’ä»¶ï¼ˆä¾‹å¦‚ Calicoï¼ŒCiliumï¼ŒContivï¼ŒFlannelï¼‰ï¼Œè€Œä¸”åŒ…å«äº†åœ¨ Kubernetes ä¸­åŸºäº SRIOVã€DPDKã€OVS-DPDK å’Œ VPP çš„å·¥ä½œè´Ÿè½½ã€‚ NSX-T å®¹å™¨æ’ä»¶ï¼ˆ NCP ï¼‰æä¾›äº† VMware NSX-T ä¸å®¹å™¨åè°ƒå™¨ï¼ˆä¾‹å¦‚ Kubernetesï¼‰ä¹‹é—´çš„é›†æˆï¼Œä»¥åŠ NSX-T ä¸åŸºäºå®¹å™¨çš„ CaaS / PaaS å¹³å°ï¼ˆä¾‹å¦‚å…³é”®å®¹å™¨æœåŠ¡ï¼ˆPKSï¼‰å’Œ OpenShiftï¼‰ä¹‹é—´çš„é›†æˆã€‚ Nuage æ˜¯ä¸€ä¸ª SDN å¹³å°ï¼Œå¯åœ¨ Kubernetes Pods å’Œé Kubernetes ç¯å¢ƒä¹‹é—´æä¾›åŸºäºç­–ç•¥çš„è”ç½‘ï¼Œå¹¶å…·æœ‰å¯è§†åŒ–å’Œå®‰å…¨ç›‘æ§ã€‚ Romana æ˜¯ä¸€ä¸ª pod ç½‘ç»œçš„å±‚ 3 è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸”æ”¯æŒ NetworkPolicy APIã€‚Kubeadm add-on å®‰è£…ç»†èŠ‚å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ã€‚ Weave Net æä¾›äº†åœ¨ç½‘ç»œåˆ†ç»„ä¸¤ç«¯å‚ä¸å·¥ä½œçš„ç½‘ç»œå’Œç½‘ç»œç­–ç•¥ï¼Œå¹¶ä¸”ä¸éœ€è¦é¢å¤–çš„æ•°æ®åº“ã€‚  æœåŠ¡å‘ç°  CoreDNS æ˜¯ä¸€ç§çµæ´»çš„ï¼Œå¯æ‰©å±•çš„ DNS æœåŠ¡å™¨ï¼Œå¯ä»¥å®‰è£…ä¸ºé›†ç¾¤å†…çš„ Pod æä¾› DNS æœåŠ¡ã€‚  å¯è§†åŒ–ç®¡ç†  Dashboard æ˜¯ä¸€ä¸ª Kubernetes çš„ web æ§åˆ¶å°ç•Œé¢ã€‚ Weave Scope æ˜¯ä¸€ä¸ªå›¾å½¢åŒ–å·¥å…·ï¼Œç”¨äºæŸ¥çœ‹ä½ çš„ containersã€ podsã€services ç­‰ã€‚ è¯·å’Œä¸€ä¸ª Weave Cloud account ä¸€èµ·ä½¿ç”¨ï¼Œæˆ–è€…è‡ªå·±è¿è¡Œ UIã€‚  åŸºç¡€è®¾æ–½  KubeVirt æ˜¯å¯ä»¥è®© Kubernetes è¿è¡Œè™šæ‹Ÿæœºçš„ add-onsã€‚é€šå¸¸è¿è¡Œåœ¨è£¸æœºç¾¤é›†ä¸Šã€‚  é—ç•™ Add-ons è¿˜æœ‰ä¸€äº›å…¶å®ƒ add-ons å½’æ¡£åœ¨å·²åºŸå¼ƒçš„ cluster/addons è·¯å¾„ä¸­ã€‚</description>
    </item>
    
    <item>
      <title>å®¹å™¨ç¯å¢ƒå˜é‡</title>
      <link>https://lijun.in/concepts/containers/container-environment-variables/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/containers/container-environment-variables/</guid>
      <description>æœ¬æ–‡ä»‹ç»å®¹å™¨ç¯å¢ƒä¸­å¯¹å®¹å™¨å¯ç”¨çš„èµ„æºã€‚
å®¹å™¨ç¯å¢ƒ Kubernetes å®¹å™¨ç¯å¢ƒä¸ºå®¹å™¨æä¾›äº†å‡ ç±»é‡è¦çš„èµ„æºï¼š
 ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªé•œåƒå’Œä¸€ä¸ªæˆ–å¤šä¸ªå·ã€‚ å®¹å™¨æœ¬èº«ç›¸å…³çš„ä¿¡æ¯ã€‚ é›†ç¾¤ä¸­å…¶ä»–å¯¹è±¡ç›¸å…³çš„ä¿¡æ¯ã€‚  å®¹å™¨ä¿¡æ¯ å®¹å™¨çš„ hostname æ˜¯å®¹å™¨æ‰€åœ¨çš„ Pod åç§°ã€‚ å¯ä»¥é€šè¿‡ hostname å‘½ä»¤æˆ–è°ƒç”¨ libc ä¸­çš„ gethostname å‡½æ•°æ¥è·å–ã€‚
Pod åç§°å’Œåå­—ç©ºé—´å¯ä»¥é€šè¿‡ downward API ä»¥ç¯å¢ƒå˜é‡æ–¹å¼è®¿é—®ã€‚
ä¸ Docker é•œåƒä¸­é™æ€æŒ‡å®šçš„ç¯å¢ƒå˜é‡ä¸€æ ·ï¼ŒPod ä¸­ç”¨æˆ·å®šä¹‰çš„ç¯å¢ƒå˜é‡ä¹Ÿå¯ç”¨äºå®¹å™¨ã€‚
é›†ç¾¤ä¿¡æ¯ å®¹å™¨åˆ›å»ºæ—¶è¿è¡Œçš„æ‰€æœ‰æœåŠ¡çš„åˆ—è¡¨éƒ½ä¼šä½œä¸ºç¯å¢ƒå˜é‡æä¾›ç»™å®¹å™¨ã€‚ è¿™äº›ç¯å¢ƒå˜é‡ä¸ Docker é“¾æ¥è¯­æ³•ç›¸åŒ¹é…ã€‚
å¯¹ä¸€ä¸ªåä¸º foo ï¼Œæ˜ å°„åˆ°åä¸º bar çš„å®¹å™¨ç«¯å£çš„æœåŠ¡ï¼Œ ä¼šå®šä¹‰å¦‚ä¸‹å˜é‡ï¼š
FOO_SERVICE_HOST=&amp;lt;æœåŠ¡æ‰€åœ¨çš„ä¸»æœºåœ°å€&amp;gt; FOO_SERVICE_PORT=&amp;lt;æœåŠ¡æ‰€å¯ç”¨çš„ç«¯å£&amp;gt; æœåŠ¡å…·æœ‰ä¸“ç”¨ IP åœ°å€ï¼Œå¦‚æœå¯ç”¨äº† [DNS æ’ä»¶](http://releases.k8s.io/ param &amp;ldquo;githubbranch&amp;rdquo; &amp;gt;}}/cluster/addons/dns/)ï¼Œè¿˜å¯ä»¥åœ¨å®¹å™¨ä¸­é€šè¿‡ DNS è¿›è¡Œè®¿é—®ã€‚
  æŸ¥çœ‹å®¹å™¨ç”Ÿå‘½å‘¨æœŸæŒ‚é’©ï¼ˆhooksï¼‰äº†è§£æ›´å¤šã€‚ è·å–ä¸ºå®¹å™¨ç”Ÿå‘½å‘¨æœŸäº‹ä»¶é™„åŠ å¤„ç†ç¨‹åºçš„å®è·µç»éªŒã€‚  </description>
    </item>
    
    <item>
      <title>å¯¹ DaemonSet æ‰§è¡Œå›æ»š</title>
      <link>https://lijun.in/tasks/manage-daemon/rollback-daemon-set/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/manage-daemon/rollback-daemon-set/</guid>
      <description>æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•å¯¹ DaemonSet æ‰§è¡Œå›æ»šã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  DaemonSet æ»šåŠ¨å‡çº§å†å²å’Œ DaemonSet å›æ»šç‰¹æ€§ä»…åœ¨ Kubernetes 1.7 åŠä»¥åç‰ˆæœ¬çš„ kubectl ä¸­æ”¯æŒã€‚ ç¡®ä¿æ‚¨äº†è§£å¦‚ä½• å¯¹ DaemonSet æ‰§è¡Œæ»šåŠ¨å‡çº§ã€‚  å¯¹ DaemonSet æ‰§è¡Œå›æ»š æ­¥éª¤ 1ï¼š æ‰¾åˆ°æƒ³è¦ DaemonSet å›æ»šåˆ°çš„å†å²ç‰ˆæœ¬ï¼ˆrevisionï¼‰ å¦‚æœåªæƒ³å›æ»šåˆ°æœ€åä¸€ä¸ªç‰ˆæœ¬ï¼Œå¯ä»¥è·³è¿‡è¿™ä¸€æ­¥ã€‚
åˆ—å‡º DaemonSet çš„æ‰€æœ‰ç‰ˆæœ¬ï¼š
kubectl rollout history daemonset &amp;lt;daemonset-name&amp;gt; è¯¥å‘½ä»¤è¿”å› DaemonSet ç‰ˆæœ¬åˆ—è¡¨ï¼š
daemonsets &amp;#34;&amp;lt;daemonset-name&amp;gt;&amp;#34; REVISION CHANGE-CAUSE 1 ... 2 ... ...  åœ¨åˆ›å»ºæ—¶ï¼ŒDaemonSet çš„å˜åŒ–åŸå› ä» kubernetes.io/change-cause æ³¨è§£ï¼ˆannotationï¼‰å¤åˆ¶åˆ°å…¶ç‰ˆæœ¬ä¸­ã€‚ ç”¨æˆ·å¯ä»¥åœ¨ kubectl ä¸­æŒ‡å®š --record=true ï¼Œå°†æ‰§è¡Œçš„å‘½ä»¤è®°å½•åœ¨å˜åŒ–åŸå› æ³¨è§£ä¸­ã€‚  æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ¥æŸ¥çœ‹æŒ‡å®šç‰ˆæœ¬çš„è¯¦ç»†ä¿¡æ¯ï¼š
kubectl rollout history daemonset &amp;lt;daemonset-name&amp;gt; --revision=1 è¯¥å‘½ä»¤è¿”å›ç›¸åº”ç‰ˆæœ¬çš„è¯¦ç»†ä¿¡æ¯ï¼š</description>
    </item>
    
    <item>
      <title>å¯¹ DaemonSet æ‰§è¡Œæ»šåŠ¨æ›´æ–°</title>
      <link>https://lijun.in/tasks/manage-daemon/update-daemon-set/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/manage-daemon/update-daemon-set/</guid>
      <description>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•å¯¹ DaemonSet æ‰§è¡Œæ»šåŠ¨æ›´æ–°ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  Kubernetes 1.6 æˆ–è€…æ›´é«˜ç‰ˆæœ¬ä¸­æ‰æ”¯æŒ DaemonSet æ»šåŠ¨æ›´æ–°åŠŸèƒ½ã€‚  DaemonSet æ›´æ–°ç­–ç•¥ DaemonSet æœ‰ä¸¤ç§æ›´æ–°ç­–ç•¥ï¼š
 OnDelete: ä½¿ç”¨ OnDelete æ›´æ–°ç­–ç•¥æ—¶ï¼Œåœ¨æ›´æ–° DaemonSet æ¨¡æ¿åï¼Œåªæœ‰å½“æ‚¨æ‰‹åŠ¨åˆ é™¤è€çš„ DaemonSet pods ä¹‹åï¼Œæ–°çš„ DaemonSet pods æ‰ä¼šè¢«è‡ªåŠ¨åˆ›å»ºã€‚è·Ÿ Kubernetes 1.6 ä»¥å‰çš„ç‰ˆæœ¬ç±»ä¼¼ã€‚ RollingUpdate: è¿™æ˜¯é»˜è®¤çš„æ›´æ–°ç­–ç•¥ã€‚ä½¿ç”¨ RollingUpdate æ›´æ–°ç­–ç•¥æ—¶ï¼Œåœ¨æ›´æ–° DaemonSet æ¨¡æ¿åï¼Œè€çš„ DaemonSet pods å°†è¢«ç»ˆæ­¢ï¼Œå¹¶ä¸”å°†ä»¥å—æ§æ–¹å¼è‡ªåŠ¨åˆ›å»ºæ–°çš„ DaemonSet podsã€‚  æ‰§è¡Œæ»šåŠ¨æ›´æ–° è¦å¯ç”¨ DaemonSet çš„æ»šåŠ¨æ›´æ–°åŠŸèƒ½ï¼Œå¿…é¡»è®¾ç½® .spec.updateStrategy.type ä¸º RollingUpdateã€‚
æ‚¨å¯èƒ½æƒ³è®¾ç½®.spec.updateStrategy.rollingUpdate.maxUnavailable (é»˜è®¤ä¸º 1) å’Œ.spec.minReadySeconds (é»˜è®¤ä¸º 0)ã€‚
æ­¥éª¤ 1: æ£€æŸ¥ DaemonSet çš„æ»šåŠ¨æ›´æ–°ç­–ç•¥ é¦–å…ˆï¼Œæ£€æŸ¥ DaemonSet çš„æ›´æ–°ç­–ç•¥ï¼Œç¡®ä¿å·²ç»å°†å…¶è®¾ç½®ä¸º RollingUpdate:
kubectl get ds/&amp;lt;daemonset-name&amp;gt; -o go-template=&amp;#39;{{.</description>
    </item>
    
    <item>
      <title>å·¥å…·</title>
      <link>https://lijun.in/reference/tools/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/tools/</guid>
      <description>Kubernetes åŒ…å«ä¸€äº›å†…ç½®å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´å¥½çš„ä½¿ç”¨ Kubernetes ç³»ç»Ÿã€‚
Kubectl kubectl æ˜¯ Kubernetes å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æ“æ§ Kubernetes é›†ç¾¤ã€‚
Kubeadm kubeadm æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥åœ¨ç‰©ç†æœºã€äº‘æœåŠ¡å™¨æˆ–è™šæ‹Ÿæœºï¼ˆç›®å‰å¤„äº alpha é˜¶æ®µï¼‰ä¸Šè½»æ¾éƒ¨ç½²ä¸€ä¸ªå®‰å…¨å¯é çš„ Kubernetes é›†ç¾¤ã€‚
Kubefed kubefed æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥å¸®åŠ©ç”¨æˆ·ç®¡ç†è”é‚¦é›†ç¾¤ã€‚
Minikube minikube æ˜¯ä¸€ä¸ªå¯ä»¥æ–¹ä¾¿ç”¨æˆ·åœ¨å…¶å·¥ä½œç«™ç‚¹æœ¬åœ°éƒ¨ç½²ä¸€ä¸ªå•èŠ‚ç‚¹ Kubernetes é›†ç¾¤çš„å·¥å…·ï¼Œç”¨äºå¼€å‘å’Œæµ‹è¯•ã€‚
Dashboard Dashboard, æ˜¯ Kubernetes åŸºäº Web çš„ç”¨æˆ·ç®¡ç†ç•Œé¢ï¼Œå…è®¸ç”¨æˆ·éƒ¨ç½²å®¹å™¨åŒ–åº”ç”¨åˆ° Kubernetes é›†ç¾¤ï¼Œè¿›è¡Œæ•…éšœæ’æŸ¥ä»¥åŠç®¡ç†é›†ç¾¤å’Œé›†ç¾¤èµ„æºã€‚
Helm Kubernetes Helm æ˜¯ä¸€ä¸ªç®¡ç†é¢„å…ˆé…ç½® Kubernetes èµ„æºåŒ…çš„å·¥å…·ï¼Œè¿™é‡Œçš„èµ„æºåœ¨ Helm ä¸­ä¹Ÿè¢«ç§°ä½œ Kubernetes chartsã€‚
ä½¿ç”¨ Helmï¼š
 æŸ¥æ‰¾å¹¶ä½¿ç”¨å·²ç»æ‰“åŒ…ä¸º Kubernetes charts çš„æµè¡Œè½¯ä»¶ åˆ†äº«æ‚¨è‡ªå·±çš„åº”ç”¨ä½œä¸º Kubernetes charts ä¸º Kubernetes åº”ç”¨åˆ›å»ºå¯é‡å¤æ‰§è¡Œçš„æ„å»º ä¸ºæ‚¨çš„ Kubernetes æ¸…å•æ–‡ä»¶æä¾›æ›´æ™ºèƒ½åŒ–çš„ç®¡ç† ç®¡ç† Helm è½¯ä»¶åŒ…çš„å‘å¸ƒ  Kompose Kompose ä¸€ä¸ªè½¬æ¢å·¥å…·ï¼Œç”¨æ¥å¸®åŠ© Docker Compose ç”¨æˆ·è¿ç§»è‡³ Kubernetesã€‚</description>
    </item>
    
    <item>
      <title>åº”ç”¨æ•…éšœæ’æŸ¥</title>
      <link>https://lijun.in/tasks/debug-application-cluster/debug-application/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/debug-application/</guid>
      <description>æœ¬æŒ‡å—å¸®åŠ©ç”¨æˆ·æ¥è°ƒè¯•kubernetesä¸Šé‚£äº›æ²¡æœ‰æ­£å¸¸è¿è¡Œçš„åº”ç”¨ã€‚ æœ¬æŒ‡å—ä¸èƒ½è°ƒè¯•é›†ç¾¤ã€‚å¦‚æœæƒ³è°ƒè¯•é›†ç¾¤çš„è¯ï¼Œè¯·å‚é˜…è¿™é‡Œã€‚
. toc &amp;gt;}}
è¯Šæ–­é—®é¢˜ æ•…éšœæ’æŸ¥çš„ç¬¬ä¸€æ­¥æ˜¯å…ˆç»™é—®é¢˜åˆ†ä¸‹ç±»ã€‚è¿™ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆï¼ŸPodsï¼ŒReplication Controlleræˆ–è€…Serviceï¼Ÿ
 Debugging Pods Debugging Replication Controllers Debugging Services  Debugging Pods è°ƒè¯•podçš„ç¬¬ä¸€æ­¥æ˜¯çœ‹ä¸€ä¸‹è¿™ä¸ªpodçš„ä¿¡æ¯ï¼Œç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹podçš„å½“å‰çŠ¶æ€å’Œæœ€è¿‘çš„äº‹ä»¶ï¼š
$ kubectl describe pods ${POD_NAME} æŸ¥çœ‹ä¸€ä¸‹podä¸­çš„å®¹å™¨æ‰€å¤„çš„çŠ¶æ€ã€‚è¿™äº›å®¹å™¨çš„çŠ¶æ€éƒ½æ˜¯Runningå—ï¼Ÿæœ€è¿‘æœ‰æ²¡æœ‰é‡å¯è¿‡ï¼Ÿ
åé¢çš„è°ƒè¯•éƒ½æ˜¯è¦ä¾é podsçš„çŠ¶æ€çš„ã€‚
podåœç•™åœ¨pendingçŠ¶æ€ å¦‚æœä¸€ä¸ªpodå¡åœ¨PendingçŠ¶æ€ï¼Œåˆ™è¡¨ç¤ºè¿™ä¸ªpodæ²¡æœ‰è¢«è°ƒåº¦åˆ°ä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚é€šå¸¸è¿™æ˜¯å› ä¸ºèµ„æºä¸è¶³å¼•èµ·çš„ã€‚ æ•²ä¸€ä¸‹kubectl describe ...è¿™ä¸ªå‘½ä»¤ï¼Œè¾“å‡ºçš„ä¿¡æ¯é‡Œé¢åº”è¯¥æœ‰æ˜¾ç¤ºä¸ºä»€ä¹ˆæ²¡è¢«è°ƒåº¦çš„åŸå› ã€‚ å¸¸è§åŸå› å¦‚ä¸‹ï¼š
  èµ„æºä¸è¶³: ä½ å¯èƒ½è€—å°½äº†é›†ç¾¤ä¸Šæ‰€æœ‰çš„CPUå’Œå†…å­˜ï¼Œæ­¤æ—¶ï¼Œä½ éœ€è¦åˆ é™¤podsï¼Œè°ƒæ•´èµ„æºè¯·æ±‚ï¼Œæˆ–è€…å¢åŠ èŠ‚ç‚¹ã€‚ æ›´å¤šä¿¡æ¯è¯·å‚é˜…Compute Resources document
  ä½¿ç”¨äº†hostPort: å¦‚æœç»‘å®šä¸€ä¸ªpodåˆ°hostPortï¼Œé‚£ä¹ˆèƒ½åˆ›å»ºçš„podä¸ªæ•°å°±æœ‰é™äº†ã€‚ å¤šæ•°æƒ…å†µä¸‹ï¼ŒhostPortæ˜¯éå¿…è¦çš„ï¼Œè€Œåº”è¯¥é‡‡ç”¨æœåŠ¡æ¥æš´éœ²podã€‚ å¦‚æœç¡®å®éœ€è¦ä½¿ç”¨hostPortï¼Œé‚£ä¹ˆèƒ½åˆ›å»ºçš„podçš„æ•°é‡å°±æ˜¯èŠ‚ç‚¹çš„ä¸ªæ•°ã€‚
  podåœç•™åœ¨waitingçŠ¶æ€ å¦‚æœä¸€ä¸ªpodå¡åœ¨WaitingçŠ¶æ€ï¼Œåˆ™è¡¨ç¤ºè¿™ä¸ªpodå·²ç»è°ƒè¯•åˆ°èŠ‚ç‚¹ä¸Šï¼Œä½†æ˜¯æ²¡æœ‰è¿è¡Œèµ·æ¥ã€‚ å†æ¬¡æ•²ä¸€ä¸‹kubectl describe ...è¿™ä¸ªå‘½ä»¤æ¥æŸ¥çœ‹ç›¸å…³ä¿¡æ¯ã€‚ æœ€å¸¸è§çš„åŸå› æ˜¯æ‹‰å–é•œåƒå¤±è´¥ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸‰ç§æ–¹å¼æ¥æ£€æŸ¥ï¼š
 ä½¿ç”¨çš„é•œåƒåå­—æ­£ç¡®å—ï¼Ÿ é•œåƒä»“åº“é‡Œæœ‰æ²¡æœ‰è¿™ä¸ªé•œåƒï¼Ÿ ç”¨docker pull &amp;lt;image&amp;gt;å‘½ä»¤æ‰‹åŠ¨æ‹‰ä¸‹é•œåƒè¯•è¯•ã€‚  podå¤„äºcrashingçŠ¶æ€æˆ–è€…unhealthy é¦–å…ˆï¼Œçœ‹ä¸€ä¸‹å®¹å™¨çš„log:
$ kubectl logs ${POD_NAME} ${CONTAINER_NAME} å¦‚æœå®¹å™¨æ˜¯crashedçš„ï¼Œç”¨å¦‚ä¸‹å‘½ä»¤å¯ä»¥çœ‹åˆ°crashçš„log:
$ kubectl logs --previous ${POD_NAME} ${CONTAINER_NAME} æˆ–è€…ï¼Œç”¨execåœ¨å®¹å™¨å†…è¿è¡Œä¸€äº›å‘½ä»¤ï¼š</description>
    </item>
    
    <item>
      <title>åº”ç”¨è‡ªæµ‹ä¸è°ƒè¯•</title>
      <link>https://lijun.in/tasks/debug-application-cluster/debug-application-introspection/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/debug-application-introspection/</guid>
      <description>è¿è¡Œåº”ç”¨æ—¶ï¼Œä¸å¯é¿å…çš„éœ€è¦å®šä½é—®é¢˜ã€‚ å‰é¢æˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ kubectl get pods æ¥æŸ¥è¯¢ pod çš„ç®€å•ä¿¡æ¯ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç³»åˆ—çš„æ–¹æ³•æ¥è·å–åº”ç”¨çš„æ›´è¯¦ç»†ä¿¡æ¯ã€‚
ä½¿ç”¨ kubectl describe pod å‘½ä»¤è·å– pod è¯¦æƒ… ä¸ä¹‹å‰çš„ä¾‹å­ç±»ä¼¼ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª Deployment æ¥åˆ›å»ºä¸¤ä¸ª podã€‚
. codenew file=&amp;quot;application/nginx-with-request.yaml&amp;rdquo; &amp;gt;}}
ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»º deploymentï¼š
kubectl apply -f https://k8s.io/examples/application/nginx-with-request.yaml deployment.apps/nginx-deployment created ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ pod çŠ¶æ€ï¼š
kubectl get pods NAME READY STATUS RESTARTS AGE nginx-deployment-1006230814-6winp 1/1 Running 0 11s nginx-deployment-1006230814-fmgu3 1/1 Running 0 11s æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ kubectl describe pod å‘½ä»¤æ¥æŸ¥è¯¢æ¯ä¸ª pod çš„æ›´å¤šä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š
kubectl describe pod nginx-deployment-1006230814-6winp Name:	nginx-deployment-1006230814-6winp Namespace:	default Node:	kubernetes-node-wul5/10.240.0.9 Start Time:	Thu, 24 Mar 2016 01:39:49 +0000 Labels:	app=nginx,pod-template-hash=1006230814 Annotations: kubernetes.</description>
    </item>
    
    <item>
      <title>å¼€å‘äº‘æ§åˆ¶å™¨ç®¡ç†å™¨</title>
      <link>https://lijun.in/tasks/administer-cluster/developing-cloud-controller-manager/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/developing-cloud-controller-manager/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;v1.11&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
åœ¨å³å°†å‘å¸ƒçš„ç‰ˆæœ¬ä¸­ï¼Œäº‘æ§åˆ¶å™¨ç®¡ç†å™¨å°†æ˜¯æŠŠ Kubernetes ä¸ä»»ä½•äº‘é›†æˆçš„é¦–é€‰æ–¹å¼ã€‚ è¿™å°†ç¡®ä¿é©±åŠ¨å¯ä»¥ç‹¬ç«‹äºæ ¸å¿ƒ Kubernetes å‘å¸ƒå‘¨æœŸå¼€å‘å…¶åŠŸèƒ½ã€‚
. feature-state for_k8s_version=&amp;quot;1.8&amp;rdquo; state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
åœ¨è®¨è®ºå¦‚ä½•æ„å»ºè‡ªå·±çš„äº‘æ§åˆ¶å™¨ç®¡ç†å™¨ä¹‹å‰ï¼Œäº†è§£æœ‰å…³å®ƒå¦‚ä½•å·¥ä½œçš„ä¸€äº›èƒŒæ™¯çŸ¥è¯†æ˜¯æœ‰å¸®åŠ©çš„ã€‚äº‘æ§åˆ¶å™¨ç®¡ç†å™¨æ˜¯æ¥è‡ª kube-controller-manager çš„ä»£ç ï¼Œåˆ©ç”¨ Go æ¥å£å…è®¸æ’å…¥ä»»ä½•äº‘çš„å®ç°ã€‚å¤§å¤šæ•°æ¡†æ¶å’Œé€šç”¨æ§åˆ¶å™¨çš„å®ç°åœ¨ coreï¼Œä½†åªè¦æ»¡è¶³ äº‘æä¾›è€…æ¥å£ï¼Œå®ƒå°±ä¼šå§‹ç»ˆæ‰§è¡Œå®ƒæ‰€æä¾›çš„äº‘æ¥å£ã€‚
ä¸ºäº†æ·±å…¥äº†è§£å®æ–½ç»†èŠ‚ï¼Œæ‰€æœ‰äº‘æ§åˆ¶å™¨ç®¡ç†å™¨éƒ½å°†ä» Kubernetes æ ¸å¿ƒå¯¼å…¥ä¾èµ–åŒ…ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯æ¯ä¸ªé¡¹ç›®éƒ½ä¼šé€šè¿‡è°ƒç”¨ cloudprovider.RegisterCloudProvider æ¥æ³¨å†Œè‡ªå·±çš„é©±åŠ¨ï¼Œæ›´æ–°å¯ç”¨é©±åŠ¨çš„å…¨å±€å˜é‡ã€‚
å¼€å‘ Out of Tree è¦ä¸ºæ‚¨çš„äº‘æ„å»ºä¸€ä¸ª out-of-tree äº‘æ§åˆ¶å™¨ç®¡ç†å™¨ï¼Œè¯·æŒ‰ç…§ä¸‹åˆ—æ­¥éª¤æ“ä½œï¼š
 ä½¿ç”¨æ»¡è¶³ cloudprovider.Interface çš„å®ç°åˆ›å»ºä¸€ä¸ª go åŒ…ã€‚ ä½¿ç”¨æ¥è‡ª Kubernetes æ ¸å¿ƒåŒ…çš„ cloud-controller-manager ä¸­çš„ main.go ä½œä¸º main.go çš„æ¨¡æ¿ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œå”¯ä¸€çš„åŒºåˆ«åº”è¯¥æ˜¯å°†å¯¼å…¥çš„äº‘åŒ…ã€‚ åœ¨ main.go ä¸­å¯¼å…¥ä½ çš„äº‘åŒ…ï¼Œç¡®ä¿ä½ çš„åŒ…æœ‰ä¸€ä¸ª init å—æ¥è¿è¡Œ cloudprovider.RegisterCloudProviderã€‚  ç”¨ç°æœ‰çš„ out-of-tree äº‘é©±åŠ¨ä½œä¸ºä¾‹å­å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ° æ¸…å•ã€‚
In Tree å¯¹äº in-tree é©±åŠ¨ï¼Œæ‚¨å¯ä»¥å°† in-tree äº‘æ§åˆ¶å™¨ç®¡ç†å™¨ä½œä¸ºç¾¤é›†ä¸­çš„ Daemonset è¿è¡Œã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… è¿è¡Œçš„äº‘æ§åˆ¶å™¨ç®¡ç†å™¨æ–‡æ¡£ã€‚</description>
    </item>
    
    <item>
      <title>å¼¹ç¼©StatefulSet</title>
      <link>https://lijun.in/tasks/run-application/scale-stateful-set/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/run-application/scale-stateful-set/</guid>
      <description>æœ¬æ–‡ä»‹ç»å¦‚ä½•å¼¹ç¼©StatefulSet.
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  StatefulSetsä»…é€‚ç”¨äºKubernetes1.5åŠä»¥ä¸Šç‰ˆæœ¬. ä¸æ˜¯æ‰€æœ‰Statefulåº”ç”¨éƒ½é€‚åˆå¼¹ç¼©. åœ¨å¼¹ç¼©å‰æ‚¨çš„åº”ç”¨å‰. æ‚¨å¿…é¡»å……åˆ†äº†è§£æ‚¨çš„åº”ç”¨, ä¸é€‚å½“çš„å¼¹ç¼©StatefulSetæˆ–è®¸ä¼šé€ æˆåº”ç”¨è‡ªèº«åŠŸèƒ½çš„ä¸ç¨³å®š. ä»…å½“æ‚¨ç¡®å®šè¯¥Statefulåº”ç”¨çš„é›†ç¾¤æ˜¯å®Œå…¨å¥åº·æ‰å¯æ‰§è¡Œå¼¹ç¼©æ“ä½œ.  ä½¿ç”¨ kubectl å¼¹ç¼©StatefulSets å¼¹ç¼©è¯·ç¡®è®¤ kubectl å·²ç»å‡çº§åˆ°Kubernetes1.5åŠä»¥ä¸Šç‰ˆæœ¬. å¦‚æœä¸ç¡®å®š, æ‰§è¡Œ kubectl version å‘½ä»¤å¹¶æ£€æŸ¥ä½¿ç”¨çš„ Client Version.
kubectl å¼¹ç¼© é¦–å…ˆ, æ‰¾åˆ°æ‚¨æƒ³è¦å¼¹ç¼©çš„StatefulSet. è®°ä½, æ‚¨éœ€å…ˆæ¸…æ¥šæ˜¯å¦èƒ½å¼¹ç¼©è¯¥åº”ç”¨.
kubectl get statefulsets &amp;lt;stateful-set-name&amp;gt; æ”¹å˜StatefulSetå‰¯æœ¬æ•°é‡:
kubectl scale statefulsets &amp;lt;stateful-set-name&amp;gt; --replicas=&amp;lt;new-replicas&amp;gt; å¯ä½¿ç”¨å…¶ä»–å‘½ä»¤: kubectl apply / kubectl edit / kubectl patch å¦å¤–, æ‚¨å¯ä»¥ in-place updates StatefulSets.
å¦‚æœæ‚¨çš„StatefulSetå¼€å§‹ç”± kubectl apply æˆ– kubectl create --save-config åˆ›å»º,æ›´æ–°StatefulSet manifestsä¸­çš„ .spec.replicas, ç„¶åæ‰§è¡Œå‘½ä»¤ kubectl apply:
kubectl apply -f &amp;lt;stateful-set-file-updated&amp;gt; é™¤æ­¤ä¹‹å¤–, å¯ä»¥é€šè¿‡å‘½ä»¤ kubectl edit ç¼–è¾‘è¯¥å­—æ®µ:</description>
    </item>
    
    <item>
      <title>æ’é”™</title>
      <link>https://lijun.in/tasks/debug-application-cluster/troubleshooting/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/troubleshooting/</guid>
      <description>æœ‰æ—¶å€™äº‹æƒ…ä¼šå‡ºé”™ã€‚æœ¬æŒ‡å—æ—¨åœ¨æ­£ç¡®è§£å†³è¿™äº›é—®é¢˜ã€‚å®ƒåŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š
 åº”ç”¨æ’é”™ - ç”¨äºéƒ¨ç½²ä»£ç åˆ° Kubernetes å¹¶æƒ³çŸ¥é“ä»£ç ä¸ºä»€ä¹ˆä¸èƒ½æ­£å¸¸è¿è¡Œçš„ç”¨æˆ·ã€‚ é›†ç¾¤æ’é”™ - ç”¨äºé›†ç¾¤ç®¡ç†å‘˜ä»¥åŠ Kubernetes é›†ç¾¤è¡¨ç°å¼‚å¸¸çš„ç”¨æˆ·ã€‚  æ‚¨ä¹Ÿåº”è¯¥æŸ¥çœ‹æ‰€ç”¨ç‰ˆæœ¬çš„å·²çŸ¥é—®é¢˜ã€‚
è·å–å¸®åŠ© å¦‚æœæ‚¨çš„é—®é¢˜åœ¨ä¸Šè¿°æŒ‡å—ä¸­æ²¡æœ‰å¾—åˆ°ç­”æ¡ˆï¼Œæ‚¨è¿˜æœ‰å¦å¤–å‡ ç§æ–¹å¼ä» Kubernetes å›¢é˜Ÿè·å¾—å¸®åŠ©ã€‚
æé—® ç½‘ç«™ä¸Šçš„æ–‡æ¡£é’ˆå¯¹å›ç­”å„ç±»é—®é¢˜è¿›è¡Œäº†ç»“æ„åŒ–ç»„ç»‡å’Œåˆ†ç±»ã€‚ æ¦‚å¿µéƒ¨åˆ†è§£é‡Šäº† Kubernetes ä½“ç³»ç»“æ„ä»¥åŠæ¯ä¸ªç»„ä»¶çš„å·¥ä½œæ–¹å¼ï¼Œå®‰è£…éƒ¨åˆ†æä¾›äº†å…¥é—¨çš„å®ç”¨è¯´æ˜ã€‚ ä»»åŠ¡éƒ¨åˆ†å±•ç¤ºäº†å¦‚ä½•å®Œæˆå¸¸ç”¨ä»»åŠ¡ï¼Œå…¥é—¨éƒ¨åˆ†åˆ™æ˜¯å¯¹ç°å®ä¸–ç•Œã€ç‰¹å®šè¡Œä¸šæˆ–ç«¯åˆ°ç«¯å¼€å‘åœºæ™¯çš„æ›´å…¨é¢çš„æ¼”ç»ƒã€‚ å‚è€ƒéƒ¨åˆ†æä¾›äº†è¯¦ç»†çš„ [Kubernetes API](/docs/reference/generated/kubernetes-api/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/) æ–‡æ¡£å’Œå‘½ä»¤è¡Œ (CLI) æ¥å£ï¼Œä¾‹å¦‚kubectlã€‚
æ‚¨è¿˜å¯ä»¥æ‰¾åˆ°å †æ ˆæº¢å‡ºç›¸å…³çš„ä¸»é¢˜ï¼š
 Kubernetes Google Kubernetes Engine  æ±‚æ•‘ï¼æˆ‘çš„é—®é¢˜è¿˜æ²¡æœ‰è§£å†³ï¼æˆ‘éœ€è¦ç«‹å³å¾—åˆ°å¸®åŠ©ï¼ å †æ ˆæº¢å‡º ç¤¾åŒºä¸­çš„å…¶ä»–äººå¯èƒ½å·²ç»é—®è¿‡å’Œæ‚¨ç±»ä¼¼çš„é—®é¢˜ï¼Œè¿™æˆ–è®¸èƒ½å¸®åŠ©è§£å†³æ‚¨çš„é—®é¢˜ã€‚ Kubernetes å›¢é˜Ÿè¿˜ä¼šç›‘è§†å¸¦æœ‰ Kubernetes æ ‡ç­¾çš„å¸–å­ã€‚ å¦‚æœç°æœ‰çš„é—®é¢˜å¯¹æ‚¨æ²¡æœ‰å¸®åŠ©ï¼Œè¯·é—®ä¸€ä¸ªæ–°é—®é¢˜!
Slack Kubernetes å›¢é˜Ÿåœ¨ Slack ä¸­å»ºæœ‰ #kubernetes-users é¢‘é“ã€‚ æ‚¨å¯ä»¥åœ¨è¿™é‡Œå‚åŠ ä¸ Kubernetes å›¢é˜Ÿçš„è®¨è®ºã€‚ Slack éœ€è¦æ³¨å†Œï¼Œä½† Kubernetes å›¢é˜Ÿå…¬å¼€é‚€è¯·ä»»ä½•äººåœ¨è¿™é‡Œæ³¨å†Œã€‚ æ¬¢è¿æ‚¨éšæ—¶æ¥é—®ä»»ä½•é—®é¢˜ã€‚
ä¸€æ—¦æ³¨å†Œå®Œæˆï¼Œæ‚¨å°±å¯ä»¥æµè§ˆå„ç§æ„Ÿå…´è¶£çš„é¢‘é“åˆ—è¡¨ã€‚ ä¾‹å¦‚ï¼ŒKubernetes æ–°äººå¯èƒ½è¿˜æƒ³åŠ å…¥ #kubernetes-novice é¢‘é“ã€‚ä½œä¸ºå¦ä¸€ä¸ªä¾‹å­ï¼Œå¼€å‘äººå‘˜åº”è¯¥åŠ å…¥ #kubernetes-dev é¢‘é“ã€‚</description>
    </item>
    
    <item>
      <title>æ§åˆ¶èŠ‚ç‚¹ä¸Šçš„ CPU ç®¡ç†ç­–ç•¥</title>
      <link>https://lijun.in/tasks/administer-cluster/cpu-management-policies/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/cpu-management-policies/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;v1.12&amp;rdquo; state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
æŒ‰ç…§è®¾è®¡ï¼ŒKubernetes å¯¹ pod æ‰§è¡Œç›¸å…³çš„å¾ˆå¤šæ–¹é¢è¿›è¡Œäº†æŠ½è±¡ï¼Œä½¿å¾—ç”¨æˆ·ä¸å¿…å…³å¿ƒã€‚ç„¶ è€Œï¼Œä¸ºäº†æ­£å¸¸è¿è¡Œï¼Œæœ‰äº›å·¥ä½œè´Ÿè½½è¦æ±‚åœ¨å»¶è¿Ÿå’Œ/æˆ–æ€§èƒ½æ–¹é¢æœ‰æ›´å¼ºçš„ä¿è¯ã€‚ ä¸ºæ­¤ï¼Œkubelet æä¾›æ–¹æ³•æ¥å®ç°æ›´å¤æ‚çš„è´Ÿè½½æ”¾ç½®ç­–ç•¥ï¼ŒåŒæ—¶ä¿æŒæŠ½è±¡ï¼Œé¿å…æ˜¾å¼çš„æ”¾ç½®æŒ‡ä»¤ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
CPU ç®¡ç†ç­–ç•¥ é»˜è®¤æƒ…å†µä¸‹ï¼Œkubelet ä½¿ç”¨ CFS é…é¢ æ¥æ‰§è¡Œ pod çš„ CPU çº¦æŸã€‚å½“èŠ‚ç‚¹ä¸Šè¿è¡Œäº†å¾ˆå¤š CPU å¯†é›†çš„ pod æ—¶ï¼Œå·¥ä½œè´Ÿè½½å¯èƒ½ä¼šè¿ç§»åˆ°ä¸åŒçš„ CPU æ ¸ï¼Œè¿™å–å†³äºè°ƒåº¦æ—¶ pod æ˜¯å¦è¢«æ‰¼åˆ¶ï¼Œä»¥åŠå“ªäº› CPU æ ¸æ˜¯å¯ç”¨çš„ã€‚è®¸å¤šå·¥ä½œè´Ÿè½½å¯¹è¿™ç§è¿ç§»ä¸æ•æ„Ÿï¼Œå› æ­¤æ— éœ€ä»»ä½•å¹²é¢„å³å¯æ­£å¸¸å·¥ä½œã€‚
ç„¶è€Œï¼Œæœ‰äº›å·¥ä½œè´Ÿè½½çš„æ€§èƒ½æ˜æ˜¾åœ°å—åˆ° CPU ç¼“å­˜äº²å’Œæ€§ä»¥åŠè°ƒåº¦å»¶è¿Ÿçš„å½±å“ï¼Œå¯¹æ­¤ï¼Œkubelet æä¾›äº†å¯é€‰çš„ CPU ç®¡ç†ç­–ç•¥ï¼Œæ¥ç¡®å®šèŠ‚ç‚¹ä¸Šçš„ä¸€äº›åˆ†é…åå¥½ã€‚
é…ç½® CPU ç®¡ç†å™¨ï¼ˆCPU Managerï¼‰ä½œä¸º alpha ç‰¹æ€§å¼•å…¥ Kubernetes 1.8 ç‰ˆæœ¬ã€‚ä» 1.10 ç‰ˆæœ¬å¼€å§‹ï¼Œä½œä¸º beta ç‰¹æ€§é»˜è®¤å¼€å¯ã€‚
CPU ç®¡ç†ç­–ç•¥é€šè¿‡ kubelet å‚æ•° --cpu-manager-policy æ¥æŒ‡å®šã€‚æ”¯æŒä¸¤ç§ç­–ç•¥ï¼š
 none: é»˜è®¤ç­–ç•¥ï¼Œè¡¨ç¤ºç°æœ‰çš„è°ƒåº¦è¡Œä¸ºã€‚ static: å…è®¸ä¸ºèŠ‚ç‚¹ä¸Šå…·æœ‰æŸäº›èµ„æºç‰¹å¾çš„ pod èµ‹äºˆå¢å¼ºçš„ CPU äº²å’Œæ€§å’Œç‹¬å æ€§ã€‚  CPU ç®¡ç†å™¨å®šæœŸé€šè¿‡ CRI å†™å…¥èµ„æºæ›´æ–°ï¼Œä»¥ä¿è¯å†…å­˜ä¸­ CPU åˆ†é…ä¸ cgroupfs ä¸€è‡´ã€‚åŒæ­¥é¢‘ç‡é€šè¿‡æ–°å¢çš„ Kubelet é…ç½®å‚æ•° --cpu-manager-reconcile-period æ¥è®¾ç½®ã€‚ å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä¸ --node-status-update-frequency çš„å‘¨æœŸç›¸åŒã€‚</description>
    </item>
    
    <item>
      <title>æ§åˆ¶èŠ‚ç‚¹ä¸Šçš„æ‹“æ‰‘ç®¡ç†ç­–ç•¥</title>
      <link>https://lijun.in/tasks/administer-cluster/topology-manager/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/topology-manager/</guid>
      <description>. feature-state state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
è¶Šæ¥è¶Šå¤šçš„ç³»ç»Ÿåˆ©ç”¨ CPU å’Œç¡¬ä»¶åŠ é€Ÿå™¨çš„ç»„åˆæ¥æ”¯æŒå¯¹å»¶è¿Ÿè¦æ±‚è¾ƒé«˜çš„ä»»åŠ¡å’Œé«˜ååé‡çš„å¹¶è¡Œè®¡ç®—ã€‚ è¿™ç±»è´Ÿè½½åŒ…æ‹¬ç”µä¿¡ã€ç§‘å­¦è®¡ç®—ã€æœºå™¨å­¦ä¹ ã€é‡‘èæœåŠ¡å’Œæ•°æ®åˆ†æç­‰ã€‚ æ­¤ç±»æ··åˆç³»ç»Ÿå³ç”¨äºæ„é€ è¿™äº›é«˜æ€§èƒ½ç¯å¢ƒã€‚
ä¸ºäº†è·å¾—æœ€ä½³æ€§èƒ½ï¼Œéœ€è¦è¿›è¡Œä¸ CPU éš”ç¦»ã€å†…å­˜å’Œè®¾å¤‡å±€éƒ¨æ€§æœ‰å…³çš„ä¼˜åŒ–ã€‚ ä½†æ˜¯ï¼Œåœ¨ Kubernetes ä¸­ï¼Œè¿™äº›ä¼˜åŒ–ç”±å„è‡ªç‹¬ç«‹çš„ç»„ä»¶é›†åˆæ¥å¤„ç†ã€‚
æ‹“æ‰‘ç®¡ç†å™¨ï¼ˆTopology Managerï¼‰ æ˜¯ä¸€ä¸ª Kubelet çš„ä¸€éƒ¨åˆ†ï¼Œæ—¨åœ¨åè°ƒè´Ÿè´£è¿™äº›ä¼˜åŒ–çš„ä¸€ç»„ç»„ä»¶ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
æ‹“æ‰‘ç®¡ç†å™¨å¦‚ä½•å·¥ä½œ åœ¨å¼•å…¥æ‹“æ‰‘ç®¡ç†å™¨ä¹‹å‰ï¼Œ Kubernetes ä¸­çš„ CPU å’Œè®¾å¤‡ç®¡ç†å™¨ç›¸äº’ç‹¬ç«‹åœ°åšå‡ºèµ„æºåˆ†é…å†³ç­–ã€‚ è¿™å¯èƒ½ä¼šå¯¼è‡´åœ¨å¤šå¤„ç†ç³»ç»Ÿä¸Šå‡ºç°å¹¶éæœŸæœ›çš„èµ„æºåˆ†é…ï¼›ç”±äºè¿™äº›ä¸æœŸæœ›ç›¸å·¦çš„åˆ†é…ï¼Œå¯¹æ€§èƒ½æˆ–å»¶è¿Ÿæ•æ„Ÿçš„åº”ç”¨å°†å—åˆ°å½±å“ã€‚ è¿™é‡Œçš„ä¸ç¬¦åˆæœŸæœ›æ„æŒ‡ï¼Œä¾‹å¦‚ï¼Œ CPU å’Œè®¾å¤‡æ˜¯ä»ä¸åŒçš„ NUMA èŠ‚ç‚¹åˆ†é…çš„ï¼Œå› æ­¤ä¼šå¯¼è‡´é¢å¤–çš„å»¶è¿Ÿã€‚
æ‹“æ‰‘ç®¡ç†å™¨æ˜¯ä¸€ä¸ª Kubelet ç»„ä»¶ï¼Œæ‰®æ¼”ä¿¡æ¯æºçš„è§’è‰²ï¼Œä»¥ä¾¿å…¶ä»– Kubelet ç»„ä»¶å¯ä»¥åšå‡ºä¸æ‹“æ‰‘ç»“æ„ç›¸å¯¹åº”çš„èµ„æºåˆ†é…å†³å®šã€‚
æ‹“æ‰‘ç®¡ç†å™¨ä¸ºç»„ä»¶æä¾›äº†ä¸€ä¸ªç§°ä¸º å»ºè®®ä¾›åº”è€…ï¼ˆHint Providersï¼‰ çš„æ¥å£ï¼Œä»¥å‘é€å’Œæ¥æ”¶æ‹“æ‰‘ä¿¡æ¯ã€‚ æ‹“æ‰‘ç®¡ç†å™¨å…·æœ‰ä¸€ç»„èŠ‚ç‚¹çº§ç­–ç•¥ï¼Œå…·ä½“è¯´æ˜å¦‚ä¸‹ã€‚
æ‹“æ‰‘ç®¡ç†å™¨ä» å»ºè®®æä¾›è€… æ¥æ”¶æ‹“æ‰‘ä¿¡æ¯ï¼Œä½œä¸ºè¡¨ç¤ºå¯ç”¨çš„ NUMA èŠ‚ç‚¹å’Œé¦–é€‰åˆ†é…æŒ‡ç¤ºçš„ä½æ©ç ã€‚ æ‹“æ‰‘ç®¡ç†å™¨ç­–ç•¥å¯¹æ‰€æä¾›çš„å»ºè®®æ‰§è¡Œä¸€ç»„æ“ä½œï¼Œå¹¶æ ¹æ®ç­–ç•¥å¯¹æç¤ºè¿›è¡Œçº¦å‡ä»¥å¾—åˆ°æœ€ä¼˜è§£ï¼›å¦‚æœå­˜å‚¨äº†ä¸é¢„æœŸä¸ç¬¦çš„å»ºè®®ï¼Œåˆ™è¯¥å»ºè®®çš„ä¼˜é€‰å­—æ®µå°†è¢«è®¾ç½®ä¸º falseã€‚ åœ¨å½“å‰ç­–ç•¥ä¸­ï¼Œé¦–é€‰çš„æ˜¯æœ€çª„çš„ä¼˜é€‰æ©ç ã€‚ æ‰€é€‰å»ºè®®å°†è¢«å­˜å‚¨ä¸ºæ‹“æ‰‘ç®¡ç†å™¨çš„ä¸€éƒ¨åˆ†ã€‚ å–å†³äºæ‰€é…ç½®çš„ç­–ç•¥ï¼Œæ‰€é€‰å»ºè®®å¯ç”¨æ¥å†³å®šèŠ‚ç‚¹æ¥å—æˆ–æ‹’ç» Pod ã€‚ ä¹‹åï¼Œå»ºè®®ä¼šè¢«å­˜å‚¨åœ¨æ‹“æ‰‘ç®¡ç†å™¨ä¸­ï¼Œä¾› å»ºè®®æä¾›è€… è¿›è¡Œèµ„æºåˆ†é…å†³ç­–æ—¶ä½¿ç”¨ã€‚
æ‹“æ‰‘ç®¡ç†å™¨ç­–ç•¥ å½“å‰æ‹“æ‰‘ç®¡ç†å™¨ï¼š</description>
    </item>
    
    <item>
      <title>æ¨èä½¿ç”¨çš„æ ‡ç­¾</title>
      <link>https://lijun.in/concepts/overview/working-with-objects/common-labels/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/overview/working-with-objects/common-labels/</guid>
      <description>é™¤äº† kubectl å’Œ dashboard ä¹‹å¤–ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å…¶ä»–å·¥å…·æ¥å¯è§†åŒ–å’Œç®¡ç† Kubernetes å¯¹è±¡ã€‚ä¸€ç»„é€šç”¨çš„æ ‡ç­¾å¯ä»¥è®©å¤šä¸ªå·¥å…·ä¹‹é—´ç›¸äº’æ“ä½œï¼Œç”¨æ‰€æœ‰å·¥å…·éƒ½èƒ½ç†è§£çš„é€šç”¨æ–¹å¼æè¿°å¯¹è±¡ã€‚
é™¤äº†æ”¯æŒå·¥å…·å¤–ï¼Œæ¨èçš„æ ‡ç­¾è¿˜ä»¥ä¸€ç§å¯ä»¥æŸ¥è¯¢çš„æ–¹å¼æè¿°äº†åº”ç”¨ç¨‹åºã€‚
å…ƒæ•°æ®å›´ç»• åº”ç”¨ï¼ˆapplicationï¼‰ çš„æ¦‚å¿µè¿›è¡Œç»„ç»‡ã€‚Kubernetes ä¸æ˜¯ å¹³å°å³æœåŠ¡ï¼ˆPaaSï¼‰ï¼Œæ²¡æœ‰æˆ–å¼ºåˆ¶æ‰§è¡Œæ­£å¼çš„åº”ç”¨ç¨‹åºæ¦‚å¿µã€‚ ç›¸åï¼Œåº”ç”¨ç¨‹åºæ˜¯éæ­£å¼çš„ï¼Œå¹¶ä½¿ç”¨å…ƒæ•°æ®è¿›è¡Œæè¿°ã€‚åº”ç”¨ç¨‹åºåŒ…å«çš„å®šä¹‰æ˜¯æ¾æ•£çš„ã€‚
è¿™äº›æ˜¯æ¨èçš„æ ‡ç­¾ã€‚å®ƒä»¬ä½¿ç®¡ç†åº”ç”¨ç¨‹åºå˜å¾—æ›´å®¹æ˜“ä½†ä¸æ˜¯ä»»ä½•æ ¸å¿ƒå·¥å…·æ‰€å¿…éœ€çš„ã€‚
å…±äº«æ ‡ç­¾å’Œæ³¨è§£éƒ½ä½¿ç”¨åŒä¸€ä¸ªå‰ç¼€ï¼šapp.kubernetes.ioã€‚æ²¡æœ‰å‰ç¼€çš„æ ‡ç­¾æ˜¯ç”¨æˆ·ç§æœ‰çš„ã€‚å…±äº«å‰ç¼€å¯ä»¥ç¡®ä¿å…±äº«æ ‡ç­¾ä¸ä¼šå¹²æ‰°ç”¨æˆ·è‡ªå®šä¹‰çš„æ ‡ç­¾ã€‚
æ ‡ç­¾ ä¸ºäº†å……åˆ†åˆ©ç”¨è¿™äº›æ ‡ç­¾ï¼Œåº”è¯¥åœ¨æ¯ä¸ªèµ„æºå¯¹è±¡ä¸Šéƒ½ä½¿ç”¨å®ƒä»¬ã€‚
   é”® æè¿° ç¤ºä¾‹ ç±»å‹     app.kubernetes.io/name åº”ç”¨ç¨‹åºçš„åç§° mysql å­—ç¬¦ä¸²   app.kubernetes.io/instance ç”¨äºå”¯ä¸€ç¡®å®šåº”ç”¨å®ä¾‹çš„åç§° wordpress-abcxzy å­—ç¬¦ä¸²   app.kubernetes.io/version åº”ç”¨ç¨‹åºçš„å½“å‰ç‰ˆæœ¬ï¼ˆä¾‹å¦‚ï¼Œè¯­ä¹‰ç‰ˆæœ¬ï¼Œä¿®è®¢ç‰ˆå“ˆå¸Œç­‰ï¼‰ 5.7.21 å­—ç¬¦ä¸²   app.kubernetes.io/component æ¶æ„ä¸­çš„ç»„ä»¶ database å­—ç¬¦ä¸²   app.kubernetes.io/part-of æ­¤çº§åˆ«çš„æ›´é«˜çº§åˆ«åº”ç”¨ç¨‹åºçš„åç§° wordpress å­—ç¬¦ä¸²   app.kubernetes.io/managed-by ç”¨äºç®¡ç†åº”ç”¨ç¨‹åºçš„å·¥å…· helm å­—ç¬¦ä¸²    ä¸ºè¯´æ˜è¿™äº›æ ‡ç­¾çš„å®é™…ä½¿ç”¨æƒ…å†µï¼Œè¯·çœ‹ä¸‹é¢çš„ StatefulSet å¯¹è±¡ï¼š
apiVersion: apps/v1 kind: StatefulSet metadata: labels: app.</description>
    </item>
    
    <item>
      <title>æ­å»ºé«˜å¯ç”¨çš„ Kubernetes Masters</title>
      <link>https://lijun.in/tasks/administer-cluster/highly-available-master/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/highly-available-master/</guid>
      <description>. feature-state for_k8s_version=&amp;quot;1.5&amp;rdquo; state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
æ‚¨å¯ä»¥åœ¨è°·æ­Œè®¡ç®—å¼•æ“ï¼ˆGCEï¼‰çš„ kubeup æˆ– kube-down è„šæœ¬ä¸­å¤åˆ¶ Kubernetes Masterã€‚ æœ¬æ–‡æè¿°äº†å¦‚ä½•ä½¿ç”¨ kube-up/down è„šæœ¬æ¥ç®¡ç†é«˜å¯ç”¨ï¼ˆHAï¼‰çš„ Masterï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ GCE å®ç°é«˜å¯ç”¨ Masterã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å¯åŠ¨ä¸€ä¸ªå…¼å®¹é«˜å¯ç”¨çš„é›†ç¾¤ è¦åˆ›å»ºä¸€ä¸ªæ–°çš„å…¼å®¹é«˜å¯ç”¨çš„é›†ç¾¤ï¼Œæ‚¨å¿…é¡»åœ¨ kubeup è„šæœ¬ä¸­è®¾ç½®ä»¥ä¸‹æ ‡å¿—:
  MULTIZONE=true - ä¸ºäº†é˜²æ­¢ä»ä¸åŒäº Master é»˜è®¤åŒºåŸŸçš„åŒºåŸŸä¸­åˆ é™¤ kubelets å‰¯æœ¬ã€‚å¦‚æœæ‚¨å¸Œæœ›åœ¨ä¸åŒçš„åŒºåŸŸè¿è¡Œ Master å‰¯æœ¬ï¼Œé‚£ä¹ˆè¿™ä¸€é¡¹æ˜¯å¿…éœ€å¹¶ä¸”æ¨èçš„ã€‚
  ENABLE_ETCD_QUORUM_READ=true - ç¡®ä¿ä»æ‰€æœ‰ API æœåŠ¡å™¨è¯»å–æ•°æ®æ—¶å°†è¿”å›æœ€æ–°çš„æ•°æ®ã€‚å¦‚æœä¸º trueï¼Œè¯»æ“ä½œå°†è¢«å®šå‘åˆ° leader etcd å‰¯æœ¬ã€‚å¯ä»¥é€‰æ‹©å°†è¿™ä¸ªå€¼è®¾ç½®ä¸º trueï¼Œé‚£ä¹ˆè¯»å–å°†æ›´å¯é ï¼Œä½†ä¹Ÿä¼šæ›´æ…¢ã€‚
  æ‚¨è¿˜å¯ä»¥æŒ‡å®šä¸€ä¸ª GCE åŒºåŸŸï¼Œåœ¨è¿™é‡Œåˆ›å»ºç¬¬ä¸€ä¸ª Master å‰¯æœ¬ã€‚è®¾ç½®ä»¥ä¸‹æ ‡å¿—:
 KUBE_GCE_ZONE=zone - å°†è¿è¡Œç¬¬ä¸€ä¸ª Master å‰¯æœ¬çš„åŒºåŸŸã€‚  ä¸‹é¢çš„å‘½ä»¤æ¼”ç¤ºåœ¨ GCE europe-west1-b åŒºåŸŸä¸­è®¾ç½®ä¸€ä¸ªå…¼å®¹é«˜å¯ç”¨çš„é›†ç¾¤:</description>
    </item>
    
    <item>
      <title>æ”¹å˜é»˜è®¤ StorageClass</title>
      <link>https://lijun.in/tasks/administer-cluster/change-default-storage-class/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/change-default-storage-class/</guid>
      <description>æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•æ”¹å˜é»˜è®¤çš„ Storage Classï¼Œå®ƒç”¨äºä¸ºæ²¡æœ‰ç‰¹æ®Šéœ€æ±‚çš„ PersistentVolumeClaims é…ç½® volumesã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ä¸ºä»€ä¹ˆè¦æ”¹å˜é»˜è®¤ storage classï¼Ÿ å–å†³äºå®‰è£…æ¨¡å¼ï¼Œæ‚¨çš„ Kubernetes é›†ç¾¤å¯èƒ½å’Œä¸€ä¸ªè¢«æ ‡è®°ä¸ºé»˜è®¤çš„å·²æœ‰ StorageClass ä¸€èµ·éƒ¨ç½²ã€‚è¿™ä¸ªé»˜è®¤çš„ StorageClass ä»¥åå°†è¢«ç”¨äºåŠ¨æ€çš„ä¸ºæ²¡æœ‰ç‰¹å®š storage class éœ€æ±‚çš„ PersistentVolumeClaims é…ç½®å­˜å‚¨ã€‚æ›´å¤šç»†èŠ‚è¯·æŸ¥çœ‹ PersistentVolumeClaim æ–‡æ¡£ã€‚
é¢„å…ˆå®‰è£…çš„é»˜è®¤ StorageClass å¯èƒ½ä¸èƒ½å¾ˆå¥½çš„é€‚åº”æ‚¨æœŸæœ›çš„å·¥ä½œè´Ÿè½½ï¼›ä¾‹å¦‚ï¼Œå®ƒé…ç½®çš„å­˜å‚¨å¯èƒ½å¤ªè¿‡æ˜‚è´µã€‚å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œæ‚¨å¯ä»¥æ”¹å˜é»˜è®¤ StorageClassï¼Œæˆ–è€…å®Œå…¨ç¦ç”¨å®ƒä»¥é˜²æ­¢åŠ¨æ€é…ç½®å­˜å‚¨ã€‚
ç®€å•çš„åˆ é™¤é»˜è®¤ StorageClass å¯èƒ½è¡Œä¸é€šï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šè¢«æ‚¨é›†ç¾¤ä¸­çš„æ‰©å±•ç®¡ç†å™¨è‡ªåŠ¨é‡å»ºã€‚è¯·æŸ¥é˜…æ‚¨çš„å®‰è£…æ–‡æ¡£ä¸­å…³äºæ‰©å±•ç®¡ç†å™¨çš„ç»†èŠ‚ï¼Œä»¥åŠå¦‚ä½•ç¦ç”¨å•ä¸ªæ‰©å±•ã€‚
æ”¹å˜é»˜è®¤ StorageClass   åˆ—å‡ºæ‚¨é›†ç¾¤ä¸­çš„ StorageClassesï¼š
kubectl get storageclass è¾“å‡ºç±»ä¼¼è¿™æ ·ï¼š
NAME PROVISIONER AGE standard (default) kubernetes.io/gce-pd 1d gold kubernetes.io/gce-pd 1d é»˜è®¤ StorageClass ä»¥ (default) æ ‡è®°ã€‚
  æ ‡è®°é»˜è®¤ StorageClass éé»˜è®¤ï¼š</description>
    </item>
    
    <item>
      <title>æ›´æ”¹ PersistentVolume çš„å›æ”¶ç­–ç•¥</title>
      <link>https://lijun.in/tasks/administer-cluster/change-pv-reclaim-policy/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/change-pv-reclaim-policy/</guid>
      <description>æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•æ›´æ”¹ Kubernetes PersistentVolume çš„å›æ”¶ç­–ç•¥ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
ä¸ºä»€ä¹ˆè¦æ›´æ”¹ PersistentVolume çš„å›æ”¶ç­–ç•¥ PersistentVolumes å¯ä»¥æœ‰å¤šç§å›æ”¶ç­–ç•¥ï¼ŒåŒ…æ‹¬ &amp;ldquo;Retain&amp;rdquo;ã€&amp;ldquo;Recycle&amp;rdquo; å’Œ &amp;ldquo;Delete&amp;rdquo;ã€‚å¯¹äºåŠ¨æ€é…ç½®çš„ PersistentVolumes æ¥è¯´ï¼Œé»˜è®¤å›æ”¶ç­–ç•¥ä¸º &amp;ldquo;Delete&amp;rdquo;ã€‚è¿™è¡¨ç¤ºå½“ç”¨æˆ·åˆ é™¤å¯¹åº”çš„ PersistentVolumeClaim æ—¶ï¼ŒåŠ¨æ€é…ç½®çš„ volume å°†è¢«è‡ªåŠ¨åˆ é™¤ã€‚å¦‚æœ volume åŒ…å«é‡è¦æ•°æ®æ—¶ï¼Œè¿™ç§è‡ªåŠ¨è¡Œä¸ºå¯èƒ½æ˜¯ä¸åˆé€‚çš„ã€‚é‚£ç§æƒ…å†µä¸‹ï¼Œæ›´é€‚åˆä½¿ç”¨ &amp;ldquo;Retain&amp;rdquo; ç­–ç•¥ã€‚ä½¿ç”¨ &amp;ldquo;Retain&amp;rdquo; æ—¶ï¼Œå¦‚æœç”¨æˆ·åˆ é™¤ PersistentVolumeClaimï¼Œå¯¹åº”çš„ PersistentVolume ä¸ä¼šè¢«åˆ é™¤ã€‚ç›¸åï¼Œå®ƒå°†å˜ä¸º Released çŠ¶æ€ï¼Œè¡¨ç¤ºæ‰€æœ‰çš„æ•°æ®å¯ä»¥è¢«æ‰‹åŠ¨æ¢å¤ã€‚
æ›´æ”¹ PersistentVolume çš„å›æ”¶ç­–ç•¥   åˆ—å‡ºä½ é›†ç¾¤ä¸­çš„ PersistentVolumes
kubectl get pv  è¾“å‡ºç±»ä¼¼äºè¿™æ ·ï¼š
 NAME CAPACITY ACCESSMODES RECLAIMPOLICY STATUS CLAIM REASON AGE pvc-b6efd8da-b7b5-11e6-9d58-0ed433a7dd94 4Gi RWO Delete Bound default/claim1 10s pvc-b95650f8-b7b5-11e6-9d58-0ed433a7dd94 4Gi RWO Delete Bound default/claim2 6s pvc-bb3ca71d-b7b5-11e6-9d58-0ed433a7dd94 4Gi RWO Delete Bound default/claim3 3s  è¿™ä¸ªåˆ—è¡¨åŒæ ·åŒ…å«äº†ç»‘å®šåˆ°æ¯ä¸ª volume çš„ claims åç§°ï¼Œä»¥ä¾¿æ›´å®¹æ˜“çš„è¯†åˆ«åŠ¨æ€é…ç½®çš„ volumesã€‚</description>
    </item>
    
    <item>
      <title>ç‰¹å®šäºèŠ‚ç‚¹çš„å·æ•°é™åˆ¶</title>
      <link>https://lijun.in/concepts/storage/storage-limits/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/storage/storage-limits/</guid>
      <description>æ­¤é¡µé¢æè¿°äº†å„ä¸ªäº‘ä¾›åº”å•†å¯å…³è”è‡³ä¸€ä¸ªèŠ‚ç‚¹çš„æœ€å¤§å·æ•°ã€‚
è°·æ­Œã€äºšé©¬é€Šå’Œå¾®è½¯ç­‰äº‘ä¾›åº”å•†é€šå¸¸å¯¹å¯ä»¥å…³è”åˆ°èŠ‚ç‚¹çš„å·æ•°é‡è¿›è¡Œé™åˆ¶ã€‚ Kubernetes éœ€è¦å°Šé‡è¿™äº›é™åˆ¶ã€‚ å¦åˆ™ï¼Œåœ¨èŠ‚ç‚¹ä¸Šè°ƒåº¦çš„ Pod å¯èƒ½ä¼šå¡ä½å»ç­‰å¾…å·çš„å…³è”ã€‚
Kubernetes çš„é»˜è®¤é™åˆ¶ The Kubernetes è°ƒåº¦å™¨å¯¹å…³è”äºä¸€ä¸ªèŠ‚ç‚¹çš„å·æ•°æœ‰é»˜è®¤é™åˆ¶ï¼š
è‡ªå®šä¹‰é™åˆ¶ æ‚¨å¯ä»¥é€šè¿‡è®¾ç½® KUBE_MAX_PD_VOLS ç¯å¢ƒå˜é‡çš„å€¼æ¥è®¾ç½®è¿™äº›é™åˆ¶ï¼Œç„¶åå†å¯åŠ¨è°ƒåº¦å™¨ã€‚ CSI é©±åŠ¨ç¨‹åºå¯èƒ½å…·æœ‰ä¸åŒçš„è¿‡ç¨‹ï¼Œå…³äºå¦‚ä½•è‡ªå®šä¹‰å…¶é™åˆ¶è¯·å‚é˜…ç›¸å…³æ–‡æ¡£ã€‚
å¦‚æœè®¾ç½®çš„é™åˆ¶é«˜äºé»˜è®¤é™åˆ¶ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚è¯·å‚é˜…äº‘æä¾›å•†çš„æ–‡æ¡£ä»¥ç¡®ä¿èŠ‚ç‚¹å¯æ”¯æŒæ‚¨è®¾ç½®çš„é™åˆ¶ã€‚
æ­¤é™åˆ¶åº”ç”¨äºæ•´ä¸ªé›†ç¾¤ï¼Œæ‰€ä»¥å®ƒä¼šå½±å“æ‰€æœ‰èŠ‚ç‚¹ã€‚
åŠ¨æ€å·é™åˆ¶ feature-state state=&amp;quot;stable&amp;rdquo; for_k8s_version=&amp;quot;v1.17&amp;rdquo; &amp;gt;}}
ä»¥ä¸‹å·ç±»å‹æ”¯æŒåŠ¨æ€å·é™åˆ¶ã€‚
 Amazon EBS Google Persistent Disk Azure Disk CSI  å¯¹äºç”±å†…å»ºæ’ä»¶ç®¡ç†çš„å·ï¼ŒKubernetes ä¼šè‡ªåŠ¨ç¡®å®šèŠ‚ç‚¹ç±»å‹å¹¶ç¡®ä¿èŠ‚ç‚¹ä¸Šå¯å…³è”çš„å·æ•°ç›®åˆè§„ã€‚ ä¾‹å¦‚ï¼š
  åœ¨ Google Compute Engineç¯å¢ƒä¸­, æ ¹æ®èŠ‚ç‚¹ç±»å‹æœ€å¤šå¯ä»¥å°†127ä¸ªå·å…³è”åˆ°èŠ‚ç‚¹ã€‚
  å¯¹äº M5ã€C5ã€R5ã€T3 å’Œ Z1D ç±»å‹å®ä¾‹çš„ Amazon EBS ç£ç›˜ï¼ŒKubernetes ä»…å…è®¸ 25 ä¸ªå·å…³è”åˆ°èŠ‚ç‚¹ã€‚ å¯¹äº ec2 ä¸Šçš„å…¶ä»–å®ä¾‹ç±»å‹ Amazon Elastic Compute Cloud (EC2), Kubernetes å…è®¸ 39 ä¸ªå·å…³è”è‡³èŠ‚ç‚¹ã€‚</description>
    </item>
    
    <item>
      <title>ç¡®å®š Pod å¤±è´¥çš„åŸå› </title>
      <link>https://lijun.in/tasks/debug-application-cluster/determine-reason-pod-failure/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/determine-reason-pod-failure/</guid>
      <description>æœ¬æ–‡ä»‹ç»å¦‚ä½•ç¼–å†™å’Œè¯»å–å®¹å™¨çš„ç»ˆæ­¢æ¶ˆæ¯ã€‚
ç»ˆæ­¢æ¶ˆæ¯ä¸ºå®¹å™¨æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥å°†æœ‰å…³è‡´å‘½äº‹ä»¶çš„ä¿¡æ¯å†™å…¥æŸä¸ªä½ç½®ï¼Œåœ¨è¯¥ä½ç½®å¯ä»¥é€šè¿‡ä»ªè¡¨æ¿å’Œç›‘æ§è½¯ä»¶ç­‰å·¥å…·è½»æ¾æ£€ç´¢å’Œæ˜¾ç¤ºè‡´å‘½äº‹ä»¶ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨æ”¾å…¥ç»ˆæ­¢æ¶ˆæ¯ä¸­çš„ä¿¡æ¯ä¹Ÿåº”è¯¥å†™å…¥å¸¸è§„ Kubernetes æ—¥å¿—ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
è¯»å†™ç»ˆæ­¢æ¶ˆæ¯ åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œæ‚¨å°†åˆ›å»ºè¿è¡Œä¸€ä¸ªå®¹å™¨çš„ Podã€‚ é…ç½®æ–‡ä»¶æŒ‡å®šåœ¨å®¹å™¨å¯åŠ¨æ—¶è¦è¿è¡Œçš„å‘½ä»¤ã€‚
. codenew file=&amp;quot;debug/termination.yaml&amp;rdquo; &amp;gt;}}
   kubectl create -f https://k8s.io/examples/debug/termination.yaml  YAML æ–‡ä»¶ä¸­ï¼Œåœ¨ cmd å’Œ args å­—æ®µï¼Œä½ å¯ä»¥çœ‹åˆ°å®¹å™¨ä¼‘çœ  10 ç§’ç„¶åå°† &amp;ldquo;Sleep expired&amp;rdquo; å†™å…¥ /dev/termination-log æ–‡ä»¶ã€‚ å®¹å™¨å†™å®Œ &amp;ldquo;Sleep expired&amp;rdquo; æ¶ˆæ¯åï¼Œå®ƒå°±ç»ˆæ­¢äº†ã€‚
   kubectl get pod termination-demo  é‡å¤å‰é¢çš„å‘½ä»¤ç›´åˆ° Pod ä¸å†è¿è¡Œã€‚
   kubectl get pod --output=yaml   apiVersion: v1 kind: Pod .</description>
    </item>
    
    <item>
      <title>ç¤ºä¾‹ä»»åŠ¡çš„æ¨¡æ¿</title>
      <link>https://lijun.in/tasks/example-task-template/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/example-task-template/</guid>
      <description>. note &amp;gt;}} è¿˜è¦ç¡®ä¿ä¸ºæ–°æ–‡æ¡£åœ¨ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ¡ç›®ã€‚ . /note &amp;gt;}}
è¿™ä¸ªé¡µé¢å±•ç¤ºäº†å¦‚ä½•&amp;hellip;
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}} åšè¿™ä¸ªã€‚ ä¹Ÿåšè¿™ä¸ªã€‚  åš&amp;hellip;  åšè¿™ä¸ªã€‚ æ¥ä¸‹æ¥åšè¿™ä¸ªã€‚å¯èƒ½éœ€è¦é˜…è¯»ä¸€ä¸‹è¿™ä¸ªç›¸å…³è§£é‡Š.  ç†è§£ &amp;hellip; [å¯é€‰éƒ¨åˆ†]
å…³äºä½ åˆšæ‰æ‰€åšçš„è¿‡ç¨‹ï¼Œæœ‰ä¸€ç‚¹æ˜¯éœ€è¦çŸ¥é“çš„ã€‚
. heading &amp;ldquo;whatsnext&amp;rdquo; %}} [å¯é€‰éƒ¨åˆ†]
 äº†è§£æ›´å¤šå…³äºæ’°å†™æ–°ä¸»é¢˜. æŸ¥çœ‹ä½¿ç”¨é¡µé¢æ¨¡æ¿-ä»»åŠ¡æ¨¡æ¿ for how to use this template.  </description>
    </item>
    
    <item>
      <title>ç¤ºä¾‹ï¼šä½¿ç”¨ Stateful Sets éƒ¨ç½² Cassandra</title>
      <link>https://lijun.in/tutorials/stateful-application/cassandra/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/stateful-application/cassandra/</guid>
      <description>ç›®å½•  å‡†å¤‡å·¥ä½œ Cassandra docker é•œåƒ å¿«é€Ÿå…¥é—¨ æ­¥éª¤1ï¼šåˆ›å»º Cassandra Headless Service æ­¥éª¤2ï¼šä½¿ç”¨ StatefulSet åˆ›å»º Cassandra Ring ç¯ æ­¥éª¤3ï¼šéªŒè¯å¹¶ä¿®æ”¹ Cassandra StatefulSet æ­¥éª¤4ï¼šåˆ é™¤ Cassandra StatefulSet æ­¥éª¤5ï¼šä½¿ç”¨ Replication Controller åˆ›å»º Cassandra èŠ‚ç‚¹ pods æ­¥éª¤6ï¼šCassandra é›†ç¾¤æ‰©å®¹ æ­¥éª¤7ï¼šåˆ é™¤ Replication Controller æ­¥éª¤8ï¼šä½¿ç”¨ DaemonSet æ›¿æ¢ Replication Controller æ­¥éª¤9ï¼šèµ„æºæ¸…ç† Seed Provider Source  ä¸‹æ–‡æè¿°äº†åœ¨ Kubernetes ä¸Šéƒ¨ç½²ä¸€ä¸ª_äº‘åŸç”Ÿ_ Cassandra çš„è¿‡ç¨‹ã€‚å½“æˆ‘ä»¬è¯´_äº‘åŸç”Ÿ_æ—¶ï¼ŒæŒ‡çš„æ˜¯ä¸€ä¸ªåº”ç”¨èƒ½å¤Ÿç†è§£å®ƒè¿è¡Œåœ¨ä¸€ä¸ªé›†ç¾¤ç®¡ç†å™¨å†…éƒ¨ï¼Œå¹¶ä¸”ä½¿ç”¨è¿™ä¸ªé›†ç¾¤çš„ç®¡ç†åŸºç¡€è®¾æ–½æ¥å¸®åŠ©å®ç°è¿™ä¸ªåº”ç”¨ã€‚ç‰¹åˆ«çš„ï¼Œæœ¬ä¾‹ä½¿ç”¨äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ Cassandra SeedProvider å¸®åŠ© Cassandra å‘ç°æ–°åŠ å…¥é›†ç¾¤ Cassandra èŠ‚ç‚¹ã€‚
æœ¬ç¤ºä¾‹ä¹Ÿä½¿ç”¨äº†Kubernetesçš„ä¸€äº›æ ¸å¿ƒç»„ä»¶ï¼š
 Pods Services Replication Controllers Stateful Sets Daemon Sets  å‡†å¤‡å·¥ä½œ æœ¬ç¤ºä¾‹å‡è®¾ä½ å·²ç»å®‰è£…è¿è¡Œäº†ä¸€ä¸ª Kubernetesé›†ç¾¤ï¼ˆç‰ˆæœ¬ &amp;gt;=1.</description>
    </item>
    
    <item>
      <title>ç®¡ç† Service Accounts</title>
      <link>https://lijun.in/reference/access-authn-authz/service-accounts-admin/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/access-authn-authz/service-accounts-admin/</guid>
      <description>è¿™æ˜¯ä¸€ç¯‡é’ˆå¯¹service accountsï¼ˆæœåŠ¡è´¦æˆ·ï¼‰çš„é›†ç¾¤ç®¡ç†å‘˜æŒ‡å—ã€‚ å®ƒå‘ˆç°äº† User Guide to Service Accountsä¸­çš„ä¿¡æ¯ã€‚
å¯¹æˆæƒå’Œç”¨æˆ·è´¦æˆ·çš„æ”¯æŒå·²åœ¨è§„åˆ’ä¸­ï¼Œå½“å‰å¹¶ä¸å®Œå¤‡ï¼Œä¸ºäº†æ›´å¥½åœ°æè¿° service accountsï¼Œæœ‰æ—¶è¿™äº›ä¸å®Œå–„çš„ç‰¹æ€§ä¹Ÿä¼šè¢«æåŠã€‚
ç”¨æˆ·è´¦æˆ·ä¸æœåŠ¡è´¦æˆ· Kubernetes åŒºåˆ†ç”¨æˆ·è´¦æˆ·å’ŒæœåŠ¡è´¦æˆ·çš„æ¦‚å¿µä¸»è¦åŸºäºä»¥ä¸‹åŸå› ï¼š
 ç”¨æˆ·è´¦æˆ·æ˜¯é’ˆå¯¹äººè€Œè¨€çš„ã€‚ æœåŠ¡è´¦æˆ·æ˜¯é’ˆå¯¹è¿è¡Œåœ¨ pod ä¸­çš„è¿›ç¨‹è€Œè¨€çš„ã€‚ ç”¨æˆ·è´¦æˆ·æ˜¯å…¨å±€æ€§çš„ã€‚ å…¶åç§°åœ¨é›†ç¾¤å„ namespace ä¸­éƒ½æ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œæœªæ¥çš„ç”¨æˆ·èµ„æºä¸ä¼šåš namespace éš”ç¦»ï¼Œ æœåŠ¡è´¦æˆ·æ˜¯ namespace éš”ç¦»çš„ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œé›†ç¾¤çš„ç”¨æˆ·è´¦æˆ·å¯èƒ½ä¼šä»ä¼ä¸šæ•°æ®åº“è¿›è¡ŒåŒæ­¥ï¼Œå…¶åˆ›å»ºéœ€è¦ç‰¹æ®Šæƒé™ï¼Œå¹¶ä¸”æ¶‰åŠåˆ°å¤æ‚çš„ä¸šåŠ¡æµç¨‹ã€‚ æœåŠ¡è´¦æˆ·åˆ›å»ºçš„ç›®çš„æ˜¯ä¸ºäº†æ›´è½»é‡ï¼Œå…è®¸é›†ç¾¤ç”¨æˆ·ä¸ºäº†å…·ä½“çš„ä»»åŠ¡åˆ›å»ºæœåŠ¡è´¦æˆ· ( å³æƒé™æœ€å°åŒ–åŸåˆ™ )ã€‚ å¯¹äººå‘˜å’ŒæœåŠ¡è´¦æˆ·å®¡è®¡æ‰€è€ƒè™‘çš„å› ç´ å¯èƒ½ä¸åŒã€‚ é’ˆå¯¹å¤æ‚ç³»ç»Ÿçš„é…ç½®å¯èƒ½åŒ…å«ç³»ç»Ÿç»„ä»¶ç›¸å…³çš„å„ç§æœåŠ¡è´¦æˆ·çš„å®šä¹‰ã€‚ å› ä¸ºæœåŠ¡è´¦æˆ·å¯ä»¥å®šåˆ¶åŒ–åœ°åˆ›å»ºï¼Œå¹¶ä¸”æœ‰ namespace çº§åˆ«çš„åç§°ï¼Œè¿™ç§é…ç½®æ˜¯å¾ˆè½»é‡çš„ã€‚  æœåŠ¡è´¦æˆ·çš„è‡ªåŠ¨åŒ– ä¸‰ä¸ªç‹¬ç«‹ç»„ä»¶åä½œå®ŒæˆæœåŠ¡è´¦æˆ·ç›¸å…³çš„è‡ªåŠ¨åŒ– :
 æœåŠ¡è´¦æˆ·å‡†å…¥æ§åˆ¶å™¨ï¼ˆService account admission controllerï¼‰ Token æ§åˆ¶å™¨ï¼ˆToken controllerï¼‰ æœåŠ¡è´¦æˆ·æ§åˆ¶å™¨ï¼ˆService account controllerï¼‰  æœåŠ¡è´¦æˆ·å‡†å…¥æ§åˆ¶å™¨ å¯¹ pod çš„æ”¹åŠ¨é€šè¿‡ä¸€ä¸ªè¢«ç§°ä¸º Admission Controller çš„æ’ä»¶æ¥å®ç°ã€‚å®ƒæ˜¯ apiserver çš„ä¸€éƒ¨åˆ†ã€‚ å½“ pod è¢«åˆ›å»ºæˆ–æ›´æ–°æ—¶ï¼Œå®ƒä¼šåŒæ­¥åœ°ä¿®æ”¹ podã€‚ å½“è¯¥æ’ä»¶å¤„äºæ¿€æ´»çŠ¶æ€ ( åœ¨å¤§å¤šæ•°å‘è¡Œç‰ˆä¸­éƒ½æ˜¯é»˜è®¤çš„ )ï¼Œå½“ pod è¢«åˆ›å»ºæˆ–æ›´æ–°æ—¶å®ƒä¼šè¿›è¡Œä»¥ä¸‹åŠ¨ä½œï¼š</description>
    </item>
    
    <item>
      <title>ç®¡ç†é›†ç¾¤ä¸­çš„ TLS è®¤è¯</title>
      <link>https://lijun.in/tasks/tls/managing-tls-in-a-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/tls/managing-tls-in-a-cluster/</guid>
      <description>Kubernetesæä¾›ä¸€ä¸ª certificates.k8s.io APIï¼Œå¯è®©æ‚¨é…ç½® ç”±æ‚¨æ§åˆ¶çš„è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ç­¾åçš„TLSè¯ä¹¦ã€‚ æ‚¨çš„å·¥ä½œè´Ÿè½½å¯ä»¥ä½¿ç”¨è¿™äº›CAå’Œè¯ä¹¦æ¥å»ºç«‹ä¿¡ä»»ã€‚
certificates.k8s.io APIä½¿ç”¨çš„åè®®ç±»ä¼¼äºACME è‰ç¨¿ã€‚
. note &amp;gt;}}
ä½¿ç”¨certificates.k8s.io APIåˆ›å»ºçš„è¯ä¹¦ç”± æŒ‡å®š CA é¢å‘ã€‚ å°†é›†ç¾¤é…ç½®ä¸ºä½¿ç”¨é›†ç¾¤æ ¹ç›®å½• CA å¯ä»¥è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä½†æ˜¯æ‚¨æ°¸è¿œä¸è¦ä¾èµ–å®ƒã€‚ä¸è¦ä»¥ä¸º è¿™äº›è¯ä¹¦å°†é’ˆå¯¹ç¾¤æ ¹ç›®å½• CA è¿›è¡ŒéªŒè¯ã€‚ . /note &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
é›†ç¾¤ä¸­çš„ TLS ä¿¡ä»» è®© Pod ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºä¿¡ä»»é›†ç¾¤æ ¹ CA é€šå¸¸éœ€è¦ä¸€äº›é¢å¤–çš„åº”ç”¨ç¨‹åºé…ç½®ã€‚æ‚¨å°†éœ€è¦å°† CA è¯ä¹¦åŒ…æ·»åŠ åˆ° TLS å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨ä¿¡ä»»çš„ CA è¯ä¹¦åˆ—è¡¨ä¸­ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ golang TLS é…ç½®é€šè¿‡è§£æè¯ä¹¦é“¾å¹¶å°†è§£æçš„è¯ä¹¦æ·»åŠ åˆ° tls.Config ç»“æ„ä¸­çš„ RootCAs å­—æ®µä¸­ã€‚
CA è¯ä¹¦æ†ç»‘åŒ…å°†ä½¿ç”¨é»˜è®¤æœåŠ¡è´¦æˆ·è‡ªåŠ¨åŠ è½½åˆ° pod ä¸­ï¼Œè·¯å¾„ä¸º /var/run/secrets/kubernetes.io/serviceaccount/ca.crtã€‚å¦‚æœæ‚¨æ²¡æœ‰ä½¿ç”¨é»˜è®¤æœåŠ¡è´¦æˆ·ï¼Œè¯·è¯·æ±‚é›†ç¾¤ç®¡ç†å‘˜æ„å»ºåŒ…å«æ‚¨æœ‰æƒè®¿é—®ä½¿ç”¨çš„è¯ä¹¦åŒ…çš„ configmapã€‚
è¯·æ±‚è®¤è¯ ä»¥ä¸‹éƒ¨åˆ†æ¼”ç¤ºå¦‚ä½•ä¸ºé€šè¿‡ DNS è®¿é—®çš„ Kubernetes æœåŠ¡åˆ›å»º TLS è¯ä¹¦ã€‚</description>
    </item>
    
    <item>
      <title>è”é‚¦</title>
      <link>https://lijun.in/concepts/cluster-administration/federation/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/concepts/cluster-administration/federation/</guid>
      <description>æœ¬é¡µé¢é˜æ˜äº†ä¸ºä½•ä»¥åŠå¦‚ä½•ä½¿ç”¨è”é‚¦åˆ›å»ºKubernetesé›†ç¾¤ã€‚
ä¸ºä½•ä½¿ç”¨è”é‚¦ è”é‚¦å¯ä»¥ä½¿å¤šä¸ªé›†ç¾¤çš„ç®¡ç†ç®€å•åŒ–ã€‚å®ƒæä¾›äº†ä¸¤ä¸ªä¸»è¦æ„ä»¶æ¨¡å—ï¼š
 è·¨é›†ç¾¤åŒæ­¥èµ„æºï¼šè”é‚¦èƒ½å¤Ÿè®©èµ„æºåœ¨å¤šä¸ªé›†ç¾¤ä¸­åŒæ­¥ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç¡®ä¿åœ¨å¤šä¸ªé›†ç¾¤ä¸­å­˜åœ¨åŒæ ·çš„éƒ¨ç½²ã€‚ è·¨é›†ç¾¤å‘ç°ï¼šè”é‚¦èƒ½å¤Ÿåœ¨æ‰€æœ‰é›†ç¾¤çš„åç«¯è‡ªåŠ¨é…ç½®DNSæœåŠ¡å’Œè´Ÿè½½å‡è¡¡ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡å¤šä¸ªé›†ç¾¤çš„åç«¯ï¼Œä½ å¯ä»¥ç¡®ä¿å…¨å±€çš„VIPæˆ–DNSè®°å½•å¯ç”¨ã€‚  è”é‚¦æŠ€æœ¯çš„å…¶ä»–åº”ç”¨åœºæ™¯ï¼š
 é«˜å¯ç”¨æ€§ï¼šé€šè¿‡è·¨é›†ç¾¤åˆ†æ‘Šè´Ÿè½½ï¼Œè‡ªåŠ¨é…ç½®DNSæœåŠ¡å’Œè´Ÿè½½å‡è¡¡ï¼Œè”é‚¦å°†é›†ç¾¤å¤±è´¥æ‰€å¸¦æ¥çš„å½±å“é™åˆ°æœ€ä½ã€‚ é¿å…ä¾›åº”å•†é”å®šï¼šè·¨é›†ç¾¤ä½¿è¿ç§»åº”ç”¨ç¨‹åºå˜å¾—æ›´å®¹æ˜“ï¼Œè”é‚¦æœåŠ¡é¿å…äº†ä¾›åº”å•†é”å®šã€‚  åªæœ‰åœ¨å¤šä¸ªé›†ç¾¤çš„åœºæ™¯ä¸‹è”é‚¦æœåŠ¡æ‰æ˜¯æœ‰å¸®åŠ©çš„ã€‚è¿™é‡Œåˆ—å‡ºäº†ä¸€äº›ä½ ä¼šä½¿ç”¨å¤šä¸ªé›†ç¾¤çš„åŸå› ï¼š
 é™ä½å»¶è¿Ÿï¼šåœ¨å¤šä¸ªåŒºåŸŸå«æœ‰é›†ç¾¤ï¼Œå¯ä½¿ç”¨ç¦»ç”¨æˆ·æœ€è¿‘çš„é›†ç¾¤æ¥æœåŠ¡ç”¨æˆ·ï¼Œä»è€Œæœ€å¤§é™åº¦é™ä½å»¶è¿Ÿã€‚ æ•…éšœéš”ç¦»ï¼šå¯¹äºæ•…éšœéš”ç¦»ï¼Œä¹Ÿè®¸æœ‰å¤šä¸ªå°çš„é›†ç¾¤æ¯”æœ‰ä¸€ä¸ªå¤§çš„é›†ç¾¤è¦æ›´å¥½ä¸€äº›ï¼ˆä¾‹å¦‚ï¼šä¸€ä¸ªäº‘ä¾›åº”å•†çš„ä¸åŒå¯ç”¨åŸŸé‡Œæœ‰å¤šä¸ªé›†ç¾¤ï¼‰ã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚é˜…å¤šé›†ç¾¤æŒ‡å—ã€‚ å¯ä¼¸ç¼©æ€§ï¼šå¯¹äºå•ä¸ªkubernetesé›†ç¾¤æ˜¯æœ‰ä¼¸ç¼©æ€§é™åˆ¶çš„ï¼ˆä½†å¯¹äºå¤§å¤šæ•°ç”¨æˆ·æ¥è¯´å¹¶éå¦‚æ­¤ã€‚æ›´å¤šç»†èŠ‚å‚è€ƒKubernetesæ‰©å±•å’Œæ€§èƒ½ç›®æ ‡ï¼‰ã€‚ æ··åˆäº‘ï¼šå¯ä»¥æœ‰å¤šä¸ªé›†ç¾¤ï¼Œå®ƒä»¬åˆ†åˆ«æ‹¥æœ‰ä¸åŒçš„äº‘ä¾›åº”å•†æˆ–è€…æœ¬åœ°æ•°æ®ä¸­å¿ƒã€‚  æ³¨æ„äº‹é¡¹ è™½ç„¶è”é‚¦æœ‰å¾ˆå¤šå¸å¼•äººçš„åœºæ™¯ï¼Œä½†è¿™é‡Œè¿˜æ˜¯æœ‰ä¸€äº›éœ€è¦å…³æ³¨çš„äº‹é¡¹ï¼š
 å¢åŠ ç½‘ç»œçš„å¸¦å®½å’ŒæŸè€—ï¼šè”é‚¦æ§åˆ¶é¢ä¼šç›‘æ§æ‰€æœ‰çš„é›†ç¾¤ï¼Œæ¥ç¡®ä¿é›†ç¾¤çš„å½“å‰çŠ¶æ€ä¸é¢„æœŸä¸€è‡´ã€‚é‚£ä¹ˆå½“è¿™äº›é›†ç¾¤è¿è¡Œåœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªäº‘æä¾›è€…çš„ä¸åŒåŒºåŸŸä¸­ï¼Œåˆ™ä¼šå¸¦æ¥é‡å¤§çš„ç½‘ç»œæŸè€—ã€‚ é™ä½é›†ç¾¤çš„éš”ç¦»ï¼šå½“è”é‚¦æ§åˆ¶é¢ä¸­å­˜åœ¨ä¸€ä¸ªæ•…éšœæ—¶ï¼Œä¼šå½±å“æ‰€æœ‰çš„é›†ç¾¤ã€‚æŠŠè”é‚¦æ§åˆ¶é¢çš„é€»è¾‘é™åˆ°æœ€å°å¯ä»¥ç¼“è§£è¿™ä¸ªé—®é¢˜ã€‚ æ— è®ºä½•æ—¶ï¼Œå®ƒéƒ½æ˜¯kubernetesé›†ç¾¤é‡Œæ§åˆ¶é¢çš„ä»£è¡¨ã€‚è®¾è®¡å’Œå®ç°ä¹Ÿä½¿å…¶å˜å¾—æ›´å®‰å…¨,é¿å…å¤šé›†ç¾¤è¿è¡Œä¸­æ–­ã€‚ å®Œæ•´æ€§ï¼šè”é‚¦é¡¹ç›®ç›¸å¯¹è¾ƒæ–°ï¼Œè¿˜ä¸æ˜¯å¾ˆæˆç†Ÿã€‚ä¸æ˜¯æ‰€æœ‰èµ„æºéƒ½å¯ç”¨ï¼Œä¸”å¾ˆå¤šèµ„æºæ‰åˆšåˆšå¼€å§‹ã€‚Issue 38893 åˆ—ä¸¾äº†ä¸€äº›å›¢é˜Ÿæ­£å¿™äºè§£å†³çš„ç³»ç»Ÿå·²çŸ¥é—®é¢˜ã€‚  æ··åˆäº‘çš„èƒ½åŠ› Kubernetesé›†ç¾¤é‡Œçš„è”é‚¦åŒ…æ‹¬è¿è¡Œåœ¨ä¸åŒäº‘ä¾›åº”å•†ä¸Šçš„é›†ç¾¤ï¼ˆä¾‹å¦‚ï¼Œè°·æ­Œäº‘ã€äºšé©¬é€Šï¼‰ï¼Œå’Œæœ¬åœ°éƒ¨ç½²çš„é›†ç¾¤ï¼ˆä¾‹å¦‚ï¼ŒOpenStackï¼‰ã€‚åªéœ€åœ¨é€‚å½“çš„äº‘ä¾›åº”å•†å’Œ/æˆ–ä½ç½®åˆ›å»ºæ‰€éœ€çš„æ‰€æœ‰é›†ç¾¤ï¼Œå¹¶å°†æ¯ä¸ªé›†ç¾¤çš„API endpointå’Œå‡­æ®æ³¨å†Œåˆ°æ‚¨çš„è”é‚¦APIæœåŠ¡ä¸­ï¼ˆè¯¦æƒ…å‚è€ƒè”é‚¦ç®¡ç†æŒ‡å—ï¼‰ã€‚
åœ¨æ­¤ä¹‹åï¼Œæ‚¨çš„APIèµ„æºå°±å¯ä»¥è·¨è¶Šä¸åŒçš„é›†ç¾¤å’Œäº‘ä¾›åº”å•†ã€‚
å»ºç«‹è”é‚¦ è‹¥è¦èƒ½è”åˆå¤šä¸ªé›†ç¾¤ï¼Œé¦–å…ˆéœ€è¦å»ºç«‹ä¸€ä¸ªè”é‚¦æ§åˆ¶é¢ã€‚å‚ç…§å®‰è£…æŒ‡å— å»ºç«‹è”é‚¦æ§åˆ¶é¢ã€‚
APIèµ„æº æ§åˆ¶é¢å»ºç«‹å®Œæˆåï¼Œå°±å¯ä»¥å¼€å§‹åˆ›å»ºè”é‚¦APIèµ„æºäº†ã€‚ ä»¥ä¸‹æŒ‡å—è¯¦ç»†ä»‹ç»äº†ä¸€äº›èµ„æºï¼š
 Cluster ConfigMap DaemonSets Deployment Events Ingress Namespaces ReplicaSets Secrets Services  APIå‚è€ƒæ–‡æ¡£åˆ—ä¸¾äº†è”é‚¦APIæœåŠ¡æ”¯æŒçš„æ‰€æœ‰èµ„æºã€‚
çº§è”åˆ é™¤ Kubernetes1.6ç‰ˆæœ¬æ”¯æŒè”é‚¦èµ„æºçº§è”åˆ é™¤ã€‚ä½¿ç”¨çº§è”åˆ é™¤ï¼Œå³å½“åˆ é™¤è”é‚¦æ§åˆ¶é¢çš„ä¸€ä¸ªèµ„æºæ—¶ï¼Œä¹Ÿåˆ é™¤äº†æ‰€æœ‰åº•å±‚é›†ç¾¤ä¸­çš„ç›¸åº”èµ„æºã€‚
å½“ä½¿ç”¨REST APIæ—¶ï¼Œçº§è”åˆ é™¤åŠŸèƒ½ä¸æ˜¯é»˜è®¤å¼€å¯çš„ã€‚è‹¥ä½¿ç”¨REST APIä»è”é‚¦æ§åˆ¶é¢åˆ é™¤ä¸€ä¸ªèµ„æºæ—¶ï¼Œè¦å¼€å¯çº§è”åˆ é™¤åŠŸèƒ½ï¼Œå³éœ€é…ç½®é€‰é¡¹ DeleteOptions.orphanDependents=falseã€‚ä½¿ç”¨kubectl deleteä½¿çº§è”åˆ é™¤åŠŸèƒ½é»˜è®¤å¼€å¯ã€‚ä½¿ç”¨kubectl delete --cascade=falseç¦ç”¨çº§è”åˆ é™¤åŠŸèƒ½ã€‚
æ³¨æ„ï¼šKubernetes1.5ç‰ˆæœ¬å¼€å§‹æ”¯æŒè”é‚¦èµ„æºå­é›†çš„çº§è”åˆ é™¤ã€‚
å•ä¸ªé›†ç¾¤çš„èŒƒå›´ å¯¹äºIaaSä¾›åº”å•†å¦‚è°·æ­Œè®¡ç®—å¼•æ“æˆ–äºšé©¬é€Šç½‘ç»œæœåŠ¡ï¼Œä¸€ä¸ªè™šæ‹Ÿæœºå­˜åœ¨äºä¸€ä¸ªåŸŸæˆ–å¯ç”¨åŸŸä¸­ã€‚ æˆ‘ä»¬å»ºè®®ä¸€ä¸ªKubernetesé›†ç¾¤é‡Œçš„æ‰€æœ‰è™šæœºåº”è¯¥åœ¨ç›¸åŒçš„å¯ç”¨åŸŸé‡Œï¼Œå› ä¸ºï¼š
 ä¸å•ä¸€çš„å…¨å±€Kubernetesé›†ç¾¤å¯¹æ¯”ï¼Œè¯¥æ–¹å¼æœ‰è¾ƒå°‘çš„å•ç‚¹æ•…éšœã€‚ ä¸è·¨å¯ç”¨åŸŸçš„é›†ç¾¤å¯¹æ¯”ï¼Œè¯¥æ–¹å¼æ›´å®¹æ˜“æ¨æ–­å•åŒºåŸŸé›†ç¾¤çš„å¯ç”¨æ€§å±æ€§ã€‚ å½“Kuberneteså¼€å‘è€…è®¾è®¡ä¸€ä¸ªç³»ç»Ÿ(ä¾‹å¦‚ï¼Œå¯¹å»¶è¿Ÿã€å¸¦å®½æˆ–ç›¸å…³æ•…éšœè¿›è¡Œå‡è®¾)ï¼Œä»–ä»¬ä¹Ÿä¼šå‡è®¾æ‰€æœ‰çš„æœºå™¨éƒ½åœ¨ä¸€ä¸ªå•ä¸€çš„æ•°æ®ä¸­å¿ƒï¼Œæˆ–è€…ä»¥å…¶ä»–æ–¹å¼ç´§å¯†ç›¸è¿ã€‚  æ¯ä¸ªå¯ç”¨åŒºåŸŸé‡ŒåŒ…å«å¤šä¸ªé›†ç¾¤å½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ€»çš„æ¥è¯´æˆ‘ä»¬è®¤ä¸ºé›†ç¾¤æ•°è¶Šå°‘è¶Šå¥½ã€‚ åçˆ±è¾ƒå°‘é›†ç¾¤æ•°çš„åŸå› æ˜¯ï¼š</description>
    </item>
    
    <item>
      <title>è”é‚¦ ConfigMap</title>
      <link>https://lijun.in/tasks/federation/administer-federation/configmap/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/federation/administer-federation/configmap/</guid>
      <description>. deprecationfilewarning &amp;gt;}} . include &amp;ldquo;federation-deprecation-warning-note.md&amp;rdquo; &amp;gt;}} . /deprecationfilewarning &amp;gt;}}
æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­ä½¿ç”¨ ConfigMapã€‚
è”é‚¦ ConfigMap ä¸ä¼ ç»Ÿ Kubernetes ConfigMap éå¸¸ç›¸ä¼¼ä¸”æä¾›ç›¸åŒçš„åŠŸèƒ½ã€‚ åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­åˆ›å»ºå®ƒä»¬å¯ä»¥ç¡®ä¿å®ƒä»¬åœ¨è”é‚¦çš„æ‰€æœ‰é›†ç¾¤ä¸­åŒæ­¥ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;federated-task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}}   é€šå¸¸æˆ‘ä»¬è¿˜æœŸæœ›æ‚¨æ‹¥æœ‰åŸºæœ¬çš„ Kubernetes åº”ç”¨çŸ¥è¯†ï¼Œ ç‰¹åˆ«æ˜¯ ConfigMap ç›¸å…³çš„åº”ç”¨çŸ¥è¯†ã€‚  åˆ›å»ºè”é‚¦ ConfigMap è”é‚¦ ConfigMap çš„ API 100% å…¼å®¹ä¼ ç»Ÿ Kubernetes ConfigMap çš„ APIã€‚æ‚¨å¯ä»¥é€šè¿‡å‘è”é‚¦ apiserver å‘é€è¯·æ±‚æ¥åˆ›å»º ConfigMapã€‚ æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ kubectl è¿è¡Œä¸‹é¢çš„æŒ‡ä»¤æ¥åˆ›å»ºè”é‚¦ ConfigMapï¼š
kubectl --context=federation-cluster create -f myconfigmap.yaml --context=federation-cluster å‚æ•°å‘Šè¯‰ kubectl å°†è¯·æ±‚æäº¤åˆ°è”é‚¦ apiserver è€Œä¸æ˜¯å‘é€ç»™æŸä¸€ä¸ª Kubernetes é›†ç¾¤ã€‚
ä¸€æ—¦è”é‚¦ ConfigMap è¢«åˆ›å»ºï¼Œè”é‚¦æ§åˆ¶å¹³é¢å°±ä¼šåœ¨æ‰€æœ‰åº•å±‚ Kubernetes é›†ç¾¤ä¸­åˆ›å»ºåŒ¹é…çš„ ConfigMapã€‚ æ‚¨å¯ä»¥é€šè¿‡æ£€æŸ¥åº•å±‚æ¯ä¸ªé›†ç¾¤æ¥å¯¹å…¶è¿›è¡ŒéªŒè¯ï¼Œä¾‹å¦‚ï¼š</description>
    </item>
    
    <item>
      <title>è”é‚¦ DaemonSet</title>
      <link>https://lijun.in/tasks/federation/administer-federation/daemonset/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/federation/administer-federation/daemonset/</guid>
      <description>. deprecationfilewarning &amp;gt;}} . include &amp;ldquo;federation-deprecation-warning-note.md&amp;rdquo; &amp;gt;}} . /deprecationfilewarning &amp;gt;}}
æœ¬æŒ‡å—è¯´æ˜äº†å¦‚ä½•åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­ä½¿ç”¨ DaemonSetã€‚
è”é‚¦æ§åˆ¶å¹³é¢ä¸­çš„ DaemonSetï¼ˆåœ¨æœ¬æŒ‡å—ä¸­ç§°ä¸º â€œè”é‚¦ DaemonSetâ€ï¼‰ä¸ä¼ ç»Ÿçš„ Kubernetes DaemonSet éå¸¸ç±»ä¼¼ï¼Œå¹¶æä¾›ç›¸åŒçš„åŠŸèƒ½ã€‚åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­åˆ›å»ºè”é‚¦ DaemonSet å¯ä»¥ç¡®ä¿å®ƒä»¬åŒæ­¥åˆ°è”é‚¦çš„æ‰€æœ‰é›†ç¾¤ä¸­ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;federated-task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}}   ä½ è¿˜åº”è¯¥å…·å¤‡åŸºæœ¬çš„ Kubernetes åº”ç”¨çŸ¥è¯†ï¼Œç‰¹åˆ«æ˜¯ DaemonSet ç›¸å…³çš„åº”ç”¨çŸ¥è¯†ã€‚  åˆ›å»ºè”é‚¦ Daemonset è”é‚¦ Daemonset çš„ API å’Œä¼ ç»Ÿçš„ Kubernetes Daemonset API æ˜¯ 100% å…¼å®¹çš„ã€‚æ‚¨å¯ä»¥é€šè¿‡å‘è”é‚¦ apiserver å‘é€è¯·æ±‚æ¥åˆ›å»ºä¸€ä¸ª DaemonSetã€‚
æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ kubectl è¿è¡Œä¸‹é¢çš„æŒ‡ä»¤æ¥åˆ›å»ºè”é‚¦ Daemonsetï¼š
kubectl --context=federation-cluster create -f mydaemonset.yaml --context=federation-cluster å‚æ•°å‘Šè¯‰ kubectl å‘é€è¯·æ±‚åˆ°è”é‚¦ apiserver è€Œä¸æ˜¯æŸä¸ª Kubernetes é›†ç¾¤ã€‚</description>
    </item>
    
    <item>
      <title>è”é‚¦ Deployment</title>
      <link>https://lijun.in/tasks/federation/administer-federation/deployment/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/federation/administer-federation/deployment/</guid>
      <description>. deprecationfilewarning &amp;gt;}} . include &amp;ldquo;federation-deprecation-warning-note.md&amp;rdquo; &amp;gt;}} . /deprecationfilewarning &amp;gt;}}
æœ¬æŒ‡å—è¯´æ˜äº†å¦‚ä½•åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­ä½¿ç”¨ Deploymentã€‚
è”é‚¦æ§åˆ¶å¹³é¢ä¸­çš„ Deploymentï¼ˆåœ¨æœ¬æŒ‡å—ä¸­ç§°ä¸º â€œè”é‚¦ Deploymentâ€ï¼‰ä¸ä¼ ç»Ÿçš„ Kubernetes Deployment éå¸¸ç±»ä¼¼ï¼Œå¹¶æä¾›ç›¸åŒçš„åŠŸèƒ½ã€‚åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­åˆ›å»ºè”é‚¦ Deployment ç¡®ä¿æ‰€éœ€çš„å‰¯æœ¬æ•°å­˜åœ¨äºæ³¨å†Œçš„ç¾¤é›†ä¸­ã€‚
. feature-state for_k8s_version=&amp;quot;1.5&amp;rdquo; state=&amp;quot;alpha&amp;rdquo; &amp;gt;}}
ä¸€äº›ç‰¹æ€§ï¼ˆä¾‹å¦‚å®Œæ•´çš„ rollout å…¼å®¹æ€§ï¼‰ä»åœ¨å¼€å‘ä¸­ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;federated-task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}}   æ‚¨è¿˜åº”å½“æ‹¥æœ‰åŸºæœ¬çš„ Kubernetes åº”ç”¨çŸ¥è¯†ï¼Œç‰¹åˆ«æ˜¯åœ¨ Deployments æ–¹é¢ã€‚  åˆ›å»ºè”é‚¦ Deployment è”é‚¦ Deployment çš„ API å’Œä¼ ç»Ÿçš„ Kubernetes Deployment API æ˜¯å…¼å®¹çš„ã€‚ æ‚¨å¯ä»¥é€šè¿‡å‘è”é‚¦ apiserver å‘é€è¯·æ±‚æ¥åˆ›å»ºä¸€ä¸ª Deploymentã€‚
æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ kubectl è¿è¡Œä¸‹é¢çš„æŒ‡ä»¤ï¼š
kubectl --context=federation-cluster create -f mydeployment.yaml --context=federation-cluster å‚æ•°å‘Šè¯‰ kubectl å‘é€è¯·æ±‚åˆ°è”é‚¦ apiserver è€Œä¸æ˜¯æŸä¸ª Kubernetes é›†ç¾¤ã€‚</description>
    </item>
    
    <item>
      <title>è”é‚¦ Job</title>
      <link>https://lijun.in/tasks/federation/administer-federation/job/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/federation/administer-federation/job/</guid>
      <description>. deprecationfilewarning &amp;gt;}} . include &amp;ldquo;federation-deprecation-warning-note.md&amp;rdquo; &amp;gt;}} . /deprecationfilewarning &amp;gt;}}
æœ¬æŒ‡å—è§£é‡Šäº†å¦‚ä½•åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­ä½¿ç”¨ jobã€‚
è”é‚¦æ§åˆ¶å¹³é¢ä¸­çš„ä¸€æ¬¡æ€§ä»»åŠ¡ï¼ˆåœ¨æœ¬æŒ‡å—ä¸­ç§°ä¸ºâ€œè”é‚¦ä¸€æ¬¡æ€§ä»»åŠ¡â€ï¼‰ç±»ä¼¼äºä¼ ç»Ÿçš„ Kubernetes ä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œå¹¶ä¸”æä¾›ç›¸åŒçš„åŠŸèƒ½ã€‚ åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­åˆ›å»º job å¯ä»¥ç¡®ä¿åœ¨å·²æ³¨å†Œçš„é›†ç¾¤ä¸­å­˜åœ¨æ‰€éœ€çš„å¹¶è¡Œæ€§å’Œå®Œæˆæ•°ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;federated-task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} ä½ éœ€è¦å…·å¤‡åŸºæœ¬çš„ Kubernetes çš„å·¥ä½œçŸ¥è¯†ï¼Œç‰¹åˆ«æ˜¯ jobã€‚  åˆ›å»ºä¸€ä¸ªè”é‚¦ job ç”¨äºè”é‚¦ job çš„ API ä¸ç”¨äºä¼ ç»Ÿ Kubernetes job çš„ API å®Œå…¨å…¼å®¹ã€‚æ‚¨å¯ä»¥é€šè¿‡å‘è”é‚¦ apiserver å‘é€è¯·æ±‚æ¥åˆ›å»º jobã€‚
ä½ å¯ä»¥ä½¿ç”¨ kubectl æ¥è¿è¡Œï¼š
kubectl --context=federation-cluster create -f myjob.yaml --context=federation-cluster å‚æ•°å‘Šè¯‰ kubectl å°†è¯·æ±‚æäº¤åˆ°è”é‚¦ API æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯å‘é€åˆ° Kubernetes é›†ç¾¤ã€‚
ä¸€æ—¦åˆ›å»ºäº†è”é‚¦ jobï¼Œè”é‚¦æ§åˆ¶å¹³é¢å°†åœ¨æ‰€æœ‰åº•å±‚ Kubernetes é›†ç¾¤ä¸­åˆ›å»ºä¸€ä¸ª jobã€‚ ä½ å¯ä»¥é€šè¿‡æ£€æŸ¥æ¯ä¸ªé›†ç¾¤åº•å±‚æ¥éªŒè¯è¿™ä¸€ç‚¹ï¼Œä¾‹å¦‚ï¼š
kubectl --context=gce-asia-east1a get job myjob å‰é¢çš„ç¤ºä¾‹å‡è®¾ä½ çš„å®¢æˆ·ç«¯ä¸­ä¸ºè¯¥åŒºåŸŸä¸­çš„é›†ç¾¤é…ç½®äº†ä¸€ä¸ªåä¸º gce-asia-east1a çš„ä¸Šä¸‹æ–‡ã€‚</description>
    </item>
    
    <item>
      <title>è”é‚¦ ReplicaSet</title>
      <link>https://lijun.in/tasks/federation/administer-federation/replicaset/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/federation/administer-federation/replicaset/</guid>
      <description>. deprecationfilewarning &amp;gt;}} . include &amp;ldquo;federation-deprecation-warning-note.md&amp;rdquo; &amp;gt;}} . /deprecationfilewarning &amp;gt;}}
æœ¬æŒ‡å—é˜è¿°äº†å¦‚ä½•åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­ä½¿ç”¨ ReplicaSetã€‚ åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­çš„ ReplicaSet (åœ¨æœ¬æŒ‡å—ä¸­ç§°ä¸ºâ€è”é‚¦ ReplicaSetâ€) å’Œä¼ ç»Ÿçš„ Kubernetes ReplicaSet å¾ˆç›¸ä¼¼ï¼Œæä¾›äº†ä¸€æ ·çš„åŠŸèƒ½ã€‚åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­åˆ›å»ºè”é‚¦ ReplicaSet å¯ä»¥ç¡®ä¿åœ¨è”é‚¦çš„æ‰€æœ‰é›†ç¾¤ä¸­éƒ½æœ‰é¢„æœŸæ•°é‡çš„å‰¯æœ¬ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;federated-task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}}   ä½ è¿˜åº”è¯¥å…·å¤‡åŸºæœ¬çš„ Kubernetes åº”ç”¨çŸ¥è¯†ï¼Œç‰¹åˆ«æ˜¯ ReplicaSets ç›¸å…³çš„åº”ç”¨çŸ¥è¯†ã€‚  åˆ›å»ºè”é‚¦ ReplicaSet è”é‚¦ ReplicaSet çš„ API å’Œä¼ ç»Ÿçš„ Kubernetes ReplicaSet API æ˜¯ 100% å…¼å®¹çš„ã€‚æ‚¨å¯ä»¥é€šè¿‡è¯·æ±‚è”é‚¦ apiserver æ¥åˆ›å»ºè”é‚¦ ReplicaSetã€‚
æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ kubectl è¿è¡Œä¸‹é¢çš„æŒ‡ä»¤æ¥åˆ›å»ºè”é‚¦ ReplicaSetï¼š
kubectl --context=federation-cluster create -f myrs.yaml --context=federation-cluster å‚æ•°å‘Šè¯‰ kubectl å‘é€è¯·æ±‚åˆ°è”é‚¦ apiserver è€Œä¸æ˜¯æŸä¸ª Kubernetes é›†ç¾¤ã€‚</description>
    </item>
    
    <item>
      <title>è”é‚¦ Secret</title>
      <link>https://lijun.in/tasks/federation/administer-federation/secret/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/federation/administer-federation/secret/</guid>
      <description>. deprecationfilewarning &amp;gt;}} . include &amp;ldquo;federation-deprecation-warning-note.md&amp;rdquo; &amp;gt;}} . /deprecationfilewarning &amp;gt;}}
æœ¬æŒ‡å—è§£é‡Šäº†å¦‚ä½•åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­ä½¿ç”¨ secretã€‚
è”é‚¦æ§åˆ¶å¹³é¢ä¸­çš„ Secretï¼ˆåœ¨æœ¬æŒ‡å—ä¸­ç§°ä¸ºâ€œè”é‚¦ secretâ€ï¼‰ä¸æä¾›ç›¸åŒåŠŸèƒ½çš„ä¼ ç»Ÿ Kubernetes Secret éå¸¸ç›¸ä¼¼ã€‚ åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­åˆ›å»ºå®ƒä»¬å¯ä»¥ç¡®ä¿å®ƒä»¬è·¨è”é‚¦ä¸­çš„æ‰€æœ‰é›†ç¾¤åŒæ­¥ã€‚
å…ˆå†³æ¡ä»¶ æœ¬æŒ‡å—å‡è®¾ä½ æœ‰ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ Kubernetes é›†ç¾¤è”é‚¦å®‰è£…ã€‚ å¦‚æœæ²¡æœ‰ï¼Œè¯·è®¿é—®è”é‚¦ç®¡ç†æŒ‡å—ï¼Œäº†è§£å¦‚ä½•å¯åŠ¨è”é‚¦é›†ç¾¤ï¼ˆæˆ–è€…è®©é›†ç¾¤ç®¡ç†å‘˜ä¸ºä½ åšè¿™ä»¶äº‹ï¼‰ã€‚ å…¶ä»–æ•™ç¨‹ï¼Œä¾‹å¦‚è¿™é‡Œ Kelsey Hightowerï¼Œä¹Ÿå¯ä»¥å¸®åŠ©æ‚¨ã€‚
ä½ è¿˜åº”è¯¥å…·æœ‰ä¸€ä¸ªåŸºæœ¬çš„ Kubernetes å·¥ä½œçŸ¥è¯†ï¼Œ ç‰¹åˆ«æ˜¯ Secretã€‚
åˆ›å»ºè”é‚¦ Secret ç”¨äºè”é‚¦ Secret çš„ API ä¸ç”¨äºä¼ ç»Ÿçš„ Kubernetes Secret çš„ API 100% å…¼å®¹ã€‚ æ‚¨å¯ä»¥é€šè¿‡å‘è”é‚¦ apiserver å‘é€è¯·æ±‚æ¥åˆ›å»ºä¸€ä¸ª Secretã€‚
ä½ å¯ä»¥ä½¿ç”¨ kubectl æ¥è¿è¡Œï¼š
kubectl --context=federation-cluster create -f mysecret.yaml --context=federation-cluster å‚æ•°é€šçŸ¥ kubectl å°†è¯·æ±‚æäº¤ç»™è”é‚¦ apiserverï¼Œè€Œä¸æ˜¯å°†å…¶å‘é€åˆ° Kubernetes é›†ç¾¤ã€‚
åˆ›å»ºè”é‚¦å‘½åç©ºé—´åï¼Œè”é‚¦æ§åˆ¶å¹³é¢å°†åœ¨æ‰€æœ‰åŸºç¡€ Kubernetes é›†ç¾¤ä¸­åˆ›å»ºåŒ¹é…çš„å‘½åç©ºé—´ã€‚æ‚¨å¯ä»¥é€šè¿‡æ£€æŸ¥æ¯ä¸ªåŸºç¡€é›†ç¾¤æ¥éªŒè¯è¿™ä¸€ç‚¹ï¼Œä¾‹å¦‚ï¼š
kubectl --context=gce-asia-east1a get secret mysecret ä»¥ä¸Šå‡è®¾æ‚¨åœ¨å®¢æˆ·ç«¯ä¸­ä¸ºè¯¥åŒºåŸŸä¸­çš„é›†ç¾¤é…ç½®äº†åä¸º â€œgce-asia-east1aâ€ çš„ä¸Šä¸‹æ–‡ã€‚ é›†ç¾¤åº•å±‚ä¸­çš„è¿™äº› secret å°†ä¸è”é‚¦ secret åŒ¹é…ã€‚</description>
    </item>
    
    <item>
      <title>è”é‚¦äº‹ä»¶</title>
      <link>https://lijun.in/tasks/federation/administer-federation/events/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/federation/administer-federation/events/</guid>
      <description>. deprecationfilewarning &amp;gt;}} . include &amp;ldquo;federation-deprecation-warning-note.md&amp;rdquo; &amp;gt;}} . /deprecationfilewarning &amp;gt;}}
æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­ä½¿ç”¨äº‹ä»¶æ¥å¸®åŠ©è°ƒè¯•ã€‚
å…ˆå†³æ¡ä»¶ æœ¬æŒ‡å—å‡å®šæ‚¨æ­£åœ¨è¿è¡Œ Kubernetes é›†ç¾¤è”é‚¦å®‰è£…ã€‚ å¦‚æœæ²¡æœ‰ï¼Œè¯·è½¬åˆ°è”é‚¦ç®¡ç†å‘˜æŒ‡å—ï¼Œäº†è§£å¦‚ä½•å¯åŠ¨é›†ç¾¤è”é‚¦ï¼ˆæˆ–è®©é›†ç¾¤ç®¡ç†å‘˜ä¸ºæ‚¨æ‰§è¡Œæ­¤æ“ä½œï¼‰ã€‚ å…¶ä»–æ•™ç¨‹ï¼Œä¾‹å¦‚è¿™ä¸ªç”± Kelsey Hightowerï¼Œä¹Ÿå¯ä¸ºæ‚¨æä¾›å¸®åŠ©ã€‚
ä½ è¿˜åº”è¯¥å…·å¤‡ kubernetes åŸºæœ¬å·¥ä½œçŸ¥è¯†ã€‚
æŸ¥çœ‹è”é‚¦äº‹ä»¶ è”é‚¦æ§åˆ¶å¹³é¢ä¸­çš„äº‹ä»¶ï¼ˆæœ¬æŒ‡å—ä¸­ç§°ä¸ºâ€œè”é‚¦äº‹ä»¶â€ï¼‰ä¸æä¾›ç›¸åŒåŠŸèƒ½çš„ä¼ ç»Ÿ Kubernetes äº‹ä»¶éå¸¸ç›¸ä¼¼ã€‚ è”é‚¦äº‹ä»¶ä»…å­˜å‚¨åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­ï¼Œä¸ä¼šä¼ é€’ç»™åŸºç¡€ Kubernetes é›†ç¾¤ã€‚
è”é‚¦æ§åˆ¶å™¨åœ¨å¤„ç† API èµ„æºæ—¶åˆ›å»ºäº‹ä»¶ï¼Œä»¥ä¾¿å‘ç”¨æˆ·æ˜¾ç¤ºå®ƒä»¬æ‰€å¤„çš„çŠ¶æ€ã€‚æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»è”é‚¦ apiserver è·å–æ‰€æœ‰äº‹ä»¶ï¼š
kubectl --context=federation-cluster get events æ ‡å‡†çš„ kubectl getï¼Œupdateï¼Œdelete å‘½ä»¤éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</description>
    </item>
    
    <item>
      <title>è”é‚¦å‘½åç©ºé—´</title>
      <link>https://lijun.in/tasks/federation/administer-federation/namespaces/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/federation/administer-federation/namespaces/</guid>
      <description>. deprecationfilewarning &amp;gt;}} . include &amp;ldquo;federation-deprecation-warning-note.md&amp;rdquo; &amp;gt;}} . /deprecationfilewarning &amp;gt;}}
æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­ä½¿ç”¨å‘½åç©ºé—´ã€‚
è”é‚¦æ§åˆ¶å¹³é¢ä¸­çš„å‘½åç©ºé—´ï¼ˆæœ¬æŒ‡å—ä¸­ç§°ä¸ºâ€œè”é‚¦å‘½åç©ºé—´â€ï¼‰ä¸æä¾›ç›¸åŒåŠŸèƒ½çš„ä¼ ç»Ÿ Kubernetes å‘½åç©ºé—´éå¸¸ç›¸ä¼¼ã€‚ åœ¨è”é‚¦æ§åˆ¶å¹³é¢ä¸­åˆ›å»ºå®ƒä»¬å¯ç¡®ä¿å®ƒä»¬åœ¨è”é‚¦ä¸­çš„æ‰€æœ‰é›†ç¾¤ä¹‹é—´åŒæ­¥
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;federated-task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} æ‚¨è¿˜éœ€è¦å…·å¤‡åŸºæœ¬çš„ Kubernetes å·¥ä½œçŸ¥è¯†ï¼Œ ç‰¹åˆ«æ˜¯å‘½åç©ºé—´ã€‚  åˆ›å»ºè”é‚¦å‘½åç©ºé—´ è”é‚¦å‘½åç©ºé—´çš„ API ä¸ä¼ ç»Ÿ Kubernetes å‘½åç©ºé—´çš„ API 100ï¼… å…¼å®¹ã€‚æ‚¨å¯ä»¥é€šè¿‡å‘è”é‚¦èº«ä»½éªŒè¯ç¨‹åºå‘é€è¯·æ±‚æ¥åˆ›å»ºå‘½åç©ºé—´ã€‚
æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤ä½¿ç”¨ kubectl æ‰§è¡Œæ­¤æ“ä½œï¼š
kubectl --context=federation-cluster create -f myns.yaml --context=federation-cluster å‚æ•°é€šçŸ¥ kubectl å°†è¯·æ±‚æäº¤ç»™è”é‚¦ apiserverï¼Œè€Œä¸æ˜¯å°†å…¶å‘é€åˆ° Kubernetes é›†ç¾¤ã€‚
åˆ›å»ºè”é‚¦å‘½åç©ºé—´åï¼Œè”é‚¦æ§åˆ¶å¹³é¢å°†åœ¨æ‰€æœ‰åŸºç¡€ Kubernetes é›†ç¾¤ä¸­åˆ›å»ºåŒ¹é…çš„å‘½åç©ºé—´ã€‚æ‚¨å¯ä»¥é€šè¿‡æ£€æŸ¥æ¯ä¸ªåŸºç¡€é›†ç¾¤æ¥éªŒè¯è¿™ä¸€ç‚¹ï¼Œä¾‹å¦‚ï¼š
kubectl --context=gce-asia-east1a get namespaces myns ä»¥ä¸Šå‡è®¾æ‚¨åœ¨å®¢æˆ·ç«¯ä¸­ä¸ºè¯¥åŒºåŸŸä¸­çš„é›†ç¾¤é…ç½®äº†åä¸º â€œgce-asia-east1aâ€ çš„ä¸Šä¸‹æ–‡ã€‚ åŸºç¡€å‘½åç©ºé—´çš„åç§°å’Œè§„èŒƒå°†ä¸æ‚¨åœ¨ä¸Šé¢åˆ›å»ºçš„è”é‚¦å‘½åç©ºé—´çš„åç§°å’Œè§„èŒƒç›¸åŒ¹é…ã€‚
æ›´æ–°è”é‚¦å‘½åç©ºé—´ æ‚¨å¯ä»¥åƒæ›´æ–° Kubernetes å‘½åç©ºé—´ä¸€æ ·æ›´æ–°è”é‚¦å‘½åç©ºé—´ï¼Œåªéœ€å°†è¯·æ±‚å‘é€åˆ°è”é‚¦èº«ä»½éªŒè¯ç¨‹åºï¼Œè€Œä¸æ˜¯å°†å…¶å‘é€åˆ°æŒ‡å®šçš„ Kubernetes é›†ç¾¤ã€‚ è”é‚¦æ§åˆ¶å¹³é¢å°†ç¡®ä¿æ¯å½“æ›´æ–°è”é‚¦å‘½åç©ºé—´æ—¶ï¼Œå®ƒéƒ½ä¼šæ›´æ–°æ‰€æœ‰åŸºç¡€é›†ç¾¤ä¸­çš„ç›¸åº”å‘½åç©ºé—´ä»¥ä¸å…¶åŒ¹é…ã€‚</description>
    </item>
    
    <item>
      <title>è‡ªå®šä¹‰ DNS æœåŠ¡</title>
      <link>https://lijun.in/tasks/administer-cluster/dns-custom-nameservers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/dns-custom-nameservers/</guid>
      <description>æœ¬é¡µè¯´æ˜å¦‚ä½•é…ç½® DNS Pod å’Œè‡ªå®šä¹‰ DNS è§£æè¿‡ç¨‹ã€‚ åœ¨ Kubernetes 1.11 å’Œæ›´é«˜ç‰ˆæœ¬ä¸­ï¼ŒCoreDNS ä½äº GA å¹¶ä¸”é»˜è®¤æƒ…å†µä¸‹ä¸ kubeadm ä¸€èµ·å®‰è£…ã€‚ è¯·å‚è§CoreDNS çš„ ConfigMap é€‰é¡¹ and ä½¿ç”¨ CoreDNS è¿›è¡ŒæœåŠ¡å‘ç°ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}} Kubernetes ç‰ˆæœ¬ 1.6 æˆ–æ›´æ–°ã€‚å¦‚æœä¸ CoreDNS åŒ¹é…ï¼Œç‰ˆæœ¬ 1.9 æˆ–æ›´æ–°ã€‚ åˆé€‚çš„ add-on æ’ä»¶: kube-dns æˆ– CoreDNS. ä½¿ç”¨ kubeadm å®‰è£…ï¼Œè¯·å‚è§ kubeadm å¸®åŠ©æ–‡æ¡£.  ä»‹ç» DNS æ˜¯ä½¿ç”¨æ’ä»¶ç®¡ç†å™¨[é›†ç¾¤ add-on](http://releases.k8s.io/. param &amp;ldquo;githubbranch&amp;rdquo; &amp;gt;}}/cluster/addons/README.md)è‡ªåŠ¨å¯åŠ¨çš„å†…ç½®çš„ Kubernetes æœåŠ¡ã€‚
ä» Kubernetes v1.12 å¼€å§‹ï¼ŒCoreDNS æ˜¯æ¨èçš„ DNS æœåŠ¡å™¨ï¼Œå–ä»£äº†kube-dnsã€‚ ä½†æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒæŸäº› Kubernetes å®‰è£…ç¨‹åºå·¥å…·ä»å¯èƒ½å®‰è£… kube-dnsã€‚ è¯·å‚é˜…å®‰è£…ç¨‹åºæä¾›çš„æ–‡æ¡£ï¼Œä»¥äº†è§£é»˜è®¤æƒ…å†µä¸‹å®‰è£…äº†å“ªä¸ª DNS æœåŠ¡å™¨ã€‚</description>
    </item>
    
    <item>
      <title>èŠ‚ç‚¹å¥åº·ç›‘æµ‹</title>
      <link>https://lijun.in/tasks/debug-application-cluster/monitor-node-health/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/monitor-node-health/</guid>
      <description>èŠ‚ç‚¹é—®é¢˜æ¢æµ‹å™¨ æ˜¯ä¸€ä¸ª DaemonSet ç”¨æ¥ç›‘æ§èŠ‚ç‚¹å¥åº·ã€‚å®ƒä»å„ç§å®ˆæŠ¤è¿›ç¨‹æ”¶é›†èŠ‚ç‚¹é—®é¢˜ï¼Œå¹¶ä»¥NodeCondition å’Œ [Event](/docs/reference/generated/kubernetes-api/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#event-v1-core) çš„å½¢å¼æŠ¥å‘Šç»™ apiserver ã€‚
å®ƒç°åœ¨æ”¯æŒä¸€äº›å·²çŸ¥çš„å†…æ ¸é—®é¢˜æ£€æµ‹ï¼Œå¹¶å°†éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ£€æµ‹æ›´å¤šèŠ‚ç‚¹é—®é¢˜ã€‚
ç›®å‰ï¼ŒKubernetes ä¸ä¼šå¯¹èŠ‚ç‚¹é—®é¢˜æ£€æµ‹å™¨ç›‘æµ‹åˆ°çš„èŠ‚ç‚¹çŠ¶æ€å’Œäº‹ä»¶é‡‡å–ä»»ä½•æ“ä½œã€‚å°†æ¥å¯èƒ½ä¼šå¼•å…¥ä¸€ä¸ªè¡¥æ•‘ç³»ç»Ÿæ¥å¤„ç†è¿™äº›èŠ‚ç‚¹é—®é¢˜ã€‚
æ›´å¤šä¿¡æ¯è¯·å‚é˜… è¿™é‡Œã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
å±€é™æ€§  èŠ‚ç‚¹é—®é¢˜æ£€æµ‹å™¨çš„å†…æ ¸é—®é¢˜æ£€æµ‹ç°åœ¨åªæ”¯æŒåŸºäºæ–‡ä»¶ç±»å‹çš„å†…æ ¸æ—¥å¿—ã€‚ å®ƒä¸æ”¯æŒåƒ journald è¿™æ ·çš„å‘½ä»¤è¡Œæ—¥å¿—å·¥å…·ã€‚   èŠ‚ç‚¹é—®é¢˜æ£€æµ‹å™¨çš„å†…æ ¸é—®é¢˜æ£€æµ‹å¯¹å†…æ ¸æ—¥å¿—æ ¼å¼æœ‰ä¸€å®šè¦æ±‚ï¼Œç°åœ¨å®ƒåªé€‚ç”¨äº Ubuntu å’Œ Debianã€‚ä½†æ˜¯ï¼Œå°†å…¶æ‰©å±•ä¸º æ”¯æŒå…¶å®ƒæ—¥å¿—æ ¼å¼ ä¹Ÿå¾ˆå®¹æ˜“ã€‚  åœ¨ GCE é›†ç¾¤ä¸­å¯ç”¨/ç¦ç”¨ èŠ‚ç‚¹é—®é¢˜æ£€æµ‹å™¨åœ¨ gce é›†ç¾¤ä¸­ä»¥é›†ç¾¤æ’ä»¶çš„å½¢å¼é»˜è®¤å¯ç”¨ã€‚
æ‚¨å¯ä»¥åœ¨è¿è¡Œ kube-up.sh ä¹‹å‰ï¼Œä»¥è®¾ç½®ç¯å¢ƒå˜é‡ KUBE_ENABLE_NODE_PROBLEM_DETECTOR çš„å½¢å¼å¯ç”¨/ç¦ç”¨å®ƒã€‚
åœ¨å…¶å®ƒç¯å¢ƒä¸­ä½¿ç”¨ è¦åœ¨ GCE ä¹‹å¤–çš„å…¶ä»–ç¯å¢ƒä¸­å¯ç”¨èŠ‚ç‚¹é—®é¢˜æ£€æµ‹å™¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ kubectl æˆ–æ’ä»¶ podã€‚
Kubectl è¿™æ˜¯åœ¨ GCE ä¹‹å¤–å¯åŠ¨èŠ‚ç‚¹é—®é¢˜æ£€æµ‹å™¨çš„æ¨èæ–¹æ³•ã€‚å®ƒçš„ç®¡ç†æ›´åŠ çµæ´»ï¼Œä¾‹å¦‚è¦†ç›–é»˜è®¤é…ç½®ä»¥ä½¿å…¶é€‚åˆæ‚¨çš„ç¯å¢ƒæˆ–æ£€æµ‹è‡ªå®šä¹‰èŠ‚ç‚¹é—®é¢˜ã€‚
 æ­¥éª¤ 1: node-problem-detector.yaml:  .</description>
    </item>
    
    <item>
      <title>è·å–æ­£åœ¨è¿è¡Œå®¹å™¨çš„ Shell</title>
      <link>https://lijun.in/tasks/debug-application-cluster/get-shell-running-container/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/get-shell-running-container/</guid>
      <description>æœ¬æ–‡ä»‹ç»æ€æ ·ä½¿ç”¨ kubectl exec å‘½ä»¤è·å–æ­£åœ¨è¿è¡Œå®¹å™¨çš„ Shellã€‚
.% heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
è·å–å®¹å™¨çš„ Shell åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œä½ å°†åˆ›å»ºåŒ…å«ä¸€ä¸ªå®¹å™¨çš„ Podã€‚å®¹å™¨è¿è¡Œ nginx é•œåƒã€‚ä¸‹é¢æ˜¯ Pod çš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;application/shell-demo.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»º Podï¼š
kubectl create -f https://k8s.io/examples/application/shell-demo.yaml æ£€æŸ¥å®¹å™¨æ˜¯å¦è¿è¡Œæ­£å¸¸ï¼š
kubectl get pod shell-demo è·å–æ­£åœ¨è¿è¡Œå®¹å™¨çš„ Shellï¼š
kubectl exec -it shell-demo -- /bin/bash . note &amp;gt;}}
åŒç ´æŠ˜å· &amp;ldquo;&amp;ndash;&amp;rdquo; ç”¨äºå°†è¦ä¼ é€’ç»™å‘½ä»¤çš„å‚æ•°ä¸ kubectl çš„å‚æ•°åˆ†å¼€ã€‚ note &amp;gt;}}
åœ¨ shell ä¸­ï¼Œæ‰“å°æ ¹ç›®å½•ï¼š
root@shell-demo:/# ls / åœ¨ shell ä¸­ï¼Œå®éªŒå…¶ä»–å‘½ä»¤ã€‚ä¸‹é¢æ˜¯ä¸€äº›ç¤ºä¾‹ï¼š
root@shell-demo:/# ls / root@shell-demo:/# cat /proc/mounts root@shell-demo:/# cat /proc/1/maps root@shell-demo:/# apt-get update root@shell-demo:/# apt-get install -y tcpdump root@shell-demo:/# tcpdump root@shell-demo:/# apt-get install -y lsof root@shell-demo:/# lsof root@shell-demo:/# apt-get install -y procps root@shell-demo:/# ps aux root@shell-demo:/# ps aux | grep nginx ç¼–å†™ nginx çš„ æ ¹é¡µé¢ åœ¨çœ‹ä¸€ä¸‹ Pod çš„é…ç½®æ–‡ä»¶ã€‚è¯¥ Pod æœ‰ä¸ª emptyDir å·ï¼Œå®¹å™¨å°†è¯¥å·æŒ‚è½½åˆ°äº† /usr/share/nginx/htmlã€‚</description>
    </item>
    
    <item>
      <title>è®¿é—®é›†ç¾¤ä¸Šè¿è¡Œçš„æœåŠ¡</title>
      <link>https://lijun.in/tasks/administer-cluster/access-cluster-services/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/access-cluster-services/</guid>
      <description>æœ¬æ–‡å±•ç¤ºäº†å¦‚ä½•è¿æ¥ Kubernetes é›†ç¾¤ä¸Šè¿è¡Œçš„æœåŠ¡ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
è®¿é—®é›†ç¾¤ä¸Šè¿è¡Œçš„æœåŠ¡ åœ¨ Kubernetes é‡Œï¼Œ nodesã€pods å’Œ services éƒ½æœ‰å®ƒä»¬è‡ªå·±çš„ IPã€‚è®¸å¤šæƒ…å†µä¸‹ï¼Œé›†ç¾¤ä¸Šçš„ node IPã€pod IP å’ŒæŸäº› service IP è·¯ç”±ä¸å¯è¾¾ï¼Œæ‰€ä»¥ä¸èƒ½ä»ä¸€ä¸ªé›†ç¾¤ä¹‹å¤–çš„èŠ‚ç‚¹è®¿é—®å®ƒä»¬ï¼Œä¾‹å¦‚ä»ä½ è‡ªå·±çš„å°å¼æœºã€‚
è¿æ¥æ–¹å¼ ä½ æœ‰å¤šç§ä»é›†ç¾¤å¤–è¿æ¥ nodesã€pods å’Œ services çš„é€‰é¡¹ï¼š
 é€šè¿‡å…¬å…± IP è®¿é—® servicesã€‚  ä½¿ç”¨å…·æœ‰ NodePort æˆ– LoadBalancer ç±»å‹çš„ serviceï¼Œå¯ä»¥ä»å¤–éƒ¨è®¿é—®å®ƒä»¬ã€‚è¯·æŸ¥é˜… services å’Œ kubectl expose æ–‡æ¡£ã€‚ å–å†³äºä½ çš„é›†ç¾¤ç¯å¢ƒï¼Œä½ å¯ä»¥ä»…æŠŠ service æš´éœ²åœ¨ä½ çš„ä¼ä¸šç½‘ç»œç¯å¢ƒä¸­ï¼Œä¹Ÿå¯ä»¥å°†å…¶æš´éœ²åœ¨å› ç‰¹ç½‘ä¸Šã€‚éœ€è¦è€ƒè™‘æš´éœ²çš„ service æ˜¯å¦å®‰å…¨ï¼Œå®ƒæ˜¯å¦æœ‰è‡ªå·±çš„ç”¨æˆ·è®¤è¯ï¼Ÿ å°† pods æ”¾ç½®äº services èƒŒåã€‚å¦‚æœè¦è®¿é—®ä¸€ä¸ªå‰¯æœ¬é›†åˆä¸­ç‰¹å®šçš„ podï¼Œä¾‹å¦‚ç”¨äºè°ƒè¯•ç›®çš„æ—¶ï¼Œè¯·ç»™ pod æŒ‡å®šä¸€ä¸ªç‹¬ç‰¹çš„æ ‡ç­¾å¹¶åˆ›å»ºä¸€ä¸ªæ–° service é€‰æ‹©è¿™ä¸ªæ ‡ç­¾ã€‚ å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œéƒ½ä¸éœ€è¦åº”ç”¨å¼€å‘è€…é€šè¿‡èŠ‚ç‚¹ IP ç›´æ¥è®¿é—® nodesã€‚   é€šè¿‡ Proxy Verb è®¿é—® servicesã€nodes æˆ–è€… podsã€‚  åœ¨è®¿é—® Apiserver è¿œç¨‹æœåŠ¡ä¹‹å‰æ˜¯å¦ç»è¿‡è®¤è¯å’Œæˆæƒï¼Ÿå¦‚æœä½ çš„æœåŠ¡æš´éœ²åˆ°å› ç‰¹ç½‘ä¸­ä¸å¤Ÿå®‰å…¨ï¼Œæˆ–è€…éœ€è¦è·å– node IP ä¹‹ä¸Šçš„ç«¯å£ï¼Œåˆæˆ–è€…å¤„äºè°ƒè¯•ç›®çš„æ—¶ï¼Œè¯·ä½¿ç”¨è¿™ä¸ªç‰¹æ€§ã€‚ Proxies å¯èƒ½ç»™æŸäº›åº”ç”¨å¸¦æ¥éº»çƒ¦ã€‚ ä»…é€‚ç”¨äº HTTP/HTTPSã€‚ åœ¨è¿™é‡Œæè¿°   ä»é›†ç¾¤ä¸­çš„ node æˆ–è€… pod è®¿é—®ã€‚  è¿è¡Œä¸€ä¸ª podï¼Œç„¶åä½¿ç”¨ kubectl exec è¿æ¥åˆ°å®ƒçš„ä¸€ä¸ªshellã€‚ä»é‚£ä¸ª shell è¿æ¥å…¶ä»–çš„ nodesã€pods å’Œ servicesã€‚ æŸäº›é›†ç¾¤å¯èƒ½å…è®¸ä½  ssh åˆ°é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ã€‚ä½ å¯èƒ½å¯ä»¥ä»é‚£å„¿è®¿é—®é›†ç¾¤æœåŠ¡ã€‚è¿™æ˜¯ä¸€ä¸ªéæ ‡å‡†çš„æ–¹å¼ï¼Œå¯èƒ½åœ¨ä¸€äº›é›†ç¾¤ä¸Šèƒ½å·¥ä½œï¼Œä½†åœ¨å¦ä¸€äº›ä¸Šå´ä¸èƒ½ã€‚æµè§ˆå™¨å’Œå…¶ä»–å·¥å…·å¯èƒ½å®‰è£…æˆ–å¯èƒ½ä¸ä¼šå®‰è£…ã€‚é›†ç¾¤ DNS å¯èƒ½ä¸ä¼šæ­£å¸¸å·¥ä½œã€‚    å‘ç°å†…ç½®æœåŠ¡ å…¸å‹æƒ…å†µä¸‹ï¼Œkube-system ä¼šå¯åŠ¨é›†ç¾¤ä¸­çš„å‡ ä¸ªæœåŠ¡ã€‚ä½¿ç”¨ kubectl cluster-info å‘½ä»¤è·å–å®ƒä»¬çš„åˆ—è¡¨ï¼š</description>
    </item>
    
    <item>
      <title>è¯ä¹¦è½®æ¢</title>
      <link>https://lijun.in/tasks/tls/certificate-rotation/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/tls/certificate-rotation/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•åœ¨ kubelet ä¸­å¯ç”¨å¹¶é…ç½®è¯ä¹¦è½®æ¢ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}   è¦æ±‚ Kubernetes 1.8.0 æˆ–æ›´é«˜çš„ç‰ˆæœ¬
  Kubelet è¯ä¹¦è½®æ¢åœ¨ 1.8.0 ç‰ˆæœ¬ä¸­å¤„äº beta é˜¶æ®µ, è¿™æ„å‘³ç€è¯¥ç‰¹æ€§å¯èƒ½åœ¨æ²¡æœ‰é€šçŸ¥çš„æƒ…å†µä¸‹å‘ç”Ÿå˜åŒ–ã€‚
  æ¦‚è¿° Kubelet ä½¿ç”¨è¯ä¹¦è¿›è¡Œ Kubernetes API çš„è®¤è¯ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™äº›è¯ä¹¦çš„ç­¾å‘æœŸé™ä¸ºä¸€å¹´ï¼Œæ‰€ä»¥ä¸éœ€è¦å¤ªé¢‘ç¹åœ°è¿›è¡Œæ›´æ–°ã€‚
Kubernetes 1.8 ç‰ˆæœ¬ä¸­åŒ…å« beta ç‰¹æ€§ kubelet è¯ä¹¦è½®æ¢ï¼Œ åœ¨å½“å‰è¯ä¹¦å³å°†è¿‡æœŸæ—¶ï¼Œ å°†è‡ªåŠ¨ç”Ÿæˆæ–°çš„ç§˜é’¥ï¼Œå¹¶ä» Kubernetes API ç”³è¯·æ–°çš„è¯ä¹¦ã€‚ ä¸€æ—¦æ–°çš„è¯ä¹¦å¯ç”¨ï¼Œå®ƒå°†è¢«ç”¨äºä¸ Kubernetes API é—´çš„è¿æ¥è®¤è¯ã€‚
å¯ç”¨å®¢æˆ·ç«¯è¯ä¹¦è½®æ¢ kubelet è¿›ç¨‹æ¥æ”¶ --rotate-certificates å‚æ•°ï¼Œè¯¥å‚æ•°å†³å®š kubelet åœ¨å½“å‰ä½¿ç”¨çš„è¯ä¹¦å³å°†åˆ°æœŸæ—¶ï¼Œ æ˜¯å¦ä¼šè‡ªåŠ¨ç”³è¯·æ–°çš„è¯ä¹¦ã€‚ ç”±äºè¯ä¹¦è½®æ¢æ˜¯ beta ç‰¹æ€§ï¼Œå¿…é¡»é€šè¿‡å‚æ•° --feature-gates=RotateKubeletClientCertificate=true è¿›è¡Œå¯ç”¨ã€‚
kube-controller-manager è¿›ç¨‹æ¥æ”¶ --experimental-cluster-signing-duration å‚æ•°ï¼Œè¯¥å‚æ•°æ§åˆ¶è¯ä¹¦ç­¾å‘çš„æœ‰æ•ˆæœŸé™ã€‚
ç†è§£è¯ä¹¦è½®æ¢é…ç½® å½“ kubelet å¯åŠ¨æ—¶ï¼Œå¦‚è¢«é…ç½®ä¸ºè‡ªä¸¾ï¼ˆä½¿ç”¨--bootstrap-kubeconfig å‚æ•°ï¼‰ï¼Œkubelet ä¼šä½¿ç”¨å…¶åˆå§‹è¯ä¹¦è¿æ¥åˆ° Kubernetes API ï¼Œå¹¶å‘é€è¯ä¹¦ç­¾åçš„è¯·æ±‚ã€‚ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹è¯ä¹¦ç­¾åè¯·æ±‚çš„çŠ¶æ€ï¼š</description>
    </item>
    
    <item>
      <title>è°ƒè¯• Init å®¹å™¨</title>
      <link>https://lijun.in/tasks/debug-application-cluster/debug-init-containers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/debug-init-containers/</guid>
      <description>æ­¤é¡µæ˜¾ç¤ºå¦‚ä½•æ ¸æŸ¥ä¸ init å®¹å™¨æ‰§è¡Œç›¸å…³çš„é—®é¢˜ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å‘½ä»¤è¡Œå°† Pod ç§°ä¸º &amp;lt;pod-name&amp;gt;ï¼Œè€Œ init å®¹å™¨ç§°ä¸º &amp;lt;init-container-1&amp;gt; å’Œ &amp;lt;init-container-2&amp;gt;ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
 æ‚¨åº”è¯¥ç†Ÿæ‚‰ Init å®¹å™¨çš„åŸºç¡€çŸ¥è¯†ã€‚ æ‚¨åº”è¯¥å·²ç»é…ç½®å¥½ä¸€ä¸ª Init å®¹å™¨ã€‚  æ£€æŸ¥ Init å®¹å™¨çš„çŠ¶æ€ æ˜¾ç¤ºä½ çš„ Pod çš„çŠ¶æ€ï¼š
kubectl get pod &amp;lt;pod-name&amp;gt; ä¾‹å¦‚ï¼ŒçŠ¶æ€ Init:1/2 è¡¨æ˜ä¸¤ä¸ª Init å®¹å™¨ä¸­çš„ä¸€ä¸ªå·²ç»æˆåŠŸå®Œæˆï¼š
NAME READY STATUS RESTARTS AGE &amp;lt;pod-name&amp;gt; 0/1 Init:1/2 0 7s æ›´å¤šçŠ¶æ€å€¼åŠå…¶å«ä¹‰è¯·å‚è€ƒäº†è§£ Pod çš„çŠ¶æ€ã€‚
è·å– Init å®¹å™¨è¯¦æƒ… æŸ¥çœ‹ Init å®¹å™¨è¿è¡Œçš„æ›´å¤šè¯¦æƒ…ï¼š
kubectl describe pod &amp;lt;pod-name&amp;gt; ä¾‹å¦‚ï¼Œå¯¹äºåŒ…å«ä¸¤ä¸ª Init å®¹å™¨çš„ Pod åº”è¯¥æ˜¾ç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼š</description>
    </item>
    
    <item>
      <title>è°ƒè¯• Pods å’Œ Replication Controllers</title>
      <link>https://lijun.in/tasks/debug-application-cluster/debug-pod-replication-controller/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/debug-pod-replication-controller/</guid>
      <description>æ­¤é¡µé¢å‘Šè¯‰æ‚¨å¦‚ä½•è°ƒè¯• Pod å’Œ ReplicationControllerã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
 æ‚¨åº”è¯¥å…ˆç†Ÿæ‚‰ Pods å’Œ Pod Lifecycle çš„åŸºç¡€æ¦‚å¿µã€‚  è°ƒè¯• Pod è°ƒè¯•ä¸€ä¸ª pod çš„ç¬¬ä¸€æ­¥æ˜¯è§‚å¯Ÿå®ƒã€‚ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ£€æŸ¥è¿™ä¸ª pod çš„å½“å‰çŠ¶æ€å’Œæœ€è¿‘äº‹ä»¶ï¼š
kubectl describe pods ${POD_NAME} çœ‹çœ‹ pod ä¸­çš„å®¹å™¨çš„çŠ¶æ€ã€‚ä»–ä»¬éƒ½æ˜¯ Running å—ï¼Ÿæœ‰æœ€è¿‘é‡å¯äº†å—ï¼Ÿ
æ ¹æ® pod çš„çŠ¶æ€ç»§ç»­è°ƒè¯•ã€‚
æˆ‘çš„ Pod å¡åœ¨ Pending å¦‚æœä¸€ä¸ª pod è¢«å¡åœ¨ Pending çŠ¶æ€ï¼Œå°±æ„å‘³ç€å®ƒä¸èƒ½è°ƒåº¦åœ¨æŸä¸ªèŠ‚ç‚¹ä¸Šã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™æ˜¯å› ä¸ºæŸç§ç±»å‹çš„èµ„æºä¸è¶³è€Œ é˜»æ­¢è°ƒåº¦ã€‚ çœ‹çœ‹ä¸Šé¢çš„å‘½ä»¤ kubectl describe ... çš„è¾“å‡ºã€‚è°ƒåº¦å™¨çš„æ¶ˆæ¯ä¸­åº”è¯¥ä¼šåŒ…å«æ— æ³•è°ƒåº¦ Pod çš„åŸå› ã€‚ åŸå› åŒ…æ‹¬ï¼š
èµ„æºä¸è¶³ æ‚¨å¯èƒ½å·²ç»è€—å°½äº†é›†ç¾¤ä¸­ä¾›åº”çš„ CPU æˆ–å†…å­˜ã€‚åœ¨è¿™ä¸ªæƒ…å†µä¸‹ä½ å¯ä»¥å°è¯•å‡ ä»¶äº‹æƒ…ï¼š
  æ·»åŠ æ›´å¤šèŠ‚ç‚¹ åˆ°é›†ç¾¤ã€‚
  ç»ˆæ­¢ä¸éœ€è¦çš„ pod ä¸º pending ä¸­çš„ pod æä¾›ç©ºé—´ã€‚</description>
    </item>
    
    <item>
      <title>è°ƒè¯• Service</title>
      <link>https://lijun.in/tasks/debug-application-cluster/debug-service/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/debug-service/</guid>
      <description>å¯¹äºæ–°å®‰è£…çš„ Kubernetesï¼Œç»å¸¸å‡ºç°çš„ä¸€ä¸ªé—®é¢˜æ˜¯ Service æ²¡æœ‰æ­£å¸¸å·¥ä½œã€‚å¦‚æœæ‚¨å·²ç»è¿è¡Œäº† Deployment å¹¶åˆ›å»ºäº†ä¸€ä¸ª Serviceï¼Œä½†æ˜¯å½“æ‚¨å°è¯•è®¿é—®å®ƒæ—¶æ²¡æœ‰å¾—åˆ°å“åº”ï¼Œå¸Œæœ›è¿™ä»½æ–‡æ¡£èƒ½å¸®åŠ©æ‚¨æ‰¾å‡ºé—®é¢˜æ‰€åœ¨ã€‚
çº¦å®š åœ¨æ•´ä¸ªæ–‡æ¡£ä¸­ï¼Œæ‚¨å°†çœ‹åˆ°å„ç§å¯ä»¥è¿è¡Œçš„å‘½ä»¤ã€‚æœ‰äº›å‘½ä»¤éœ€è¦åœ¨ Pod ä¸­è¿è¡Œï¼Œæœ‰äº›å‘½ä»¤éœ€è¦åœ¨ Kubernetes Node ä¸Šè¿è¡Œï¼Œè¿˜æœ‰ä¸€äº›å‘½ä»¤å¯ä»¥åœ¨æ‚¨æ‹¥æœ‰ kubectl å’Œé›†ç¾¤å‡­è¯çš„ä»»ä½•åœ°æ–¹è¿è¡Œã€‚ä¸ºäº†æ˜ç¡®é¢„æœŸçš„æ•ˆæœï¼Œæœ¬æ–‡æ¡£å°†ä½¿ç”¨ä»¥ä¸‹çº¦å®šã€‚
å¦‚æœå‘½ä»¤ &amp;ldquo;COMMAND&amp;rdquo; æœŸæœ›åœ¨ Pod ä¸­è¿è¡Œï¼Œå¹¶ä¸”äº§ç”Ÿ &amp;ldquo;OUTPUT&amp;rdquo;ï¼š
u@pod$ COMMAND OUTPUT å¦‚æœå‘½ä»¤ &amp;ldquo;COMMAND&amp;rdquo; æœŸæœ›åœ¨ Node ä¸Šè¿è¡Œï¼Œå¹¶ä¸”äº§ç”Ÿ &amp;ldquo;OUTPUT&amp;rdquo;ï¼š
u@node$ COMMAND OUTPUT å¦‚æœå‘½ä»¤æ˜¯ &amp;ldquo;kubectl ARGS&amp;rdquo;ï¼š
$ kubectl ARGS OUTPUT åœ¨ pod ä¸­è¿è¡Œå‘½ä»¤ å¯¹äºè¿™é‡Œçš„è®¸å¤šæ­¥éª¤ï¼Œæ‚¨å¯èƒ½å¸Œæœ›çŸ¥é“è¿è¡Œåœ¨é›†ç¾¤ä¸­çš„ Pod çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆæ ·çš„ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯è¿è¡Œä¸€ä¸ªäº¤äº’å¼çš„ busybox Podï¼š
$ kubectl run -it --rm --restart=Never busybox --image=busybox sh å¦‚æœä½ æ²¡æœ‰çœ‹åˆ°å‘½ä»¤æç¤ºç¬¦ï¼Œè¯·å°è¯•æŒ‰ Enter é”®ã€‚ / # å¦‚æœæ‚¨å·²ç»æœ‰äº†æ‚¨å–œæ¬¢ä½¿ç”¨çš„æ­£åœ¨è¿è¡Œçš„ Podï¼Œåˆ™å¯ä»¥è¿è¡Œä¸€ä¸‹å‘½ä»¤å»ä½¿ç”¨ï¼š
$ kubectl exec &amp;lt;POD-NAME&amp;gt; -c &amp;lt;CONTAINER-NAME&amp;gt; -- &amp;lt;COMMAND&amp;gt; è®¾ç½® ä¸ºäº†å®Œæˆæœ¬æ¬¡æ¼”ç»ƒçš„ç›®çš„ï¼Œæˆ‘ä»¬å…ˆè¿è¡Œå‡ ä¸ª Podã€‚å› ä¸ºå¯èƒ½æ­£åœ¨è°ƒè¯•æ‚¨è‡ªå·±çš„ Serviceï¼Œæ‰€ä»¥ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è‡ªå·±çš„è¯¦ç»†ä¿¡æ¯è¿›è¡Œæ›¿æ¢ï¼Œæˆ–è€…ï¼Œæ‚¨ä¹Ÿå¯ä»¥è·Ÿéšå¹¶å¼€å§‹ä¸‹é¢çš„æ­¥éª¤æ¥è·å¾—ç¬¬äºŒä¸ªæ•°æ®ç‚¹ã€‚</description>
    </item>
    
    <item>
      <title>è°ƒè¯•StatefulSet</title>
      <link>https://lijun.in/tasks/debug-application-cluster/debug-stateful-set/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/debug-stateful-set/</guid>
      <description>æ­¤ä»»åŠ¡å±•ç¤ºå¦‚ä½•è°ƒè¯•StatefulSetã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  ä½ éœ€è¦æœ‰ä¸€ä¸ªKubernetesé›†ç¾¤ï¼Œé€šè¿‡å¿…è¦çš„é…ç½®ä½¿kubectlå‘½ä»¤è¡Œå·¥å…·ä¸æ‚¨çš„é›†ç¾¤è¿›è¡Œé€šä¿¡ã€‚ ä½ åº”è¯¥æœ‰ä¸€ä¸ªè¿è¡Œä¸­çš„StatefulSetï¼Œä»¥ä¾¿ç”¨äºè°ƒè¯•ã€‚  è°ƒè¯•StatefulSet ç”±äºStatefulSetåœ¨åˆ›å»ºæ—¶è®¾ç½®äº†app=myappæ ‡ç­¾ï¼Œåˆ—å‡ºä»…å±äºè¯¥StatefulSetçš„æ‰€æœ‰podæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š
kubectl get pods -l app=myapp å¦‚æœæ‚¨å‘ç°åˆ—å‡ºçš„ä»»ä½•Podsé•¿æ—¶é—´å¤„äºUnknown æˆ–TerminatingçŠ¶æ€ï¼Œå…³äºå¦‚ä½•å¤„ç†å®ƒä»¬çš„è¯´æ˜ä»»åŠ¡,è¯·å‚é˜…åˆ é™¤ StatefulSet Podsã€‚æ‚¨å¯ä»¥å‚è€ƒè°ƒè¯• PodsæŒ‡å—æ¥è°ƒè¯•StatefulSetä¸­çš„å„ä¸ªPodã€‚
StatefulSetsæä¾›è°ƒè¯•æœºåˆ¶ï¼Œå¯ä»¥ä½¿ç”¨æ³¨è§£æ¥æš‚åœæ‰€æœ‰æ§åˆ¶å™¨åœ¨Podä¸Šçš„æ“ä½œã€‚åœ¨ä»»ä½•StatefulSet Podä¸Šè®¾ç½®pod.alpha.kubernetes.io/initializedæ³¨è§£ä¸º&amp;quot;false&amp;quot;å°†æš‚åœ StatefulSetçš„æ‰€æœ‰æ“ä½œã€‚æš‚åœæ—¶ï¼ŒStatefulSetå°†ä¸æ‰§è¡Œä»»ä½•ä¼¸ç¼©æ“ä½œã€‚ä¸€æ—¦è°ƒè¯•é’©å­è®¾ç½®å®Œæˆåï¼Œå°±å¯ä»¥åœ¨StatefulSet podçš„å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤ï¼Œè€Œä¸ä¼šé€ æˆä¼¸ç¼©æ“ä½œçš„å¹²æ‰°ã€‚æ‚¨å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†æ³¨è§£è®¾ç½®ä¸º&amp;quot;false&amp;quot;ï¼š
kubectl annotate pods &amp;lt;pod-name&amp;gt; pod.alpha.kubernetes.io/initialized=&amp;#34;false&amp;#34; --overwrite å½“æ³¨è§£è®¾ç½®ä¸º&amp;quot;false&amp;quot;æ—¶ï¼ŒStatefulSetåœ¨å…¶Podså˜å¾—ä¸å¥åº·æˆ–ä¸å¯ç”¨æ—¶å°†ä¸ä¼šå“åº”ã€‚StatefulSetä¸ä¼šåˆ›å»ºå‰¯æœ¬Podç›´åˆ°æ¯ä¸ªPodä¸Šåˆ é™¤æ³¨è§£æˆ–å°†æ³¨è§£è®¾ç½®ä¸º&amp;quot;true&amp;quot;ã€‚
é€æ­¥åˆå§‹åŒ– åˆ›å»ºStatefulSetä¹‹å‰ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨å’Œä¸Šæ–‡ç›¸åŒçš„æ³¨è§£ï¼Œå³å°†yamlæ–‡ä»¶ä¸­.spec.template.metadata.annotationsé‡Œçš„pod.alpha.kubernetes.io/initializedå­—æ®µè®¾ç½®ä¸º&amp;quot;false&amp;quot;ï¼Œå¯¹ç«æ€æ¡ä»¶çš„StatefulSetè¿›è¡Œè°ƒè¯•ã€‚
apiVersion: apps/v1beta1 kind: StatefulSet metadata: name: my-app spec: serviceName: &amp;#34;my-app&amp;#34; replicas: 3 template: metadata: labels: app: my-app annotations: pod.alpha.kubernetes.io/initialized: &amp;#34;false&amp;#34; ... ... ... è®¾ç½®æ³¨è§£åï¼Œå¦‚æœåˆ›å»ºäº†StatefulSetï¼Œæ‚¨å¯ä»¥ç­‰å¾…æ¯ä¸ªPodæ¥éªŒè¯å®ƒæ˜¯å¦æ­£ç¡®åˆå§‹åŒ–ã€‚StatefulSetå°†ä¸ä¼šåˆ›å»ºä»»ä½•åç»­çš„Podsï¼Œç›´åˆ°åœ¨å·²ç»åˆ›å»ºçš„æ¯ä¸ªPodä¸Šå°†è°ƒè¯•æ³¨è§£è®¾ç½®ä¸º&amp;quot;true&amp;quot; (æˆ–åˆ é™¤)ã€‚ æ‚¨å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†æ³¨è§£è®¾ç½®ä¸º&amp;quot;true&amp;quot;ï¼š
kubectl annotate pods &amp;lt;pod-name&amp;gt; pod.alpha.kubernetes.io/initialized=&amp;#34;true&amp;#34; --overwrite . heading &amp;ldquo;whatsnext&amp;rdquo; %}} ç‚¹å‡»é“¾æ¥è°ƒè¯•init-containerï¼Œäº†è§£æ›´å¤šä¿¡æ¯ã€‚</description>
    </item>
    
    <item>
      <title>èµ„æºæŒ‡æ ‡ç®¡é“</title>
      <link>https://lijun.in/tasks/debug-application-cluster/resource-metrics-pipeline/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/resource-metrics-pipeline/</guid>
      <description>ä» Kubernetes 1.8å¼€å§‹ï¼Œèµ„æºä½¿ç”¨æŒ‡æ ‡ï¼Œä¾‹å¦‚å®¹å™¨ CPU å’Œå†…å­˜ä½¿ç”¨ç‡ï¼Œå¯é€šè¿‡ Metrics API åœ¨ Kubernetes ä¸­è·å¾—ã€‚è¿™äº›æŒ‡æ ‡å¯ä»¥ç›´æ¥è¢«ç”¨æˆ·è®¿é—®ï¼Œæ¯”å¦‚ä½¿ç”¨kubectl topå‘½ä»¤è¡Œï¼Œæˆ–è€…è¿™äº›æŒ‡æ ‡ç”±é›†ç¾¤ä¸­çš„æ§åˆ¶å™¨ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼ŒHorizontal Pod Autoscalerï¼Œä½¿ç”¨è¿™äº›æŒ‡æ ‡æ¥åšå†³ç­–ã€‚
Metrics API é€šè¿‡ Metrics APIï¼Œæ‚¨å¯ä»¥è·å¾—æŒ‡å®šèŠ‚ç‚¹æˆ– pod å½“å‰ä½¿ç”¨çš„èµ„æºé‡ã€‚æ­¤ API ä¸å­˜å‚¨æŒ‡æ ‡å€¼ï¼Œå› æ­¤æƒ³è¦è·å–æŸä¸ªæŒ‡å®šèŠ‚ç‚¹10åˆ†é’Ÿå‰çš„èµ„æºä½¿ç”¨é‡æ˜¯ä¸å¯èƒ½çš„ã€‚
æ­¤ API ä¸å…¶ä»– API æ²¡æœ‰åŒºåˆ«ï¼š
 æ­¤ API å’Œå…¶å®ƒ Kubernetes API ä¸€èµ·ä½äºåŒä¸€ç«¯ç‚¹ï¼ˆendpointï¼‰ä¹‹ä¸‹ï¼Œæ˜¯å¯å‘ç°çš„ï¼Œè·¯å¾„ä¸º/apis/metrics.k8s.io/ å®ƒæä¾›ç›¸åŒçš„å®‰å…¨æ€§ã€å¯æ‰©å±•æ€§å’Œå¯é æ€§ä¿è¯  Metrics API åœ¨k8s.io/metrics ä»“åº“ä¸­å®šä¹‰ã€‚æ‚¨å¯ä»¥åœ¨é‚£é‡Œæ‰¾åˆ°æœ‰å…³ Metrics API çš„æ›´å¤šä¿¡æ¯ã€‚
. note &amp;gt;}} Metrics API éœ€è¦åœ¨é›†ç¾¤ä¸­éƒ¨ç½² Metrics Serverã€‚å¦åˆ™å®ƒå°†ä¸å¯ç”¨ã€‚ . /note &amp;gt;}}
Metrics Server Metrics Serveræ˜¯é›†ç¾¤èŒƒå›´èµ„æºä½¿ç”¨æ•°æ®çš„èšåˆå™¨ã€‚ ä» Kubernetes 1.8å¼€å§‹ï¼Œå®ƒä½œä¸º Deployment å¯¹è±¡ï¼Œè¢«é»˜è®¤éƒ¨ç½²åœ¨ç”±kube-up.shè„šæœ¬åˆ›å»ºçš„é›†ç¾¤ä¸­ã€‚ å¦‚æœæ‚¨ä½¿ç”¨ä¸åŒçš„ Kubernetes å®‰è£…æ–¹æ³•ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æä¾›çš„deployment yamlsæ¥éƒ¨ç½²ã€‚å®ƒåœ¨ Kubernetes 1.7+ä¸­å¾—åˆ°æ”¯æŒï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ã€‚
Metric server ä»æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„ Kubelet å…¬å¼€çš„ Summary API ä¸­é‡‡é›†æŒ‡æ ‡ä¿¡æ¯ã€‚</description>
    </item>
    
    <item>
      <title>èµ„æºç›‘æ§å·¥å…·</title>
      <link>https://lijun.in/tasks/debug-application-cluster/resource-usage-monitoring/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/resource-usage-monitoring/</guid>
      <description>è¦æ‰©å±•åº”ç”¨ç¨‹åºå¹¶æä¾›å¯é çš„æœåŠ¡ï¼Œæ‚¨éœ€è¦äº†è§£åº”ç”¨ç¨‹åºåœ¨éƒ¨ç½²æ—¶çš„è¡Œä¸ºã€‚ æ‚¨å¯ä»¥é€šè¿‡æ£€æµ‹å®¹å™¨æ£€æŸ¥ Kubernetes é›†ç¾¤ä¸­çš„åº”ç”¨ç¨‹åºæ€§èƒ½ï¼Œpods, æœåŠ¡å’Œæ•´ä¸ªé›†ç¾¤çš„ç‰¹å¾ã€‚ Kubernetes åœ¨æ¯ä¸ªçº§åˆ«ä¸Šæä¾›æœ‰å…³åº”ç”¨ç¨‹åºèµ„æºä½¿ç”¨æƒ…å†µçš„è¯¦ç»†ä¿¡æ¯ã€‚ æ­¤ä¿¡æ¯ä½¿æ‚¨å¯ä»¥è¯„ä¼°åº”ç”¨ç¨‹åºçš„æ€§èƒ½ï¼Œä»¥åŠåœ¨ä½•å¤„å¯ä»¥æ¶ˆé™¤ç“¶é¢ˆä»¥æé«˜æ•´ä½“æ€§èƒ½ã€‚
åœ¨ Kubernetes ä¸­ï¼Œåº”ç”¨ç¨‹åºç›‘æ§ä¸ä¾èµ–å•ä¸ªç›‘æ§è§£å†³æ–¹æ¡ˆã€‚ åœ¨æ–°é›†ç¾¤ä¸Šï¼Œæ‚¨å¯ä»¥ä½¿ç”¨èµ„æºåº¦é‡æˆ–å®Œæ•´åº¦é‡ç®¡é“æ¥æ”¶é›†ç›‘è§†ç»Ÿè®¡ä¿¡æ¯ã€‚
èµ„æºåº¦é‡ç®¡é“ èµ„æºæŒ‡æ ‡ç®¡é“æä¾›äº†ä¸€ç»„ä¸é›†ç¾¤ç»„ä»¶ï¼Œä¾‹å¦‚[Horizontal Pod Autoscaler]æ§åˆ¶å™¨(/docs/tasks/run-application/horizontal-pod-autoscale)ï¼Œä»¥åŠ kubectl top å®ç”¨ç¨‹åºç›¸å…³çš„æœ‰é™åº¦é‡ã€‚ è¿™äº›æŒ‡æ ‡æ˜¯ç”±è½»é‡çº§çš„ã€çŸ­æœŸå†…å­˜åº¦é‡æœåŠ¡å™¨æ”¶é›†çš„ï¼Œé€šè¿‡ metrics.k8s.io å…¬å¼€ã€‚
åº¦é‡æœåŠ¡å™¨å‘ç°é›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¹¶ä¸”æŸ¥è¯¢æ¯ä¸ªèŠ‚ç‚¹çš„kubeletä»¥è·å– CPU å’Œå†…å­˜ä½¿ç”¨æƒ…å†µã€‚ Kubelet å……å½“ Kubernetes ä¸»èŠ‚ç‚¹ä¸èŠ‚ç‚¹ä¹‹é—´çš„æ¡¥æ¢ï¼Œç®¡ç†æœºå™¨ä¸Šè¿è¡Œçš„ Pod å’Œå®¹å™¨ã€‚ kubelet å°†æ¯ä¸ª pod è½¬æ¢ä¸ºå…¶ç»„æˆçš„å®¹å™¨ï¼Œå¹¶åœ¨å®¹å™¨è¿è¡Œæ—¶é€šè¿‡å®¹å™¨è¿è¡Œæ—¶ç•Œé¢è·å–å„ä¸ªå®¹å™¨ä½¿ç”¨æƒ…å†µç»Ÿè®¡ä¿¡æ¯ã€‚ kubelet ä»é›†æˆçš„ cAdvisor è·å–æ­¤ä¿¡æ¯ï¼Œä»¥è¿›è¡Œæ—§å¼ Docker é›†æˆã€‚ ç„¶åï¼Œå®ƒé€šè¿‡ metrics-server Resource Metrics API å…¬å¼€èšåˆçš„ pod èµ„æºä½¿ç”¨æƒ…å†µç»Ÿè®¡ä¿¡æ¯ã€‚ è¯¥ API åœ¨ kubelet çš„ç»è¿‡èº«ä»½éªŒè¯å’Œåªè¯»çš„ç«¯å£ä¸Šçš„/metrics/resource/v1beta1ä¸­æä¾›ã€‚
å®Œæ•´åº¦é‡ç®¡é“ ä¸€ä¸ªå®Œæ•´åº¦é‡ç®¡é“å¯ä»¥è®©æ‚¨è®¿é—®æ›´ä¸°å¯Œçš„åº¦é‡ã€‚ Kubernetes è¿˜å¯ä»¥æ ¹æ®é›†ç¾¤çš„å½“å‰çŠ¶æ€ï¼Œä½¿ç”¨ Pod æ°´å¹³è‡ªåŠ¨æ‰©ç¼©å™¨ç­‰æœºåˆ¶ï¼Œé€šè¿‡è‡ªåŠ¨è°ƒç”¨æ‰©å±•æˆ–è°ƒæ•´é›†ç¾¤æ¥å“åº”è¿™äº›åº¦é‡ã€‚ ç›‘æ§ç®¡é“ä» kubelet è·å–åº¦é‡ï¼Œç„¶åé€šè¿‡é€‚é…å™¨å°†å®ƒä»¬å…¬å¼€ç»™ Kubernetesï¼Œæ–¹æ³•æ˜¯å®ç° custom.metrics.k8s.io æˆ– external.metrics.k8s.io APIã€‚
Prometheusï¼Œä¸€ä¸ª CNCF é¡¹ç›®ï¼Œå¯ä»¥åŸç”Ÿç›‘æ§ Kubernetesã€èŠ‚ç‚¹å’Œ Prometheus æœ¬èº«ã€‚ å®Œæ•´åº¦é‡ç®¡é“é¡¹ç›®ä¸å±äº CNCF çš„ä¸€éƒ¨åˆ†ï¼Œä¸åœ¨ Kubernetes æ–‡æ¡£çš„èŒƒå›´ä¹‹å†…ã€‚</description>
    </item>
    
    <item>
      <title>è¿è¡Œ ZooKeeperï¼Œ ä¸€ä¸ª CP åˆ†å¸ƒå¼ç³»ç»Ÿ</title>
      <link>https://lijun.in/tutorials/stateful-application/zookeeper/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tutorials/stateful-application/zookeeper/</guid>
      <description>æœ¬æ•™ç¨‹å±•ç¤ºäº†åœ¨ Kubernetes ä¸Šä½¿ç”¨ PodDisruptionBudgets å’Œ PodAntiAffinity ç‰¹æ€§è¿è¡Œ Apache Zookeeperã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} åœ¨å¼€å§‹æœ¬æ•™ç¨‹å‰ï¼Œä½ åº”è¯¥ç†Ÿæ‚‰ä»¥ä¸‹ Kubernetes æ¦‚å¿µã€‚
 Pods Cluster DNS Headless Services PersistentVolumes [PersistentVolume Provisioning](http://releases.k8s.io/. param &amp;ldquo;githubbranch&amp;rdquo; &amp;gt;}}/examples/persistent-volume-provisioning/) ConfigMaps StatefulSets PodDisruptionBudgets PodAntiAffinity kubectl CLI  ä½ éœ€è¦ä¸€ä¸ªè‡³å°‘åŒ…å«å››ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤ï¼Œæ¯ä¸ªèŠ‚ç‚¹è‡³å°‘ 2 CPUs å’Œ 4 GiB å†…å­˜ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ä½ å°†ä¼š cordon å’Œ drain é›†ç¾¤çš„èŠ‚ç‚¹ã€‚è¿™æ„å‘³ç€é›†ç¾¤èŠ‚ç‚¹ä¸Šæ‰€æœ‰çš„ Pods å°†ä¼šè¢«ç»ˆæ­¢å¹¶ç§»é™¤ã€‚è¿™äº›èŠ‚ç‚¹ä¹Ÿä¼šæš‚æ—¶å˜ä¸ºä¸å¯è°ƒåº¦ã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ä½ åº”è¯¥ä½¿ç”¨ä¸€ä¸ªç‹¬å çš„é›†ç¾¤ï¼Œæˆ–è€…ä¿è¯ä½ é€ æˆçš„å¹²æ‰°ä¸ä¼šå½±å“å…¶å®ƒç§Ÿæˆ·ã€‚
æœ¬æ•™ç¨‹å‡è®¾ä½ çš„é›†ç¾¤é…ç½®ä¸ºåŠ¨æ€çš„æä¾› PersistentVolumesã€‚å¦‚æœä½ çš„é›†ç¾¤æ²¡æœ‰é…ç½®æˆè¿™æ ·ï¼Œåœ¨å¼€å§‹æœ¬æ•™ç¨‹å‰ï¼Œä½ éœ€è¦æ‰‹åŠ¨å‡†å¤‡ä¸‰ä¸ª 20 GiB çš„å·ã€‚
. heading &amp;ldquo;objectives&amp;rdquo; %}} åœ¨å­¦ä¹ æœ¬æ•™ç¨‹åï¼Œä½ å°†ç†Ÿæ‚‰ä¸‹åˆ—å†…å®¹ã€‚
 å¦‚ä½•ä½¿ç”¨ StatefulSet éƒ¨ç½²ä¸€ä¸ª ZooKeeper ensembleã€‚ å¦‚ä½•ä½¿ç”¨ ConfigMaps ä¸€è‡´æ€§é…ç½® ensembleã€‚ å¦‚ä½•åœ¨ ensemble ä¸­ åˆ†å¸ƒ ZooKeeper æœåŠ¡çš„éƒ¨ç½²ã€‚ å¦‚ä½•åœ¨è®¡åˆ’ç»´æŠ¤ä¸­ä½¿ç”¨ PodDisruptionBudgets ç¡®ä¿æœåŠ¡å¯ç”¨æ€§ã€‚  ZooKeeper åŸºç¡€ Apache ZooKeeper æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„å¼€æºåè°ƒæœåŠ¡ï¼Œç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿã€‚ZooKeeper å…è®¸ä½ è¯»å–ã€å†™å…¥æ•°æ®å’Œå‘ç°æ•°æ®æ›´æ–°ã€‚æ•°æ®æŒ‰å±‚æ¬¡ç»“æ„ç»„ç»‡åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå¹¶å¤åˆ¶åˆ° ensembleï¼ˆä¸€ä¸ª ZooKeeper æœåŠ¡çš„é›†åˆï¼‰ ä¸­æ‰€æœ‰çš„ ZooKeeper æœåŠ¡ã€‚å¯¹æ•°æ®çš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­çš„å’Œé¡ºåºä¸€è‡´çš„ã€‚ZooKeeper é€šè¿‡ Zab ä¸€è‡´æ€§åè®®åœ¨ ensemble çš„æ‰€æœ‰æœåŠ¡ä¹‹é—´å¤åˆ¶ä¸€ä¸ªçŠ¶æ€æœºæ¥ç¡®ä¿è¿™ä¸ªç‰¹æ€§ã€‚</description>
    </item>
    
    <item>
      <title>è¿è¡Œä¸€ä¸ªå•å®ä¾‹æœ‰çŠ¶æ€åº”ç”¨</title>
      <link>https://lijun.in/tasks/run-application/run-single-instance-stateful-application/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/run-application/run-single-instance-stateful-application/</guid>
      <description>æœ¬æ–‡ä»‹ç»åœ¨ Kubernetes ä¸­ä½¿ç”¨ PersistentVolume å’Œ Deployment å¦‚ä½•è¿è¡Œä¸€ä¸ªå•å®ä¾‹æœ‰çŠ¶æ€åº”ç”¨. è¯¥åº”ç”¨æ˜¯ MySQL.
. heading &amp;ldquo;objectives&amp;rdquo; %}}  åœ¨ç¯å¢ƒä¸­é€šè¿‡ç£ç›˜åˆ›å»ºä¸€ä¸ªPersistentVolume. åˆ›å»ºä¸€ä¸ªMySQL Deployment. åœ¨é›†ç¾¤å†…ä»¥ä¸€ä¸ªå·²çŸ¥çš„ DNS åå°† MySQL æš´éœ²ç»™å…¶ä»– pods.  . heading &amp;ldquo;prerequisites&amp;rdquo; %}}   . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
  . include &amp;ldquo;default-storage-class-prereqs.md&amp;rdquo; &amp;gt;}}
  éƒ¨ç½²MySQL æ³¨æ„: åœ¨é…ç½®çš„ yaml æ–‡ä»¶ä¸­å®šä¹‰å¯†ç çš„åšæ³•æ˜¯ä¸å®‰å…¨çš„. å…·ä½“å®‰å…¨è§£å†³æ–¹æ¡ˆè¯·å‚è€ƒ Kubernetes Secrets.
. codenew file=&amp;quot;application/mysql/mysql-deployment.yaml&amp;rdquo; &amp;gt;}} . codenew file=&amp;quot;application/mysql/mysql-pv.yaml&amp;rdquo; &amp;gt;}}
  éƒ¨ç½² YAML æ–‡ä»¶ä¸­å®šä¹‰çš„ PV å’Œ PVCï¼š
 kubectl apply -f https://k8s.</description>
    </item>
    
    <item>
      <title>é€‚ç”¨äº Docker ç”¨æˆ·çš„ kubectl</title>
      <link>https://lijun.in/reference/kubectl/docker-cli-to-kubectl/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/reference/kubectl/docker-cli-to-kubectl/</guid>
      <description>æ‚¨å¯ä»¥ä½¿ç”¨ Kubernetes å‘½ä»¤è¡Œå·¥å…· kubectl ä¸ API æœåŠ¡å™¨è¿›è¡Œäº¤äº’ã€‚å¦‚æœæ‚¨ç†Ÿæ‚‰ Docker å‘½ä»¤è¡Œå·¥å…·ï¼Œåˆ™ä½¿ç”¨ kubectl éå¸¸ç®€å•ã€‚ä½†æ˜¯ï¼Œdocker å‘½ä»¤å’Œ kubectl å‘½ä»¤ä¹‹é—´æœ‰ä¸€äº›åŒºåˆ«ã€‚ä»¥ä¸‹æ˜¾ç¤ºäº† docker å­å‘½ä»¤ï¼Œå¹¶æè¿°äº†ç­‰æ•ˆçš„ kubectl å‘½ä»¤ã€‚
docker run è¦è¿è¡Œ nginx éƒ¨ç½²å¹¶å°†å…¶æš´éœ²ï¼Œè¯·å‚è§ kubectl è¿è¡Œã€‚
docker:
docker run -d --restart=always -e DOMAIN=cluster --name nginx-app -p 80:80 nginx 55c103fa129692154a7652490236fee9be47d70a8dd562281ae7d2f9a339a6db docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 55c103fa1296 nginx &amp;quot;nginx -g &#39;daemon ofâ€¦&amp;quot; 9 seconds ago Up 9 seconds 0.0.0.0:80-&amp;gt;80/tcp nginx-app kubectl:
# å¯åŠ¨è¿è¡Œ nginx çš„ Pod kubectl run --image=nginx nginx-app --port=80 --env=&amp;#34;DOMAIN=cluster&amp;#34; deployment &amp;quot;nginx-app&amp;quot; created note &amp;gt;}}</description>
    </item>
    
    <item>
      <title>é€šè¿‡å‘½åç©ºé—´å…±äº«é›†ç¾¤</title>
      <link>https://lijun.in/tasks/administer-cluster/namespaces/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/namespaces/</guid>
      <description>æœ¬é¡µå±•ç¤ºäº†å¦‚ä½•æŸ¥çœ‹ã€ä½¿ç”¨å’Œåˆ é™¤. glossary_tooltip text=&amp;quot;namespaces&amp;rdquo; term_id=&amp;quot;namespace&amp;rdquo; &amp;gt;}}ã€‚æœ¬é¡µåŒæ—¶å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Kubernetes å‘½åç©ºé—´å»ç»†åˆ†é›†ç¾¤ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  æ‚¨å·²æ‹¥æœ‰ä¸€ä¸ª é…ç½®å¥½çš„ Kubernetes é›†ç¾¤. æ‚¨å·²å¯¹ Kubernetes çš„ Pods, Services, å’Œ Deployments æœ‰åŸºæœ¬ç†è§£ã€‚  æŸ¥çœ‹å‘½åç©ºé—´  åˆ—å‡ºé›†ç¾¤ä¸­ç°æœ‰çš„å‘½åç©ºé—´ï¼š  kubectl get namespaces NAME STATUS AGE default Active 11d kube-system Active 11d kube-public Active 11d åˆå§‹çŠ¶æ€ä¸‹ï¼ŒKubernetes å…·æœ‰ä¸‰ä¸ªåå­—ç©ºé—´ï¼š
 default æ— å‘½åç©ºé—´å¯¹è±¡çš„é»˜è®¤å‘½åç©ºé—´ kube-system ç”± Kubernetes ç³»ç»Ÿåˆ›å»ºçš„å¯¹è±¡çš„å‘½åç©ºé—´ kube-public è‡ªåŠ¨åˆ›å»ºä¸”è¢«æ‰€æœ‰ç”¨æˆ·å¯è¯»çš„å‘½åç©ºé—´ï¼ˆåŒ…æ‹¬æœªç»èº«ä»½è®¤è¯çš„ï¼‰ã€‚æ­¤å‘½åç©ºé—´é€šå¸¸åœ¨æŸäº›èµ„æºåœ¨æ•´ä¸ªé›†ç¾¤ä¸­å¯è§ä¸”å¯å…¬å¼€è¯»å–æ—¶è¢«é›†ç¾¤ä½¿ç”¨ã€‚æ­¤å‘½åç©ºé—´çš„å…¬å…±æ–¹é¢åªæ˜¯ä¸€ä¸ªçº¦å®šï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¿…è¦æ¡ä»¶ã€‚  æ‚¨è¿˜å¯ä»¥é€šè¿‡ä¸‹åˆ—å‘½ä»¤è·å–ç‰¹å®šå‘½åç©ºé—´çš„æ‘˜è¦ï¼š
kubectl get namespaces &amp;lt;name&amp;gt; æˆ–è·å–è¯¦ç»†ä¿¡æ¯ï¼š
kubectl describe namespaces &amp;lt;name&amp;gt; Name: default Labels: &amp;lt;none&amp;gt; Annotations: &amp;lt;none&amp;gt; Status: Active No resource quota.</description>
    </item>
    
    <item>
      <title>é€šè¿‡æ–‡ä»¶å°†Podä¿¡æ¯å‘ˆç°ç»™å®¹å™¨</title>
      <link>https://lijun.in/tasks/inject-data-application/downward-api-volume-expose-pod-information/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/inject-data-application/downward-api-volume-expose-pod-information/</guid>
      <description>æ­¤é¡µé¢æè¿°Podå¦‚ä½•ä½¿ç”¨DownwardAPIVolumeFileæŠŠè‡ªå·±çš„ä¿¡æ¯å‘ˆç°ç»™podä¸­è¿è¡Œçš„å®¹å™¨ã€‚DownwardAPIVolumeFileå¯ä»¥å‘ˆç°podçš„å­—æ®µå’Œå®¹å™¨å­—æ®µã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
Downward API æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å°†Podå’ŒContainerå­—æ®µå‘ˆç°ç»™è¿è¡Œä¸­çš„å®¹å™¨ï¼š
 ç¯å¢ƒå˜é‡ DownwardAPIVolumeFile  è¿™ä¸¤ç§å‘ˆç°Podå’ŒContainerå­—æ®µçš„æ–¹å¼éƒ½ç§°ä¸ºDownward APIã€‚
å­˜å‚¨Podå­—æ®µ åœ¨è¿™ä¸ªç»ƒä¹ ä¸­ï¼Œä½ å°†åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸€ä¸ªå®¹å™¨çš„podã€‚è¿™æ˜¯è¯¥podçš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;pods/inject/dapi-volume.yaml&amp;rdquo; &amp;gt;}}
åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°Podæœ‰ä¸€ä¸ªdownwardAPIç±»å‹çš„Volumeï¼Œå¹¶ä¸”æŒ‚è½½åˆ°å®¹å™¨ä¸­çš„/etcã€‚
æŸ¥çœ‹downwardAPIä¸‹é¢çš„itemsæ•°ç»„ã€‚æ¯ä¸ªæ•°ç»„å…ƒç´ éƒ½æ˜¯ä¸€ä¸ª[DownwardAPIVolumeFile](/docs/resources-reference/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#downwardapivolumefile-v1-core)ã€‚ ç¬¬ä¸€ä¸ªå…ƒç´ æŒ‡ç¤ºPodçš„metadata.labelså­—æ®µçš„å€¼ä¿å­˜åœ¨åä¸ºlabelsçš„æ–‡ä»¶ä¸­ã€‚ ç¬¬äºŒä¸ªå…ƒç´ æŒ‡ç¤ºPodçš„annotationså­—æ®µçš„å€¼ä¿å­˜åœ¨åä¸ºannotationsçš„æ–‡ä»¶ä¸­ã€‚
. note &amp;gt;}} æœ¬ç¤ºä¾‹ä¸­çš„å­—æ®µæ˜¯Podå­—æ®µï¼Œä¸æ˜¯Podä¸­å®¹å™¨çš„å­—æ®µã€‚ . /note &amp;gt;}}
åˆ›å»º Podï¼š
kubectl apply -f https://k8s.io/examples/pods/inject/dapi-volume.yaml éªŒè¯Podä¸­çš„å®¹å™¨è¿è¡Œæ­£å¸¸ï¼š
kubectl get pods æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—ï¼š
kubectl logs kubernetes-downwardapi-volume-example è¾“å‡ºæ˜¾ç¤º labels å’Œ annotations æ–‡ä»¶çš„å†…å®¹ï¼š
cluster=&amp;#34;test-cluster1&amp;#34; rack=&amp;#34;rack-22&amp;#34; zone=&amp;#34;us-est-coast&amp;#34; build=&amp;#34;two&amp;#34; builder=&amp;#34;john-doe&amp;#34; è¿›å…¥Podä¸­è¿è¡Œçš„å®¹å™¨ï¼Œæ‰“å¼€ä¸€ä¸ªshellï¼š
kubectl exec -it kubernetes-downwardapi-volume-example -- sh åœ¨è¯¥shellä¸­ï¼ŒæŸ¥çœ‹labelsæ–‡ä»¶ï¼š</description>
    </item>
    
    <item>
      <title>é€šè¿‡ç¯å¢ƒå˜é‡å°†Podä¿¡æ¯å‘ˆç°ç»™å®¹å™¨</title>
      <link>https://lijun.in/tasks/inject-data-application/environment-variable-expose-pod-information/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/inject-data-application/environment-variable-expose-pod-information/</guid>
      <description>æ­¤é¡µé¢æ˜¾ç¤ºäº†Podå¦‚ä½•ä½¿ç”¨ç¯å¢ƒå˜é‡æŠŠè‡ªå·±çš„ä¿¡æ¯å‘ˆç°ç»™podä¸­è¿è¡Œçš„å®¹å™¨ã€‚ç¯å¢ƒå˜é‡å¯ä»¥å‘ˆç°podçš„å­—æ®µå’Œå®¹å™¨å­—æ®µã€‚
æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å°†Podå’ŒContainerå­—æ®µå‘ˆç°ç»™è¿è¡Œä¸­çš„å®¹å™¨ï¼š ç¯å¢ƒå˜é‡ å’Œ[DownwardAPIVolumeFiles](/docs/resources-reference/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#downwardapivolumefile-v1-core). è¿™ä¸¤ç§å‘ˆç°Podå’ŒContainerå­—æ®µçš„æ–¹å¼éƒ½ç§°ä¸ºDownward APIã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
Downward API æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å°†Podå’ŒContainerå­—æ®µå‘ˆç°ç»™è¿è¡Œä¸­çš„å®¹å™¨ï¼š
 ç¯å¢ƒå˜é‡ [DownwardAPIVolumeFiles](/docs/resources-reference/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#downwardapivolumefile-v1-core)  è¿™ä¸¤ç§å‘ˆç°Podå’ŒContainerå­—æ®µçš„æ–¹å¼éƒ½ç§°ä¸ºDownward APIã€‚
ç”¨Podå­—æ®µä½œä¸ºç¯å¢ƒå˜é‡çš„å€¼ åœ¨è¿™ä¸ªç»ƒä¹ ä¸­ï¼Œä½ å°†åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸€ä¸ªå®¹å™¨çš„podã€‚è¿™æ˜¯è¯¥podçš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;pods/inject/dapi-envars-pod.yaml&amp;rdquo; &amp;gt;}}
è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°äº”ä¸ªç¯å¢ƒå˜é‡ã€‚envå­—æ®µæ˜¯ä¸€ä¸ª[EnvVars](/docs/resources-reference/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#envvar-v1-core)ç±»å‹çš„æ•°ç»„ã€‚ æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æŒ‡å®šMY_NODE_NAMEè¿™ä¸ªç¯å¢ƒå˜é‡ä»Podçš„spec.nodeNameå­—æ®µè·å–å˜é‡å€¼ã€‚åŒæ ·ï¼Œå…¶å®ƒç¯å¢ƒå˜é‡ä¹Ÿæ˜¯ä»Podçš„å­—æ®µè·å–å®ƒä»¬çš„å˜é‡å€¼ã€‚
. note &amp;gt;}} æœ¬ç¤ºä¾‹ä¸­çš„å­—æ®µæ˜¯Podå­—æ®µï¼Œä¸æ˜¯Podä¸­å®¹å™¨çš„å­—æ®µã€‚ . /note &amp;gt;}}
åˆ›å»ºPodï¼š
kubectl apply -f https://k8s.io/examples/pods/inject/dapi-envars-pod.yaml éªŒè¯Podä¸­çš„å®¹å™¨è¿è¡Œæ­£å¸¸ï¼š
kubectl get pods æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼š
kubectl logs dapi-envars-fieldref è¾“å‡ºä¿¡æ¯æ˜¾ç¤ºäº†æ‰€é€‰æ‹©çš„ç¯å¢ƒå˜é‡çš„å€¼ï¼š
minikube dapi-envars-fieldref default 172.17.0.4 default è¦äº†è§£ä¸ºä»€ä¹ˆè¿™äº›å€¼åœ¨æ—¥å¿—ä¸­ï¼Œè¯·æŸ¥çœ‹é…ç½®æ–‡ä»¶ä¸­çš„command å’Œ argså­—æ®µã€‚ å½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œå®ƒå°†äº”ä¸ªç¯å¢ƒå˜é‡çš„å€¼å†™å…¥stdoutã€‚æ¯åç§’é‡å¤æ‰§è¡Œä¸€æ¬¡ã€‚</description>
    </item>
    
    <item>
      <title>é€šè¿‡é…ç½®æ–‡ä»¶è®¾ç½® Kubelet å‚æ•°</title>
      <link>https://lijun.in/tasks/administer-cluster/kubelet-config-file/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/kubelet-config-file/</guid>
      <description>. feature-state state=&amp;quot;beta&amp;rdquo; &amp;gt;}}
é€šè¿‡ä¿å­˜åœ¨ç¡¬ç›˜çš„é…ç½®æ–‡ä»¶è®¾ç½® Kubelet çš„é…ç½®å‚æ•°å­é›†ï¼Œå¯ä»¥ä½œä¸ºå‘½ä»¤è¡Œå‚æ•°çš„æ›¿ä»£ã€‚æ­¤åŠŸèƒ½åœ¨ v1.10 ä¸­ä¸º beta ç‰ˆã€‚
å»ºè®®é€šè¿‡é…ç½®æ–‡ä»¶çš„æ–¹å¼æä¾›å‚æ•°ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥ç®€åŒ–èŠ‚ç‚¹éƒ¨ç½²å’Œé…ç½®ç®¡ç†ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  éœ€è¦å®‰è£… 1.10 æˆ–æ›´é«˜ç‰ˆæœ¬çš„ Kubelet äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ‰èƒ½å®ç° beta åŠŸèƒ½ã€‚  åˆ›å»ºé…ç½®æ–‡ä»¶ KubeletConfiguration ç»“æ„ä½“å®šä¹‰äº†å¯ä»¥é€šè¿‡æ–‡ä»¶é…ç½®çš„ Kubelet é…ç½®å­é›†ï¼Œè¯¥ç»“æ„ä½“åœ¨ [è¿™é‡Œï¼ˆv1beta1ï¼‰](https://github.com/kubernetes/kubernetes/blob/. param &amp;ldquo;docsbranch&amp;rdquo; &amp;gt;}}/staging/src/k8s.io/kubelet/config/v1beta1/types.go) å¯ä»¥æ‰¾åˆ°, é…ç½®æ–‡ä»¶å¿…é¡»æ˜¯è¿™ä¸ªç»“æ„ä½“ä¸­å‚æ•°çš„ JSON æˆ– YAML è¡¨ç°å½¢å¼ã€‚
åœ¨å•ç‹¬çš„æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸º kubelet çš„æ–‡ä»¶ï¼Œå¹¶ä¿è¯ Kubelet å¯ä»¥è¯»å–è¯¥æ–‡ä»¶å¤¹åŠæ–‡ä»¶ã€‚æ‚¨åº”è¯¥åœ¨è¿™ä¸ª kubelet æ–‡ä»¶ä¸­ç¼–å†™ Kubelet é…ç½®ã€‚
è¿™æ˜¯ä¸€ä¸ª Kubelet é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š
kind: KubeletConfiguration apiVersion: kubelet.config.k8s.io/v1beta1 evictionHard: memory.available: &amp;quot;200Mi&amp;quot; åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­, å½“å¯ç”¨å†…å­˜ä½äº200Mi æ—¶, Kubelet å°†ä¼šå¼€å§‹é©±é€ Podsã€‚ æ²¡æœ‰å£°æ˜çš„å…¶ä½™é…ç½®é¡¹éƒ½å°†ä½¿ç”¨é»˜è®¤å€¼, å‘½ä»¤è¡Œä¸­çš„ flags å°†ä¼šè¦†ç›–é…ç½®æ–‡ä»¶ä¸­çš„å¯¹åº”å€¼ã€‚
ä½œä¸ºä¸€ä¸ªå°æŠ€å·§ï¼Œæ‚¨å¯ä»¥ä»æ´»åŠ¨èŠ‚ç‚¹ç”Ÿæˆé…ç½®æ–‡ä»¶ï¼Œç›¸å…³æ–¹æ³•è¯·æŸ¥çœ‹ é‡æ–°é…ç½®æ´»åŠ¨é›†ç¾¤èŠ‚ç‚¹çš„ Kubeletã€‚</description>
    </item>
    
    <item>
      <title>é…ç½® API å¯¹è±¡é…é¢</title>
      <link>https://lijun.in/tasks/administer-cluster/quota-api-object/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/quota-api-object/</guid>
      <description>æœ¬æ–‡è®¨è®ºå¦‚ä½•ä¸º API å¯¹è±¡é…ç½®é…é¢ï¼ŒåŒ…æ‹¬ PersistentVolumeClaims å’Œ Servicesã€‚ é…é¢é™åˆ¶äº†å¯ä»¥åœ¨å‘½åç©ºé—´ä¸­åˆ›å»ºçš„ç‰¹å®šç±»å‹å¯¹è±¡çš„æ•°é‡ã€‚ æ‚¨å¯ä»¥åœ¨ [ResourceQuota](/docs/reference/generated/kubernetes-api/. param &amp;ldquo;version&amp;rdquo; &amp;gt;}}/#resourcequota-v1-core) å¯¹è±¡ä¸­æŒ‡å®šé…é¢ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
åˆ›å»ºå‘½åç©ºé—´ åˆ›å»ºä¸€ä¸ªå‘½åç©ºé—´ä»¥ä¾¿æœ¬ä¾‹ä¸­åˆ›å»ºçš„èµ„æºå’Œé›†ç¾¤ä¸­çš„å…¶ä½™éƒ¨åˆ†ç›¸éš”ç¦»ã€‚
kubectl create namespace quota-object-example åˆ›å»º ResourceQuota ä¸‹é¢æ˜¯ä¸€ä¸ª ResourceQuota å¯¹è±¡çš„é…ç½®æ–‡ä»¶ï¼š
. codenew file=&amp;quot;admin/resource/quota-objects.yaml&amp;rdquo; &amp;gt;}}
åˆ›å»º ResourceQuota
kubectl create -f https://k8s.io/examples/admin/resource/quota-objects.yaml --namespace=quota-object-example æŸ¥çœ‹ ResourceQuota çš„è¯¦ç»†ä¿¡æ¯ï¼š
kubectl get resourcequota object-quota-demo --namespace=quota-object-example --output=yaml è¾“å‡ºç»“æœè¡¨æ˜åœ¨ quota-object-example å‘½åç©ºé—´ä¸­ï¼Œè‡³å¤šåªèƒ½æœ‰ä¸€ä¸ª PersistentVolumeClaimï¼Œæœ€å¤šä¸¤ä¸ª LoadBalancer ç±»å‹çš„æœåŠ¡ï¼Œä¸èƒ½æœ‰ NodePort ç±»å‹çš„æœåŠ¡ã€‚
status: hard: persistentvolumeclaims: &amp;#34;1&amp;#34; services.loadbalancers: &amp;#34;2&amp;#34; services.nodeports: &amp;#34;0&amp;#34; used: persistentvolumeclaims: &amp;#34;0&amp;#34; services.</description>
    </item>
    
    <item>
      <title>é…ç½®å¤šä¸ªè°ƒåº¦å™¨</title>
      <link>https://lijun.in/tasks/administer-cluster/configure-multiple-schedulers/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/configure-multiple-schedulers/</guid>
      <description>Kubernetes è‡ªå¸¦äº†ä¸€ä¸ªé»˜è®¤è°ƒåº¦å™¨ï¼Œå…¶è¯¦ç»†æè¿°è¯·æŸ¥é˜…è¿™é‡Œã€‚
å¦‚æœé»˜è®¤è°ƒåº¦å™¨ä¸é€‚åˆæ‚¨çš„éœ€æ±‚ï¼Œæ‚¨å¯ä»¥å®ç°è‡ªå·±çš„è°ƒåº¦å™¨ã€‚
ä¸ä»…å¦‚æ­¤ï¼Œæ‚¨ç”šè‡³å¯ä»¥ä¼´éšç€é»˜è®¤è°ƒåº¦å™¨åŒæ—¶è¿è¡Œå¤šä¸ªè°ƒåº¦å™¨ï¼Œå¹¶å‘Šè¯‰ Kubernetes ä¸ºæ¯ä¸ª pod ä½¿ç”¨ä»€ä¹ˆè°ƒåº¦å™¨ã€‚ è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­è®²è¿°å¦‚ä½•åœ¨ Kubernetes ä¸­è¿è¡Œå¤šä¸ªè°ƒåº¦å™¨ã€‚
å…³äºå®ç°è°ƒåº¦å™¨çš„å…·ä½“ç»†èŠ‚æè¿°è¶…å‡ºäº†æœ¬æ–‡èŒƒå›´ã€‚ è¯·å‚è€ƒ kube-scheduler çš„å®ç°ï¼Œè§„èŒƒç¤ºä¾‹ä»£ç ä½äº [pkg/scheduler](https://github.com/kubernetes/kubernetes/tree/. param &amp;ldquo;githubbranch&amp;rdquo; &amp;gt;}}/pkg/scheduler)ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
æ‰“åŒ…è°ƒåº¦å™¨ å°†è°ƒåº¦å™¨äºŒè¿›åˆ¶æ–‡ä»¶æ‰“åŒ…åˆ°å®¹å™¨é•œåƒä¸­ã€‚å‡ºäºç¤ºä¾‹ç›®çš„ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨é»˜è®¤è°ƒåº¦å™¨ï¼ˆkube-schedulerï¼‰ä½œä¸ºæˆ‘ä»¬çš„ç¬¬äºŒä¸ªè°ƒåº¦å™¨ã€‚
ä» Github å…‹éš† Kubernetes æºä»£ç ï¼Œå¹¶ç¼–è¯‘æ„å»ºæºä»£ç ã€‚
git clone https://github.com/kubernetes/kubernetes.git cd kubernetes make åˆ›å»ºä¸€ä¸ªåŒ…å« kube-scheduler äºŒè¿›åˆ¶æ–‡ä»¶çš„å®¹å™¨é•œåƒã€‚ç”¨äºæ„å»ºé•œåƒçš„ Dockerfile å†…å®¹å¦‚ä¸‹ï¼š
FROMbusyboxADD ./_output/dockerized/bin/linux/amd64/kube-scheduler /usr/local/bin/kube-schedulerå°†æ–‡ä»¶ä¿å­˜ä¸º Dockerfileï¼Œæ„å»ºé•œåƒå¹¶å°†å…¶æ¨é€åˆ°é•œåƒä»“åº“ã€‚ æ­¤ç¤ºä¾‹å°†é•œåƒæ¨é€åˆ° Google å®¹å™¨é•œåƒä»“åº“ï¼ˆGCRï¼‰ã€‚
æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯» GCR æ–‡æ¡£ã€‚
docker build -t gcr.io/my-gcp-project/my-kube-scheduler:1.0 . gcloud docker -- push gcr.io/my-gcp-project/my-kube-scheduler:1.0 ä¸ºè°ƒåº¦å™¨å®šä¹‰ Kubernetes Deployment ç°åœ¨æˆ‘ä»¬å°†è°ƒåº¦å™¨æ”¾åœ¨å®¹å™¨é•œåƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå®ƒåˆ›å»ºä¸€ä¸ª pod é…ç½®ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„ Kubernetes é›†ç¾¤ä¸­è¿è¡Œå®ƒã€‚ ä½†æ˜¯ä¸å…¶åœ¨é›†ç¾¤ä¸­ç›´æ¥åˆ›å»ºä¸€ä¸ª podï¼Œä¸å¦‚ä½¿ç”¨ Deploymentã€‚ Deployment ç®¡ç†ä¸€ä¸ª Replica Setï¼ŒReplica Set å†ç®¡ç† podï¼Œä»è€Œä½¿è°ƒåº¦å™¨èƒ½å¤Ÿé€‚åº”æ•…éšœã€‚ ä»¥ä¸‹æ˜¯ Deployment é…ç½®ï¼Œè¢«ä¿å­˜ä¸º my-scheduler.</description>
    </item>
    
    <item>
      <title>é…ç½®å¯¹å¤šé›†ç¾¤çš„è®¿é—®</title>
      <link>https://lijun.in/tasks/access-application-cluster/configure-access-multiple-clusters/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/access-application-cluster/configure-access-multiple-clusters/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•ä½¿ç”¨é…ç½®æ–‡ä»¶æ¥é…ç½®å¯¹å¤šä¸ªé›†ç¾¤çš„è®¿é—®ã€‚ åœ¨å°†é›†ç¾¤ã€ç”¨æˆ·å’Œä¸Šä¸‹æ–‡å®šä¹‰åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªé…ç½®æ–‡ä»¶ä¸­ä¹‹åï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ kubectl config use-context å‘½ä»¤å¿«é€Ÿåœ°åœ¨é›†ç¾¤ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚
. note &amp;gt;}} ç”¨äºé…ç½®é›†ç¾¤è®¿é—®çš„æ–‡ä»¶æœ‰æ—¶è¢«ç§°ä¸º kubeconfig æ–‡ä»¶ã€‚ è¿™æ˜¯ä¸€ç§å¼•ç”¨é…ç½®æ–‡ä»¶çš„é€šç”¨æ–¹å¼ï¼Œå¹¶ä¸æ„å‘³ç€å­˜åœ¨ä¸€ä¸ªåä¸º kubeconfig çš„æ–‡ä»¶ã€‚ . /note &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} éœ€è¦å®‰è£… kubectl å‘½ä»¤è¡Œå·¥å…·ã€‚
å®šä¹‰é›†ç¾¤ã€ç”¨æˆ·å’Œä¸Šä¸‹æ–‡ å‡è®¾ç”¨æˆ·æœ‰ä¸¤ä¸ªé›†ç¾¤ï¼Œä¸€ä¸ªç”¨äºæ­£å¼å¼€å‘å·¥ä½œï¼Œä¸€ä¸ªç”¨äºå…¶å®ƒä¸´æ—¶ç”¨é€”ï¼ˆscratchï¼‰ã€‚ åœ¨ development é›†ç¾¤ä¸­ï¼Œå‰ç«¯å¼€å‘è€…åœ¨åä¸º frontend çš„åå­—ç©ºé—´ä¸‹å·¥ä½œï¼Œ å­˜å‚¨å¼€å‘è€…åœ¨åä¸º storage çš„åå­—ç©ºé—´ä¸‹å·¥ä½œã€‚ åœ¨ scratch é›†ç¾¤ä¸­ï¼Œ å¼€å‘äººå‘˜å¯èƒ½åœ¨é»˜è®¤åå­—ç©ºé—´ä¸‹å·¥ä½œï¼Œä¹Ÿå¯èƒ½è§†æƒ…å†µåˆ›å»ºé™„åŠ çš„åå­—ç©ºé—´ã€‚ è®¿é—®å¼€å‘é›†ç¾¤éœ€è¦é€šè¿‡è¯ä¹¦è¿›è¡Œè®¤è¯ã€‚ è®¿é—®å…¶å®ƒä¸´æ—¶ç”¨é€”çš„é›†ç¾¤éœ€è¦é€šè¿‡ç”¨æˆ·åå’Œå¯†ç è¿›è¡Œè®¤è¯ã€‚
åˆ›å»ºåä¸º config-exercise çš„ç›®å½•ã€‚ åœ¨ config-exercise ç›®å½•ä¸­ï¼Œåˆ›å»ºåä¸º config-demo çš„æ–‡ä»¶ï¼Œå…¶å†…å®¹ä¸ºï¼š
apiVersion: v1 kind: Config preferences: {} clusters: - cluster: name: development - cluster: name: scratch users: - name: developer - name: experimenter contexts: - context: name: dev-frontend - context: name: dev-storage - context: name: exp-scratch é…ç½®æ–‡ä»¶æè¿°äº†é›†ç¾¤ã€ç”¨æˆ·åå’Œä¸Šä¸‹æ–‡ã€‚ config-demo æ–‡ä»¶ä¸­å«æœ‰æè¿°ä¸¤ä¸ªé›†ç¾¤ã€ä¸¤ä¸ªç”¨æˆ·å’Œä¸‰ä¸ªä¸Šä¸‹æ–‡çš„æ¡†æ¶ã€‚</description>
    </item>
    
    <item>
      <title>é…ç½®èµ„æºä¸è¶³æ—¶çš„å¤„ç†æ–¹å¼</title>
      <link>https://lijun.in/tasks/administer-cluster/out-of-resource/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/out-of-resource/</guid>
      <description>æœ¬é¡µä»‹ç»äº†å¦‚ä½•ä½¿ç”¨kubeleté…ç½®èµ„æºä¸è¶³æ—¶çš„å¤„ç†æ–¹å¼ã€‚
å½“å¯ç”¨è®¡ç®—èµ„æºè¾ƒå°‘æ—¶ï¼Œkubeletéœ€è¦ä¿è¯èŠ‚ç‚¹ç¨³å®šæ€§ã€‚è¿™åœ¨å¤„ç†å¦‚å†…å­˜å’Œç¡¬ç›˜ä¹‹ç±»çš„ä¸å¯å‹ç¼©èµ„æºæ—¶å°¤ä¸ºé‡è¦ã€‚å¦‚æœä»»æ„ä¸€ç§èµ„æºè€—å°½ï¼ŒèŠ‚ç‚¹å°†ä¼šå˜å¾—ä¸ç¨³å®šã€‚
é©±é€ç­–ç•¥ kubelet èƒ½å¤Ÿä¸»åŠ¨ç›‘æµ‹å’Œé˜²æ­¢è®¡ç®—èµ„æºçš„å…¨é¢çŸ­ç¼ºã€‚åœ¨é‚£ç§æƒ…å†µä¸‹ï¼Œkubeletå¯ä»¥ä¸»åŠ¨åœ°ç»“æŸä¸€ä¸ªæˆ–å¤šä¸ª pod ä»¥å›æ”¶çŸ­ç¼ºçš„èµ„æºã€‚å½“ kubelet ç»“æŸä¸€ä¸ª pod æ—¶ï¼Œå®ƒå°†ç»ˆæ­¢ pod ä¸­çš„æ‰€æœ‰å®¹å™¨ï¼Œè€Œ pod çš„ PodPhase å°†å˜ä¸º Failedã€‚
å¦‚æœè¢«é©±é€çš„ Pod ç”± Deployment ç®¡ç†ï¼Œè¿™ä¸ª Deployment ä¼šåˆ›å»ºå¦ä¸€ä¸ª Pod ç»™ Kubernetes æ¥è°ƒåº¦ã€‚
é©±é€ä¿¡å· kubelet æ”¯æŒæŒ‰ç…§ä»¥ä¸‹è¡¨æ ¼ä¸­æè¿°çš„ä¿¡å·è§¦å‘é©±é€å†³å®šã€‚æ¯ä¸ªä¿¡å·çš„å€¼åœ¨ description åˆ—æè¿°ï¼ŒåŸºäº kubelet æ‘˜è¦ APIã€‚
   é©±é€ä¿¡å· æè¿°     memory.available memory.available := node.status.capacity[memory] - node.stats.memory.workingSet   nodefs.available nodefs.available := node.stats.fs.available   nodefs.inodesFree nodefs.inodesFree := node.stats.fs.inodesFree   imagefs.available imagefs.available := node.stats.runtime.imagefs.available   imagefs.</description>
    </item>
    
    <item>
      <title>é™åˆ¶å­˜å‚¨æ¶ˆè€—</title>
      <link>https://lijun.in/tasks/administer-cluster/limit-storage-consumption/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/limit-storage-consumption/</guid>
      <description>æ­¤ç¤ºä¾‹æ¼”ç¤ºäº†ä¸€ç§é™åˆ¶å‘½åç©ºé—´ä¸­å­˜å‚¨ä½¿ç”¨é‡çš„ç®€ä¾¿æ–¹æ³•ã€‚
æ¼”ç¤ºä¸­ç”¨åˆ°äº†ä»¥ä¸‹èµ„æºï¼šResourceQuotaï¼ŒLimitRange å’Œ PersistentVolumeClaimã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}  åœºæ™¯ï¼šé™åˆ¶å­˜å‚¨æ¶ˆè€— é›†ç¾¤ç®¡ç†å‘˜ä»£è¡¨ç”¨æˆ·ç¾¤æ“ä½œé›†ç¾¤ï¼Œç®¡ç†å‘˜å¸Œæœ›æ§åˆ¶å•ä¸ªåç§°ç©ºé—´å¯ä»¥æ¶ˆè€—å¤šå°‘å­˜å‚¨ç©ºé—´ä»¥æ§åˆ¶æˆæœ¬ã€‚
ç®¡ç†å‘˜æƒ³è¦é™åˆ¶ï¼š
 å‘½åç©ºé—´ä¸­æŒä¹…å·ç”³é¢†ï¼ˆpersistent volume claimsï¼‰çš„æ•°é‡ æ¯ä¸ªç”³é¢†ï¼ˆclaimï¼‰å¯ä»¥è¯·æ±‚çš„å­˜å‚¨é‡ å‘½åç©ºé—´å¯ä»¥å…·æœ‰çš„ç´¯è®¡å­˜å‚¨é‡  ä½¿ç”¨ LimitRange é™åˆ¶å­˜å‚¨è¯·æ±‚ å°† LimitRange æ·»åŠ åˆ°å‘½åç©ºé—´ä¼šä¸ºå­˜å‚¨è¯·æ±‚å¤§å°å¼ºåˆ¶è®¾ç½®æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚å­˜å‚¨æ˜¯é€šè¿‡ PersistentVolumeClaim æ¥å‘èµ·è¯·æ±‚çš„ã€‚æ‰§è¡Œé™åˆ¶èŒƒå›´æ§åˆ¶çš„å‡†å…¥æ§åˆ¶å™¨ä¼šæ‹’ç»ä»»ä½•é«˜äºæˆ–ä½äºç®¡ç†å‘˜æ‰€è®¾é˜ˆå€¼çš„ PVCã€‚
åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œè¯·æ±‚ 10Gi å­˜å‚¨çš„ PVC å°†è¢«æ‹’ç»ï¼Œå› ä¸ºå®ƒè¶…è¿‡äº†æœ€å¤§ 2Giã€‚
apiVersion: v1 kind: LimitRange metadata: name: storagelimits spec: limits: - type: PersistentVolumeClaim max: storage: 2Gi min: storage: 1Gi å½“åº•å±‚å­˜å‚¨æä¾›ç¨‹åºéœ€è¦æŸäº›æœ€å°å€¼æ—¶ï¼Œå°†ä¼šç”¨åˆ°æ‰€è®¾ç½®æœ€å°å­˜å‚¨è¯·æ±‚å€¼ã€‚ä¾‹å¦‚ï¼ŒAWS EBS volumes çš„æœ€ä½è¦æ±‚ä¸º 1Giã€‚
ä½¿ç”¨ StorageQuota é™åˆ¶ PVC æ•°ç›®å’Œç´¯è®¡å­˜å‚¨å®¹é‡ ç®¡ç†å‘˜å¯ä»¥é™åˆ¶æŸä¸ªå‘½åç©ºé—´ä¸­çš„ PVCs ä¸ªæ•°ä»¥åŠè¿™äº› PVCs çš„ç´¯è®¡å®¹é‡ã€‚æ–° PVCs è¯·æ±‚å¦‚æœè¶…è¿‡ä»»ä¸€ä¸Šé™å€¼å°†è¢«æ‹’ç»ã€‚</description>
    </item>
    
    <item>
      <title>é›†ç¾¤ DNS æœåŠ¡è‡ªåŠ¨ä¼¸ç¼©</title>
      <link>https://lijun.in/tasks/administer-cluster/dns-horizontal-autoscaling/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/dns-horizontal-autoscaling/</guid>
      <description>æœ¬é¡µå±•ç¤ºäº†å¦‚ä½•åœ¨é›†ç¾¤ä¸­å¯ç”¨å’Œé…ç½® DNS æœåŠ¡çš„è‡ªåŠ¨ä¼¸ç¼©åŠŸèƒ½ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}    æœ¬æŒ‡å—å‡è®¾æ‚¨çš„èŠ‚ç‚¹ä½¿ç”¨ AMD64 æˆ– Intel 64 CPU æ¶æ„
  ç¡®ä¿å·²å¯ç”¨ DNS åŠŸèƒ½æœ¬èº«ã€‚
  å»ºè®®ä½¿ç”¨ Kubernetes 1.4.0 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚
  ç¡®å®šæ˜¯å¦ DNS æ°´å¹³ æ°´å¹³è‡ªåŠ¨ä¼¸ç¼©ç‰¹æ€§å·²ç»å¯ç”¨ åœ¨ kube-system å‘½åç©ºé—´ä¸­åˆ—å‡ºé›†ç¾¤ä¸­çš„ . glossary_tooltip text=&amp;quot;Deployments&amp;rdquo; term_id=&amp;quot;deployment&amp;rdquo; &amp;gt;}} ï¼š
kubectl get deployment --namespace=kube-system è¾“å‡ºç±»ä¼¼å¦‚ä¸‹è¿™æ ·ï¼š
NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE ... dns-autoscaler 1 1 1 1 ... ...  å¦‚æœåœ¨è¾“å‡ºä¸­çœ‹åˆ° â€œdns-autoscalerâ€ï¼Œè¯´æ˜ DNS æ°´å¹³è‡ªåŠ¨ä¼¸ç¼©å·²ç»å¯ç”¨ï¼Œå¯ä»¥è·³åˆ° è°ƒä¼˜è‡ªåŠ¨ä¼¸ç¼©å‚æ•°ã€‚</description>
    </item>
    
    <item>
      <title>é›†ç¾¤å®‰å…¨</title>
      <link>https://lijun.in/tasks/administer-cluster/securing-a-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/securing-a-cluster/</guid>
      <description>æœ¬æ–‡æ¡£æ¶‰åŠä¸ä¿æŠ¤é›†ç¾¤å…å—æ„å¤–æˆ–æ¶æ„è®¿é—®æœ‰å…³çš„ä¸»é¢˜ï¼Œå¹¶å¯¹æ€»ä½“å®‰å…¨æ€§æå‡ºå»ºè®®ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}  æ§åˆ¶å¯¹ Kubernetes API çš„è®¿é—® å› ä¸º Kubernetes æ˜¯å®Œå…¨é€šè¿‡ API é©±åŠ¨çš„ï¼Œæ‰€ä»¥ï¼Œæ§åˆ¶å’Œé™åˆ¶è°å¯ä»¥é€šè¿‡ API è®¿é—®é›†ç¾¤ï¼Œä»¥åŠå…è®¸è¿™äº›è®¿é—®è€…æ‰§è¡Œä»€ä¹ˆæ ·çš„ API åŠ¨ä½œï¼Œå°±æˆä¸ºäº†å®‰å…¨æ§åˆ¶çš„ç¬¬ä¸€é“é˜²çº¿ã€‚
ä¸º API äº¤äº’æä¾›ä¼ è¾“å±‚å®‰å…¨ ï¼ˆTLSï¼‰ Kubernetes æœŸæœ›é›†ç¾¤ä¸­æ‰€æœ‰çš„ API é€šä¿¡åœ¨é»˜è®¤æƒ…å†µä¸‹éƒ½ä½¿ç”¨ TLS åŠ å¯†ï¼Œå¤§å¤šæ•°å®‰è£…æ–¹æ³•ä¹Ÿå…è®¸åˆ›å»ºæ‰€éœ€çš„è¯ä¹¦å¹¶ä¸”åˆ†å‘åˆ°é›†ç¾¤ç»„ä»¶ä¸­ã€‚è¯·æ³¨æ„ï¼ŒæŸäº›ç»„ä»¶å’Œå®‰è£…æ–¹æ³•å¯èƒ½ä½¿ç”¨ HTTP æ¥è®¿é—®æœ¬åœ°ç«¯å£ï¼Œ ç®¡ç†å‘˜åº”è¯¥ç†Ÿæ‚‰æ¯ä¸ªç»„ä»¶çš„è®¾ç½®ï¼Œä»¥è¯†åˆ«æ½œåœ¨çš„ä¸å®‰å…¨çš„æµé‡ã€‚
API è®¤è¯ å®‰è£…é›†ç¾¤æ—¶ï¼Œé€‰æ‹©ä¸€ä¸ª API æœåŠ¡å™¨çš„èº«ä»½éªŒè¯æœºåˆ¶ï¼Œå»ä½¿ç”¨ä¸ä¹‹åŒ¹é…çš„å…¬å…±è®¿é—®æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå°å‹çš„å•ç”¨æˆ·é›†ç¾¤å¯èƒ½å¸Œæœ›ä½¿ç”¨ç®€å•çš„è¯ä¹¦æˆ–é™æ€æ‰¿è½½ä»¤ç‰Œæ–¹æ³•ã€‚æ›´å¤§çš„é›†ç¾¤åˆ™å¯èƒ½å¸Œæœ›æ•´åˆç°æœ‰çš„ã€OIDCã€LDAP ç­‰å…è®¸ç”¨æˆ·åˆ†ç»„çš„æœåŠ¡å™¨ã€‚
æ‰€æœ‰ API å®¢æˆ·ç«¯éƒ½å¿…é¡»ç»è¿‡èº«ä»½éªŒè¯ï¼Œå³ä½¿å®ƒæ˜¯åŸºç¡€è®¾æ–½çš„ä¸€éƒ¨åˆ†ï¼Œæ¯”å¦‚èŠ‚ç‚¹ã€ä»£ç†ã€è°ƒåº¦ç¨‹åºå’Œå·æ’ä»¶ã€‚è¿™äº›å®¢æˆ·ç«¯é€šå¸¸ä½¿ç”¨ æœåŠ¡å¸æˆ· æˆ– X509 å®¢æˆ·ç«¯è¯ä¹¦ï¼Œå¹¶åœ¨é›†ç¾¤å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºæˆ–æ˜¯ä½œä¸ºé›†ç¾¤å®‰è£…çš„ä¸€éƒ¨åˆ†è¿›è¡Œè®¾ç½®ã€‚
å¦‚æœæ‚¨å¸Œæœ›è·å–æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ è®¤è¯å‚è€ƒæ–‡æ¡£ã€‚
API æˆæƒ ä¸€æ—¦ä½¿ç”¨æˆæƒï¼Œæ¯ä¸ª API çš„è°ƒç”¨éƒ½å°†é€šè¿‡æˆæƒæ£€æŸ¥ã€‚Kubernetes é›†æˆ åŸºäºè®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰ çš„ç»„ä»¶ï¼Œå°†ä¼ å…¥çš„ç”¨æˆ·æˆ–ç»„ä¸ä¸€ç»„ç»‘å®šåˆ°è§’è‰²çš„æƒé™åŒ¹é…ã€‚è¿™äº›æƒé™å°†åŠ¨ä½œï¼ˆgetï¼Œcreateï¼Œdeleteï¼‰å’Œèµ„æºï¼ˆpodï¼Œservice, nodeï¼‰åœ¨å‘½åç©ºé—´æˆ–è€…é›†ç¾¤èŒƒå›´å†…ç»“åˆèµ·æ¥ï¼Œæ ¹æ®å®¢æˆ·å¯èƒ½å¸Œæœ›æ‰§è¡Œçš„æ“ä½œï¼Œæä¾›äº†ä¸€ç»„æä¾›åˆç†çš„è¿çº¦è´£ä»»åˆ†ç¦»çš„å¤–åŒ…è§’è‰²ã€‚å»ºè®®æ‚¨å°†èŠ‚ç‚¹ å’Œ RBAC ä¸€èµ·ä½œä¸ºæˆæƒè€…ï¼Œå†ä¸ NodeRestriction å‡†å…¥æ’ä»¶ç»“åˆä½¿ç”¨ã€‚
ä¸èº«ä»½éªŒè¯ä¸€æ ·ï¼Œç®€å•è€Œå¹¿æ³›çš„è§’è‰²å¯èƒ½é€‚åˆäºè¾ƒå°çš„é›†ç¾¤ï¼Œä½†æ˜¯éšç€æ›´å¤šçš„ç”¨æˆ·ä¸é›†ç¾¤äº¤äº’ï¼Œå¯èƒ½éœ€è¦å°†å›¢é˜Ÿåˆ’åˆ†æˆæœ‰æ›´å¤šè§’è‰²é™åˆ¶çš„å•ç‹¬çš„å‘½åç©ºé—´ã€‚</description>
    </item>
    
    <item>
      <title>é›†ç¾¤æ•…éšœæ’æŸ¥</title>
      <link>https://lijun.in/tasks/debug-application-cluster/debug-cluster/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/debug-application-cluster/debug-cluster/</guid>
      <description>æœ¬ç¯‡æ–‡æ¡£æ˜¯ä»‹ç»é›†ç¾¤æ•…éšœæ’æŸ¥çš„ï¼›æˆ‘ä»¬å‡è®¾å¯¹äºä½ ç¢°åˆ°çš„é—®é¢˜ï¼Œä½ å·²ç»æ’é™¤äº†æ˜¯ç”±åº”ç”¨ç¨‹åºé€ æˆçš„ã€‚ å¯¹äºåº”ç”¨çš„è°ƒè¯•ï¼Œè¯·å‚é˜…åº”ç”¨æ•…éšœæ’æŸ¥æŒ‡å—ã€‚ ä½ ä¹Ÿå¯ä»¥è®¿é—®troubleshooting documentæ¥è·å–æ›´å¤šçš„ä¿¡æ¯ã€‚
æ˜¾ç¤ºå‡ºé›†ç¾¤çš„èŠ‚ç‚¹åˆ—è¡¨ è°ƒè¯•çš„ç¬¬ä¸€æ­¥æ˜¯æŸ¥çœ‹æ‰€æœ‰çš„èŠ‚ç‚¹æ˜¯å¦éƒ½æ­£ç¡®çš„æ³¨å†Œã€‚
è¿è¡Œ
kubectl get nodes æ¥ä¸‹æ¥ï¼ŒéªŒè¯ä½ çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½èƒ½å¤Ÿæ˜¾ç¤ºå‡ºæ¥ï¼Œå¹¶ä¸”éƒ½å¤„äºReadyçŠ¶æ€ã€‚
æŸ¥çœ‹logs ç°åœ¨ï¼ŒæŒ–æ˜å‡ºé›†ç¾¤æ›´æ·±å±‚çš„ä¿¡æ¯å°±éœ€è¦ç™»å½•åˆ°ç›¸å…³çš„æœºå™¨ä¸Šã€‚ä¸‹é¢æ˜¯ç›¸å…³logæ–‡ä»¶æ‰€åœ¨çš„ä½ç½®ã€‚ (æ³¨æ„ï¼Œå¯¹äºåŸºäºsystemdçš„ç³»ç»Ÿï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨journalctl)
Master  /var/log/kube-apiserver.log - API Server, æä¾›APIæœåŠ¡ /var/log/kube-scheduler.log - Scheduler, è´Ÿè´£è°ƒåº¦å†³ç­– /var/log/kube-controller-manager.log - ç®¡ç†replication controllersçš„æ§åˆ¶å™¨  Worker Nodes  /var/log/kubelet.log - Kubelet, ç®¡æ§èŠ‚ç‚¹ä¸Šè¿è¡Œçš„å®¹å™¨ /var/log/kube-proxy.log - Kube Proxy, è´Ÿè´£æœåŠ¡çš„è´Ÿè½½å‡è¡¡  é›†ç¾¤æ•…éšœæ¨¡å¼çš„æ¦‚è¿° ä¸‹é¢æ˜¯ä¸€ä¸ªä¸å®Œæ•´çš„åˆ—è¡¨ï¼Œåˆ—ä¸¾äº†ä¸€äº›å¯èƒ½å‡ºé”™çš„åœºæ™¯ï¼Œä»¥åŠé€šè¿‡è°ƒæ•´é›†ç¾¤é…ç½®æ¥è§£å†³ç›¸å…³é—®é¢˜çš„æ–¹æ³•ã€‚
æ ¹æœ¬åŸå› ï¼š
 VM(s)å…³æœº é›†ç¾¤ä¹‹é—´ï¼Œæˆ–è€…é›†ç¾¤å’Œç”¨æˆ·ä¹‹é—´ç½‘ç»œåˆ†è£‚ Kubernetesè½¯ä»¶æœ¬èº«å´©æºƒäº† æ•°æ®ä¸¢å¤±æˆ–è€…æŒä¹…åŒ–å­˜å‚¨ä¸å¯ç”¨(å¦‚:GCE PD æˆ– AWS EBSå·) æ“ä½œé”™è¯¯ï¼Œå¦‚ï¼šKubernetesæˆ–è€…åº”ç”¨ç¨‹åºé…ç½®é”™è¯¯  å…·ä½“æƒ…å†µ:
  Apiserveræ‰€åœ¨çš„VMå…³æœºæˆ–è€…apiserverå´©æºƒ
 ç»“æœ  ä¸èƒ½åœæ­¢ï¼Œæ›´æ–°ï¼Œæˆ–è€…å¯åŠ¨æ–°çš„podsï¼Œservicesï¼Œreplication controller ç°æœ‰çš„podså’Œservicesåœ¨ä¸ä¾èµ–Kubernetes APIçš„æƒ…å†µä¸‹åº”è¯¥èƒ½ç»§ç»­æ­£å¸¸å·¥ä½œ      Apiserver åç«¯å­˜å‚¨ä¸¢å¤±</description>
    </item>
    
    <item>
      <title>é›†ç¾¤ç®¡ç†</title>
      <link>https://lijun.in/tasks/administer-cluster/cluster-management/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/cluster-management/</guid>
      <description>. toc &amp;gt;}}
æœ¬æ–‡æè¿°äº†å’Œé›†ç¾¤ç”Ÿå‘½å‘¨æœŸç›¸å…³çš„å‡ ä¸ªä¸»é¢˜ï¼šåˆ›å»ºæ–°é›†ç¾¤ã€æ›´æ–°é›†ç¾¤çš„ master å’Œ worker èŠ‚ç‚¹ã€æ‰§è¡ŒèŠ‚ç‚¹ç»´æŠ¤ï¼ˆä¾‹å¦‚å‡çº§å†…æ ¸ï¼‰ä»¥åŠå‡çº§è¿è¡Œä¸­é›†ç¾¤çš„ Kubernetes API ç‰ˆæœ¬ã€‚
åˆ›å»ºå’Œé…ç½®é›†ç¾¤ è¦åœ¨ä¸€ç»„æœºå™¨ä¸Šå®‰è£… Kubernetesï¼Œ è¯·æ ¹æ®æ‚¨çš„ç¯å¢ƒï¼ŒæŸ¥é˜…ç°æœ‰çš„ å…¥é—¨æŒ‡å—
å‡çº§é›†ç¾¤ é›†ç¾¤å‡çº§å½“å‰æ˜¯é…å¥—æä¾›çš„ï¼ŒæŸäº›å‘å¸ƒç‰ˆæœ¬åœ¨å‡çº§æ—¶å¯èƒ½éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚æ¨èç®¡ç†å‘˜åœ¨å‡çº§ä»–ä»¬çš„é›†ç¾¤å‰ï¼ŒåŒæ—¶æŸ¥é˜… å‘è¡Œè¯´æ˜ å’Œç‰ˆæœ¬å…·ä½“å‡çº§è¯´æ˜ã€‚
 å‡çº§åˆ° 1.6  å‡çº§ Google Compute Engine é›†ç¾¤ Google Compute Engine Open Source (GCE-OSS) é€šè¿‡åˆ é™¤å’Œé‡å»º master æ¥æ”¯æŒ master å‡çº§ã€‚é€šè¿‡ç»´æŒç›¸åŒçš„ Persistent Disk (PD) ä»¥ä¿è¯åœ¨å‡çº§è¿‡ç¨‹ä¸­ä¿ç•™æ•°æ®ã€‚
GCE çš„ Node å‡çº§é‡‡ç”¨ ç®¡ç†å®ä¾‹ç»„ï¼Œæ¯ä¸ªèŠ‚ç‚¹å°†è¢«é¡ºåºçš„åˆ é™¤ï¼Œç„¶åä½¿ç”¨æ–°è½¯ä»¶é‡å»ºã€‚ä»»ä½•è¿è¡Œåœ¨é‚£ä¸ªèŠ‚ç‚¹ä¸Šçš„ Pod éœ€è¦ç”¨ Replication Controller æ§åˆ¶ï¼Œæˆ–è€…åœ¨æ‰©å®¹ä¹‹åæ‰‹åŠ¨é‡å»ºã€‚
å¼€æº Google Compute Engine (GCE) é›†ç¾¤ä¸Šçš„å‡çº§è¿‡ç¨‹ç”± cluster/gce/upgrade.sh è„šæœ¬æ§åˆ¶ã€‚
è¿è¡Œ cluster/gce/upgrade.sh -h è·å–ä½¿ç”¨è¯´æ˜ã€‚
ä¾‹å¦‚ï¼Œåªå°† master å‡çº§åˆ°ä¸€ä¸ªæŒ‡å®šçš„ç‰ˆæœ¬ (v1.0.2):</description>
    </item>
    
    <item>
      <title>é™æ€åŠ å¯† Secret æ•°æ®</title>
      <link>https://lijun.in/tasks/administer-cluster/encrypt-data/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/administer-cluster/encrypt-data/</guid>
      <description>æœ¬æ–‡å±•ç¤ºå¦‚ä½•å¯ç”¨å’Œé…ç½®é™æ€ Secret æ•°æ®çš„åŠ å¯†
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}    éœ€è¦ Kubernetes 1.7.0 æˆ–è€…æ›´é«˜ç‰ˆæœ¬
  éœ€è¦ etcd v3 æˆ–è€…æ›´é«˜ç‰ˆæœ¬
  é™æ€æ•°æ®åŠ å¯†åœ¨ 1.7.0 ä¸­ä»ç„¶æ˜¯ alpha ç‰ˆæœ¬ï¼Œè¿™æ„å‘³ç€å®ƒå¯èƒ½ä¼šåœ¨æ²¡æœ‰é€šçŸ¥çš„æƒ…å†µä¸‹è¿›è¡Œæ›´æ”¹ã€‚åœ¨å‡çº§åˆ° 1.8.0 ä¹‹å‰ï¼Œç”¨æˆ·å¯èƒ½éœ€è¦è§£å¯†ä»–ä»¬çš„æ•°æ®ã€‚
  . toc &amp;gt;}}
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} . include &amp;ldquo;task-tutorial-prereqs.md&amp;rdquo; &amp;gt;}} . version-check &amp;gt;}}
é…ç½®å¹¶ç¡®å®šæ˜¯å¦å·²å¯ç”¨é™æ€æ•°æ®åŠ å¯† kube-apiserver çš„å‚æ•° --experimental-encryption-provider-config æ§åˆ¶ API æ•°æ®åœ¨ etcd ä¸­çš„åŠ å¯†æ–¹å¼ã€‚ ä¸‹é¢æä¾›ä¸€ä¸ªé…ç½®ç¤ºä¾‹ã€‚
ç†è§£é™æ€æ•°æ®åŠ å¯† kind: EncryptionConfiguration apiVersion: apiserver.config.k8s.io/v1 resources: - resources: - secrets providers: - identity: {} - aesgcm: keys: - name: key1 secret: c2VjcmV0IGlzIHNlY3VyZQ== - name: key2 secret: dGhpcyBpcyBwYXNzd29yZA== - aescbc: keys: - name: key1 secret: c2VjcmV0IGlzIHNlY3VyZQ== - name: key2 secret: dGhpcyBpcyBwYXNzd29yZA== - secretbox: keys: - name: key1 secret: YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoxMjM0NTY= æ¯ä¸ª resources æ•°ç»„é¡¹ç›®æ˜¯ä¸€ä¸ªå•ç‹¬çš„å®Œæ•´çš„é…ç½®ã€‚ resources.</description>
    </item>
    
    <item>
      <title>éªŒè¯ IPv4/IPv6 åŒåè®®æ ˆ</title>
      <link>https://lijun.in/tasks/network/validate-dual-stack/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/network/validate-dual-stack/</guid>
      <description>è¿™ç¯‡æ–‡ç« åˆ†äº«äº†å¦‚ä½•éªŒè¯ IPv4/IPv6 åŒåè®®æ ˆçš„ Kubernetes é›†ç¾¤ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  Kubernetes 1.16 æˆ–æ›´é«˜ç‰ˆæœ¬ æä¾›ç¨‹åºå¯¹åŒåè®®æ ˆç½‘ç»œçš„æ”¯æŒ (äº‘ä¾›åº”å•†æˆ–å…¶ä»–æ–¹å¼å¿…é¡»èƒ½å¤Ÿä¸º Kubernetes èŠ‚ç‚¹æä¾›å¯è·¯ç”±çš„ IPv4/IPv6 ç½‘ç»œæ¥å£) Kubenet ç½‘ç»œæ’ä»¶ Kube-proxy åœ¨ IPVS æ¨¡å¼ä¸‹è¿è¡Œ å¯ç”¨åŒåè®®æ ˆ é›†ç¾¤  éªŒè¯å¯»å€ éªŒè¯èŠ‚ç‚¹å¯»å€ æ¯ä¸ªåŒåè®®æ ˆèŠ‚ç‚¹åº”åˆ†é…ä¸€ä¸ª IPv4 å—å’Œä¸€ä¸ª IPv6 å—ã€‚ é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥éªŒè¯æ˜¯å¦é…ç½®äº† IPv4/IPv6 Pod åœ°å€èŒƒå›´ã€‚ å°†ç¤ºä¾‹èŠ‚ç‚¹åç§°æ›¿æ¢ä¸ºé›†ç¾¤ä¸­çš„æœ‰æ•ˆåŒåè®®æ ˆèŠ‚ç‚¹ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒèŠ‚ç‚¹çš„åç§°ä¸º k8s-linuxpool1-34450317-0ï¼š
kubectl get nodes k8s-linuxpool1-34450317-0 -o go-template --template=&amp;#39;{{range .spec.podCIDRs}}{{printf &amp;#34;%s\n&amp;#34; .}}{{end}}&amp;#39; 10.244.1.0/24 a00:100::/24 åº”è¯¥åˆ†é…ä¸€ä¸ª IPv4 å—å’Œä¸€ä¸ª IPv6 å—ã€‚
éªŒè¯èŠ‚ç‚¹æ˜¯å¦æ£€æµ‹åˆ° IPv4 å’Œ IPv6 æ¥å£ï¼ˆç”¨é›†ç¾¤ä¸­çš„æœ‰æ•ˆèŠ‚ç‚¹æ›¿æ¢èŠ‚ç‚¹åç§°ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒèŠ‚ç‚¹åç§°ä¸º k8s-linuxpool1-34450317-0ï¼‰ï¼š
kubectl get nodes k8s-linuxpool1-34450317-0 -o go-template --template=&amp;#39;{{range .</description>
    </item>
    
    <item>
      <title>ğŸ˜ - ç”¨æ’ä»¶æ‰©å±• kubectl</title>
      <link>https://lijun.in/tasks/extend-kubectl/kubectl-plugins/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/extend-kubectl/kubectl-plugins/</guid>
      <description>. feature-state state=&amp;quot;stable&amp;rdquo; &amp;gt;}}
æœ¬æŒ‡å—æ¼”ç¤ºäº†å¦‚ä½•ä¸º kubectl å®‰è£…å’Œç¼–å†™æ‰©å±•ã€‚ é€šè¿‡å°†æ ¸å¿ƒ kubectl å‘½ä»¤çœ‹ä½œä¸ Kubernetes é›†ç¾¤äº¤äº’çš„åŸºæœ¬æ„å»ºå—ï¼Œé›†ç¾¤ç®¡ç†å‘˜å¯ä»¥å°†æ’ä»¶è§†ä¸ºä¸€ç§åˆ©ç”¨è¿™äº›æ„å»ºå—åˆ›å»ºæ›´å¤æ‚è¡Œä¸ºçš„æ–¹æ³•ã€‚ æ’ä»¶ç”¨æ–°çš„å­å‘½ä»¤æ‰©å±•äº† kubectlï¼Œå…è®¸æ–°çš„å’Œè‡ªå®šä¹‰çš„ç‰¹æ€§ä¸åŒ…æ‹¬åœ¨ kubectl çš„ä¸»è¦å‘è¡Œç‰ˆä¸­ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}} æ‚¨éœ€è¦å®‰è£…ä¸€ä¸ªå·¥ä½œçš„äºŒè¿›åˆ¶ kubectlã€‚
. note &amp;gt;}}
æ’ä»¶åœ¨ v1.8.0 ç‰ˆæœ¬ä¸­æ­£å¼ä½œä¸º alpha ç‰¹æ€§å¼•å…¥ã€‚å®ƒä»¬å·²ç»åœ¨ v1.12.0 ç‰ˆæœ¬ä¸­å·¥ä½œï¼Œä»¥æ”¯æŒæ›´å¹¿æ³›çš„ç”¨ä¾‹ã€‚å› æ­¤ï¼Œè™½ç„¶åœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­å·²ç»æä¾›äº†éƒ¨åˆ†æ’ä»¶ç‰¹æ€§ï¼Œä½†å¦‚æœæ‚¨éµå¾ªè¿™äº›æ–‡æ¡£ï¼Œå»ºè®®ä½¿ç”¨ 1.12.0 æˆ–æ›´é«˜ç‰ˆæœ¬çš„ kubectlã€‚
. /note &amp;gt;}}
å®‰è£… kubectl æ’ä»¶ æ’ä»¶åªä¸è¿‡æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåç§°ä»¥ kubectl- å¼€å¤´ã€‚è¦å®‰è£…æ’ä»¶ï¼Œåªéœ€å°†æ­¤å¯æ‰§è¡Œæ–‡ä»¶ç§»åŠ¨åˆ°è·¯å¾„ä¸Šçš„ä»»ä½•ä½ç½®ã€‚
. note &amp;gt;}}
Kubernetes ä¸æä¾›åŒ…ç®¡ç†å™¨æˆ–ä»»ä½•ç±»ä¼¼äºå®‰è£…æˆ–æ›´æ–°æ’ä»¶çš„ä¸œè¥¿ã€‚ä½ æœ‰è´£ä»»ç¡®ä¿æ’ä»¶å¯æ‰§è¡Œæ–‡ä»¶çš„æ–‡ä»¶åä»¥ kubectl- å¼€å¤´ï¼Œå¹¶å°†å®ƒä»¬æ”¾åœ¨ä½ è·¯å¾„çš„æŸä¸ªä½ç½®ã€‚ . /note &amp;gt;}}
å‘ç°æ’ä»¶ kubectl æä¾›ä¸€ä¸ªå‘½ä»¤ kubectl plugin listï¼Œç”¨äºæœç´¢è·¯å¾„æŸ¥æ‰¾æœ‰æ•ˆçš„æ’ä»¶å¯æ‰§è¡Œæ–‡ä»¶ã€‚ æ‰§è¡Œæ­¤å‘½ä»¤å°†éå†è·¯å¾„ä¸­çš„æ‰€æœ‰æ–‡ä»¶ã€‚ä»»ä½•ä»¥ kubectl- å¼€å¤´çš„å¯æ‰§è¡Œæ–‡ä»¶éƒ½å°†åœ¨è¿™ä¸ªå‘½ä»¤çš„è¾“å‡ºä¸­ä»¥å®ƒä»¬åœ¨è·¯å¾„ä¸­å‡ºç°çš„é¡ºåºæ˜¾ç¤ºã€‚ ä»»ä½•ä»¥ kubectl- å¼€å¤´çš„æ–‡ä»¶å¦‚æœä¸å¯æ‰§è¡Œï¼Œéƒ½å°†åŒ…å«ä¸€ä¸ªè­¦å‘Šã€‚ å¯¹äºä»»ä½•ç›¸åŒçš„æœ‰æ•ˆæ’ä»¶æ–‡ä»¶ï¼Œéƒ½å°†åŒ…å«ä¸€ä¸ªè­¦å‘Šã€‚
é™åˆ¶ ç›®å‰æ— æ³•åˆ›å»ºè¦†ç›–ç°æœ‰ kubectl å‘½ä»¤çš„æ’ä»¶ï¼Œä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªæ’ä»¶ kubectl-version å°†å¯¼è‡´è¯¥æ’ä»¶æ°¸è¿œä¸ä¼šè¢«æ‰§è¡Œï¼Œå› ä¸ºç°æœ‰çš„ kubectl-version å‘½ä»¤æ€»æ˜¯ä¼˜å…ˆäºå®ƒæ‰§è¡Œã€‚ ç”±äºè¿™ä¸ªé™åˆ¶ï¼Œä¹Ÿä¸å¯èƒ½ä½¿ç”¨æ’ä»¶å°†æ–°çš„å­å‘½ä»¤æ·»åŠ åˆ°ç°æœ‰çš„ kubectl å‘½ä»¤ä¸­ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡å°†æ’ä»¶å‘½åä¸º kubectl-create-foo æ¥æ·»åŠ å­å‘½ä»¤ kubectl create foo å°†å¯¼è‡´è¯¥æ’ä»¶è¢«å¿½ç•¥ã€‚å¯¹äºä»»ä½•è¯•å›¾è¿™æ ·åšçš„æœ‰æ•ˆæ’ä»¶ kubectl plugin list çš„è¾“å‡ºä¸­å°†æ˜¾ç¤ºè­¦å‘Šã€‚</description>
    </item>
    
    <item>
      <title>ğŸ˜ - ç®¡ç†å·¨é¡µï¼ˆHugePagesï¼‰</title>
      <link>https://lijun.in/tasks/manage-hugepages/scheduling-hugepages/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/manage-hugepages/scheduling-hugepages/</guid>
      <description>. feature-state state=&amp;quot;stable&amp;rdquo; &amp;gt;}}
ä½œä¸º GA ç‰¹æ€§ï¼ŒKubernetes æ”¯æŒåœ¨ Pod åº”ç”¨ä¸­ä½¿ç”¨é¢„å…ˆåˆ†é…çš„å·¨é¡µã€‚æœ¬æ–‡æè¿°äº†ç”¨æˆ·å¦‚ä½•ä½¿ç”¨å·¨é¡µï¼Œä»¥åŠå½“å‰çš„é™åˆ¶ã€‚
. heading &amp;ldquo;prerequisites&amp;rdquo; %}}  ä¸ºäº†ä½¿èŠ‚ç‚¹èƒ½å¤Ÿä¸ŠæŠ¥å·¨é¡µå®¹é‡ï¼ŒKubernetes èŠ‚ç‚¹å¿…é¡»é¢„å…ˆåˆ†é…å·¨é¡µã€‚æ¯ä¸ªèŠ‚ç‚¹åªèƒ½é¢„å…ˆåˆ†é…ä¸€ç§ç‰¹å®šè§„æ ¼çš„å·¨é¡µã€‚  èŠ‚ç‚¹ä¼šè‡ªåŠ¨å‘ç°å…¨éƒ¨å·¨é¡µèµ„æºï¼Œå¹¶ä½œä¸ºå¯ä¾›è°ƒåº¦çš„èµ„æºè¿›è¡Œä¸ŠæŠ¥ã€‚
API ç”¨æˆ·å¯ä»¥é€šè¿‡åœ¨å®¹å™¨çº§åˆ«çš„èµ„æºéœ€æ±‚ä¸­ä½¿ç”¨èµ„æºåç§° hugepages-&amp;lt;size&amp;gt; æ¥ä½¿ç”¨å·¨é¡µï¼Œå…¶ä¸­çš„ size æ˜¯ç‰¹å®šèŠ‚ç‚¹ä¸Šæ”¯æŒçš„ä»¥æ•´æ•°å€¼è¡¨ç¤ºçš„æœ€å°äºŒè¿›åˆ¶å•ä½ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœèŠ‚ç‚¹æ”¯æŒ 2048KiB çš„é¡µé¢è§„æ ¼ï¼Œ å®ƒå°†æš´éœ²å¯ä¾›è°ƒåº¦çš„èµ„æº hugepages-2Miã€‚ ä¸ CPU æˆ–å†…å­˜ä¸åŒï¼Œå·¨é¡µä¸æ”¯æŒè¿‡é‡ä½¿ç”¨ï¼ˆovercommitï¼‰ã€‚ æ³¨æ„ï¼Œåœ¨è¯·æ±‚å·¨é¡µèµ„æºæ—¶ï¼Œè¿˜å¿…é¡»è¯·æ±‚å†…å­˜æˆ– CPU èµ„æºã€‚
apiVersion: v1 kind: Pod metadata: generateName: hugepages-volume- spec: containers: - image: fedora:latest command: - sleep - inf name: example volumeMounts: - mountPath: /hugepages name: hugepage resources: limits: hugepages-2Mi: 100Mi memory: 100Mi requests: memory: 100Mi volumes: - name: hugepage emptyDir: medium: HugePages  å·¨é¡µçš„èµ„æºè¯·æ±‚å€¼å¿…é¡»ç­‰äºå…¶é™åˆ¶å€¼ã€‚è¯¥æ¡ä»¶åœ¨æŒ‡å®šäº†èµ„æºé™åˆ¶ï¼Œè€Œæ²¡æœ‰æŒ‡å®šè¯·æ±‚çš„æƒ…å†µä¸‹é»˜è®¤æˆç«‹ã€‚ å·¨é¡µæ˜¯è¢«éš”ç¦»åœ¨ pod ä½œç”¨åŸŸçš„ï¼Œè®¡åˆ’åœ¨å°†æ¥çš„è¿­ä»£ä¸­å®ç°å®¹å™¨çº§åˆ«çš„éš”ç¦»ã€‚ å·¨é¡µå¯ç”¨äº EmptyDir å·ï¼Œä¸è¿‡ EmptyDir å·æ‰€ä½¿ç”¨çš„å·¨é¡µæ•°é‡ä¸èƒ½å¤Ÿè¶…å‡º Pod è¯·æ±‚çš„å·¨é¡µæ•°é‡ã€‚ é€šè¿‡å¸¦æœ‰ SHM_HUGETLB çš„ shmget() ä½¿ç”¨å·¨é¡µçš„åº”ç”¨ï¼Œå¿…é¡»è¿è¡Œåœ¨ä¸€ä¸ªä¸ proc/sys/vm/hugetlb_shm_group åŒ¹é…çš„è¡¥å……ç»„ä¸‹ã€‚ é€šè¿‡ ResourceQuota èµ„æºï¼Œå¯ä»¥ä½¿ç”¨ hugepages-&amp;lt;size&amp;gt; æ ‡è®°æ§åˆ¶æ¯ä¸ªå‘½åç©ºé—´ä¸‹çš„å·¨é¡µä½¿ç”¨é‡ï¼Œ ç±»ä¼¼äºä½¿ç”¨ cpu æˆ– memory æ¥æ§åˆ¶å…¶ä»–è®¡ç®—èµ„æºã€‚  å¾…å®ç°çš„ç‰¹æ€§  åœ¨ pod çº§åˆ«éš”ç¦»çš„åŸºç¡€ä¸Šï¼Œæ”¯æŒå·¨é¡µåœ¨å®¹å™¨çº§åˆ«çš„éš”ç¦»ã€‚ ä½œä¸ºæœåŠ¡è´¨é‡ç‰¹æ€§ï¼Œä¿è¯å·¨é¡µçš„ NUMA å±€éƒ¨æ€§ã€‚ æ”¯æŒ LimitRange ã€‚  </description>
    </item>
    
    <item>
      <title>ğŸ˜ - è°ƒåº¦ GPUs</title>
      <link>https://lijun.in/tasks/manage-gpus/scheduling-gpus/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://lijun.in/tasks/manage-gpus/scheduling-gpus/</guid>
      <description>Kubernetes æ”¯æŒå¯¹èŠ‚ç‚¹ä¸Šçš„ AMD å’Œ NVIDA GPU è¿›è¡Œç®¡ç†ï¼Œç›®å‰å¤„äºå®éªŒçŠ¶æ€ã€‚å¯¹ NVIDIA GPU çš„æ”¯æŒåœ¨ v1.6 ä¸­åŠ å…¥ï¼Œå·²ç»ç»å†äº†å¤šæ¬¡ä¸å‘åå…¼å®¹çš„è¿­ä»£ã€‚è€Œå¯¹ AMD GPU çš„æ”¯æŒåˆ™åœ¨ v1.9 ä¸­é€šè¿‡ è®¾å¤‡æ’ä»¶ åŠ å…¥ã€‚
è¿™ä¸ªé¡µé¢ä»‹ç»äº†ç”¨æˆ·å¦‚ä½•åœ¨ä¸åŒçš„ Kubernetes ç‰ˆæœ¬ä¸­ä½¿ç”¨ GPUï¼Œä»¥åŠå½“å‰å­˜åœ¨çš„ä¸€äº›é™åˆ¶ã€‚
ä» v1.8 èµ· ä» 1.8 ç‰ˆæœ¬å¼€å§‹ï¼Œæˆ‘ä»¬æ¨èé€šè¿‡ è®¾å¤‡æ’ä»¶ çš„æ–¹å¼æ¥ä½¿ç”¨ GPUã€‚
åœ¨ 1.10 ç‰ˆæœ¬ä¹‹å‰ï¼Œä¸ºäº†é€šè¿‡è®¾å¤‡æ’ä»¶å¼€å¯ GPU çš„æ”¯æŒï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç³»ç»Ÿä¸­å°† DevicePlugins è¿™ä¸€ç‰¹æ€§å¼€å…³æ˜¾å¼åœ°è®¾ç½®ä¸º trueï¼š--feature-gates=&amp;quot;DevicePlugins=true&amp;quot;ã€‚ä¸è¿‡ï¼Œ ä» 1.10 ç‰ˆæœ¬å¼€å§‹ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦è¿™ä¸€æ­¥éª¤äº†ã€‚
æ¥ç€ä½ éœ€è¦åœ¨ä¸»æœºèŠ‚ç‚¹ä¸Šå®‰è£…å¯¹åº”å‚å•†çš„ GPU é©±åŠ¨å¹¶è¿è¡Œå¯¹åº”å‚å•†çš„è®¾å¤‡æ’ä»¶ (AMDã€NVIDIA)ã€‚
å½“ä¸Šé¢çš„æ¡ä»¶éƒ½æ»¡è¶³ï¼ŒKubernetes å°†ä¼šæš´éœ² nvidia.com/gpu æˆ– amd.com/gpu æ¥ä½œä¸º ä¸€ç§å¯è°ƒåº¦çš„èµ„æºã€‚
ä½ ä¹Ÿèƒ½é€šè¿‡åƒè¯·æ±‚ cpu æˆ– memory ä¸€æ ·è¯·æ±‚ &amp;lt;vendor&amp;gt;.com/gpu æ¥åœ¨å®¹å™¨ä¸­ä½¿ç”¨ GPUã€‚ç„¶è€Œï¼Œå½“ä½ è¦é€šè¿‡æŒ‡å®šèµ„æºè¯·æ±‚æ¥ä½¿ç”¨ GPU æ—¶ï¼Œå­˜åœ¨ç€ä»¥ä¸‹å‡ ç‚¹é™åˆ¶ï¼š
 GPU ä»…ä»…æ”¯æŒåœ¨ limits éƒ¨åˆ†è¢«æŒ‡å®šï¼Œè¿™è¡¨æ˜ï¼š  ä½ å¯ä»¥ä»…ä»…æŒ‡å®š GPU çš„ limits å­—æ®µè€Œä¸å¿…é¡»æŒ‡å®š requests å­—æ®µï¼Œå› ä¸º Kubernetes ä¼šé»˜è®¤ä½¿ç”¨ limit å­—æ®µçš„å€¼æ¥ä½œä¸º request å­—æ®µçš„é»˜è®¤å€¼ã€‚ ä½ èƒ½åŒæ—¶æŒ‡å®š GPU çš„ limits å’Œ requests å­—æ®µï¼Œä½†è¿™ä¸¤ä¸ªå€¼å¿…é¡»ç›¸ç­‰ã€‚ ä½ ä¸èƒ½ä»…ä»…æŒ‡å®š GPU çš„ request å­—æ®µè€Œä¸æŒ‡å®š limitsã€‚   å®¹å™¨ï¼ˆä»¥åŠ podï¼‰å¹¶ä¸ä¼šå…±äº« GPUï¼Œä¹Ÿä¸å­˜åœ¨å¯¹ GPU çš„è¿‡é‡ä½¿ç”¨ã€‚ æ¯ä¸€ä¸ªå®¹å™¨èƒ½å¤Ÿè¯·æ±‚ä¸€ä¸ªæˆ–å¤šä¸ª GPUã€‚ç„¶è€Œåªè¯·æ±‚ä¸€ä¸ª GPU çš„ä¸€éƒ¨åˆ†æ˜¯ä¸å…è®¸çš„ã€‚  ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­:</description>
    </item>
    
  </channel>
</rss>